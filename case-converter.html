<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Converter - Text Utilities</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="material-icons">text_snippet</span>
                <a href="index.html" style="color: inherit; text-decoration: none;">
                    <span>Text Utilities</span>
                </a>
            </div>
            <div class="controls">
                <div class="accent-selector">
                    <span class="material-icons">palette</span>
                    <select id="accentColor" class="color-dropdown">
                        <option value="#0d9488">Teal</option>
                        <option value="#3b82f6">Blue</option>
                        <option value="#8b5cf6">Purple</option>
                        <option value="#10b981">Emerald</option>
                        <option value="#f59e0b">Amber</option>
                        <option value="#ef4444">Red</option>
                        <option value="#ec4899">Soft Pink</option>
                        <option value="#fb7185">Coral</option>
                        <option value="#60a5fa">Cornflower</option>
                        <option value="#7c3aed">Violet</option>
                    </select>
                </div>
                <button id="themeToggle" class="btn btn-secondary">
                    <span class="material-icons">dark_mode</span>
                </button>
            </div>
        </header>

        <main>
            <!-- Tool View -->
            <div id="toolView">
                <div class="tool-header">
                    <div class="tool-title">
                        <span class="material-icons" id="toolIcon">text_format</span>
                        <h2 id="toolName">Case Converter</h2>
                    </div>
                    <div class="tool-actions">
                        <button id="backButton" class="btn btn-secondary">
                            <span class="material-icons">arrow_back</span>
                            Back
                        </button>
                        <button id="clearAll" class="btn btn-secondary">
                            <span class="material-icons">delete</span>
                            Clear
                        </button>
                        <button id="copyOutput" class="btn btn-secondary">
                            <span class="material-icons">content_copy</span>
                            Copy
                        </button>
                    </div>
                </div>
                
                <!-- Tool-specific options -->
                <div class="options-panel" id="toolOptions">
                    <div class="options-grid">
                        <div class="option-group">
                            <label for="caseType">Case Type</label>
                            <select id="caseType">
                                <option value="upper">UPPERCASE</option>
                                <option value="lower" selected>lowercase</option>
                                <option value="title">Title Case</option>
                                <option value="sentence">Sentence case</option>
                                <option value="camel">camelCase</option>
                                <option value="pascal">PascalCase</option>
                                <option value="snake">snake_case</option>
                                <option value="kebab">kebab-case</option>
                                <option value="invert">InVeRt CaSe</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Input/Output -->
                <div class="io-container">
                    <div class="io-panel">
                        <div class="io-label">
                            <span>Input</span>
                            <span class="stats" id="inputStats">0 chars</span>
                        </div>
                        <textarea id="inputText" placeholder="Paste your text here..."></textarea>
                    </div>
                    <div class="io-panel">
                        <div class="io-label">
                            <span>Output</span>
                            <span class="stats" id="outputStats">0 chars</span>
                        </div>
                        <textarea id="outputText" class="output" readonly placeholder="Results will appear here..."></textarea>
                    </div>
                </div>
                
                <div class="status-bar">
                    <div id="statusMessage" class="success">Ready</div>
                    <div id="toolStats">No operations yet</div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/theme.js"></script>
    <script>
        // Common utility functions for all tools
        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const inputStats = document.getElementById('inputStats');
        const outputStats = document.getElementById('outputStats');
        const statusMessage = document.getElementById('statusMessage');
        const toolStats = document.getElementById('toolStats');
        const copyButton = document.getElementById('copyOutput');
        const clearButton = document.getElementById('clearAll');
        const backButton = document.getElementById('backButton');
        const caseTypeSelect = document.getElementById('caseType');

        // Update character/line statistics
        function updateStats() {
            const inputLength = inputText.value.length;
            const outputLength = outputText.value.length;
            const inputLines = inputText.value.split('\n').length;
            const outputLines = outputText.value.split('\n').length;
            
            inputStats.textContent = `${inputLength} chars, ${inputLines} lines`;
            outputStats.textContent = `${outputLength} chars, ${outputLines} lines`;
        }

        // Copy output to clipboard
        function copyToClipboard() {
            if (!outputText.value) return;
            
            navigator.clipboard.writeText(outputText.value).then(() => {
                statusMessage.textContent = 'Copied to clipboard!';
                statusMessage.className = 'success';
                setTimeout(() => {
                    statusMessage.textContent = 'Ready';
                }, 2000);
            }).catch(() => {
                statusMessage.textContent = 'Failed to copy';
                statusMessage.className = 'error';
            });
        }

        // Clear all fields
        function clearAll() {
            inputText.value = '';
            outputText.value = '';
            updateStats();
            statusMessage.textContent = 'Cleared';
            statusMessage.className = 'success';
            setTimeout(() => {
                statusMessage.textContent = 'Ready';
            }, 1500);
        }

        // Navigate back to home
        function goBack() {
            window.location.href = 'index.html';
        }

        // Case conversion functions
        function toUpperCase(text) {
            return text.toUpperCase();
        }

        function toLowerCase(text) {
            return text.toLowerCase();
        }

        function toTitleCase(text) {
            return text.replace(/\b\w/g, char => char.toUpperCase());
        }

        function toSentenceCase(text) {
            return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();
        }

        function toCamelCase(text) {
            return text
                .replace(/(?:^\w|[A-Z]|\b\w)/g, (word, index) => {
                    return index === 0 ? word.toLowerCase() : word.toUpperCase();
                })
                .replace(/\s+/g, '')
                .replace(/[^a-zA-Z0-9]/g, '');
        }

        function toPascalCase(text) {
            return text
                .replace(/(?:^\w|[A-Z]|\b\w)/g, word => word.toUpperCase())
                .replace(/\s+/g, '')
                .replace(/[^a-zA-Z0-9]/g, '');
        }

        function toSnakeCase(text) {
            return text
                .replace(/\s+/g, '_')
                .replace(/([a-z])([A-Z])/g, '$1_$2')
                .toLowerCase()
                .replace(/[^a-z0-9_]/g, '');
        }

        function toKebabCase(text) {
            return text
                .replace(/\s+/g, '-')
                .replace(/([a-z])([A-Z])/g, '$1-$2')
                .toLowerCase()
                .replace(/[^a-z0-9-]/g, '');
        }

        function invertCase(text) {
            return text.split('').map(char => 
                char === char.toUpperCase() ? char.toLowerCase() : char.toUpperCase()
            ).join('');
        }

        // Main conversion function
        function convertCase() {
            const input = inputText.value;
            const caseType = caseTypeSelect.value;
            
            if (!input) {
                outputText.value = '';
                updateStats();
                return;
            }

            try {
                const startTime = performance.now();
                let result = '';

                switch(caseType) {
                    case 'upper':
                        result = toUpperCase(input);
                        break;
                    case 'lower':
                        result = toLowerCase(input);
                        break;
                    case 'title':
                        result = toTitleCase(input);
                        break;
                    case 'sentence':
                        result = toSentenceCase(input);
                        break;
                    case 'camel':
                        result = toCamelCase(input);
                        break;
                    case 'pascal':
                        result = toPascalCase(input);
                        break;
                    case 'snake':
                        result = toSnakeCase(input);
                        break;
                    case 'kebab':
                        result = toKebabCase(input);
                        break;
                    case 'invert':
                        result = invertCase(input);
                        break;
                    default:
                        result = input;
                }

                const endTime = performance.now();
                
                outputText.value = result;
                statusMessage.textContent = 'Success';
                statusMessage.className = 'success';
                toolStats.textContent = `Processed in ${Math.round(endTime - startTime)}ms`;
            } catch (error) {
                outputText.value = `Error: ${error.message}`;
                statusMessage.textContent = 'Error';
                statusMessage.className = 'error';
                toolStats.textContent = 'Processing failed';
            }
            
            updateStats();
        }

        // Setup event listeners
        inputText.addEventListener('input', () => {
            updateStats();
            convertCase();
        });
        caseTypeSelect.addEventListener('change', convertCase);
        copyButton.addEventListener('click', copyToClipboard);
        clearButton.addEventListener('click', clearAll);
        backButton.addEventListener('click', goBack);

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    convertCase();
                }
            }
        });

        // Initialize stats
        updateStats();
    </script>
    <footer class="site-footer">
        <p>&copy; Ian Rastall 2025<br>Contact: moving.form.of.dust@gmail.com<br>Donate: PayPal to merastall@gmail.com</p>
    </footer>
</body>
</html>
