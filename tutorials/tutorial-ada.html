<!DOCTYPE html>
<html lang="en" class="theme-burlywood"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1. Introduction To Ada Programming</title>

  <!-- Core styles to match site look -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet">
  <style>
	:root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-color:#212529;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, 0.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13, 110, 253, 0.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color:#dee2e6;--bs-body-color-rgb:222,226,230;--bs-body-bg:#212529;--bs-body-bg-rgb:33,37,41;--bs-emphasis-color:#fff;--bs-emphasis-color-rgb:255,255,255;--bs-secondary-color:rgba(222, 226, 230, 0.75);--bs-secondary-color-rgb:222,226,230;--bs-secondary-bg:#343a40;--bs-secondary-bg-rgb:52,58,64;--bs-tertiary-color:rgba(222, 226, 230, 0.5);--bs-tertiary-color-rgb:222,226,230;--bs-tertiary-bg:#2b3035;--bs-tertiary-bg-rgb:43,48,53;--bs-primary-text-emphasis:#6ea8fe;--bs-secondary-text-emphasis:#a7acb1;--bs-success-text-emphasis:#75b798;--bs-info-text-emphasis:#6edff6;--bs-warning-text-emphasis:#ffda6a;--bs-danger-text-emphasis:#ea868f;--bs-light-text-emphasis:#f8f9fa;--bs-dark-text-emphasis:#dee2e6;--bs-primary-bg-subtle:#031633;--bs-secondary-bg-subtle:#161719;--bs-success-bg-subtle:#051b11;--bs-info-bg-subtle:#032830;--bs-warning-bg-subtle:#332701;--bs-danger-bg-subtle:#2c0b0e;--bs-light-bg-subtle:#343a40;--bs-dark-bg-subtle:#1a1d20;--bs-primary-border-subtle:#084298;--bs-secondary-border-subtle:#41464b;--bs-success-border-subtle:#0f5132;--bs-info-border-subtle:#087990;--bs-warning-border-subtle:#997404;--bs-danger-border-subtle:#842029;--bs-light-border-subtle:#495057;--bs-dark-border-subtle:#343a40;--bs-heading-color:inherit;--bs-link-color:#6ea8fe;--bs-link-hover-color:#8bb9fe;--bs-link-color-rgb:110,168,254;--bs-link-hover-color-rgb:139,185,254;--bs-code-color:#e685b5;--bs-highlight-color:#dee2e6;--bs-highlight-bg:#664d03;--bs-border-color:#495057;--bs-border-color-translucent:rgba(255, 255, 255, 0.15);--bs-form-valid-color:#75b798;--bs-form-valid-border-color:#75b798;--bs-form-invalid-color:#ea868f;--bs-form-invalid-border-color:#ea868f}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.1875em;color:var(--bs-highlight-color);background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,1));text-decoration:underline}a:hover{--bs-link-color-rgb:var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none!important}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:"— "}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}:root{--bs-breakpoint-xs:0;--bs-breakpoint-sm:576px;--bs-breakpoint-md:768px;--bs-breakpoint-lg:992px;--bs-breakpoint-xl:1200px;--bs-breakpoint-xxl:1400px}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.33333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.66666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.33333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.66666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.33333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.66666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.33333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.66666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.33333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.66666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.33333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.66666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-color-type:initial;--bs-table-bg-type:initial;--bs-table-color-state:initial;--bs-table-bg-state:initial;--bs-table-color:var(--bs-emphasis-color);--bs-table-bg:var(--bs-body-bg);--bs-table-border-color:var(--bs-border-color);--bs-table-accent-bg:transparent;--bs-table-striped-color:var(--bs-emphasis-color);--bs-table-striped-bg:rgba(var(--bs-emphasis-color-rgb), 0.05);--bs-table-active-color:var(--bs-emphasis-color);--bs-table-active-bg:rgba(var(--bs-emphasis-color-rgb), 0.1);--bs-table-hover-color:var(--bs-emphasis-color);--bs-table-hover-bg:rgba(var(--bs-emphasis-color-rgb), 0.075);width:100%;margin-bottom:1rem;vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;color:var(--bs-table-color-state,var(--bs-table-color-type,var(--bs-table-color)));background-color:var(--bs-table-bg);border-bottom-width:var(--bs-border-width);box-shadow:inset 0 0 0 9999px var(--bs-table-bg-state,var(--bs-table-bg-type,var(--bs-table-accent-bg)))}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:calc(var(--bs-border-width) * 2) solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:var(--bs-border-width) 0}.table-bordered>:not(caption)>*>*{border-width:0 var(--bs-border-width)}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-striped-columns>:not(caption)>tr>:nth-child(2n){--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-active{--bs-table-color-state:var(--bs-table-active-color);--bs-table-bg-state:var(--bs-table-active-bg)}.table-hover>tbody>tr:hover>*{--bs-table-color-state:var(--bs-table-hover-color);--bs-table-bg-state:var(--bs-table-hover-bg)}.table-primary{--bs-table-color:#000;--bs-table-bg:#cfe2ff;--bs-table-border-color:#a6b5cc;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color:#000;--bs-table-bg:#e2e3e5;--bs-table-border-color:#b5b6b7;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color:#000;--bs-table-bg:#d1e7dd;--bs-table-border-color:#a7b9b1;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color:#000;--bs-table-bg:#cff4fc;--bs-table-border-color:#a6c3ca;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color:#000;--bs-table-bg:#fff3cd;--bs-table-border-color:#ccc2a4;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color:#000;--bs-table-bg:#f8d7da;--bs-table-border-color:#c6acae;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color:#000;--bs-table-bg:#f8f9fa;--bs-table-border-color:#c6c7c8;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color:#fff;--bs-table-bg:#212529;--bs-table-border-color:#4d5154;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(.375rem + var(--bs-border-width));padding-bottom:calc(.375rem + var(--bs-border-width));margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + var(--bs-border-width));padding-bottom:calc(.5rem + var(--bs-border-width));font-size:1.25rem}.col-form-label-sm{padding-top:calc(.25rem + var(--bs-border-width));padding-bottom:calc(.25rem + var(--bs-border-width));font-size:.875rem}.form-text{margin-top:.25rem;font-size:.875em;color:var(--bs-secondary-color)}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-control::-webkit-date-and-time-value{min-width:85px;height:1.5em;margin:0}.form-control::-webkit-datetime-edit{display:block;padding:0}.form-control::-moz-placeholder{color:var(--bs-secondary-color);opacity:1}.form-control::placeholder{color:var(--bs-secondary-color);opacity:1}.form-control:disabled{background-color:var(--bs-secondary-bg);opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:var(--bs-secondary-bg)}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:var(--bs-secondary-bg)}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:var(--bs-body-color);background-color:transparent;border:solid transparent;border-width:var(--bs-border-width) 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2));padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2))}textarea.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}textarea.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-control-color{width:3rem;height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2));padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color::-webkit-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color.form-control-sm{height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-select{--bs-form-select-bg-img:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--bs-body-bg);background-image:var(--bs-form-select-bg-img),var(--bs-form-select-bg-icon,none);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-select{transition:none}}.form-select:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-select[multiple],.form-select[size]:not([size="1"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:var(--bs-secondary-bg)}.form-select:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--bs-body-color)}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}[data-bs-theme=dark] .form-select{--bs-form-select-bg-img:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23dee2e6' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e")}.form-check{display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{--bs-form-check-bg:var(--bs-body-bg);flex-shrink:0;width:1em;height:1em;margin-top:.25em;vertical-align:top;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--bs-form-check-bg);background-image:var(--bs-form-check-bg-image);background-repeat:no-repeat;background-position:center;background-size:contain;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-check-input:checked{background-color:#0d6efd;border-color:#0d6efd}.form-check-input:checked[type=checkbox]{--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e")}.form-check-input:checked[type=radio]{--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='2' fill='%23fff'/%3e%3c/svg%3e")}.form-check-input[type=checkbox]:indeterminate{background-color:#0d6efd;border-color:#0d6efd;--bs-form-check-bg-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10h8'/%3e%3c/svg%3e")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%280, 0, 0, 0.25%29'/%3e%3c/svg%3e");width:2em;margin-left:-2.5em;background-image:var(--bs-form-switch-bg);background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%2386b7fe'/%3e%3c/svg%3e")}.form-switch .form-check-input:checked{background-position:right center;--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.btn-check:disabled+.btn,.btn-check[disabled]+.btn{pointer-events:none;filter:none;opacity:.65}[data-bs-theme=dark] .form-switch .form-check-input:not(:checked):not(:focus){--bs-form-switch-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%28255, 255, 255, 0.25%29'/%3e%3c/svg%3e")}.form-range{width:100%;height:1.5rem;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;-webkit-appearance:none;appearance:none;background-color:#0d6efd;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#b6d4fe}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-secondary-bg);border-color:transparent;border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;-moz-appearance:none;appearance:none;background-color:#0d6efd;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#b6d4fe}.form-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-secondary-bg);border-color:transparent;border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:var(--bs-secondary-color)}.form-range:disabled::-moz-range-thumb{background-color:var(--bs-secondary-color)}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + calc(var(--bs-border-width) * 2));min-height:calc(3.5rem + calc(var(--bs-border-width) * 2));line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;z-index:2;height:100%;padding:1rem .75rem;overflow:hidden;text-align:start;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:var(--bs-border-width) solid transparent;transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media (prefers-reduced-motion:reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control-plaintext::-moz-placeholder,.form-floating>.form-control::-moz-placeholder{color:transparent}.form-floating>.form-control-plaintext::placeholder,.form-floating>.form-control::placeholder{color:transparent}.form-floating>.form-control-plaintext:not(:-moz-placeholder-shown),.form-floating>.form-control:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown),.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:-webkit-autofill,.form-floating>.form-control:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label,.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-select~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control:not(:-moz-placeholder-shown)~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:"";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control-plaintext~label::after,.form-floating>.form-control:focus~label::after,.form-floating>.form-control:not(:placeholder-shown)~label::after,.form-floating>.form-select~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:"";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control:-webkit-autofill~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label{border-width:var(--bs-border-width) 0}.form-floating>.form-control:disabled~label,.form-floating>:disabled~label{color:#6c757d}.form-floating>.form-control:disabled~label::after,.form-floating>:disabled~label::after{background-color:var(--bs-secondary-bg)}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-floating,.input-group>.form-select{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-floating:focus-within,.input-group>.form-select:focus{z-index:5}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:5}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);text-align:center;white-space:nowrap;background-color:var(--bs-tertiary-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.input-group-lg>.btn,.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.input-group-sm>.btn,.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text{padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select,.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select,.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:calc(var(--bs-border-width) * -1);border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-valid-color)}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-success);border-radius:var(--bs-border-radius)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:var(--bs-form-valid-border-color);padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-valid,.was-validated .form-select:valid{border-color:var(--bs-form-valid-border-color)}.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size="1"],.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size="1"]{--bs-form-select-bg-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-valid:focus,.was-validated .form-select:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-control-color.is-valid,.was-validated .form-control-color:valid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-valid,.was-validated .form-check-input:valid{border-color:var(--bs-form-valid-border-color)}.form-check-input.is-valid:checked,.was-validated .form-check-input:valid:checked{background-color:var(--bs-form-valid-color)}.form-check-input.is-valid:focus,.was-validated .form-check-input:valid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:var(--bs-form-valid-color)}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-valid,.input-group>.form-floating:not(:focus-within).is-valid,.input-group>.form-select:not(:focus).is-valid,.was-validated .input-group>.form-control:not(:focus):valid,.was-validated .input-group>.form-floating:not(:focus-within):valid,.was-validated .input-group>.form-select:not(:focus):valid{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-danger);border-radius:var(--bs-border-radius)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:var(--bs-form-invalid-border-color);padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-invalid,.was-validated .form-select:invalid{border-color:var(--bs-form-invalid-border-color)}.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size="1"],.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size="1"]{--bs-form-select-bg-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-invalid:focus,.was-validated .form-select:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-control-color.is-invalid,.was-validated .form-control-color:invalid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-invalid,.was-validated .form-check-input:invalid{border-color:var(--bs-form-invalid-border-color)}.form-check-input.is-invalid:checked,.was-validated .form-check-input:invalid:checked{background-color:var(--bs-form-invalid-color)}.form-check-input.is-invalid:focus,.was-validated .form-check-input:invalid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:var(--bs-form-invalid-color)}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-invalid,.input-group>.form-floating:not(:focus-within).is-invalid,.input-group>.form-select:not(:focus).is-invalid,.was-validated .input-group>.form-control:not(:focus):invalid,.was-validated .input-group>.form-floating:not(:focus-within):invalid,.was-validated .input-group>.form-select:not(:focus):invalid{z-index:4}.btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 rgba(255, 255, 255, 0.15),0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn.active,.btn.show,.btn:first-child:active,:not(.btn-check)+.btn:active{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible,.btn:first-child:active:focus-visible,:not(.btn-check)+.btn:active:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked:focus-visible+.btn{box-shadow:var(--bs-btn-focus-box-shadow)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}.btn-secondary{--bs-btn-color:#fff;--bs-btn-bg:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#5c636a;--bs-btn-hover-border-color:#565e64;--bs-btn-focus-shadow-rgb:130,138,145;--bs-btn-active-color:#fff;--bs-btn-active-bg:#565e64;--bs-btn-active-border-color:#51585e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#6c757d;--bs-btn-disabled-border-color:#6c757d}.btn-success{--bs-btn-color:#fff;--bs-btn-bg:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#157347;--bs-btn-hover-border-color:#146c43;--bs-btn-focus-shadow-rgb:60,153,110;--bs-btn-active-color:#fff;--bs-btn-active-bg:#146c43;--bs-btn-active-border-color:#13653f;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#198754;--bs-btn-disabled-border-color:#198754}.btn-info{--bs-btn-color:#000;--bs-btn-bg:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#31d2f2;--bs-btn-hover-border-color:#25cff2;--bs-btn-focus-shadow-rgb:11,172,204;--bs-btn-active-color:#000;--bs-btn-active-bg:#3dd5f3;--bs-btn-active-border-color:#25cff2;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#0dcaf0;--bs-btn-disabled-border-color:#0dcaf0}.btn-warning{--bs-btn-color:#000;--bs-btn-bg:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffca2c;--bs-btn-hover-border-color:#ffc720;--bs-btn-focus-shadow-rgb:217,164,6;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffcd39;--bs-btn-active-border-color:#ffc720;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#ffc107;--bs-btn-disabled-border-color:#ffc107}.btn-danger{--bs-btn-color:#fff;--bs-btn-bg:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#bb2d3b;--bs-btn-hover-border-color:#b02a37;--bs-btn-focus-shadow-rgb:225,83,97;--bs-btn-active-color:#fff;--bs-btn-active-bg:#b02a37;--bs-btn-active-border-color:#a52834;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#dc3545;--bs-btn-disabled-border-color:#dc3545}.btn-light{--bs-btn-color:#000;--bs-btn-bg:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#d3d4d5;--bs-btn-hover-border-color:#c6c7c8;--bs-btn-focus-shadow-rgb:211,212,213;--bs-btn-active-color:#000;--bs-btn-active-bg:#c6c7c8;--bs-btn-active-border-color:#babbbc;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#f8f9fa;--bs-btn-disabled-border-color:#f8f9fa}.btn-dark{--bs-btn-color:#fff;--bs-btn-bg:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#424649;--bs-btn-hover-border-color:#373b3e;--bs-btn-focus-shadow-rgb:66,70,73;--bs-btn-active-color:#fff;--bs-btn-active-bg:#4d5154;--bs-btn-active-border-color:#373b3e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#212529;--bs-btn-disabled-border-color:#212529}.btn-outline-primary{--bs-btn-color:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0d6efd;--bs-btn-hover-border-color:#0d6efd;--bs-btn-focus-shadow-rgb:13,110,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0d6efd;--bs-btn-active-border-color:#0d6efd;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0d6efd;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0d6efd;--bs-gradient:none}.btn-outline-secondary{--bs-btn-color:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#6c757d;--bs-btn-hover-border-color:#6c757d;--bs-btn-focus-shadow-rgb:108,117,125;--bs-btn-active-color:#fff;--bs-btn-active-bg:#6c757d;--bs-btn-active-border-color:#6c757d;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#6c757d;--bs-gradient:none}.btn-outline-success{--bs-btn-color:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#198754;--bs-btn-hover-border-color:#198754;--bs-btn-focus-shadow-rgb:25,135,84;--bs-btn-active-color:#fff;--bs-btn-active-bg:#198754;--bs-btn-active-border-color:#198754;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#198754;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#198754;--bs-gradient:none}.btn-outline-info{--bs-btn-color:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#0dcaf0;--bs-btn-hover-border-color:#0dcaf0;--bs-btn-focus-shadow-rgb:13,202,240;--bs-btn-active-color:#000;--bs-btn-active-bg:#0dcaf0;--bs-btn-active-border-color:#0dcaf0;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0dcaf0;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0dcaf0;--bs-gradient:none}.btn-outline-warning{--bs-btn-color:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffc107;--bs-btn-hover-border-color:#ffc107;--bs-btn-focus-shadow-rgb:255,193,7;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffc107;--bs-btn-active-border-color:#ffc107;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#ffc107;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#ffc107;--bs-gradient:none}.btn-outline-danger{--bs-btn-color:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#dc3545;--bs-btn-hover-border-color:#dc3545;--bs-btn-focus-shadow-rgb:220,53,69;--bs-btn-active-color:#fff;--bs-btn-active-bg:#dc3545;--bs-btn-active-border-color:#dc3545;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#dc3545;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#dc3545;--bs-gradient:none}.btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}.btn-outline-dark{--bs-btn-color:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#212529;--bs-btn-hover-border-color:#212529;--bs-btn-focus-shadow-rgb:33,37,41;--bs-btn-active-color:#fff;--bs-btn-active-bg:#212529;--bs-btn-active-border-color:#212529;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#212529;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#212529;--bs-gradient:none}.btn-link{--bs-btn-font-weight:400;--bs-btn-color:var(--bs-link-color);--bs-btn-bg:transparent;--bs-btn-border-color:transparent;--bs-btn-hover-color:var(--bs-link-hover-color);--bs-btn-hover-border-color:transparent;--bs-btn-active-color:var(--bs-link-hover-color);--bs-btn-active-border-color:transparent;--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-border-color:transparent;--bs-btn-box-shadow:0 0 0 #000;--bs-btn-focus-shadow-rgb:49,132,253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-group-lg>.btn,.btn-lg{--bs-btn-padding-y:0.5rem;--bs-btn-padding-x:1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius:var(--bs-border-radius-lg)}.btn-group-sm>.btn,.btn-sm{--bs-btn-padding-y:0.25rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius:var(--bs-border-radius-sm)}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media (prefers-reduced-motion:reduce){.collapsing.collapse-horizontal{transition:none}}.dropdown,.dropdown-center,.dropend,.dropstart,.dropup,.dropup-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-zindex:1000;--bs-dropdown-min-width:10rem;--bs-dropdown-padding-x:0;--bs-dropdown-padding-y:0.5rem;--bs-dropdown-spacer:0.125rem;--bs-dropdown-font-size:1rem;--bs-dropdown-color:var(--bs-body-color);--bs-dropdown-bg:var(--bs-body-bg);--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-border-radius:var(--bs-border-radius);--bs-dropdown-border-width:var(--bs-border-width);--bs-dropdown-inner-border-radius:calc(var(--bs-border-radius) - var(--bs-border-width));--bs-dropdown-divider-bg:var(--bs-border-color-translucent);--bs-dropdown-divider-margin-y:0.5rem;--bs-dropdown-box-shadow:var(--bs-box-shadow);--bs-dropdown-link-color:var(--bs-body-color);--bs-dropdown-link-hover-color:var(--bs-body-color);--bs-dropdown-link-hover-bg:var(--bs-tertiary-bg);--bs-dropdown-link-active-color:#fff;--bs-dropdown-link-active-bg:#0d6efd;--bs-dropdown-link-disabled-color:var(--bs-tertiary-color);--bs-dropdown-item-padding-x:1rem;--bs-dropdown-item-padding-y:0.25rem;--bs-dropdown-header-color:#6c757d;--bs-dropdown-header-padding-x:1rem;--bs-dropdown-header-padding-y:0.5rem;position:absolute;z-index:var(--bs-dropdown-zindex);display:none;min-width:var(--bs-dropdown-min-width);padding:var(--bs-dropdown-padding-y) var(--bs-dropdown-padding-x);margin:0;font-size:var(--bs-dropdown-font-size);color:var(--bs-dropdown-color);text-align:left;list-style:none;background-color:var(--bs-dropdown-bg);background-clip:padding-box;border:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color);border-radius:var(--bs-dropdown-border-radius)}.dropdown-menu[data-bs-popper]{top:100%;left:0;margin-top:var(--bs-dropdown-spacer)}.dropdown-menu-start{--bs-position:start}.dropdown-menu-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-end{--bs-position:end}.dropdown-menu-end[data-bs-popper]{right:0;left:auto}@media (min-width:576px){.dropdown-menu-sm-start{--bs-position:start}.dropdown-menu-sm-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-sm-end{--bs-position:end}.dropdown-menu-sm-end[data-bs-popper]{right:0;left:auto}}@media (min-width:768px){.dropdown-menu-md-start{--bs-position:start}.dropdown-menu-md-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-md-end{--bs-position:end}.dropdown-menu-md-end[data-bs-popper]{right:0;left:auto}}@media (min-width:992px){.dropdown-menu-lg-start{--bs-position:start}.dropdown-menu-lg-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-lg-end{--bs-position:end}.dropdown-menu-lg-end[data-bs-popper]{right:0;left:auto}}@media (min-width:1200px){.dropdown-menu-xl-start{--bs-position:start}.dropdown-menu-xl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xl-end{--bs-position:end}.dropdown-menu-xl-end[data-bs-popper]{right:0;left:auto}}@media (min-width:1400px){.dropdown-menu-xxl-start{--bs-position:start}.dropdown-menu-xxl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xxl-end{--bs-position:end}.dropdown-menu-xxl-end[data-bs-popper]{right:0;left:auto}}.dropup .dropdown-menu[data-bs-popper]{top:auto;bottom:100%;margin-top:0;margin-bottom:var(--bs-dropdown-spacer)}.dropup .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:0;border-right:.3em solid transparent;border-bottom:.3em solid;border-left:.3em solid transparent}.dropup .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-menu[data-bs-popper]{top:0;right:auto;left:100%;margin-top:0;margin-left:var(--bs-dropdown-spacer)}.dropend .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid transparent;border-right:0;border-bottom:.3em solid transparent;border-left:.3em solid}.dropend .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-toggle::after{vertical-align:0}.dropstart .dropdown-menu[data-bs-popper]{top:0;right:100%;left:auto;margin-top:0;margin-right:var(--bs-dropdown-spacer)}.dropstart .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:""}.dropstart .dropdown-toggle::after{display:none}.dropstart .dropdown-toggle::before{display:inline-block;margin-right:.255em;vertical-align:.255em;content:"";border-top:.3em solid transparent;border-right:.3em solid;border-bottom:.3em solid transparent}.dropstart .dropdown-toggle:empty::after{margin-left:0}.dropstart .dropdown-toggle::before{vertical-align:0}.dropdown-divider{height:0;margin:var(--bs-dropdown-divider-margin-y) 0;overflow:hidden;border-top:1px solid var(--bs-dropdown-divider-bg);opacity:1}.dropdown-item{display:block;width:100%;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);clear:both;font-weight:400;color:var(--bs-dropdown-link-color);text-align:inherit;text-decoration:none;white-space:nowrap;background-color:transparent;border:0;border-radius:var(--bs-dropdown-item-border-radius,0)}.dropdown-item:focus,.dropdown-item:hover{color:var(--bs-dropdown-link-hover-color);background-color:var(--bs-dropdown-link-hover-bg)}.dropdown-item.active,.dropdown-item:active{color:var(--bs-dropdown-link-active-color);text-decoration:none;background-color:var(--bs-dropdown-link-active-bg)}.dropdown-item.disabled,.dropdown-item:disabled{color:var(--bs-dropdown-link-disabled-color);pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.dropdown-header{display:block;padding:var(--bs-dropdown-header-padding-y) var(--bs-dropdown-header-padding-x);margin-bottom:0;font-size:.875rem;color:var(--bs-dropdown-header-color);white-space:nowrap}.dropdown-item-text{display:block;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);color:var(--bs-dropdown-link-color)}.dropdown-menu-dark{--bs-dropdown-color:#dee2e6;--bs-dropdown-bg:#343a40;--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-box-shadow: ;--bs-dropdown-link-color:#dee2e6;--bs-dropdown-link-hover-color:#fff;--bs-dropdown-divider-bg:var(--bs-border-color-translucent);--bs-dropdown-link-hover-bg:rgba(255, 255, 255, 0.15);--bs-dropdown-link-active-color:#fff;--bs-dropdown-link-active-bg:#0d6efd;--bs-dropdown-link-disabled-color:#adb5bd;--bs-dropdown-header-color:#adb5bd}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group-vertical>.btn-check:checked+.btn,.btn-group-vertical>.btn-check:focus+.btn,.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn-check:checked+.btn,.btn-group>.btn-check:focus+.btn,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-toolbar{display:flex;flex-wrap:wrap;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group{border-radius:var(--bs-border-radius)}.btn-group>.btn-group:not(:first-child),.btn-group>:not(.btn-check:first-child)+.btn{margin-left:calc(var(--bs-border-width) * -1)}.btn-group>.btn-group:not(:last-child)>.btn,.btn-group>.btn.dropdown-toggle-split:first-child,.btn-group>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:nth-child(n+3),.btn-group>:not(.btn-check)+.btn{border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropend .dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after{margin-left:0}.dropstart .dropdown-toggle-split::before{margin-right:0}.btn-group-sm>.btn+.dropdown-toggle-split,.btn-sm+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-group-lg>.btn+.dropdown-toggle-split,.btn-lg+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:calc(var(--bs-border-width) * -1)}.btn-group-vertical>.btn-group:not(:last-child)>.btn,.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn~.btn{border-top-left-radius:0;border-top-right-radius:0}.nav{--bs-nav-link-padding-x:1rem;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color:var(--bs-link-color);--bs-nav-link-hover-color:var(--bs-link-hover-color);--bs-nav-link-disabled-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:var(--bs-nav-link-padding-y) var(--bs-nav-link-padding-x);font-size:var(--bs-nav-link-font-size);font-weight:var(--bs-nav-link-font-weight);color:var(--bs-nav-link-color);text-decoration:none;background:0 0;border:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}@media (prefers-reduced-motion:reduce){.nav-link{transition:none}}.nav-link:focus,.nav-link:hover{color:var(--bs-nav-link-hover-color)}.nav-link:focus-visible{outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.nav-link.disabled,.nav-link:disabled{color:var(--bs-nav-link-disabled-color);pointer-events:none;cursor:default}.nav-tabs{--bs-nav-tabs-border-width:var(--bs-border-width);--bs-nav-tabs-border-color:var(--bs-border-color);--bs-nav-tabs-border-radius:var(--bs-border-radius);--bs-nav-tabs-link-hover-border-color:var(--bs-secondary-bg) var(--bs-secondary-bg) var(--bs-border-color);--bs-nav-tabs-link-active-color:var(--bs-emphasis-color);--bs-nav-tabs-link-active-bg:var(--bs-body-bg);--bs-nav-tabs-link-active-border-color:var(--bs-border-color) var(--bs-border-color) var(--bs-body-bg);border-bottom:var(--bs-nav-tabs-border-width) solid var(--bs-nav-tabs-border-color)}.nav-tabs .nav-link{margin-bottom:calc(-1 * var(--bs-nav-tabs-border-width));border:var(--bs-nav-tabs-border-width) solid transparent;border-top-left-radius:var(--bs-nav-tabs-border-radius);border-top-right-radius:var(--bs-nav-tabs-border-radius)}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{isolation:isolate;border-color:var(--bs-nav-tabs-link-hover-border-color)}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:var(--bs-nav-tabs-link-active-color);background-color:var(--bs-nav-tabs-link-active-bg);border-color:var(--bs-nav-tabs-link-active-border-color)}.nav-tabs .dropdown-menu{margin-top:calc(-1 * var(--bs-nav-tabs-border-width));border-top-left-radius:0;border-top-right-radius:0}.nav-pills{--bs-nav-pills-border-radius:var(--bs-border-radius);--bs-nav-pills-link-active-color:#fff;--bs-nav-pills-link-active-bg:#0d6efd}.nav-pills .nav-link{border-radius:var(--bs-nav-pills-border-radius)}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:var(--bs-nav-pills-link-active-color);background-color:var(--bs-nav-pills-link-active-bg)}.nav-underline{--bs-nav-underline-gap:1rem;--bs-nav-underline-border-width:0.125rem;--bs-nav-underline-link-active-color:var(--bs-emphasis-color);gap:var(--bs-nav-underline-gap)}.nav-underline .nav-link{padding-right:0;padding-left:0;border-bottom:var(--bs-nav-underline-border-width) solid transparent}.nav-underline .nav-link:focus,.nav-underline .nav-link:hover{border-bottom-color:currentcolor}.nav-underline .nav-link.active,.nav-underline .show>.nav-link{font-weight:700;color:var(--bs-nav-underline-link-active-color);border-bottom-color:currentcolor}.nav-fill .nav-item,.nav-fill>.nav-link{flex:1 1 auto;text-align:center}.nav-justified .nav-item,.nav-justified>.nav-link{flex-basis:0;flex-grow:1;text-align:center}.nav-fill .nav-item .nav-link,.nav-justified .nav-item .nav-link{width:100%}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{--bs-navbar-padding-x:0;--bs-navbar-padding-y:0.5rem;--bs-navbar-color:rgba(var(--bs-emphasis-color-rgb), 0.65);--bs-navbar-hover-color:rgba(var(--bs-emphasis-color-rgb), 0.8);--bs-navbar-disabled-color:rgba(var(--bs-emphasis-color-rgb), 0.3);--bs-navbar-active-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-brand-padding-y:0.3125rem;--bs-navbar-brand-margin-end:1rem;--bs-navbar-brand-font-size:1.25rem;--bs-navbar-brand-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-brand-hover-color:rgba(var(--bs-emphasis-color-rgb), 1);--bs-navbar-nav-link-padding-x:0.5rem;--bs-navbar-toggler-padding-y:0.25rem;--bs-navbar-toggler-padding-x:0.75rem;--bs-navbar-toggler-font-size:1.25rem;--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");--bs-navbar-toggler-border-color:rgba(var(--bs-emphasis-color-rgb), 0.15);--bs-navbar-toggler-border-radius:var(--bs-border-radius);--bs-navbar-toggler-focus-width:0.25rem;--bs-navbar-toggler-transition:box-shadow 0.15s ease-in-out;position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:var(--bs-navbar-padding-y) var(--bs-navbar-padding-x)}.navbar>.container,.navbar>.container-fluid,.navbar>.container-lg,.navbar>.container-md,.navbar>.container-sm,.navbar>.container-xl,.navbar>.container-xxl{display:flex;flex-wrap:inherit;align-items:center;justify-content:space-between}.navbar-brand{padding-top:var(--bs-navbar-brand-padding-y);padding-bottom:var(--bs-navbar-brand-padding-y);margin-right:var(--bs-navbar-brand-margin-end);font-size:var(--bs-navbar-brand-font-size);color:var(--bs-navbar-brand-color);text-decoration:none;white-space:nowrap}.navbar-brand:focus,.navbar-brand:hover{color:var(--bs-navbar-brand-hover-color)}.navbar-nav{--bs-nav-link-padding-x:0;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color:var(--bs-navbar-color);--bs-nav-link-hover-color:var(--bs-navbar-hover-color);--bs-nav-link-disabled-color:var(--bs-navbar-disabled-color);display:flex;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link.active,.navbar-nav .nav-link.show{color:var(--bs-navbar-active-color)}.navbar-nav .dropdown-menu{position:static}.navbar-text{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-navbar-color)}.navbar-text a,.navbar-text a:focus,.navbar-text a:hover{color:var(--bs-navbar-active-color)}.navbar-collapse{flex-basis:100%;flex-grow:1;align-items:center}.navbar-toggler{padding:var(--bs-navbar-toggler-padding-y) var(--bs-navbar-toggler-padding-x);font-size:var(--bs-navbar-toggler-font-size);line-height:1;color:var(--bs-navbar-color);background-color:transparent;border:var(--bs-border-width) solid var(--bs-navbar-toggler-border-color);border-radius:var(--bs-navbar-toggler-border-radius);transition:var(--bs-navbar-toggler-transition)}@media (prefers-reduced-motion:reduce){.navbar-toggler{transition:none}}.navbar-toggler:hover{text-decoration:none}.navbar-toggler:focus{text-decoration:none;outline:0;box-shadow:0 0 0 var(--bs-navbar-toggler-focus-width)}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;background-image:var(--bs-navbar-toggler-icon-bg);background-repeat:no-repeat;background-position:center;background-size:100%}.navbar-nav-scroll{max-height:var(--bs-scroll-height,75vh);overflow-y:auto}@media (min-width:576px){.navbar-expand-sm{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-sm .navbar-nav{flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-sm .navbar-nav-scroll{overflow:visible}.navbar-expand-sm .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}.navbar-expand-sm .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-sm .offcanvas .offcanvas-header{display:none}.navbar-expand-sm .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:768px){.navbar-expand-md{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-md .navbar-nav{flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-md .navbar-nav-scroll{overflow:visible}.navbar-expand-md .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}.navbar-expand-md .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-md .offcanvas .offcanvas-header{display:none}.navbar-expand-md .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:992px){.navbar-expand-lg{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-lg .navbar-nav{flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-lg .navbar-nav-scroll{overflow:visible}.navbar-expand-lg .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}.navbar-expand-lg .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-lg .offcanvas .offcanvas-header{display:none}.navbar-expand-lg .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:1200px){.navbar-expand-xl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xl .navbar-nav{flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xl .navbar-nav-scroll{overflow:visible}.navbar-expand-xl .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}.navbar-expand-xl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-xl .offcanvas .offcanvas-header{display:none}.navbar-expand-xl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media (min-width:1400px){.navbar-expand-xxl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xxl .navbar-nav{flex-direction:row}.navbar-expand-xxl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xxl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xxl .navbar-nav-scroll{overflow:visible}.navbar-expand-xxl .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-xxl .navbar-toggler{display:none}.navbar-expand-xxl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand-xxl .offcanvas .offcanvas-header{display:none}.navbar-expand-xxl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}.navbar-expand{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand .navbar-nav{flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand .navbar-nav-scroll{overflow:visible}.navbar-expand .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-expand .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto!important;height:auto!important;visibility:visible!important;background-color:transparent!important;border:0!important;transform:none!important;transition:none}.navbar-expand .offcanvas .offcanvas-header{display:none}.navbar-expand .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}.navbar-dark,.navbar[data-bs-theme=dark]{--bs-navbar-color:rgba(255, 255, 255, 0.55);--bs-navbar-hover-color:rgba(255, 255, 255, 0.75);--bs-navbar-disabled-color:rgba(255, 255, 255, 0.25);--bs-navbar-active-color:#fff;--bs-navbar-brand-color:#fff;--bs-navbar-brand-hover-color:#fff;--bs-navbar-toggler-border-color:rgba(255, 255, 255, 0.1);--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}[data-bs-theme=dark] .navbar-toggler-icon{--bs-navbar-toggler-icon-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}.card{--bs-card-spacer-y:1rem;--bs-card-spacer-x:1rem;--bs-card-title-spacer-y:0.5rem;--bs-card-title-color: ;--bs-card-subtitle-color: ;--bs-card-border-width:var(--bs-border-width);--bs-card-border-color:var(--bs-border-color-translucent);--bs-card-border-radius:var(--bs-border-radius);--bs-card-box-shadow: ;--bs-card-inner-border-radius:calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-card-cap-padding-y:0.5rem;--bs-card-cap-padding-x:1rem;--bs-card-cap-bg:rgba(var(--bs-body-color-rgb), 0.03);--bs-card-cap-color: ;--bs-card-height: ;--bs-card-color: ;--bs-card-bg:var(--bs-body-bg);--bs-card-img-overlay-padding:1rem;--bs-card-group-margin:0.75rem;position:relative;display:flex;flex-direction:column;min-width:0;height:var(--bs-card-height);color:var(--bs-body-color);word-wrap:break-word;background-color:var(--bs-card-bg);background-clip:border-box;border:var(--bs-card-border-width) solid var(--bs-card-border-color);border-radius:var(--bs-card-border-radius)}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{flex:1 1 auto;padding:var(--bs-card-spacer-y) var(--bs-card-spacer-x);color:var(--bs-card-color)}.card-title{margin-bottom:var(--bs-card-title-spacer-y);color:var(--bs-card-title-color)}.card-subtitle{margin-top:calc(-.5 * var(--bs-card-title-spacer-y));margin-bottom:0;color:var(--bs-card-subtitle-color)}.card-text:last-child{margin-bottom:0}.card-link+.card-link{margin-left:var(--bs-card-spacer-x)}.card-header{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);margin-bottom:0;color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-header:first-child{border-radius:var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius) 0 0}.card-footer{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-top:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-footer:last-child{border-radius:0 0 var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius)}.card-header-tabs{margin-right:calc(-.5 * var(--bs-card-cap-padding-x));margin-bottom:calc(-1 * var(--bs-card-cap-padding-y));margin-left:calc(-.5 * var(--bs-card-cap-padding-x));border-bottom:0}.card-header-tabs .nav-link.active{background-color:var(--bs-card-bg);border-bottom-color:var(--bs-card-bg)}.card-header-pills{margin-right:calc(-.5 * var(--bs-card-cap-padding-x));margin-left:calc(-.5 * var(--bs-card-cap-padding-x))}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:var(--bs-card-img-overlay-padding);border-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom,.card-img-top{width:100%}.card-img,.card-img-top{border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom{border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card-group>.card{margin-bottom:var(--bs-card-group-margin)}@media (min-width:576px){.card-group{display:flex;flex-flow:row wrap}.card-group>.card{flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-header,.card-group>.card:not(:last-child) .card-img-top{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-footer,.card-group>.card:not(:last-child) .card-img-bottom{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-header,.card-group>.card:not(:first-child) .card-img-top{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-footer,.card-group>.card:not(:first-child) .card-img-bottom{border-bottom-left-radius:0}}.accordion{--bs-accordion-color:var(--bs-body-color);--bs-accordion-bg:var(--bs-body-bg);--bs-accordion-transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out,border-radius 0.15s ease;--bs-accordion-border-color:var(--bs-border-color);--bs-accordion-border-width:var(--bs-border-width);--bs-accordion-border-radius:var(--bs-border-radius);--bs-accordion-inner-border-radius:calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-accordion-btn-padding-x:1.25rem;--bs-accordion-btn-padding-y:1rem;--bs-accordion-btn-color:var(--bs-body-color);--bs-accordion-btn-bg:var(--bs-accordion-bg);--bs-accordion-btn-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='none' stroke='%23212529' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M2 5L8 11L14 5'/%3e%3c/svg%3e");--bs-accordion-btn-icon-width:1.25rem;--bs-accordion-btn-icon-transform:rotate(-180deg);--bs-accordion-btn-icon-transition:transform 0.2s ease-in-out;--bs-accordion-btn-active-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='none' stroke='%23052c65' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M2 5L8 11L14 5'/%3e%3c/svg%3e");--bs-accordion-btn-focus-box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-accordion-body-padding-x:1.25rem;--bs-accordion-body-padding-y:1rem;--bs-accordion-active-color:var(--bs-primary-text-emphasis);--bs-accordion-active-bg:var(--bs-primary-bg-subtle)}.accordion-button{position:relative;display:flex;align-items:center;width:100%;padding:var(--bs-accordion-btn-padding-y) var(--bs-accordion-btn-padding-x);font-size:1rem;color:var(--bs-accordion-btn-color);text-align:left;background-color:var(--bs-accordion-btn-bg);border:0;border-radius:0;overflow-anchor:none;transition:var(--bs-accordion-transition)}@media (prefers-reduced-motion:reduce){.accordion-button{transition:none}}.accordion-button:not(.collapsed){color:var(--bs-accordion-active-color);background-color:var(--bs-accordion-active-bg);box-shadow:inset 0 calc(-1 * var(--bs-accordion-border-width)) 0 var(--bs-accordion-border-color)}.accordion-button:not(.collapsed)::after{background-image:var(--bs-accordion-btn-active-icon);transform:var(--bs-accordion-btn-icon-transform)}.accordion-button::after{flex-shrink:0;width:var(--bs-accordion-btn-icon-width);height:var(--bs-accordion-btn-icon-width);margin-left:auto;content:"";background-image:var(--bs-accordion-btn-icon);background-repeat:no-repeat;background-size:var(--bs-accordion-btn-icon-width);transition:var(--bs-accordion-btn-icon-transition)}@media (prefers-reduced-motion:reduce){.accordion-button::after{transition:none}}.accordion-button:hover{z-index:2}.accordion-button:focus{z-index:3;outline:0;box-shadow:var(--bs-accordion-btn-focus-box-shadow)}.accordion-header{margin-bottom:0}.accordion-item{color:var(--bs-accordion-color);background-color:var(--bs-accordion-bg);border:var(--bs-accordion-border-width) solid var(--bs-accordion-border-color)}.accordion-item:first-of-type{border-top-left-radius:var(--bs-accordion-border-radius);border-top-right-radius:var(--bs-accordion-border-radius)}.accordion-item:first-of-type>.accordion-header .accordion-button{border-top-left-radius:var(--bs-accordion-inner-border-radius);border-top-right-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:not(:first-of-type){border-top:0}.accordion-item:last-of-type{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-item:last-of-type>.accordion-header .accordion-button.collapsed{border-bottom-right-radius:var(--bs-accordion-inner-border-radius);border-bottom-left-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:last-of-type>.accordion-collapse{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-body{padding:var(--bs-accordion-body-padding-y) var(--bs-accordion-body-padding-x)}.accordion-flush>.accordion-item{border-right:0;border-left:0;border-radius:0}.accordion-flush>.accordion-item:first-child{border-top:0}.accordion-flush>.accordion-item:last-child{border-bottom:0}.accordion-flush>.accordion-item>.accordion-header .accordion-button,.accordion-flush>.accordion-item>.accordion-header .accordion-button.collapsed{border-radius:0}.accordion-flush>.accordion-item>.accordion-collapse{border-radius:0}[data-bs-theme=dark] .accordion-button::after{--bs-accordion-btn-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236ea8fe'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");--bs-accordion-btn-active-icon:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236ea8fe'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.breadcrumb{--bs-breadcrumb-padding-x:0;--bs-breadcrumb-padding-y:0;--bs-breadcrumb-margin-bottom:1rem;--bs-breadcrumb-bg: ;--bs-breadcrumb-border-radius: ;--bs-breadcrumb-divider-color:var(--bs-secondary-color);--bs-breadcrumb-item-padding-x:0.5rem;--bs-breadcrumb-item-active-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;padding:var(--bs-breadcrumb-padding-y) var(--bs-breadcrumb-padding-x);margin-bottom:var(--bs-breadcrumb-margin-bottom);font-size:var(--bs-breadcrumb-font-size);list-style:none;background-color:var(--bs-breadcrumb-bg);border-radius:var(--bs-breadcrumb-border-radius)}.breadcrumb-item+.breadcrumb-item{padding-left:var(--bs-breadcrumb-item-padding-x)}.breadcrumb-item+.breadcrumb-item::before{float:left;padding-right:var(--bs-breadcrumb-item-padding-x);color:var(--bs-breadcrumb-divider-color);content:var(--bs-breadcrumb-divider, "/")}.breadcrumb-item.active{color:var(--bs-breadcrumb-item-active-color)}.pagination{--bs-pagination-padding-x:0.75rem;--bs-pagination-padding-y:0.375rem;--bs-pagination-font-size:1rem;--bs-pagination-color:var(--bs-link-color);--bs-pagination-bg:var(--bs-body-bg);--bs-pagination-border-width:var(--bs-border-width);--bs-pagination-border-color:var(--bs-border-color);--bs-pagination-border-radius:var(--bs-border-radius);--bs-pagination-hover-color:var(--bs-link-hover-color);--bs-pagination-hover-bg:var(--bs-tertiary-bg);--bs-pagination-hover-border-color:var(--bs-border-color);--bs-pagination-focus-color:var(--bs-link-hover-color);--bs-pagination-focus-bg:var(--bs-secondary-bg);--bs-pagination-focus-box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-pagination-active-color:#fff;--bs-pagination-active-bg:#0d6efd;--bs-pagination-active-border-color:#0d6efd;--bs-pagination-disabled-color:var(--bs-secondary-color);--bs-pagination-disabled-bg:var(--bs-secondary-bg);--bs-pagination-disabled-border-color:var(--bs-border-color);display:flex;padding-left:0;list-style:none}.page-link{position:relative;display:block;padding:var(--bs-pagination-padding-y) var(--bs-pagination-padding-x);font-size:var(--bs-pagination-font-size);color:var(--bs-pagination-color);text-decoration:none;background-color:var(--bs-pagination-bg);border:var(--bs-pagination-border-width) solid var(--bs-pagination-border-color);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.page-link{transition:none}}.page-link:hover{z-index:2;color:var(--bs-pagination-hover-color);background-color:var(--bs-pagination-hover-bg);border-color:var(--bs-pagination-hover-border-color)}.page-link:focus{z-index:3;color:var(--bs-pagination-focus-color);background-color:var(--bs-pagination-focus-bg);outline:0;box-shadow:var(--bs-pagination-focus-box-shadow)}.active>.page-link,.page-link.active{z-index:3;color:var(--bs-pagination-active-color);background-color:var(--bs-pagination-active-bg);border-color:var(--bs-pagination-active-border-color)}.disabled>.page-link,.page-link.disabled{color:var(--bs-pagination-disabled-color);pointer-events:none;background-color:var(--bs-pagination-disabled-bg);border-color:var(--bs-pagination-disabled-border-color)}.page-item:not(:first-child) .page-link{margin-left:calc(var(--bs-border-width) * -1)}.page-item:first-child .page-link{border-top-left-radius:var(--bs-pagination-border-radius);border-bottom-left-radius:var(--bs-pagination-border-radius)}.page-item:last-child .page-link{border-top-right-radius:var(--bs-pagination-border-radius);border-bottom-right-radius:var(--bs-pagination-border-radius)}.pagination-lg{--bs-pagination-padding-x:1.5rem;--bs-pagination-padding-y:0.75rem;--bs-pagination-font-size:1.25rem;--bs-pagination-border-radius:var(--bs-border-radius-lg)}.pagination-sm{--bs-pagination-padding-x:0.5rem;--bs-pagination-padding-y:0.25rem;--bs-pagination-font-size:0.875rem;--bs-pagination-border-radius:var(--bs-border-radius-sm)}.badge{--bs-badge-padding-x:0.65em;--bs-badge-padding-y:0.35em;--bs-badge-font-size:0.75em;--bs-badge-font-weight:700;--bs-badge-color:#fff;--bs-badge-border-radius:var(--bs-border-radius);display:inline-block;padding:var(--bs-badge-padding-y) var(--bs-badge-padding-x);font-size:var(--bs-badge-font-size);font-weight:var(--bs-badge-font-weight);line-height:1;color:var(--bs-badge-color);text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--bs-badge-border-radius)}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.alert{--bs-alert-bg:transparent;--bs-alert-padding-x:1rem;--bs-alert-padding-y:1rem;--bs-alert-margin-bottom:1rem;--bs-alert-color:inherit;--bs-alert-border-color:transparent;--bs-alert-border:var(--bs-border-width) solid var(--bs-alert-border-color);--bs-alert-border-radius:var(--bs-border-radius);--bs-alert-link-color:inherit;position:relative;padding:var(--bs-alert-padding-y) var(--bs-alert-padding-x);margin-bottom:var(--bs-alert-margin-bottom);color:var(--bs-alert-color);background-color:var(--bs-alert-bg);border:var(--bs-alert-border);border-radius:var(--bs-alert-border-radius)}.alert-heading{color:inherit}.alert-link{font-weight:700;color:var(--bs-alert-link-color)}.alert-dismissible{padding-right:3rem}.alert-dismissible .btn-close{position:absolute;top:0;right:0;z-index:2;padding:1.25rem 1rem}.alert-primary{--bs-alert-color:var(--bs-primary-text-emphasis);--bs-alert-bg:var(--bs-primary-bg-subtle);--bs-alert-border-color:var(--bs-primary-border-subtle);--bs-alert-link-color:var(--bs-primary-text-emphasis)}.alert-secondary{--bs-alert-color:var(--bs-secondary-text-emphasis);--bs-alert-bg:var(--bs-secondary-bg-subtle);--bs-alert-border-color:var(--bs-secondary-border-subtle);--bs-alert-link-color:var(--bs-secondary-text-emphasis)}.alert-success{--bs-alert-color:var(--bs-success-text-emphasis);--bs-alert-bg:var(--bs-success-bg-subtle);--bs-alert-border-color:var(--bs-success-border-subtle);--bs-alert-link-color:var(--bs-success-text-emphasis)}.alert-info{--bs-alert-color:var(--bs-info-text-emphasis);--bs-alert-bg:var(--bs-info-bg-subtle);--bs-alert-border-color:var(--bs-info-border-subtle);--bs-alert-link-color:var(--bs-info-text-emphasis)}.alert-warning{--bs-alert-color:var(--bs-warning-text-emphasis);--bs-alert-bg:var(--bs-warning-bg-subtle);--bs-alert-border-color:var(--bs-warning-border-subtle);--bs-alert-link-color:var(--bs-warning-text-emphasis)}.alert-danger{--bs-alert-color:var(--bs-danger-text-emphasis);--bs-alert-bg:var(--bs-danger-bg-subtle);--bs-alert-border-color:var(--bs-danger-border-subtle);--bs-alert-link-color:var(--bs-danger-text-emphasis)}.alert-light{--bs-alert-color:var(--bs-light-text-emphasis);--bs-alert-bg:var(--bs-light-bg-subtle);--bs-alert-border-color:var(--bs-light-border-subtle);--bs-alert-link-color:var(--bs-light-text-emphasis)}.alert-dark{--bs-alert-color:var(--bs-dark-text-emphasis);--bs-alert-bg:var(--bs-dark-bg-subtle);--bs-alert-border-color:var(--bs-dark-border-subtle);--bs-alert-link-color:var(--bs-dark-text-emphasis)}@keyframes progress-bar-stripes{0%{background-position-x:1rem}}.progress,.progress-stacked{--bs-progress-height:1rem;--bs-progress-font-size:0.75rem;--bs-progress-bg:var(--bs-secondary-bg);--bs-progress-border-radius:var(--bs-border-radius);--bs-progress-box-shadow:var(--bs-box-shadow-inset);--bs-progress-bar-color:#fff;--bs-progress-bar-bg:#0d6efd;--bs-progress-bar-transition:width 0.6s ease;display:flex;height:var(--bs-progress-height);overflow:hidden;font-size:var(--bs-progress-font-size);background-color:var(--bs-progress-bg);border-radius:var(--bs-progress-border-radius)}.progress-bar{display:flex;flex-direction:column;justify-content:center;overflow:hidden;color:var(--bs-progress-bar-color);text-align:center;white-space:nowrap;background-color:var(--bs-progress-bar-bg);transition:var(--bs-progress-bar-transition)}@media (prefers-reduced-motion:reduce){.progress-bar{transition:none}}.progress-bar-striped{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-size:var(--bs-progress-height) var(--bs-progress-height)}.progress-stacked>.progress{overflow:visible}.progress-stacked>.progress>.progress-bar{width:100%}.progress-bar-animated{animation:1s linear infinite progress-bar-stripes}@media (prefers-reduced-motion:reduce){.progress-bar-animated{animation:none}}.list-group{--bs-list-group-color:var(--bs-body-color);--bs-list-group-bg:var(--bs-body-bg);--bs-list-group-border-color:var(--bs-border-color);--bs-list-group-border-width:var(--bs-border-width);--bs-list-group-border-radius:var(--bs-border-radius);--bs-list-group-item-padding-x:1rem;--bs-list-group-item-padding-y:0.5rem;--bs-list-group-action-color:var(--bs-secondary-color);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-tertiary-bg);--bs-list-group-action-active-color:var(--bs-body-color);--bs-list-group-action-active-bg:var(--bs-secondary-bg);--bs-list-group-disabled-color:var(--bs-secondary-color);--bs-list-group-disabled-bg:var(--bs-body-bg);--bs-list-group-active-color:#fff;--bs-list-group-active-bg:#0d6efd;--bs-list-group-active-border-color:#0d6efd;display:flex;flex-direction:column;padding-left:0;margin-bottom:0;border-radius:var(--bs-list-group-border-radius)}.list-group-numbered{list-style-type:none;counter-reset:section}.list-group-numbered>.list-group-item::before{content:counters(section, ".") ". ";counter-increment:section}.list-group-item-action{width:100%;color:var(--bs-list-group-action-color);text-align:inherit}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:var(--bs-list-group-action-hover-color);text-decoration:none;background-color:var(--bs-list-group-action-hover-bg)}.list-group-item-action:active{color:var(--bs-list-group-action-active-color);background-color:var(--bs-list-group-action-active-bg)}.list-group-item{position:relative;display:block;padding:var(--bs-list-group-item-padding-y) var(--bs-list-group-item-padding-x);color:var(--bs-list-group-color);text-decoration:none;background-color:var(--bs-list-group-bg);border:var(--bs-list-group-border-width) solid var(--bs-list-group-border-color)}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item.disabled,.list-group-item:disabled{color:var(--bs-list-group-disabled-color);pointer-events:none;background-color:var(--bs-list-group-disabled-bg)}.list-group-item.active{z-index:2;color:var(--bs-list-group-active-color);background-color:var(--bs-list-group-active-bg);border-color:var(--bs-list-group-active-border-color)}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:calc(-1 * var(--bs-list-group-border-width));border-top-width:var(--bs-list-group-border-width)}.list-group-horizontal{flex-direction:row}.list-group-horizontal>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal>.list-group-item.active{margin-top:0}.list-group-horizontal>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}@media (min-width:576px){.list-group-horizontal-sm{flex-direction:row}.list-group-horizontal-sm>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-sm>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-sm>.list-group-item.active{margin-top:0}.list-group-horizontal-sm>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-sm>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:768px){.list-group-horizontal-md{flex-direction:row}.list-group-horizontal-md>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-md>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-md>.list-group-item.active{margin-top:0}.list-group-horizontal-md>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-md>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:992px){.list-group-horizontal-lg{flex-direction:row}.list-group-horizontal-lg>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-lg>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-lg>.list-group-item.active{margin-top:0}.list-group-horizontal-lg>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-lg>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:1200px){.list-group-horizontal-xl{flex-direction:row}.list-group-horizontal-xl>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xl>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xl>.list-group-item.active{margin-top:0}.list-group-horizontal-xl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xl>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}@media (min-width:1400px){.list-group-horizontal-xxl{flex-direction:row}.list-group-horizontal-xxl>.list-group-item:first-child:not(:last-child){border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xxl>.list-group-item:last-child:not(:first-child){border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xxl>.list-group-item.active{margin-top:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item.active{margin-left:calc(-1 * var(--bs-list-group-border-width));border-left-width:var(--bs-list-group-border-width)}}.list-group-flush{border-radius:0}.list-group-flush>.list-group-item{border-width:0 0 var(--bs-list-group-border-width)}.list-group-flush>.list-group-item:last-child{border-bottom-width:0}.list-group-item-primary{--bs-list-group-color:var(--bs-primary-text-emphasis);--bs-list-group-bg:var(--bs-primary-bg-subtle);--bs-list-group-border-color:var(--bs-primary-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-primary-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-primary-border-subtle);--bs-list-group-active-color:var(--bs-primary-bg-subtle);--bs-list-group-active-bg:var(--bs-primary-text-emphasis);--bs-list-group-active-border-color:var(--bs-primary-text-emphasis)}.list-group-item-secondary{--bs-list-group-color:var(--bs-secondary-text-emphasis);--bs-list-group-bg:var(--bs-secondary-bg-subtle);--bs-list-group-border-color:var(--bs-secondary-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-secondary-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-secondary-border-subtle);--bs-list-group-active-color:var(--bs-secondary-bg-subtle);--bs-list-group-active-bg:var(--bs-secondary-text-emphasis);--bs-list-group-active-border-color:var(--bs-secondary-text-emphasis)}.list-group-item-success{--bs-list-group-color:var(--bs-success-text-emphasis);--bs-list-group-bg:var(--bs-success-bg-subtle);--bs-list-group-border-color:var(--bs-success-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-success-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-success-border-subtle);--bs-list-group-active-color:var(--bs-success-bg-subtle);--bs-list-group-active-bg:var(--bs-success-text-emphasis);--bs-list-group-active-border-color:var(--bs-success-text-emphasis)}.list-group-item-info{--bs-list-group-color:var(--bs-info-text-emphasis);--bs-list-group-bg:var(--bs-info-bg-subtle);--bs-list-group-border-color:var(--bs-info-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-info-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-info-border-subtle);--bs-list-group-active-color:var(--bs-info-bg-subtle);--bs-list-group-active-bg:var(--bs-info-text-emphasis);--bs-list-group-active-border-color:var(--bs-info-text-emphasis)}.list-group-item-warning{--bs-list-group-color:var(--bs-warning-text-emphasis);--bs-list-group-bg:var(--bs-warning-bg-subtle);--bs-list-group-border-color:var(--bs-warning-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-warning-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-warning-border-subtle);--bs-list-group-active-color:var(--bs-warning-bg-subtle);--bs-list-group-active-bg:var(--bs-warning-text-emphasis);--bs-list-group-active-border-color:var(--bs-warning-text-emphasis)}.list-group-item-danger{--bs-list-group-color:var(--bs-danger-text-emphasis);--bs-list-group-bg:var(--bs-danger-bg-subtle);--bs-list-group-border-color:var(--bs-danger-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-danger-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-danger-border-subtle);--bs-list-group-active-color:var(--bs-danger-bg-subtle);--bs-list-group-active-bg:var(--bs-danger-text-emphasis);--bs-list-group-active-border-color:var(--bs-danger-text-emphasis)}.list-group-item-light{--bs-list-group-color:var(--bs-light-text-emphasis);--bs-list-group-bg:var(--bs-light-bg-subtle);--bs-list-group-border-color:var(--bs-light-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-light-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-light-border-subtle);--bs-list-group-active-color:var(--bs-light-bg-subtle);--bs-list-group-active-bg:var(--bs-light-text-emphasis);--bs-list-group-active-border-color:var(--bs-light-text-emphasis)}.list-group-item-dark{--bs-list-group-color:var(--bs-dark-text-emphasis);--bs-list-group-bg:var(--bs-dark-bg-subtle);--bs-list-group-border-color:var(--bs-dark-border-subtle);--bs-list-group-action-hover-color:var(--bs-emphasis-color);--bs-list-group-action-hover-bg:var(--bs-dark-border-subtle);--bs-list-group-action-active-color:var(--bs-emphasis-color);--bs-list-group-action-active-bg:var(--bs-dark-border-subtle);--bs-list-group-active-color:var(--bs-dark-bg-subtle);--bs-list-group-active-bg:var(--bs-dark-text-emphasis);--bs-list-group-active-border-color:var(--bs-dark-text-emphasis)}.btn-close{--bs-btn-close-color:#000;--bs-btn-close-bg:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z'/%3e%3c/svg%3e");--bs-btn-close-opacity:0.5;--bs-btn-close-hover-opacity:0.75;--bs-btn-close-focus-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);--bs-btn-close-focus-opacity:1;--bs-btn-close-disabled-opacity:0.25;--bs-btn-close-white-filter:invert(1) grayscale(100%) brightness(200%);box-sizing:content-box;width:1em;height:1em;padding:.25em .25em;color:var(--bs-btn-close-color);background:transparent var(--bs-btn-close-bg) center/1em auto no-repeat;border:0;border-radius:.375rem;opacity:var(--bs-btn-close-opacity)}.btn-close:hover{color:var(--bs-btn-close-color);text-decoration:none;opacity:var(--bs-btn-close-hover-opacity)}.btn-close:focus{outline:0;box-shadow:var(--bs-btn-close-focus-shadow);opacity:var(--bs-btn-close-focus-opacity)}.btn-close.disabled,.btn-close:disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--bs-btn-close-disabled-opacity)}.btn-close-white{filter:var(--bs-btn-close-white-filter)}[data-bs-theme=dark] .btn-close{filter:var(--bs-btn-close-white-filter)}.toast{--bs-toast-zindex:1090;--bs-toast-padding-x:0.75rem;--bs-toast-padding-y:0.5rem;--bs-toast-spacing:1.5rem;--bs-toast-max-width:350px;--bs-toast-font-size:0.875rem;--bs-toast-color: ;--bs-toast-bg:rgba(var(--bs-body-bg-rgb), 0.85);--bs-toast-border-width:var(--bs-border-width);--bs-toast-border-color:var(--bs-border-color-translucent);--bs-toast-border-radius:var(--bs-border-radius);--bs-toast-box-shadow:var(--bs-box-shadow);--bs-toast-header-color:var(--bs-secondary-color);--bs-toast-header-bg:rgba(var(--bs-body-bg-rgb), 0.85);--bs-toast-header-border-color:var(--bs-border-color-translucent);width:var(--bs-toast-max-width);max-width:100%;font-size:var(--bs-toast-font-size);color:var(--bs-toast-color);pointer-events:auto;background-color:var(--bs-toast-bg);background-clip:padding-box;border:var(--bs-toast-border-width) solid var(--bs-toast-border-color);box-shadow:var(--bs-toast-box-shadow);border-radius:var(--bs-toast-border-radius)}.toast.showing{opacity:0}.toast:not(.show){display:none}.toast-container{--bs-toast-zindex:1090;position:absolute;z-index:var(--bs-toast-zindex);width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;pointer-events:none}.toast-container>:not(:last-child){margin-bottom:var(--bs-toast-spacing)}.toast-header{display:flex;align-items:center;padding:var(--bs-toast-padding-y) var(--bs-toast-padding-x);color:var(--bs-toast-header-color);background-color:var(--bs-toast-header-bg);background-clip:padding-box;border-bottom:var(--bs-toast-border-width) solid var(--bs-toast-header-border-color);border-top-left-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width));border-top-right-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width))}.toast-header .btn-close{margin-right:calc(-.5 * var(--bs-toast-padding-x));margin-left:var(--bs-toast-padding-x)}.toast-body{padding:var(--bs-toast-padding-x);word-wrap:break-word}.modal{--bs-modal-zindex:1055;--bs-modal-width:500px;--bs-modal-padding:1rem;--bs-modal-margin:0.5rem;--bs-modal-color: ;--bs-modal-bg:var(--bs-body-bg);--bs-modal-border-color:var(--bs-border-color-translucent);--bs-modal-border-width:var(--bs-border-width);--bs-modal-border-radius:var(--bs-border-radius-lg);--bs-modal-box-shadow:var(--bs-box-shadow-sm);--bs-modal-inner-border-radius:calc(var(--bs-border-radius-lg) - (var(--bs-border-width)));--bs-modal-header-padding-x:1rem;--bs-modal-header-padding-y:1rem;--bs-modal-header-padding:1rem 1rem;--bs-modal-header-border-color:var(--bs-border-color);--bs-modal-header-border-width:var(--bs-border-width);--bs-modal-title-line-height:1.5;--bs-modal-footer-gap:0.5rem;--bs-modal-footer-bg: ;--bs-modal-footer-border-color:var(--bs-border-color);--bs-modal-footer-border-width:var(--bs-border-width);position:fixed;top:0;left:0;z-index:var(--bs-modal-zindex);display:none;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;outline:0}.modal-dialog{position:relative;width:auto;margin:var(--bs-modal-margin);pointer-events:none}.modal.fade .modal-dialog{transition:transform .3s ease-out;transform:translate(0,-50px)}@media (prefers-reduced-motion:reduce){.modal.fade .modal-dialog{transition:none}}.modal.show .modal-dialog{transform:none}.modal.modal-static .modal-dialog{transform:scale(1.02)}.modal-dialog-scrollable{height:calc(100% - var(--bs-modal-margin) * 2)}.modal-dialog-scrollable .modal-content{max-height:100%;overflow:hidden}.modal-dialog-scrollable .modal-body{overflow-y:auto}.modal-dialog-centered{display:flex;align-items:center;min-height:calc(100% - var(--bs-modal-margin) * 2)}.modal-content{position:relative;display:flex;flex-direction:column;width:100%;color:var(--bs-modal-color);pointer-events:auto;background-color:var(--bs-modal-bg);background-clip:padding-box;border:var(--bs-modal-border-width) solid var(--bs-modal-border-color);border-radius:var(--bs-modal-border-radius);outline:0}.modal-backdrop{--bs-backdrop-zindex:1050;--bs-backdrop-bg:#000;--bs-backdrop-opacity:0.5;position:fixed;top:0;left:0;z-index:var(--bs-backdrop-zindex);width:100vw;height:100vh;background-color:var(--bs-backdrop-bg)}.modal-backdrop.fade{opacity:0}.modal-backdrop.show{opacity:var(--bs-backdrop-opacity)}.modal-header{display:flex;flex-shrink:0;align-items:center;padding:var(--bs-modal-header-padding);border-bottom:var(--bs-modal-header-border-width) solid var(--bs-modal-header-border-color);border-top-left-radius:var(--bs-modal-inner-border-radius);border-top-right-radius:var(--bs-modal-inner-border-radius)}.modal-header .btn-close{padding:calc(var(--bs-modal-header-padding-y) * .5) calc(var(--bs-modal-header-padding-x) * .5);margin:calc(-.5 * var(--bs-modal-header-padding-y)) calc(-.5 * var(--bs-modal-header-padding-x)) calc(-.5 * var(--bs-modal-header-padding-y)) auto}.modal-title{margin-bottom:0;line-height:var(--bs-modal-title-line-height)}.modal-body{position:relative;flex:1 1 auto;padding:var(--bs-modal-padding)}.modal-footer{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:calc(var(--bs-modal-padding) - var(--bs-modal-footer-gap) * .5);background-color:var(--bs-modal-footer-bg);border-top:var(--bs-modal-footer-border-width) solid var(--bs-modal-footer-border-color);border-bottom-right-radius:var(--bs-modal-inner-border-radius);border-bottom-left-radius:var(--bs-modal-inner-border-radius)}.modal-footer>*{margin:calc(var(--bs-modal-footer-gap) * .5)}@media (min-width:576px){.modal{--bs-modal-margin:1.75rem;--bs-modal-box-shadow:var(--bs-box-shadow)}.modal-dialog{max-width:var(--bs-modal-width);margin-right:auto;margin-left:auto}.modal-sm{--bs-modal-width:300px}}@media (min-width:992px){.modal-lg,.modal-xl{--bs-modal-width:800px}}@media (min-width:1200px){.modal-xl{--bs-modal-width:1140px}}.modal-fullscreen{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen .modal-footer,.modal-fullscreen .modal-header{border-radius:0}.modal-fullscreen .modal-body{overflow-y:auto}@media (max-width:575.98px){.modal-fullscreen-sm-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-sm-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-sm-down .modal-footer,.modal-fullscreen-sm-down .modal-header{border-radius:0}.modal-fullscreen-sm-down .modal-body{overflow-y:auto}}@media (max-width:767.98px){.modal-fullscreen-md-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-md-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-md-down .modal-footer,.modal-fullscreen-md-down .modal-header{border-radius:0}.modal-fullscreen-md-down .modal-body{overflow-y:auto}}@media (max-width:991.98px){.modal-fullscreen-lg-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-lg-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-lg-down .modal-footer,.modal-fullscreen-lg-down .modal-header{border-radius:0}.modal-fullscreen-lg-down .modal-body{overflow-y:auto}}@media (max-width:1199.98px){.modal-fullscreen-xl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xl-down .modal-footer,.modal-fullscreen-xl-down .modal-header{border-radius:0}.modal-fullscreen-xl-down .modal-body{overflow-y:auto}}@media (max-width:1399.98px){.modal-fullscreen-xxl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xxl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xxl-down .modal-footer,.modal-fullscreen-xxl-down .modal-header{border-radius:0}.modal-fullscreen-xxl-down .modal-body{overflow-y:auto}}.tooltip{--bs-tooltip-zindex:1080;--bs-tooltip-max-width:200px;--bs-tooltip-padding-x:0.5rem;--bs-tooltip-padding-y:0.25rem;--bs-tooltip-margin: ;--bs-tooltip-font-size:0.875rem;--bs-tooltip-color:var(--bs-body-bg);--bs-tooltip-bg:var(--bs-emphasis-color);--bs-tooltip-border-radius:var(--bs-border-radius);--bs-tooltip-opacity:0.9;--bs-tooltip-arrow-width:0.8rem;--bs-tooltip-arrow-height:0.4rem;z-index:var(--bs-tooltip-zindex);display:block;margin:var(--bs-tooltip-margin);font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-tooltip-font-size);word-wrap:break-word;opacity:0}.tooltip.show{opacity:var(--bs-tooltip-opacity)}.tooltip .tooltip-arrow{display:block;width:var(--bs-tooltip-arrow-width);height:var(--bs-tooltip-arrow-height)}.tooltip .tooltip-arrow::before{position:absolute;content:"";border-color:transparent;border-style:solid}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow,.bs-tooltip-top .tooltip-arrow{bottom:calc(-1 * var(--bs-tooltip-arrow-height))}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before,.bs-tooltip-top .tooltip-arrow::before{top:-1px;border-width:var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width) * .5) 0;border-top-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow,.bs-tooltip-end .tooltip-arrow{left:calc(-1 * var(--bs-tooltip-arrow-height));width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before,.bs-tooltip-end .tooltip-arrow::before{right:-1px;border-width:calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width) * .5) 0;border-right-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow,.bs-tooltip-bottom .tooltip-arrow{top:calc(-1 * var(--bs-tooltip-arrow-height))}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before,.bs-tooltip-bottom .tooltip-arrow::before{bottom:-1px;border-width:0 calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height);border-bottom-color:var(--bs-tooltip-bg)}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow,.bs-tooltip-start .tooltip-arrow{right:calc(-1 * var(--bs-tooltip-arrow-height));width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before,.bs-tooltip-start .tooltip-arrow::before{left:-1px;border-width:calc(var(--bs-tooltip-arrow-width) * .5) 0 calc(var(--bs-tooltip-arrow-width) * .5) var(--bs-tooltip-arrow-height);border-left-color:var(--bs-tooltip-bg)}.tooltip-inner{max-width:var(--bs-tooltip-max-width);padding:var(--bs-tooltip-padding-y) var(--bs-tooltip-padding-x);color:var(--bs-tooltip-color);text-align:center;background-color:var(--bs-tooltip-bg);border-radius:var(--bs-tooltip-border-radius)}.popover{--bs-popover-zindex:1070;--bs-popover-max-width:276px;--bs-popover-font-size:0.875rem;--bs-popover-bg:var(--bs-body-bg);--bs-popover-border-width:var(--bs-border-width);--bs-popover-border-color:var(--bs-border-color-translucent);--bs-popover-border-radius:var(--bs-border-radius-lg);--bs-popover-inner-border-radius:calc(var(--bs-border-radius-lg) - var(--bs-border-width));--bs-popover-box-shadow:var(--bs-box-shadow);--bs-popover-header-padding-x:1rem;--bs-popover-header-padding-y:0.5rem;--bs-popover-header-font-size:1rem;--bs-popover-header-color:inherit;--bs-popover-header-bg:var(--bs-secondary-bg);--bs-popover-body-padding-x:1rem;--bs-popover-body-padding-y:1rem;--bs-popover-body-color:var(--bs-body-color);--bs-popover-arrow-width:1rem;--bs-popover-arrow-height:0.5rem;--bs-popover-arrow-border:var(--bs-popover-border-color);z-index:var(--bs-popover-zindex);display:block;max-width:var(--bs-popover-max-width);font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-popover-font-size);word-wrap:break-word;background-color:var(--bs-popover-bg);background-clip:padding-box;border:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-radius:var(--bs-popover-border-radius)}.popover .popover-arrow{display:block;width:var(--bs-popover-arrow-width);height:var(--bs-popover-arrow-height)}.popover .popover-arrow::after,.popover .popover-arrow::before{position:absolute;display:block;content:"";border-color:transparent;border-style:solid;border-width:0}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow,.bs-popover-top>.popover-arrow{bottom:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width))}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::after,.bs-popover-top>.popover-arrow::before{border-width:var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width) * .5) 0}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::before{bottom:0;border-top-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after,.bs-popover-top>.popover-arrow::after{bottom:var(--bs-popover-border-width);border-top-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow,.bs-popover-end>.popover-arrow{left:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::after,.bs-popover-end>.popover-arrow::before{border-width:calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width) * .5) 0}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::before{left:0;border-right-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after,.bs-popover-end>.popover-arrow::after{left:var(--bs-popover-border-width);border-right-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow,.bs-popover-bottom>.popover-arrow{top:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width))}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::after,.bs-popover-bottom>.popover-arrow::before{border-width:0 calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::before{top:0;border-bottom-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after,.bs-popover-bottom>.popover-arrow::after{top:var(--bs-popover-border-width);border-bottom-color:var(--bs-popover-bg)}.bs-popover-auto[data-popper-placement^=bottom] .popover-header::before,.bs-popover-bottom .popover-header::before{position:absolute;top:0;left:50%;display:block;width:var(--bs-popover-arrow-width);margin-left:calc(-.5 * var(--bs-popover-arrow-width));content:"";border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-header-bg)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow,.bs-popover-start>.popover-arrow{right:calc(-1 * (var(--bs-popover-arrow-height)) - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::after,.bs-popover-start>.popover-arrow::before{border-width:calc(var(--bs-popover-arrow-width) * .5) 0 calc(var(--bs-popover-arrow-width) * .5) var(--bs-popover-arrow-height)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::before{right:0;border-left-color:var(--bs-popover-arrow-border)}.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after,.bs-popover-start>.popover-arrow::after{right:var(--bs-popover-border-width);border-left-color:var(--bs-popover-bg)}.popover-header{padding:var(--bs-popover-header-padding-y) var(--bs-popover-header-padding-x);margin-bottom:0;font-size:var(--bs-popover-header-font-size);color:var(--bs-popover-header-color);background-color:var(--bs-popover-header-bg);border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-top-left-radius:var(--bs-popover-inner-border-radius);border-top-right-radius:var(--bs-popover-inner-border-radius)}.popover-header:empty{display:none}.popover-body{padding:var(--bs-popover-body-padding-y) var(--bs-popover-body-padding-x);color:var(--bs-popover-body-color)}.carousel{position:relative}.carousel.pointer-event{touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:""}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:transform .6s ease-in-out}@media (prefers-reduced-motion:reduce){.carousel-item{transition:none}}.carousel-item-next,.carousel-item-prev,.carousel-item.active{display:block}.active.carousel-item-end,.carousel-item-next:not(.carousel-item-start){transform:translateX(100%)}.active.carousel-item-start,.carousel-item-prev:not(.carousel-item-end){transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;transform:none}.carousel-fade .carousel-item-next.carousel-item-start,.carousel-fade .carousel-item-prev.carousel-item-end,.carousel-fade .carousel-item.active{z-index:1;opacity:1}.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{z-index:0;opacity:0;transition:opacity 0s .6s}@media (prefers-reduced-motion:reduce){.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{transition:none}}.carousel-control-next,.carousel-control-prev{position:absolute;top:0;bottom:0;z-index:1;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;border:0;opacity:.5;transition:opacity .15s ease}@media (prefers-reduced-motion:reduce){.carousel-control-next,.carousel-control-prev{transition:none}}.carousel-control-next:focus,.carousel-control-next:hover,.carousel-control-prev:focus,.carousel-control-prev:hover{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-next-icon,.carousel-control-prev-icon{display:inline-block;width:2rem;height:2rem;background-repeat:no-repeat;background-position:50%;background-size:100% 100%}.carousel-control-prev-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z'/%3e%3c/svg%3e")}.carousel-control-next-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:2;display:flex;justify-content:center;padding:0;margin-right:15%;margin-bottom:1rem;margin-left:15%}.carousel-indicators [data-bs-target]{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;padding:0;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border:0;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}@media (prefers-reduced-motion:reduce){.carousel-indicators [data-bs-target]{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:1.25rem;left:15%;padding-top:1.25rem;padding-bottom:1.25rem;color:#fff;text-align:center}.carousel-dark .carousel-control-next-icon,.carousel-dark .carousel-control-prev-icon{filter:invert(1) grayscale(100)}.carousel-dark .carousel-indicators [data-bs-target]{background-color:#000}.carousel-dark .carousel-caption{color:#000}[data-bs-theme=dark] .carousel .carousel-control-next-icon,[data-bs-theme=dark] .carousel .carousel-control-prev-icon,[data-bs-theme=dark].carousel .carousel-control-next-icon,[data-bs-theme=dark].carousel .carousel-control-prev-icon{filter:invert(1) grayscale(100)}[data-bs-theme=dark] .carousel .carousel-indicators [data-bs-target],[data-bs-theme=dark].carousel .carousel-indicators [data-bs-target]{background-color:#000}[data-bs-theme=dark] .carousel .carousel-caption,[data-bs-theme=dark].carousel .carousel-caption{color:#000}.spinner-border,.spinner-grow{display:inline-block;width:var(--bs-spinner-width);height:var(--bs-spinner-height);vertical-align:var(--bs-spinner-vertical-align);border-radius:50%;animation:var(--bs-spinner-animation-speed) linear infinite var(--bs-spinner-animation-name)}@keyframes spinner-border{to{transform:rotate(360deg)}}.spinner-border{--bs-spinner-width:2rem;--bs-spinner-height:2rem;--bs-spinner-vertical-align:-0.125em;--bs-spinner-border-width:0.25em;--bs-spinner-animation-speed:0.75s;--bs-spinner-animation-name:spinner-border;border:var(--bs-spinner-border-width) solid currentcolor;border-right-color:transparent}.spinner-border-sm{--bs-spinner-width:1rem;--bs-spinner-height:1rem;--bs-spinner-border-width:0.2em}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1;transform:none}}.spinner-grow{--bs-spinner-width:2rem;--bs-spinner-height:2rem;--bs-spinner-vertical-align:-0.125em;--bs-spinner-animation-speed:0.75s;--bs-spinner-animation-name:spinner-grow;background-color:currentcolor;opacity:0}.spinner-grow-sm{--bs-spinner-width:1rem;--bs-spinner-height:1rem}@media (prefers-reduced-motion:reduce){.spinner-border,.spinner-grow{--bs-spinner-animation-speed:1.5s}}.offcanvas,.offcanvas-lg,.offcanvas-md,.offcanvas-sm,.offcanvas-xl,.offcanvas-xxl{--bs-offcanvas-zindex:1045;--bs-offcanvas-width:400px;--bs-offcanvas-height:30vh;--bs-offcanvas-padding-x:1rem;--bs-offcanvas-padding-y:1rem;--bs-offcanvas-color:var(--bs-body-color);--bs-offcanvas-bg:var(--bs-body-bg);--bs-offcanvas-border-width:var(--bs-border-width);--bs-offcanvas-border-color:var(--bs-border-color-translucent);--bs-offcanvas-box-shadow:var(--bs-box-shadow-sm);--bs-offcanvas-transition:transform 0.3s ease-in-out;--bs-offcanvas-title-line-height:1.5}@media (max-width:575.98px){.offcanvas-sm{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:575.98px) and (prefers-reduced-motion:reduce){.offcanvas-sm{transition:none}}@media (max-width:575.98px){.offcanvas-sm.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-sm.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-sm.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-sm.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-sm.show:not(.hiding),.offcanvas-sm.showing{transform:none}.offcanvas-sm.hiding,.offcanvas-sm.show,.offcanvas-sm.showing{visibility:visible}}@media (min-width:576px){.offcanvas-sm{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-sm .offcanvas-header{display:none}.offcanvas-sm .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:767.98px){.offcanvas-md{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:767.98px) and (prefers-reduced-motion:reduce){.offcanvas-md{transition:none}}@media (max-width:767.98px){.offcanvas-md.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-md.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-md.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-md.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-md.show:not(.hiding),.offcanvas-md.showing{transform:none}.offcanvas-md.hiding,.offcanvas-md.show,.offcanvas-md.showing{visibility:visible}}@media (min-width:768px){.offcanvas-md{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-md .offcanvas-header{display:none}.offcanvas-md .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:991.98px){.offcanvas-lg{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:991.98px) and (prefers-reduced-motion:reduce){.offcanvas-lg{transition:none}}@media (max-width:991.98px){.offcanvas-lg.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-lg.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-lg.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-lg.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-lg.show:not(.hiding),.offcanvas-lg.showing{transform:none}.offcanvas-lg.hiding,.offcanvas-lg.show,.offcanvas-lg.showing{visibility:visible}}@media (min-width:992px){.offcanvas-lg{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-lg .offcanvas-header{display:none}.offcanvas-lg .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:1199.98px){.offcanvas-xl{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:1199.98px) and (prefers-reduced-motion:reduce){.offcanvas-xl{transition:none}}@media (max-width:1199.98px){.offcanvas-xl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-xl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-xl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-xl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-xl.show:not(.hiding),.offcanvas-xl.showing{transform:none}.offcanvas-xl.hiding,.offcanvas-xl.show,.offcanvas-xl.showing{visibility:visible}}@media (min-width:1200px){.offcanvas-xl{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-xl .offcanvas-header{display:none}.offcanvas-xl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}@media (max-width:1399.98px){.offcanvas-xxl{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}}@media (max-width:1399.98px) and (prefers-reduced-motion:reduce){.offcanvas-xxl{transition:none}}@media (max-width:1399.98px){.offcanvas-xxl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas-xxl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas-xxl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas-xxl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas-xxl.show:not(.hiding),.offcanvas-xxl.showing{transform:none}.offcanvas-xxl.hiding,.offcanvas-xxl.show,.offcanvas-xxl.showing{visibility:visible}}@media (min-width:1400px){.offcanvas-xxl{--bs-offcanvas-height:auto;--bs-offcanvas-border-width:0;background-color:transparent!important}.offcanvas-xxl .offcanvas-header{display:none}.offcanvas-xxl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:transparent!important}}.offcanvas{position:fixed;bottom:0;z-index:var(--bs-offcanvas-zindex);display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:var(--bs-offcanvas-transition)}@media (prefers-reduced-motion:reduce){.offcanvas{transition:none}}.offcanvas.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas.show:not(.hiding),.offcanvas.showing{transform:none}.offcanvas.hiding,.offcanvas.show,.offcanvas.showing{visibility:visible}.offcanvas-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.offcanvas-backdrop.fade{opacity:0}.offcanvas-backdrop.show{opacity:.5}.offcanvas-header{display:flex;align-items:center;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x)}.offcanvas-header .btn-close{padding:calc(var(--bs-offcanvas-padding-y) * .5) calc(var(--bs-offcanvas-padding-x) * .5);margin:calc(-.5 * var(--bs-offcanvas-padding-y)) calc(-.5 * var(--bs-offcanvas-padding-x)) calc(-.5 * var(--bs-offcanvas-padding-y)) auto}.offcanvas-title{margin-bottom:0;line-height:var(--bs-offcanvas-title-line-height)}.offcanvas-body{flex-grow:1;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x);overflow-y:auto}.placeholder{display:inline-block;min-height:1em;vertical-align:middle;cursor:wait;background-color:currentcolor;opacity:.5}.placeholder.btn::before{display:inline-block;content:""}.placeholder-xs{min-height:.6em}.placeholder-sm{min-height:.8em}.placeholder-lg{min-height:1.2em}.placeholder-glow .placeholder{animation:placeholder-glow 2s ease-in-out infinite}@keyframes placeholder-glow{50%{opacity:.2}}.placeholder-wave{-webkit-mask-image:linear-gradient(130deg,#000 55%,rgba(0,0,0,0.8) 75%,#000 95%);mask-image:linear-gradient(130deg,#000 55%,rgba(0,0,0,0.8) 75%,#000 95%);-webkit-mask-size:200% 100%;mask-size:200% 100%;animation:placeholder-wave 2s linear infinite}@keyframes placeholder-wave{100%{-webkit-mask-position:-200% 0%;mask-position:-200% 0%}}.clearfix::after{display:block;clear:both;content:""}.text-bg-primary{color:#fff!important;background-color:RGBA(var(--bs-primary-rgb),var(--bs-bg-opacity,1))!important}.text-bg-secondary{color:#fff!important;background-color:RGBA(var(--bs-secondary-rgb),var(--bs-bg-opacity,1))!important}.text-bg-success{color:#fff!important;background-color:RGBA(var(--bs-success-rgb),var(--bs-bg-opacity,1))!important}.text-bg-info{color:#000!important;background-color:RGBA(var(--bs-info-rgb),var(--bs-bg-opacity,1))!important}.text-bg-warning{color:#000!important;background-color:RGBA(var(--bs-warning-rgb),var(--bs-bg-opacity,1))!important}.text-bg-danger{color:#fff!important;background-color:RGBA(var(--bs-danger-rgb),var(--bs-bg-opacity,1))!important}.text-bg-light{color:#000!important;background-color:RGBA(var(--bs-light-rgb),var(--bs-bg-opacity,1))!important}.text-bg-dark{color:#fff!important;background-color:RGBA(var(--bs-dark-rgb),var(--bs-bg-opacity,1))!important}.link-primary{color:RGBA(var(--bs-primary-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-primary-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-primary-rgb),var(--bs-link-underline-opacity,1))!important}.link-primary:focus,.link-primary:hover{color:RGBA(10,88,202,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(10,88,202,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(10,88,202,var(--bs-link-underline-opacity,1))!important}.link-secondary{color:RGBA(var(--bs-secondary-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-secondary-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-secondary-rgb),var(--bs-link-underline-opacity,1))!important}.link-secondary:focus,.link-secondary:hover{color:RGBA(86,94,100,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(86,94,100,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(86,94,100,var(--bs-link-underline-opacity,1))!important}.link-success{color:RGBA(var(--bs-success-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-success-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-success-rgb),var(--bs-link-underline-opacity,1))!important}.link-success:focus,.link-success:hover{color:RGBA(20,108,67,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(20,108,67,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(20,108,67,var(--bs-link-underline-opacity,1))!important}.link-info{color:RGBA(var(--bs-info-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-info-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-info-rgb),var(--bs-link-underline-opacity,1))!important}.link-info:focus,.link-info:hover{color:RGBA(61,213,243,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(61,213,243,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(61,213,243,var(--bs-link-underline-opacity,1))!important}.link-warning{color:RGBA(var(--bs-warning-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-warning-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-warning-rgb),var(--bs-link-underline-opacity,1))!important}.link-warning:focus,.link-warning:hover{color:RGBA(255,205,57,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(255,205,57,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(255,205,57,var(--bs-link-underline-opacity,1))!important}.link-danger{color:RGBA(var(--bs-danger-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-danger-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-danger-rgb),var(--bs-link-underline-opacity,1))!important}.link-danger:focus,.link-danger:hover{color:RGBA(176,42,55,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(176,42,55,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(176,42,55,var(--bs-link-underline-opacity,1))!important}.link-light{color:RGBA(var(--bs-light-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-light-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-light-rgb),var(--bs-link-underline-opacity,1))!important}.link-light:focus,.link-light:hover{color:RGBA(249,250,251,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(249,250,251,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(249,250,251,var(--bs-link-underline-opacity,1))!important}.link-dark{color:RGBA(var(--bs-dark-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-dark-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-dark-rgb),var(--bs-link-underline-opacity,1))!important}.link-dark:focus,.link-dark:hover{color:RGBA(26,30,33,var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(26,30,33,var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(26,30,33,var(--bs-link-underline-opacity,1))!important}.link-body-emphasis{color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-opacity,1))!important;-webkit-text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,1))!important}.link-body-emphasis:focus,.link-body-emphasis:hover{color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-opacity,.75))!important;-webkit-text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,0.75))!important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb),var(--bs-link-underline-opacity,0.75))!important}.focus-ring:focus{outline:0;box-shadow:var(--bs-focus-ring-x,0) var(--bs-focus-ring-y,0) var(--bs-focus-ring-blur,0) var(--bs-focus-ring-width) var(--bs-focus-ring-color)}.icon-link{display:inline-flex;gap:.375rem;align-items:center;-webkit-text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,0.5));text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,0.5));text-underline-offset:0.25em;-webkit-backface-visibility:hidden;backface-visibility:hidden}.icon-link>.bi{flex-shrink:0;width:1em;height:1em;fill:currentcolor;transition:.2s ease-in-out transform}@media (prefers-reduced-motion:reduce){.icon-link>.bi{transition:none}}.icon-link-hover:focus-visible>.bi,.icon-link-hover:hover>.bi{transform:var(--bs-icon-link-transform,translate3d(.25em,0,0))}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:var(--bs-aspect-ratio);content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%}.ratio-1x1{--bs-aspect-ratio:100%}.ratio-4x3{--bs-aspect-ratio:75%}.ratio-16x9{--bs-aspect-ratio:56.25%}.ratio-21x9{--bs-aspect-ratio:42.8571428571%}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}@media (min-width:576px){.sticky-sm-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-sm-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:768px){.sticky-md-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-md-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:992px){.sticky-lg-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-lg-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:1200px){.sticky-xl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media (min-width:1400px){.sticky-xxl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xxl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}.hstack{display:flex;flex-direction:row;align-items:center;align-self:stretch}.vstack{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.visually-hidden,.visually-hidden-focusable:not(:focus):not(:focus-within){width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.visually-hidden-focusable:not(:focus):not(:focus-within):not(caption),.visually-hidden:not(caption){position:absolute!important}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:""}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vr{display:inline-block;align-self:stretch;width:var(--bs-border-width);min-height:1em;background-color:currentcolor;opacity:.25}.align-baseline{vertical-align:baseline!important}.align-top{vertical-align:top!important}.align-middle{vertical-align:middle!important}.align-bottom{vertical-align:bottom!important}.align-text-bottom{vertical-align:text-bottom!important}.align-text-top{vertical-align:text-top!important}.float-start{float:left!important}.float-end{float:right!important}.float-none{float:none!important}.object-fit-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-none{-o-object-fit:none!important;object-fit:none!important}.opacity-0{opacity:0!important}.opacity-25{opacity:.25!important}.opacity-50{opacity:.5!important}.opacity-75{opacity:.75!important}.opacity-100{opacity:1!important}.overflow-auto{overflow:auto!important}.overflow-hidden{overflow:hidden!important}.overflow-visible{overflow:visible!important}.overflow-scroll{overflow:scroll!important}.overflow-x-auto{overflow-x:auto!important}.overflow-x-hidden{overflow-x:hidden!important}.overflow-x-visible{overflow-x:visible!important}.overflow-x-scroll{overflow-x:scroll!important}.overflow-y-auto{overflow-y:auto!important}.overflow-y-hidden{overflow-y:hidden!important}.overflow-y-visible{overflow-y:visible!important}.overflow-y-scroll{overflow-y:scroll!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-grid{display:grid!important}.d-inline-grid{display:inline-grid!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}.d-none{display:none!important}.shadow{box-shadow:var(--bs-box-shadow)!important}.shadow-sm{box-shadow:var(--bs-box-shadow-sm)!important}.shadow-lg{box-shadow:var(--bs-box-shadow-lg)!important}.shadow-none{box-shadow:none!important}.focus-ring-primary{--bs-focus-ring-color:rgba(var(--bs-primary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-secondary{--bs-focus-ring-color:rgba(var(--bs-secondary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-success{--bs-focus-ring-color:rgba(var(--bs-success-rgb), var(--bs-focus-ring-opacity))}.focus-ring-info{--bs-focus-ring-color:rgba(var(--bs-info-rgb), var(--bs-focus-ring-opacity))}.focus-ring-warning{--bs-focus-ring-color:rgba(var(--bs-warning-rgb), var(--bs-focus-ring-opacity))}.focus-ring-danger{--bs-focus-ring-color:rgba(var(--bs-danger-rgb), var(--bs-focus-ring-opacity))}.focus-ring-light{--bs-focus-ring-color:rgba(var(--bs-light-rgb), var(--bs-focus-ring-opacity))}.focus-ring-dark{--bs-focus-ring-color:rgba(var(--bs-dark-rgb), var(--bs-focus-ring-opacity))}.position-static{position:static!important}.position-relative{position:relative!important}.position-absolute{position:absolute!important}.position-fixed{position:fixed!important}.position-sticky{position:-webkit-sticky!important;position:sticky!important}.top-0{top:0!important}.top-50{top:50%!important}.top-100{top:100%!important}.bottom-0{bottom:0!important}.bottom-50{bottom:50%!important}.bottom-100{bottom:100%!important}.start-0{left:0!important}.start-50{left:50%!important}.start-100{left:100%!important}.end-0{right:0!important}.end-50{right:50%!important}.end-100{right:100%!important}.translate-middle{transform:translate(-50%,-50%)!important}.translate-middle-x{transform:translateX(-50%)!important}.translate-middle-y{transform:translateY(-50%)!important}.border{border:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-0{border:0!important}.border-top{border-top:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-top-0{border-top:0!important}.border-end{border-right:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-end-0{border-right:0!important}.border-bottom{border-bottom:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-bottom-0{border-bottom:0!important}.border-start{border-left:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color)!important}.border-start-0{border-left:0!important}.border-primary{--bs-border-opacity:1;border-color:rgba(var(--bs-primary-rgb),var(--bs-border-opacity))!important}.border-secondary{--bs-border-opacity:1;border-color:rgba(var(--bs-secondary-rgb),var(--bs-border-opacity))!important}.border-success{--bs-border-opacity:1;border-color:rgba(var(--bs-success-rgb),var(--bs-border-opacity))!important}.border-info{--bs-border-opacity:1;border-color:rgba(var(--bs-info-rgb),var(--bs-border-opacity))!important}.border-warning{--bs-border-opacity:1;border-color:rgba(var(--bs-warning-rgb),var(--bs-border-opacity))!important}.border-danger{--bs-border-opacity:1;border-color:rgba(var(--bs-danger-rgb),var(--bs-border-opacity))!important}.border-light{--bs-border-opacity:1;border-color:rgba(var(--bs-light-rgb),var(--bs-border-opacity))!important}.border-dark{--bs-border-opacity:1;border-color:rgba(var(--bs-dark-rgb),var(--bs-border-opacity))!important}.border-black{--bs-border-opacity:1;border-color:rgba(var(--bs-black-rgb),var(--bs-border-opacity))!important}.border-white{--bs-border-opacity:1;border-color:rgba(var(--bs-white-rgb),var(--bs-border-opacity))!important}.border-primary-subtle{border-color:var(--bs-primary-border-subtle)!important}.border-secondary-subtle{border-color:var(--bs-secondary-border-subtle)!important}.border-success-subtle{border-color:var(--bs-success-border-subtle)!important}.border-info-subtle{border-color:var(--bs-info-border-subtle)!important}.border-warning-subtle{border-color:var(--bs-warning-border-subtle)!important}.border-danger-subtle{border-color:var(--bs-danger-border-subtle)!important}.border-light-subtle{border-color:var(--bs-light-border-subtle)!important}.border-dark-subtle{border-color:var(--bs-dark-border-subtle)!important}.border-1{border-width:1px!important}.border-2{border-width:2px!important}.border-3{border-width:3px!important}.border-4{border-width:4px!important}.border-5{border-width:5px!important}.border-opacity-10{--bs-border-opacity:0.1}.border-opacity-25{--bs-border-opacity:0.25}.border-opacity-50{--bs-border-opacity:0.5}.border-opacity-75{--bs-border-opacity:0.75}.border-opacity-100{--bs-border-opacity:1}.w-25{width:25%!important}.w-50{width:50%!important}.w-75{width:75%!important}.w-100{width:100%!important}.w-auto{width:auto!important}.mw-100{max-width:100%!important}.vw-100{width:100vw!important}.min-vw-100{min-width:100vw!important}.h-25{height:25%!important}.h-50{height:50%!important}.h-75{height:75%!important}.h-100{height:100%!important}.h-auto{height:auto!important}.mh-100{max-height:100%!important}.vh-100{height:100vh!important}.min-vh-100{min-height:100vh!important}.flex-fill{flex:1 1 auto!important}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-grow-0{flex-grow:0!important}.flex-grow-1{flex-grow:1!important}.flex-shrink-0{flex-shrink:0!important}.flex-shrink-1{flex-shrink:1!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.justify-content-evenly{justify-content:space-evenly!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{align-self:stretch!important}.order-first{order:-1!important}.order-0{order:0!important}.order-1{order:1!important}.order-2{order:2!important}.order-3{order:3!important}.order-4{order:4!important}.order-5{order:5!important}.order-last{order:6!important}.m-0{margin:0!important}.m-1{margin:.25rem!important}.m-2{margin:.5rem!important}.m-3{margin:1rem!important}.m-4{margin:1.5rem!important}.m-5{margin:3rem!important}.m-auto{margin:auto!important}.mx-0{margin-right:0!important;margin-left:0!important}.mx-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-3{margin-right:1rem!important;margin-left:1rem!important}.mx-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-5{margin-right:3rem!important;margin-left:3rem!important}.mx-auto{margin-right:auto!important;margin-left:auto!important}.my-0{margin-top:0!important;margin-bottom:0!important}.my-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-0{margin-top:0!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-5{margin-top:3rem!important}.mt-auto{margin-top:auto!important}.me-0{margin-right:0!important}.me-1{margin-right:.25rem!important}.me-2{margin-right:.5rem!important}.me-3{margin-right:1rem!important}.me-4{margin-right:1.5rem!important}.me-5{margin-right:3rem!important}.me-auto{margin-right:auto!important}.mb-0{margin-bottom:0!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.mb-auto{margin-bottom:auto!important}.ms-0{margin-left:0!important}.ms-1{margin-left:.25rem!important}.ms-2{margin-left:.5rem!important}.ms-3{margin-left:1rem!important}.ms-4{margin-left:1.5rem!important}.ms-5{margin-left:3rem!important}.ms-auto{margin-left:auto!important}.p-0{padding:0!important}.p-1{padding:.25rem!important}.p-2{padding:.5rem!important}.p-3{padding:1rem!important}.p-4{padding:1.5rem!important}.p-5{padding:3rem!important}.px-0{padding-right:0!important;padding-left:0!important}.px-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-3{padding-right:1rem!important;padding-left:1rem!important}.px-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-5{padding-right:3rem!important;padding-left:3rem!important}.py-0{padding-top:0!important;padding-bottom:0!important}.py-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-0{padding-top:0!important}.pt-1{padding-top:.25rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pe-0{padding-right:0!important}.pe-1{padding-right:.25rem!important}.pe-2{padding-right:.5rem!important}.pe-3{padding-right:1rem!important}.pe-4{padding-right:1.5rem!important}.pe-5{padding-right:3rem!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.ps-0{padding-left:0!important}.ps-1{padding-left:.25rem!important}.ps-2{padding-left:.5rem!important}.ps-3{padding-left:1rem!important}.ps-4{padding-left:1.5rem!important}.ps-5{padding-left:3rem!important}.gap-0{gap:0!important}.gap-1{gap:.25rem!important}.gap-2{gap:.5rem!important}.gap-3{gap:1rem!important}.gap-4{gap:1.5rem!important}.gap-5{gap:3rem!important}.row-gap-0{row-gap:0!important}.row-gap-1{row-gap:.25rem!important}.row-gap-2{row-gap:.5rem!important}.row-gap-3{row-gap:1rem!important}.row-gap-4{row-gap:1.5rem!important}.row-gap-5{row-gap:3rem!important}.column-gap-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.font-monospace{font-family:var(--bs-font-monospace)!important}.fs-1{font-size:calc(1.375rem + 1.5vw)!important}.fs-2{font-size:calc(1.325rem + .9vw)!important}.fs-3{font-size:calc(1.3rem + .6vw)!important}.fs-4{font-size:calc(1.275rem + .3vw)!important}.fs-5{font-size:1.25rem!important}.fs-6{font-size:1rem!important}.fst-italic{font-style:italic!important}.fst-normal{font-style:normal!important}.fw-lighter{font-weight:lighter!important}.fw-light{font-weight:300!important}.fw-normal{font-weight:400!important}.fw-medium{font-weight:500!important}.fw-semibold{font-weight:600!important}.fw-bold{font-weight:700!important}.fw-bolder{font-weight:bolder!important}.lh-1{line-height:1!important}.lh-sm{line-height:1.25!important}.lh-base{line-height:1.5!important}.lh-lg{line-height:2!important}.text-start{text-align:left!important}.text-end{text-align:right!important}.text-center{text-align:center!important}.text-decoration-none{text-decoration:none!important}.text-decoration-underline{text-decoration:underline!important}.text-decoration-line-through{text-decoration:line-through!important}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}.text-wrap{white-space:normal!important}.text-nowrap{white-space:nowrap!important}.text-break{word-wrap:break-word!important;word-break:break-word!important}.text-primary{--bs-text-opacity:1;color:rgba(var(--bs-primary-rgb),var(--bs-text-opacity))!important}.text-secondary{--bs-text-opacity:1;color:rgba(var(--bs-secondary-rgb),var(--bs-text-opacity))!important}.text-success{--bs-text-opacity:1;color:rgba(var(--bs-success-rgb),var(--bs-text-opacity))!important}.text-info{--bs-text-opacity:1;color:rgba(var(--bs-info-rgb),var(--bs-text-opacity))!important}.text-warning{--bs-text-opacity:1;color:rgba(var(--bs-warning-rgb),var(--bs-text-opacity))!important}.text-danger{--bs-text-opacity:1;color:rgba(var(--bs-danger-rgb),var(--bs-text-opacity))!important}.text-light{--bs-text-opacity:1;color:rgba(var(--bs-light-rgb),var(--bs-text-opacity))!important}.text-dark{--bs-text-opacity:1;color:rgba(var(--bs-dark-rgb),var(--bs-text-opacity))!important}.text-black{--bs-text-opacity:1;color:rgba(var(--bs-black-rgb),var(--bs-text-opacity))!important}.text-white{--bs-text-opacity:1;color:rgba(var(--bs-white-rgb),var(--bs-text-opacity))!important}.text-body{--bs-text-opacity:1;color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity))!important}.text-muted{--bs-text-opacity:1;color:var(--bs-secondary-color)!important}.text-black-50{--bs-text-opacity:1;color:rgba(0,0,0,.5)!important}.text-white-50{--bs-text-opacity:1;color:rgba(255,255,255,.5)!important}.text-body-secondary{--bs-text-opacity:1;color:var(--bs-secondary-color)!important}.text-body-tertiary{--bs-text-opacity:1;color:var(--bs-tertiary-color)!important}.text-body-emphasis{--bs-text-opacity:1;color:var(--bs-emphasis-color)!important}.text-reset{--bs-text-opacity:1;color:inherit!important}.text-opacity-25{--bs-text-opacity:0.25}.text-opacity-50{--bs-text-opacity:0.5}.text-opacity-75{--bs-text-opacity:0.75}.text-opacity-100{--bs-text-opacity:1}.text-primary-emphasis{color:var(--bs-primary-text-emphasis)!important}.text-secondary-emphasis{color:var(--bs-secondary-text-emphasis)!important}.text-success-emphasis{color:var(--bs-success-text-emphasis)!important}.text-info-emphasis{color:var(--bs-info-text-emphasis)!important}.text-warning-emphasis{color:var(--bs-warning-text-emphasis)!important}.text-danger-emphasis{color:var(--bs-danger-text-emphasis)!important}.text-light-emphasis{color:var(--bs-light-text-emphasis)!important}.text-dark-emphasis{color:var(--bs-dark-text-emphasis)!important}.link-opacity-10{--bs-link-opacity:0.1}.link-opacity-10-hover:hover{--bs-link-opacity:0.1}.link-opacity-25{--bs-link-opacity:0.25}.link-opacity-25-hover:hover{--bs-link-opacity:0.25}.link-opacity-50{--bs-link-opacity:0.5}.link-opacity-50-hover:hover{--bs-link-opacity:0.5}.link-opacity-75{--bs-link-opacity:0.75}.link-opacity-75-hover:hover{--bs-link-opacity:0.75}.link-opacity-100{--bs-link-opacity:1}.link-opacity-100-hover:hover{--bs-link-opacity:1}.link-offset-1{text-underline-offset:0.125em!important}.link-offset-1-hover:hover{text-underline-offset:0.125em!important}.link-offset-2{text-underline-offset:0.25em!important}.link-offset-2-hover:hover{text-underline-offset:0.25em!important}.link-offset-3{text-underline-offset:0.375em!important}.link-offset-3-hover:hover{text-underline-offset:0.375em!important}.link-underline-primary{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-primary-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-primary-rgb),var(--bs-link-underline-opacity))!important}.link-underline-secondary{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-secondary-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-secondary-rgb),var(--bs-link-underline-opacity))!important}.link-underline-success{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-success-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-success-rgb),var(--bs-link-underline-opacity))!important}.link-underline-info{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-info-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-info-rgb),var(--bs-link-underline-opacity))!important}.link-underline-warning{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-warning-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-warning-rgb),var(--bs-link-underline-opacity))!important}.link-underline-danger{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-danger-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-danger-rgb),var(--bs-link-underline-opacity))!important}.link-underline-light{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-light-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-light-rgb),var(--bs-link-underline-opacity))!important}.link-underline-dark{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-dark-rgb),var(--bs-link-underline-opacity))!important;text-decoration-color:rgba(var(--bs-dark-rgb),var(--bs-link-underline-opacity))!important}.link-underline{--bs-link-underline-opacity:1;-webkit-text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-underline-opacity,1))!important;text-decoration-color:rgba(var(--bs-link-color-rgb),var(--bs-link-underline-opacity,1))!important}.link-underline-opacity-0{--bs-link-underline-opacity:0}.link-underline-opacity-0-hover:hover{--bs-link-underline-opacity:0}.link-underline-opacity-10{--bs-link-underline-opacity:0.1}.link-underline-opacity-10-hover:hover{--bs-link-underline-opacity:0.1}.link-underline-opacity-25{--bs-link-underline-opacity:0.25}.link-underline-opacity-25-hover:hover{--bs-link-underline-opacity:0.25}.link-underline-opacity-50{--bs-link-underline-opacity:0.5}.link-underline-opacity-50-hover:hover{--bs-link-underline-opacity:0.5}.link-underline-opacity-75{--bs-link-underline-opacity:0.75}.link-underline-opacity-75-hover:hover{--bs-link-underline-opacity:0.75}.link-underline-opacity-100{--bs-link-underline-opacity:1}.link-underline-opacity-100-hover:hover{--bs-link-underline-opacity:1}.bg-primary{--bs-bg-opacity:1;background-color:rgba(var(--bs-primary-rgb),var(--bs-bg-opacity))!important}.bg-secondary{--bs-bg-opacity:1;background-color:rgba(var(--bs-secondary-rgb),var(--bs-bg-opacity))!important}.bg-success{--bs-bg-opacity:1;background-color:rgba(var(--bs-success-rgb),var(--bs-bg-opacity))!important}.bg-info{--bs-bg-opacity:1;background-color:rgba(var(--bs-info-rgb),var(--bs-bg-opacity))!important}.bg-warning{--bs-bg-opacity:1;background-color:rgba(var(--bs-warning-rgb),var(--bs-bg-opacity))!important}.bg-danger{--bs-bg-opacity:1;background-color:rgba(var(--bs-danger-rgb),var(--bs-bg-opacity))!important}.bg-light{--bs-bg-opacity:1;background-color:rgba(var(--bs-light-rgb),var(--bs-bg-opacity))!important}.bg-dark{--bs-bg-opacity:1;background-color:rgba(var(--bs-dark-rgb),var(--bs-bg-opacity))!important}.bg-black{--bs-bg-opacity:1;background-color:rgba(var(--bs-black-rgb),var(--bs-bg-opacity))!important}.bg-white{--bs-bg-opacity:1;background-color:rgba(var(--bs-white-rgb),var(--bs-bg-opacity))!important}.bg-body{--bs-bg-opacity:1;background-color:rgba(var(--bs-body-bg-rgb),var(--bs-bg-opacity))!important}.bg-transparent{--bs-bg-opacity:1;background-color:transparent!important}.bg-body-secondary{--bs-bg-opacity:1;background-color:rgba(var(--bs-secondary-bg-rgb),var(--bs-bg-opacity))!important}.bg-body-tertiary{--bs-bg-opacity:1;background-color:rgba(var(--bs-tertiary-bg-rgb),var(--bs-bg-opacity))!important}.bg-opacity-10{--bs-bg-opacity:0.1}.bg-opacity-25{--bs-bg-opacity:0.25}.bg-opacity-50{--bs-bg-opacity:0.5}.bg-opacity-75{--bs-bg-opacity:0.75}.bg-opacity-100{--bs-bg-opacity:1}.bg-primary-subtle{background-color:var(--bs-primary-bg-subtle)!important}.bg-secondary-subtle{background-color:var(--bs-secondary-bg-subtle)!important}.bg-success-subtle{background-color:var(--bs-success-bg-subtle)!important}.bg-info-subtle{background-color:var(--bs-info-bg-subtle)!important}.bg-warning-subtle{background-color:var(--bs-warning-bg-subtle)!important}.bg-danger-subtle{background-color:var(--bs-danger-bg-subtle)!important}.bg-light-subtle{background-color:var(--bs-light-bg-subtle)!important}.bg-dark-subtle{background-color:var(--bs-dark-bg-subtle)!important}.bg-gradient{background-image:var(--bs-gradient)!important}.user-select-all{-webkit-user-select:all!important;-moz-user-select:all!important;user-select:all!important}.user-select-auto{-webkit-user-select:auto!important;-moz-user-select:auto!important;user-select:auto!important}.user-select-none{-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important}.pe-none{pointer-events:none!important}.pe-auto{pointer-events:auto!important}.rounded{border-radius:var(--bs-border-radius)!important}.rounded-0{border-radius:0!important}.rounded-1{border-radius:var(--bs-border-radius-sm)!important}.rounded-2{border-radius:var(--bs-border-radius)!important}.rounded-3{border-radius:var(--bs-border-radius-lg)!important}.rounded-4{border-radius:var(--bs-border-radius-xl)!important}.rounded-5{border-radius:var(--bs-border-radius-xxl)!important}.rounded-circle{border-radius:50%!important}.rounded-pill{border-radius:var(--bs-border-radius-pill)!important}.rounded-top{border-top-left-radius:var(--bs-border-radius)!important;border-top-right-radius:var(--bs-border-radius)!important}.rounded-top-0{border-top-left-radius:0!important;border-top-right-radius:0!important}.rounded-top-1{border-top-left-radius:var(--bs-border-radius-sm)!important;border-top-right-radius:var(--bs-border-radius-sm)!important}.rounded-top-2{border-top-left-radius:var(--bs-border-radius)!important;border-top-right-radius:var(--bs-border-radius)!important}.rounded-top-3{border-top-left-radius:var(--bs-border-radius-lg)!important;border-top-right-radius:var(--bs-border-radius-lg)!important}.rounded-top-4{border-top-left-radius:var(--bs-border-radius-xl)!important;border-top-right-radius:var(--bs-border-radius-xl)!important}.rounded-top-5{border-top-left-radius:var(--bs-border-radius-xxl)!important;border-top-right-radius:var(--bs-border-radius-xxl)!important}.rounded-top-circle{border-top-left-radius:50%!important;border-top-right-radius:50%!important}.rounded-top-pill{border-top-left-radius:var(--bs-border-radius-pill)!important;border-top-right-radius:var(--bs-border-radius-pill)!important}.rounded-end{border-top-right-radius:var(--bs-border-radius)!important;border-bottom-right-radius:var(--bs-border-radius)!important}.rounded-end-0{border-top-right-radius:0!important;border-bottom-right-radius:0!important}.rounded-end-1{border-top-right-radius:var(--bs-border-radius-sm)!important;border-bottom-right-radius:var(--bs-border-radius-sm)!important}.rounded-end-2{border-top-right-radius:var(--bs-border-radius)!important;border-bottom-right-radius:var(--bs-border-radius)!important}.rounded-end-3{border-top-right-radius:var(--bs-border-radius-lg)!important;border-bottom-right-radius:var(--bs-border-radius-lg)!important}.rounded-end-4{border-top-right-radius:var(--bs-border-radius-xl)!important;border-bottom-right-radius:var(--bs-border-radius-xl)!important}.rounded-end-5{border-top-right-radius:var(--bs-border-radius-xxl)!important;border-bottom-right-radius:var(--bs-border-radius-xxl)!important}.rounded-end-circle{border-top-right-radius:50%!important;border-bottom-right-radius:50%!important}.rounded-end-pill{border-top-right-radius:var(--bs-border-radius-pill)!important;border-bottom-right-radius:var(--bs-border-radius-pill)!important}.rounded-bottom{border-bottom-right-radius:var(--bs-border-radius)!important;border-bottom-left-radius:var(--bs-border-radius)!important}.rounded-bottom-0{border-bottom-right-radius:0!important;border-bottom-left-radius:0!important}.rounded-bottom-1{border-bottom-right-radius:var(--bs-border-radius-sm)!important;border-bottom-left-radius:var(--bs-border-radius-sm)!important}.rounded-bottom-2{border-bottom-right-radius:var(--bs-border-radius)!important;border-bottom-left-radius:var(--bs-border-radius)!important}.rounded-bottom-3{border-bottom-right-radius:var(--bs-border-radius-lg)!important;border-bottom-left-radius:var(--bs-border-radius-lg)!important}.rounded-bottom-4{border-bottom-right-radius:var(--bs-border-radius-xl)!important;border-bottom-left-radius:var(--bs-border-radius-xl)!important}.rounded-bottom-5{border-bottom-right-radius:var(--bs-border-radius-xxl)!important;border-bottom-left-radius:var(--bs-border-radius-xxl)!important}.rounded-bottom-circle{border-bottom-right-radius:50%!important;border-bottom-left-radius:50%!important}.rounded-bottom-pill{border-bottom-right-radius:var(--bs-border-radius-pill)!important;border-bottom-left-radius:var(--bs-border-radius-pill)!important}.rounded-start{border-bottom-left-radius:var(--bs-border-radius)!important;border-top-left-radius:var(--bs-border-radius)!important}.rounded-start-0{border-bottom-left-radius:0!important;border-top-left-radius:0!important}.rounded-start-1{border-bottom-left-radius:var(--bs-border-radius-sm)!important;border-top-left-radius:var(--bs-border-radius-sm)!important}.rounded-start-2{border-bottom-left-radius:var(--bs-border-radius)!important;border-top-left-radius:var(--bs-border-radius)!important}.rounded-start-3{border-bottom-left-radius:var(--bs-border-radius-lg)!important;border-top-left-radius:var(--bs-border-radius-lg)!important}.rounded-start-4{border-bottom-left-radius:var(--bs-border-radius-xl)!important;border-top-left-radius:var(--bs-border-radius-xl)!important}.rounded-start-5{border-bottom-left-radius:var(--bs-border-radius-xxl)!important;border-top-left-radius:var(--bs-border-radius-xxl)!important}.rounded-start-circle{border-bottom-left-radius:50%!important;border-top-left-radius:50%!important}.rounded-start-pill{border-bottom-left-radius:var(--bs-border-radius-pill)!important;border-top-left-radius:var(--bs-border-radius-pill)!important}.visible{visibility:visible!important}.invisible{visibility:hidden!important}.z-n1{z-index:-1!important}.z-0{z-index:0!important}.z-1{z-index:1!important}.z-2{z-index:2!important}.z-3{z-index:3!important}@media (min-width:576px){.float-sm-start{float:left!important}.float-sm-end{float:right!important}.float-sm-none{float:none!important}.object-fit-sm-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-sm-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-sm-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-sm-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-sm-none{-o-object-fit:none!important;object-fit:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-grid{display:grid!important}.d-sm-inline-grid{display:inline-grid!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:flex!important}.d-sm-inline-flex{display:inline-flex!important}.d-sm-none{display:none!important}.flex-sm-fill{flex:1 1 auto!important}.flex-sm-row{flex-direction:row!important}.flex-sm-column{flex-direction:column!important}.flex-sm-row-reverse{flex-direction:row-reverse!important}.flex-sm-column-reverse{flex-direction:column-reverse!important}.flex-sm-grow-0{flex-grow:0!important}.flex-sm-grow-1{flex-grow:1!important}.flex-sm-shrink-0{flex-shrink:0!important}.flex-sm-shrink-1{flex-shrink:1!important}.flex-sm-wrap{flex-wrap:wrap!important}.flex-sm-nowrap{flex-wrap:nowrap!important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-sm-start{justify-content:flex-start!important}.justify-content-sm-end{justify-content:flex-end!important}.justify-content-sm-center{justify-content:center!important}.justify-content-sm-between{justify-content:space-between!important}.justify-content-sm-around{justify-content:space-around!important}.justify-content-sm-evenly{justify-content:space-evenly!important}.align-items-sm-start{align-items:flex-start!important}.align-items-sm-end{align-items:flex-end!important}.align-items-sm-center{align-items:center!important}.align-items-sm-baseline{align-items:baseline!important}.align-items-sm-stretch{align-items:stretch!important}.align-content-sm-start{align-content:flex-start!important}.align-content-sm-end{align-content:flex-end!important}.align-content-sm-center{align-content:center!important}.align-content-sm-between{align-content:space-between!important}.align-content-sm-around{align-content:space-around!important}.align-content-sm-stretch{align-content:stretch!important}.align-self-sm-auto{align-self:auto!important}.align-self-sm-start{align-self:flex-start!important}.align-self-sm-end{align-self:flex-end!important}.align-self-sm-center{align-self:center!important}.align-self-sm-baseline{align-self:baseline!important}.align-self-sm-stretch{align-self:stretch!important}.order-sm-first{order:-1!important}.order-sm-0{order:0!important}.order-sm-1{order:1!important}.order-sm-2{order:2!important}.order-sm-3{order:3!important}.order-sm-4{order:4!important}.order-sm-5{order:5!important}.order-sm-last{order:6!important}.m-sm-0{margin:0!important}.m-sm-1{margin:.25rem!important}.m-sm-2{margin:.5rem!important}.m-sm-3{margin:1rem!important}.m-sm-4{margin:1.5rem!important}.m-sm-5{margin:3rem!important}.m-sm-auto{margin:auto!important}.mx-sm-0{margin-right:0!important;margin-left:0!important}.mx-sm-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-sm-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-sm-3{margin-right:1rem!important;margin-left:1rem!important}.mx-sm-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-sm-5{margin-right:3rem!important;margin-left:3rem!important}.mx-sm-auto{margin-right:auto!important;margin-left:auto!important}.my-sm-0{margin-top:0!important;margin-bottom:0!important}.my-sm-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-sm-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-sm-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-sm-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-sm-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-sm-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-sm-0{margin-top:0!important}.mt-sm-1{margin-top:.25rem!important}.mt-sm-2{margin-top:.5rem!important}.mt-sm-3{margin-top:1rem!important}.mt-sm-4{margin-top:1.5rem!important}.mt-sm-5{margin-top:3rem!important}.mt-sm-auto{margin-top:auto!important}.me-sm-0{margin-right:0!important}.me-sm-1{margin-right:.25rem!important}.me-sm-2{margin-right:.5rem!important}.me-sm-3{margin-right:1rem!important}.me-sm-4{margin-right:1.5rem!important}.me-sm-5{margin-right:3rem!important}.me-sm-auto{margin-right:auto!important}.mb-sm-0{margin-bottom:0!important}.mb-sm-1{margin-bottom:.25rem!important}.mb-sm-2{margin-bottom:.5rem!important}.mb-sm-3{margin-bottom:1rem!important}.mb-sm-4{margin-bottom:1.5rem!important}.mb-sm-5{margin-bottom:3rem!important}.mb-sm-auto{margin-bottom:auto!important}.ms-sm-0{margin-left:0!important}.ms-sm-1{margin-left:.25rem!important}.ms-sm-2{margin-left:.5rem!important}.ms-sm-3{margin-left:1rem!important}.ms-sm-4{margin-left:1.5rem!important}.ms-sm-5{margin-left:3rem!important}.ms-sm-auto{margin-left:auto!important}.p-sm-0{padding:0!important}.p-sm-1{padding:.25rem!important}.p-sm-2{padding:.5rem!important}.p-sm-3{padding:1rem!important}.p-sm-4{padding:1.5rem!important}.p-sm-5{padding:3rem!important}.px-sm-0{padding-right:0!important;padding-left:0!important}.px-sm-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-sm-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-sm-3{padding-right:1rem!important;padding-left:1rem!important}.px-sm-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-sm-5{padding-right:3rem!important;padding-left:3rem!important}.py-sm-0{padding-top:0!important;padding-bottom:0!important}.py-sm-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-sm-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-sm-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-sm-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-sm-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-sm-0{padding-top:0!important}.pt-sm-1{padding-top:.25rem!important}.pt-sm-2{padding-top:.5rem!important}.pt-sm-3{padding-top:1rem!important}.pt-sm-4{padding-top:1.5rem!important}.pt-sm-5{padding-top:3rem!important}.pe-sm-0{padding-right:0!important}.pe-sm-1{padding-right:.25rem!important}.pe-sm-2{padding-right:.5rem!important}.pe-sm-3{padding-right:1rem!important}.pe-sm-4{padding-right:1.5rem!important}.pe-sm-5{padding-right:3rem!important}.pb-sm-0{padding-bottom:0!important}.pb-sm-1{padding-bottom:.25rem!important}.pb-sm-2{padding-bottom:.5rem!important}.pb-sm-3{padding-bottom:1rem!important}.pb-sm-4{padding-bottom:1.5rem!important}.pb-sm-5{padding-bottom:3rem!important}.ps-sm-0{padding-left:0!important}.ps-sm-1{padding-left:.25rem!important}.ps-sm-2{padding-left:.5rem!important}.ps-sm-3{padding-left:1rem!important}.ps-sm-4{padding-left:1.5rem!important}.ps-sm-5{padding-left:3rem!important}.gap-sm-0{gap:0!important}.gap-sm-1{gap:.25rem!important}.gap-sm-2{gap:.5rem!important}.gap-sm-3{gap:1rem!important}.gap-sm-4{gap:1.5rem!important}.gap-sm-5{gap:3rem!important}.row-gap-sm-0{row-gap:0!important}.row-gap-sm-1{row-gap:.25rem!important}.row-gap-sm-2{row-gap:.5rem!important}.row-gap-sm-3{row-gap:1rem!important}.row-gap-sm-4{row-gap:1.5rem!important}.row-gap-sm-5{row-gap:3rem!important}.column-gap-sm-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-sm-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-sm-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-sm-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-sm-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-sm-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-sm-start{text-align:left!important}.text-sm-end{text-align:right!important}.text-sm-center{text-align:center!important}}@media (min-width:768px){.float-md-start{float:left!important}.float-md-end{float:right!important}.float-md-none{float:none!important}.object-fit-md-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-md-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-md-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-md-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-md-none{-o-object-fit:none!important;object-fit:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-grid{display:grid!important}.d-md-inline-grid{display:inline-grid!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:flex!important}.d-md-inline-flex{display:inline-flex!important}.d-md-none{display:none!important}.flex-md-fill{flex:1 1 auto!important}.flex-md-row{flex-direction:row!important}.flex-md-column{flex-direction:column!important}.flex-md-row-reverse{flex-direction:row-reverse!important}.flex-md-column-reverse{flex-direction:column-reverse!important}.flex-md-grow-0{flex-grow:0!important}.flex-md-grow-1{flex-grow:1!important}.flex-md-shrink-0{flex-shrink:0!important}.flex-md-shrink-1{flex-shrink:1!important}.flex-md-wrap{flex-wrap:wrap!important}.flex-md-nowrap{flex-wrap:nowrap!important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-md-start{justify-content:flex-start!important}.justify-content-md-end{justify-content:flex-end!important}.justify-content-md-center{justify-content:center!important}.justify-content-md-between{justify-content:space-between!important}.justify-content-md-around{justify-content:space-around!important}.justify-content-md-evenly{justify-content:space-evenly!important}.align-items-md-start{align-items:flex-start!important}.align-items-md-end{align-items:flex-end!important}.align-items-md-center{align-items:center!important}.align-items-md-baseline{align-items:baseline!important}.align-items-md-stretch{align-items:stretch!important}.align-content-md-start{align-content:flex-start!important}.align-content-md-end{align-content:flex-end!important}.align-content-md-center{align-content:center!important}.align-content-md-between{align-content:space-between!important}.align-content-md-around{align-content:space-around!important}.align-content-md-stretch{align-content:stretch!important}.align-self-md-auto{align-self:auto!important}.align-self-md-start{align-self:flex-start!important}.align-self-md-end{align-self:flex-end!important}.align-self-md-center{align-self:center!important}.align-self-md-baseline{align-self:baseline!important}.align-self-md-stretch{align-self:stretch!important}.order-md-first{order:-1!important}.order-md-0{order:0!important}.order-md-1{order:1!important}.order-md-2{order:2!important}.order-md-3{order:3!important}.order-md-4{order:4!important}.order-md-5{order:5!important}.order-md-last{order:6!important}.m-md-0{margin:0!important}.m-md-1{margin:.25rem!important}.m-md-2{margin:.5rem!important}.m-md-3{margin:1rem!important}.m-md-4{margin:1.5rem!important}.m-md-5{margin:3rem!important}.m-md-auto{margin:auto!important}.mx-md-0{margin-right:0!important;margin-left:0!important}.mx-md-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-md-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-md-3{margin-right:1rem!important;margin-left:1rem!important}.mx-md-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-md-5{margin-right:3rem!important;margin-left:3rem!important}.mx-md-auto{margin-right:auto!important;margin-left:auto!important}.my-md-0{margin-top:0!important;margin-bottom:0!important}.my-md-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-md-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-md-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-md-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-md-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-md-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-md-0{margin-top:0!important}.mt-md-1{margin-top:.25rem!important}.mt-md-2{margin-top:.5rem!important}.mt-md-3{margin-top:1rem!important}.mt-md-4{margin-top:1.5rem!important}.mt-md-5{margin-top:3rem!important}.mt-md-auto{margin-top:auto!important}.me-md-0{margin-right:0!important}.me-md-1{margin-right:.25rem!important}.me-md-2{margin-right:.5rem!important}.me-md-3{margin-right:1rem!important}.me-md-4{margin-right:1.5rem!important}.me-md-5{margin-right:3rem!important}.me-md-auto{margin-right:auto!important}.mb-md-0{margin-bottom:0!important}.mb-md-1{margin-bottom:.25rem!important}.mb-md-2{margin-bottom:.5rem!important}.mb-md-3{margin-bottom:1rem!important}.mb-md-4{margin-bottom:1.5rem!important}.mb-md-5{margin-bottom:3rem!important}.mb-md-auto{margin-bottom:auto!important}.ms-md-0{margin-left:0!important}.ms-md-1{margin-left:.25rem!important}.ms-md-2{margin-left:.5rem!important}.ms-md-3{margin-left:1rem!important}.ms-md-4{margin-left:1.5rem!important}.ms-md-5{margin-left:3rem!important}.ms-md-auto{margin-left:auto!important}.p-md-0{padding:0!important}.p-md-1{padding:.25rem!important}.p-md-2{padding:.5rem!important}.p-md-3{padding:1rem!important}.p-md-4{padding:1.5rem!important}.p-md-5{padding:3rem!important}.px-md-0{padding-right:0!important;padding-left:0!important}.px-md-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-md-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-md-3{padding-right:1rem!important;padding-left:1rem!important}.px-md-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-md-5{padding-right:3rem!important;padding-left:3rem!important}.py-md-0{padding-top:0!important;padding-bottom:0!important}.py-md-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-md-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-md-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-md-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-md-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-md-0{padding-top:0!important}.pt-md-1{padding-top:.25rem!important}.pt-md-2{padding-top:.5rem!important}.pt-md-3{padding-top:1rem!important}.pt-md-4{padding-top:1.5rem!important}.pt-md-5{padding-top:3rem!important}.pe-md-0{padding-right:0!important}.pe-md-1{padding-right:.25rem!important}.pe-md-2{padding-right:.5rem!important}.pe-md-3{padding-right:1rem!important}.pe-md-4{padding-right:1.5rem!important}.pe-md-5{padding-right:3rem!important}.pb-md-0{padding-bottom:0!important}.pb-md-1{padding-bottom:.25rem!important}.pb-md-2{padding-bottom:.5rem!important}.pb-md-3{padding-bottom:1rem!important}.pb-md-4{padding-bottom:1.5rem!important}.pb-md-5{padding-bottom:3rem!important}.ps-md-0{padding-left:0!important}.ps-md-1{padding-left:.25rem!important}.ps-md-2{padding-left:.5rem!important}.ps-md-3{padding-left:1rem!important}.ps-md-4{padding-left:1.5rem!important}.ps-md-5{padding-left:3rem!important}.gap-md-0{gap:0!important}.gap-md-1{gap:.25rem!important}.gap-md-2{gap:.5rem!important}.gap-md-3{gap:1rem!important}.gap-md-4{gap:1.5rem!important}.gap-md-5{gap:3rem!important}.row-gap-md-0{row-gap:0!important}.row-gap-md-1{row-gap:.25rem!important}.row-gap-md-2{row-gap:.5rem!important}.row-gap-md-3{row-gap:1rem!important}.row-gap-md-4{row-gap:1.5rem!important}.row-gap-md-5{row-gap:3rem!important}.column-gap-md-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-md-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-md-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-md-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-md-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-md-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-md-start{text-align:left!important}.text-md-end{text-align:right!important}.text-md-center{text-align:center!important}}@media (min-width:992px){.float-lg-start{float:left!important}.float-lg-end{float:right!important}.float-lg-none{float:none!important}.object-fit-lg-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-lg-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-lg-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-lg-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-lg-none{-o-object-fit:none!important;object-fit:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-grid{display:grid!important}.d-lg-inline-grid{display:inline-grid!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:flex!important}.d-lg-inline-flex{display:inline-flex!important}.d-lg-none{display:none!important}.flex-lg-fill{flex:1 1 auto!important}.flex-lg-row{flex-direction:row!important}.flex-lg-column{flex-direction:column!important}.flex-lg-row-reverse{flex-direction:row-reverse!important}.flex-lg-column-reverse{flex-direction:column-reverse!important}.flex-lg-grow-0{flex-grow:0!important}.flex-lg-grow-1{flex-grow:1!important}.flex-lg-shrink-0{flex-shrink:0!important}.flex-lg-shrink-1{flex-shrink:1!important}.flex-lg-wrap{flex-wrap:wrap!important}.flex-lg-nowrap{flex-wrap:nowrap!important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-lg-start{justify-content:flex-start!important}.justify-content-lg-end{justify-content:flex-end!important}.justify-content-lg-center{justify-content:center!important}.justify-content-lg-between{justify-content:space-between!important}.justify-content-lg-around{justify-content:space-around!important}.justify-content-lg-evenly{justify-content:space-evenly!important}.align-items-lg-start{align-items:flex-start!important}.align-items-lg-end{align-items:flex-end!important}.align-items-lg-center{align-items:center!important}.align-items-lg-baseline{align-items:baseline!important}.align-items-lg-stretch{align-items:stretch!important}.align-content-lg-start{align-content:flex-start!important}.align-content-lg-end{align-content:flex-end!important}.align-content-lg-center{align-content:center!important}.align-content-lg-between{align-content:space-between!important}.align-content-lg-around{align-content:space-around!important}.align-content-lg-stretch{align-content:stretch!important}.align-self-lg-auto{align-self:auto!important}.align-self-lg-start{align-self:flex-start!important}.align-self-lg-end{align-self:flex-end!important}.align-self-lg-center{align-self:center!important}.align-self-lg-baseline{align-self:baseline!important}.align-self-lg-stretch{align-self:stretch!important}.order-lg-first{order:-1!important}.order-lg-0{order:0!important}.order-lg-1{order:1!important}.order-lg-2{order:2!important}.order-lg-3{order:3!important}.order-lg-4{order:4!important}.order-lg-5{order:5!important}.order-lg-last{order:6!important}.m-lg-0{margin:0!important}.m-lg-1{margin:.25rem!important}.m-lg-2{margin:.5rem!important}.m-lg-3{margin:1rem!important}.m-lg-4{margin:1.5rem!important}.m-lg-5{margin:3rem!important}.m-lg-auto{margin:auto!important}.mx-lg-0{margin-right:0!important;margin-left:0!important}.mx-lg-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-lg-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-lg-3{margin-right:1rem!important;margin-left:1rem!important}.mx-lg-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-lg-5{margin-right:3rem!important;margin-left:3rem!important}.mx-lg-auto{margin-right:auto!important;margin-left:auto!important}.my-lg-0{margin-top:0!important;margin-bottom:0!important}.my-lg-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-lg-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-lg-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-lg-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-lg-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-lg-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-lg-0{margin-top:0!important}.mt-lg-1{margin-top:.25rem!important}.mt-lg-2{margin-top:.5rem!important}.mt-lg-3{margin-top:1rem!important}.mt-lg-4{margin-top:1.5rem!important}.mt-lg-5{margin-top:3rem!important}.mt-lg-auto{margin-top:auto!important}.me-lg-0{margin-right:0!important}.me-lg-1{margin-right:.25rem!important}.me-lg-2{margin-right:.5rem!important}.me-lg-3{margin-right:1rem!important}.me-lg-4{margin-right:1.5rem!important}.me-lg-5{margin-right:3rem!important}.me-lg-auto{margin-right:auto!important}.mb-lg-0{margin-bottom:0!important}.mb-lg-1{margin-bottom:.25rem!important}.mb-lg-2{margin-bottom:.5rem!important}.mb-lg-3{margin-bottom:1rem!important}.mb-lg-4{margin-bottom:1.5rem!important}.mb-lg-5{margin-bottom:3rem!important}.mb-lg-auto{margin-bottom:auto!important}.ms-lg-0{margin-left:0!important}.ms-lg-1{margin-left:.25rem!important}.ms-lg-2{margin-left:.5rem!important}.ms-lg-3{margin-left:1rem!important}.ms-lg-4{margin-left:1.5rem!important}.ms-lg-5{margin-left:3rem!important}.ms-lg-auto{margin-left:auto!important}.p-lg-0{padding:0!important}.p-lg-1{padding:.25rem!important}.p-lg-2{padding:.5rem!important}.p-lg-3{padding:1rem!important}.p-lg-4{padding:1.5rem!important}.p-lg-5{padding:3rem!important}.px-lg-0{padding-right:0!important;padding-left:0!important}.px-lg-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-lg-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-lg-3{padding-right:1rem!important;padding-left:1rem!important}.px-lg-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-lg-5{padding-right:3rem!important;padding-left:3rem!important}.py-lg-0{padding-top:0!important;padding-bottom:0!important}.py-lg-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-lg-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-lg-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-lg-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-lg-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-lg-0{padding-top:0!important}.pt-lg-1{padding-top:.25rem!important}.pt-lg-2{padding-top:.5rem!important}.pt-lg-3{padding-top:1rem!important}.pt-lg-4{padding-top:1.5rem!important}.pt-lg-5{padding-top:3rem!important}.pe-lg-0{padding-right:0!important}.pe-lg-1{padding-right:.25rem!important}.pe-lg-2{padding-right:.5rem!important}.pe-lg-3{padding-right:1rem!important}.pe-lg-4{padding-right:1.5rem!important}.pe-lg-5{padding-right:3rem!important}.pb-lg-0{padding-bottom:0!important}.pb-lg-1{padding-bottom:.25rem!important}.pb-lg-2{padding-bottom:.5rem!important}.pb-lg-3{padding-bottom:1rem!important}.pb-lg-4{padding-bottom:1.5rem!important}.pb-lg-5{padding-bottom:3rem!important}.ps-lg-0{padding-left:0!important}.ps-lg-1{padding-left:.25rem!important}.ps-lg-2{padding-left:.5rem!important}.ps-lg-3{padding-left:1rem!important}.ps-lg-4{padding-left:1.5rem!important}.ps-lg-5{padding-left:3rem!important}.gap-lg-0{gap:0!important}.gap-lg-1{gap:.25rem!important}.gap-lg-2{gap:.5rem!important}.gap-lg-3{gap:1rem!important}.gap-lg-4{gap:1.5rem!important}.gap-lg-5{gap:3rem!important}.row-gap-lg-0{row-gap:0!important}.row-gap-lg-1{row-gap:.25rem!important}.row-gap-lg-2{row-gap:.5rem!important}.row-gap-lg-3{row-gap:1rem!important}.row-gap-lg-4{row-gap:1.5rem!important}.row-gap-lg-5{row-gap:3rem!important}.column-gap-lg-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-lg-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-lg-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-lg-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-lg-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-lg-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-lg-start{text-align:left!important}.text-lg-end{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.float-xl-start{float:left!important}.float-xl-end{float:right!important}.float-xl-none{float:none!important}.object-fit-xl-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-xl-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-xl-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-xl-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-xl-none{-o-object-fit:none!important;object-fit:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-grid{display:grid!important}.d-xl-inline-grid{display:inline-grid!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:flex!important}.d-xl-inline-flex{display:inline-flex!important}.d-xl-none{display:none!important}.flex-xl-fill{flex:1 1 auto!important}.flex-xl-row{flex-direction:row!important}.flex-xl-column{flex-direction:column!important}.flex-xl-row-reverse{flex-direction:row-reverse!important}.flex-xl-column-reverse{flex-direction:column-reverse!important}.flex-xl-grow-0{flex-grow:0!important}.flex-xl-grow-1{flex-grow:1!important}.flex-xl-shrink-0{flex-shrink:0!important}.flex-xl-shrink-1{flex-shrink:1!important}.flex-xl-wrap{flex-wrap:wrap!important}.flex-xl-nowrap{flex-wrap:nowrap!important}.flex-xl-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xl-start{justify-content:flex-start!important}.justify-content-xl-end{justify-content:flex-end!important}.justify-content-xl-center{justify-content:center!important}.justify-content-xl-between{justify-content:space-between!important}.justify-content-xl-around{justify-content:space-around!important}.justify-content-xl-evenly{justify-content:space-evenly!important}.align-items-xl-start{align-items:flex-start!important}.align-items-xl-end{align-items:flex-end!important}.align-items-xl-center{align-items:center!important}.align-items-xl-baseline{align-items:baseline!important}.align-items-xl-stretch{align-items:stretch!important}.align-content-xl-start{align-content:flex-start!important}.align-content-xl-end{align-content:flex-end!important}.align-content-xl-center{align-content:center!important}.align-content-xl-between{align-content:space-between!important}.align-content-xl-around{align-content:space-around!important}.align-content-xl-stretch{align-content:stretch!important}.align-self-xl-auto{align-self:auto!important}.align-self-xl-start{align-self:flex-start!important}.align-self-xl-end{align-self:flex-end!important}.align-self-xl-center{align-self:center!important}.align-self-xl-baseline{align-self:baseline!important}.align-self-xl-stretch{align-self:stretch!important}.order-xl-first{order:-1!important}.order-xl-0{order:0!important}.order-xl-1{order:1!important}.order-xl-2{order:2!important}.order-xl-3{order:3!important}.order-xl-4{order:4!important}.order-xl-5{order:5!important}.order-xl-last{order:6!important}.m-xl-0{margin:0!important}.m-xl-1{margin:.25rem!important}.m-xl-2{margin:.5rem!important}.m-xl-3{margin:1rem!important}.m-xl-4{margin:1.5rem!important}.m-xl-5{margin:3rem!important}.m-xl-auto{margin:auto!important}.mx-xl-0{margin-right:0!important;margin-left:0!important}.mx-xl-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-xl-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-xl-3{margin-right:1rem!important;margin-left:1rem!important}.mx-xl-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-xl-5{margin-right:3rem!important;margin-left:3rem!important}.mx-xl-auto{margin-right:auto!important;margin-left:auto!important}.my-xl-0{margin-top:0!important;margin-bottom:0!important}.my-xl-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-xl-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-xl-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-xl-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-xl-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-xl-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-xl-0{margin-top:0!important}.mt-xl-1{margin-top:.25rem!important}.mt-xl-2{margin-top:.5rem!important}.mt-xl-3{margin-top:1rem!important}.mt-xl-4{margin-top:1.5rem!important}.mt-xl-5{margin-top:3rem!important}.mt-xl-auto{margin-top:auto!important}.me-xl-0{margin-right:0!important}.me-xl-1{margin-right:.25rem!important}.me-xl-2{margin-right:.5rem!important}.me-xl-3{margin-right:1rem!important}.me-xl-4{margin-right:1.5rem!important}.me-xl-5{margin-right:3rem!important}.me-xl-auto{margin-right:auto!important}.mb-xl-0{margin-bottom:0!important}.mb-xl-1{margin-bottom:.25rem!important}.mb-xl-2{margin-bottom:.5rem!important}.mb-xl-3{margin-bottom:1rem!important}.mb-xl-4{margin-bottom:1.5rem!important}.mb-xl-5{margin-bottom:3rem!important}.mb-xl-auto{margin-bottom:auto!important}.ms-xl-0{margin-left:0!important}.ms-xl-1{margin-left:.25rem!important}.ms-xl-2{margin-left:.5rem!important}.ms-xl-3{margin-left:1rem!important}.ms-xl-4{margin-left:1.5rem!important}.ms-xl-5{margin-left:3rem!important}.ms-xl-auto{margin-left:auto!important}.p-xl-0{padding:0!important}.p-xl-1{padding:.25rem!important}.p-xl-2{padding:.5rem!important}.p-xl-3{padding:1rem!important}.p-xl-4{padding:1.5rem!important}.p-xl-5{padding:3rem!important}.px-xl-0{padding-right:0!important;padding-left:0!important}.px-xl-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-xl-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-xl-3{padding-right:1rem!important;padding-left:1rem!important}.px-xl-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-xl-5{padding-right:3rem!important;padding-left:3rem!important}.py-xl-0{padding-top:0!important;padding-bottom:0!important}.py-xl-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-xl-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-xl-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-xl-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-xl-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-xl-0{padding-top:0!important}.pt-xl-1{padding-top:.25rem!important}.pt-xl-2{padding-top:.5rem!important}.pt-xl-3{padding-top:1rem!important}.pt-xl-4{padding-top:1.5rem!important}.pt-xl-5{padding-top:3rem!important}.pe-xl-0{padding-right:0!important}.pe-xl-1{padding-right:.25rem!important}.pe-xl-2{padding-right:.5rem!important}.pe-xl-3{padding-right:1rem!important}.pe-xl-4{padding-right:1.5rem!important}.pe-xl-5{padding-right:3rem!important}.pb-xl-0{padding-bottom:0!important}.pb-xl-1{padding-bottom:.25rem!important}.pb-xl-2{padding-bottom:.5rem!important}.pb-xl-3{padding-bottom:1rem!important}.pb-xl-4{padding-bottom:1.5rem!important}.pb-xl-5{padding-bottom:3rem!important}.ps-xl-0{padding-left:0!important}.ps-xl-1{padding-left:.25rem!important}.ps-xl-2{padding-left:.5rem!important}.ps-xl-3{padding-left:1rem!important}.ps-xl-4{padding-left:1.5rem!important}.ps-xl-5{padding-left:3rem!important}.gap-xl-0{gap:0!important}.gap-xl-1{gap:.25rem!important}.gap-xl-2{gap:.5rem!important}.gap-xl-3{gap:1rem!important}.gap-xl-4{gap:1.5rem!important}.gap-xl-5{gap:3rem!important}.row-gap-xl-0{row-gap:0!important}.row-gap-xl-1{row-gap:.25rem!important}.row-gap-xl-2{row-gap:.5rem!important}.row-gap-xl-3{row-gap:1rem!important}.row-gap-xl-4{row-gap:1.5rem!important}.row-gap-xl-5{row-gap:3rem!important}.column-gap-xl-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-xl-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-xl-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-xl-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-xl-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-xl-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-xl-start{text-align:left!important}.text-xl-end{text-align:right!important}.text-xl-center{text-align:center!important}}@media (min-width:1400px){.float-xxl-start{float:left!important}.float-xxl-end{float:right!important}.float-xxl-none{float:none!important}.object-fit-xxl-contain{-o-object-fit:contain!important;object-fit:contain!important}.object-fit-xxl-cover{-o-object-fit:cover!important;object-fit:cover!important}.object-fit-xxl-fill{-o-object-fit:fill!important;object-fit:fill!important}.object-fit-xxl-scale{-o-object-fit:scale-down!important;object-fit:scale-down!important}.object-fit-xxl-none{-o-object-fit:none!important;object-fit:none!important}.d-xxl-inline{display:inline!important}.d-xxl-inline-block{display:inline-block!important}.d-xxl-block{display:block!important}.d-xxl-grid{display:grid!important}.d-xxl-inline-grid{display:inline-grid!important}.d-xxl-table{display:table!important}.d-xxl-table-row{display:table-row!important}.d-xxl-table-cell{display:table-cell!important}.d-xxl-flex{display:flex!important}.d-xxl-inline-flex{display:inline-flex!important}.d-xxl-none{display:none!important}.flex-xxl-fill{flex:1 1 auto!important}.flex-xxl-row{flex-direction:row!important}.flex-xxl-column{flex-direction:column!important}.flex-xxl-row-reverse{flex-direction:row-reverse!important}.flex-xxl-column-reverse{flex-direction:column-reverse!important}.flex-xxl-grow-0{flex-grow:0!important}.flex-xxl-grow-1{flex-grow:1!important}.flex-xxl-shrink-0{flex-shrink:0!important}.flex-xxl-shrink-1{flex-shrink:1!important}.flex-xxl-wrap{flex-wrap:wrap!important}.flex-xxl-nowrap{flex-wrap:nowrap!important}.flex-xxl-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xxl-start{justify-content:flex-start!important}.justify-content-xxl-end{justify-content:flex-end!important}.justify-content-xxl-center{justify-content:center!important}.justify-content-xxl-between{justify-content:space-between!important}.justify-content-xxl-around{justify-content:space-around!important}.justify-content-xxl-evenly{justify-content:space-evenly!important}.align-items-xxl-start{align-items:flex-start!important}.align-items-xxl-end{align-items:flex-end!important}.align-items-xxl-center{align-items:center!important}.align-items-xxl-baseline{align-items:baseline!important}.align-items-xxl-stretch{align-items:stretch!important}.align-content-xxl-start{align-content:flex-start!important}.align-content-xxl-end{align-content:flex-end!important}.align-content-xxl-center{align-content:center!important}.align-content-xxl-between{align-content:space-between!important}.align-content-xxl-around{align-content:space-around!important}.align-content-xxl-stretch{align-content:stretch!important}.align-self-xxl-auto{align-self:auto!important}.align-self-xxl-start{align-self:flex-start!important}.align-self-xxl-end{align-self:flex-end!important}.align-self-xxl-center{align-self:center!important}.align-self-xxl-baseline{align-self:baseline!important}.align-self-xxl-stretch{align-self:stretch!important}.order-xxl-first{order:-1!important}.order-xxl-0{order:0!important}.order-xxl-1{order:1!important}.order-xxl-2{order:2!important}.order-xxl-3{order:3!important}.order-xxl-4{order:4!important}.order-xxl-5{order:5!important}.order-xxl-last{order:6!important}.m-xxl-0{margin:0!important}.m-xxl-1{margin:.25rem!important}.m-xxl-2{margin:.5rem!important}.m-xxl-3{margin:1rem!important}.m-xxl-4{margin:1.5rem!important}.m-xxl-5{margin:3rem!important}.m-xxl-auto{margin:auto!important}.mx-xxl-0{margin-right:0!important;margin-left:0!important}.mx-xxl-1{margin-right:.25rem!important;margin-left:.25rem!important}.mx-xxl-2{margin-right:.5rem!important;margin-left:.5rem!important}.mx-xxl-3{margin-right:1rem!important;margin-left:1rem!important}.mx-xxl-4{margin-right:1.5rem!important;margin-left:1.5rem!important}.mx-xxl-5{margin-right:3rem!important;margin-left:3rem!important}.mx-xxl-auto{margin-right:auto!important;margin-left:auto!important}.my-xxl-0{margin-top:0!important;margin-bottom:0!important}.my-xxl-1{margin-top:.25rem!important;margin-bottom:.25rem!important}.my-xxl-2{margin-top:.5rem!important;margin-bottom:.5rem!important}.my-xxl-3{margin-top:1rem!important;margin-bottom:1rem!important}.my-xxl-4{margin-top:1.5rem!important;margin-bottom:1.5rem!important}.my-xxl-5{margin-top:3rem!important;margin-bottom:3rem!important}.my-xxl-auto{margin-top:auto!important;margin-bottom:auto!important}.mt-xxl-0{margin-top:0!important}.mt-xxl-1{margin-top:.25rem!important}.mt-xxl-2{margin-top:.5rem!important}.mt-xxl-3{margin-top:1rem!important}.mt-xxl-4{margin-top:1.5rem!important}.mt-xxl-5{margin-top:3rem!important}.mt-xxl-auto{margin-top:auto!important}.me-xxl-0{margin-right:0!important}.me-xxl-1{margin-right:.25rem!important}.me-xxl-2{margin-right:.5rem!important}.me-xxl-3{margin-right:1rem!important}.me-xxl-4{margin-right:1.5rem!important}.me-xxl-5{margin-right:3rem!important}.me-xxl-auto{margin-right:auto!important}.mb-xxl-0{margin-bottom:0!important}.mb-xxl-1{margin-bottom:.25rem!important}.mb-xxl-2{margin-bottom:.5rem!important}.mb-xxl-3{margin-bottom:1rem!important}.mb-xxl-4{margin-bottom:1.5rem!important}.mb-xxl-5{margin-bottom:3rem!important}.mb-xxl-auto{margin-bottom:auto!important}.ms-xxl-0{margin-left:0!important}.ms-xxl-1{margin-left:.25rem!important}.ms-xxl-2{margin-left:.5rem!important}.ms-xxl-3{margin-left:1rem!important}.ms-xxl-4{margin-left:1.5rem!important}.ms-xxl-5{margin-left:3rem!important}.ms-xxl-auto{margin-left:auto!important}.p-xxl-0{padding:0!important}.p-xxl-1{padding:.25rem!important}.p-xxl-2{padding:.5rem!important}.p-xxl-3{padding:1rem!important}.p-xxl-4{padding:1.5rem!important}.p-xxl-5{padding:3rem!important}.px-xxl-0{padding-right:0!important;padding-left:0!important}.px-xxl-1{padding-right:.25rem!important;padding-left:.25rem!important}.px-xxl-2{padding-right:.5rem!important;padding-left:.5rem!important}.px-xxl-3{padding-right:1rem!important;padding-left:1rem!important}.px-xxl-4{padding-right:1.5rem!important;padding-left:1.5rem!important}.px-xxl-5{padding-right:3rem!important;padding-left:3rem!important}.py-xxl-0{padding-top:0!important;padding-bottom:0!important}.py-xxl-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.py-xxl-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.py-xxl-3{padding-top:1rem!important;padding-bottom:1rem!important}.py-xxl-4{padding-top:1.5rem!important;padding-bottom:1.5rem!important}.py-xxl-5{padding-top:3rem!important;padding-bottom:3rem!important}.pt-xxl-0{padding-top:0!important}.pt-xxl-1{padding-top:.25rem!important}.pt-xxl-2{padding-top:.5rem!important}.pt-xxl-3{padding-top:1rem!important}.pt-xxl-4{padding-top:1.5rem!important}.pt-xxl-5{padding-top:3rem!important}.pe-xxl-0{padding-right:0!important}.pe-xxl-1{padding-right:.25rem!important}.pe-xxl-2{padding-right:.5rem!important}.pe-xxl-3{padding-right:1rem!important}.pe-xxl-4{padding-right:1.5rem!important}.pe-xxl-5{padding-right:3rem!important}.pb-xxl-0{padding-bottom:0!important}.pb-xxl-1{padding-bottom:.25rem!important}.pb-xxl-2{padding-bottom:.5rem!important}.pb-xxl-3{padding-bottom:1rem!important}.pb-xxl-4{padding-bottom:1.5rem!important}.pb-xxl-5{padding-bottom:3rem!important}.ps-xxl-0{padding-left:0!important}.ps-xxl-1{padding-left:.25rem!important}.ps-xxl-2{padding-left:.5rem!important}.ps-xxl-3{padding-left:1rem!important}.ps-xxl-4{padding-left:1.5rem!important}.ps-xxl-5{padding-left:3rem!important}.gap-xxl-0{gap:0!important}.gap-xxl-1{gap:.25rem!important}.gap-xxl-2{gap:.5rem!important}.gap-xxl-3{gap:1rem!important}.gap-xxl-4{gap:1.5rem!important}.gap-xxl-5{gap:3rem!important}.row-gap-xxl-0{row-gap:0!important}.row-gap-xxl-1{row-gap:.25rem!important}.row-gap-xxl-2{row-gap:.5rem!important}.row-gap-xxl-3{row-gap:1rem!important}.row-gap-xxl-4{row-gap:1.5rem!important}.row-gap-xxl-5{row-gap:3rem!important}.column-gap-xxl-0{-moz-column-gap:0!important;column-gap:0!important}.column-gap-xxl-1{-moz-column-gap:0.25rem!important;column-gap:.25rem!important}.column-gap-xxl-2{-moz-column-gap:0.5rem!important;column-gap:.5rem!important}.column-gap-xxl-3{-moz-column-gap:1rem!important;column-gap:1rem!important}.column-gap-xxl-4{-moz-column-gap:1.5rem!important;column-gap:1.5rem!important}.column-gap-xxl-5{-moz-column-gap:3rem!important;column-gap:3rem!important}.text-xxl-start{text-align:left!important}.text-xxl-end{text-align:right!important}.text-xxl-center{text-align:center!important}}@media (min-width:1200px){.fs-1{font-size:2.5rem!important}.fs-2{font-size:2rem!important}.fs-3{font-size:1.75rem!important}.fs-4{font-size:1.5rem!important}}@media print{.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-grid{display:grid!important}.d-print-inline-grid{display:inline-grid!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:flex!important}.d-print-inline-flex{display:inline-flex!important}.d-print-none{display:none!important}}
	.card .card-body,.card .card-text,.card .card-title,.dropdown-item,.navbar-brand span,body,dd,dt,h1,h2,h3,h4,h5,h6,html,label,li,p{color:#fff}.theme-brightyellow,.theme-burlywood,.theme-goldenyellow,.theme-lightcoral,.theme-lightcyan,.theme-lightgray,.theme-lightgreen,.theme-mutedcoral,.theme-neongreen,.theme-plum,.theme-softpink,.theme-thistle,.theme-tomato,.theme-violet{--accent-text-color:#000}.feature-grid{display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:flex-start}.feature-card{flex:1 1 45%;min-width:320px;max-width:48%;box-sizing:border-box;margin-bottom:1.5rem}@media (max-width:900px){.feature-card{flex-basis:100%;max-width:100%}}input.form-control::placeholder,textarea.form-control::placeholder{color:#bbb!important;opacity:1!important}body,html{background-color:#1e1e1e;font-family:Roboto,sans-serif}a,a.nav-link{color:var(--accent-color,#deb887)}a{text-decoration:none}a:hover{text-decoration:underline}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#333}::-webkit-scrollbar-thumb{background-color:#555;border-radius:4px}.theme-burlywood{--accent-color:burlywood;--accent-color-rgb:222,184,135}.theme-lightcoral{--accent-color:lightcoral;--accent-color-rgb:240,128,128}.theme-lightgreen{--accent-color:lightgreen;--accent-color-rgb:144,238,144}.theme-plum{--accent-color:plum;--accent-color-rgb:221,160,221}.theme-thistle{--accent-color:thistle;--accent-color-rgb:216,191,216}.theme-tomato{--accent-color:tomato;--accent-color-rgb:255,99,71}.theme-violet{--accent-color:violet;--accent-color-rgb:238,130,238}.theme-goldenyellow{--accent-color:#DAA520;--accent-color-rgb:218,165,32}.theme-mutedcoral{--accent-color:#FF6F61;--accent-color-rgb:255,111,97}.theme-softpink{--accent-color:#FFC1CC;--accent-color-rgb:255,193,204}.theme-lightcyan{--accent-color:#A8DADC;--accent-color-rgb:168,218,220}.theme-lightgray{--accent-color:#E0E0E0;--accent-color-rgb:224,224,224}.theme-neongreen{--accent-color:#00FF85;--accent-color-rgb:0,255,133}.theme-brightyellow{--accent-color:#FFEB3B;--accent-color-rgb:255,235,59}.theme-cadetblue{--accent-color:cadetblue;--accent-color-rgb:95,158,160;--accent-text-color:#FFF}.theme-cornflowerblue{--accent-color:cornflowerblue;--accent-color-rgb:100,149,237;--accent-text-color:#FFF}.theme-dodgerblue{--accent-color:dodgerblue;--accent-color-rgb:30,144,255;--accent-text-color:#FFF}.navbar{border-bottom:2px solid var(--accent-color,#deb887)}footer{border-top:2px solid var(--accent-color,#deb887)}.card,.dropdown-menu{background-color:#2a2a2a;border:1px solid #444}.card-link{text-decoration:none!important}.hover-accent{transition:border-color .2s,transform .2s,box-shadow .2s}.hover-accent:hover{border-color:var(--accent-color,#deb887)!important;transform:translateY(-3px);box-shadow:0 4px 8px rgba(0,0,0,.4)}#hashingTool .form-control:focus,.form-check-input:focus,.form-control-color:focus,.form-control:focus,.form-select:focus{box-shadow:0 0 0 .25rem rgba(var(--accent-color-rgb,222,184,135),.35)!important}.dropdown-item:focus,.dropdown-item:hover{background-color:#3a3a3a;color:#fff!important}.form-control,.form-select{background-color:#2a2a2a!important;color:#fff!important;border:1px solid #444!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control:focus,.form-select:focus{border-color:var(--accent-color,#deb887)!important;background-color:#2a2a2a!important;color:#fff!important}.btn-task,.form-check-input:checked{border-color:var(--accent-color,#deb887)}#hashingTool button,.btn-task,.form-check-input:checked,.sidebar a.nav-link.active,.sidebar a.nav-link:hover{background-color:var(--accent-color,#deb887)}.btn-task,.btn-task:hover{color:var(--accent-text-color,#000)}.btn-task:hover{filter:brightness(.9)}.btn .material-icons{font-size:1.2em;vertical-align:text-bottom}.sidebar a.nav-link{padding:.5rem 1rem;border-bottom:1px solid #444;transition:background-color .2s,color .2s,filter .2s}.sidebar a.nav-link:last-child{border-bottom:none}.sidebar .material-icons{font-size:24px;width:28px;text-align:center}.sidebar img.icon{height:24px;width:24px;object-fit:contain}.sidebar a.nav-link.active{color:var(--accent-text-color,#000)!important;font-weight:700}.sidebar a.nav-link:hover{color:var(--accent-text-color,#000)!important;text-decoration:none}.sidebar a.nav-link:not(.active):hover{filter:brightness(90%)}#toastContainer{z-index:1100}.color-swatch{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100px;padding:1rem;border:1px solid rgba(255,255,255,.1);text-align:center;transition:background-color .3s,color .3s}.color-swatch .text-value{text-shadow:0 1px 2px rgba(0,0,0,.4);font-size:1.1rem}.color-swatch .hex-value{font-family:monospace;background-color:rgba(0,0,0,.2);padding:.2rem .5rem;border-radius:4px;line-height:1.4;color:inherit}.form-control-color{min-width:50px;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;cursor:pointer;background-color:transparent;border:1px solid #444}.btn-clear,.btn-edit{border-color:#6c757d}#hashingTool .form-control:focus,.form-control-color:focus{border-color:var(--accent-color,#deb887)!important}.input-group>.form-control-color+.form-control{border-top-left-radius:0;border-bottom-left-radius:0}.card .text-white-50{color:rgba(255,255,255,.7)!important}.btn-edit{background-color:#6c757d;color:#fff}.btn-edit:hover{background-color:#5a6268;border-color:#545b62;color:#fff}.btn-clear{background-color:transparent;color:#adb5bd}.btn-clear:hover{background-color:#6c757d;color:#fff}#hashingTool{background-color:#2a2a2a;border:1px solid #444;padding:1rem;border-radius:8px;margin-bottom:1rem}#hashingTool label{color:#fff;font-weight:700}#hashingTool .form-control{background-color:#1e1e1e;color:#fff;border:1px solid #444;padding:.5rem;border-radius:4px;transition:border-color .2s,box-shadow .2s}#hashingTool button{border:none;color:#000;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background-color .2s,transform .2s}#hashingTool button:hover{background-color:rgba(222,184,135,.9);transform:translateY(-2px)}#hashingTool button:active{transform:translateY(0)}#mainOutput>:first-child{margin-top:0!important}#mainOutput h1,#mainOutput h2,#mainOutput h3,#mainOutput h4,#mainOutput h5,#mainOutput h6{margin-top:1.5rem!important;margin-bottom:.5rem!important}#mainOutput blockquote,#mainOutput ol,#mainOutput p,#mainOutput pre,#mainOutput ul{margin-top:.25rem!important;margin-bottom:.25rem!important}#mainOutput ol,#mainOutput ul{padding-left:1.5rem!important}#mainOutput li{margin-bottom:.1rem!important}
	a:hover{color:#fff;text-decoration:none}#mainOutput.tutorial-content>:first-child{margin-top:0!important}
  </style>
  <!-- Highlight.js theme (same as Coding Tutorials) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.css">

  <!-- Markdown-it (client-side Markdown to HTML) -->
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>

  <!-- Highlight.js core + common languages -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/ada.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/x86asm.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/c.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cpp.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/csharp.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/java.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/ruby.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/sql.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/es/languages/xml.min.js"></script>

  <style>
    html, body { 
      width: 100%; 
      min-height: 100vh;
      background-color: #212529;
	  font-size: 120%;
      font-family: 'Roboto', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    
    /* Content wrapper with padding */
    .content-wrapper {
      width: 100%;
      min-height: 100vh;
      padding: 5rem;  /* Adjust this value for desired padding */
      box-sizing: border-box;
    }
    
    .markdown-body { 
      max-width: 100%; 
      width: 100%;
      background-color: #212529;
      border: none;
    }
    
    .markdown-body img { 
      max-width: 100%; 
      height: auto; 
    }

	blockquote p {
	  border-left: 5px solid #1E90FF !important;
	  padding: 1em !important;
	  background-color: #191970 !important;
	  margin: 3em; !important;
	}
    
    code { 
      color: skyblue !important;
	  font-family: "courier new", monospace !important;
	}
    
    /* Heading styles */
    .markdown-body h1 { 
      margin-top: 0.2rem; 
      margin-bottom: 1rem; 
      color: powderblue; 
    }
    .markdown-body h2 { 
      margin-top: 0.15rem; 
      margin-bottom: 1rem; 
      color: cadetblue; 
    }
    .markdown-body h3 { 
      margin-top: 0.2rem; 
      margin-bottom: 1rem; 
      color: #6495ED; 
    }
    .markdown-body h4 { 
      margin-top: 0.15rem; 
      margin-bottom: 1rem; 
      color: dodgerblue; 
    }
    
    .markdown-body pre { 
      border-radius: .25rem;
      overflow: auto;
      max-width: 100%;
    }
    
    #book-title {
      font-size: 60px !important;
      font-weight: 600 !important;
      color: #00BFFF !important;  /* powderblue variant */
      text-align: left !important;
      margin: 0 0 3rem 0 !important;
      padding: 0 !important;
      line-height: 1.2 !important;
	  border-bottom: thin solid #00BFFF !important;
    }
    
    /* Table styling matching tutorials.css */
    .markdown-body table,
    #mainOutput.tutorial-content table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 8px;
      overflow: hidden;
      margin: 2rem 0;
      background-color: #1a1d23;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      font-size: 1.1rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
	  color: aliceblue;
    }

    .markdown-body table thead,
    #mainOutput.tutorial-content table thead {
      background-color: rgba(70, 130, 180, 0.4);
    }

    .markdown-body table th,
    #mainOutput.tutorial-content table th {
      padding: 1rem 1.5rem;
      text-align: left;
      font-weight: 600;
      color: #ffffff !important;
      border-bottom: 2px solid rgba(255, 255, 255, 0.2);
      border-right: 1px solid rgba(255, 255, 255, 0.15);
      font-size: 1.15rem;
    }

    .markdown-body table th:last-child,
    #mainOutput.tutorial-content table th:last-child {
      border-right: none;
    }

    .markdown-body table td,
    #mainOutput.tutorial-content table td {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      border-right: 1px solid rgba(255, 255, 255, 0.15);
      color: #e8e8e8 !important;
    }

    .markdown-body table td:last-child,
    #mainOutput.tutorial-content table td:last-child {
      border-right: none;
    }

    .markdown-body table tbody tr:nth-child(odd),
    #mainOutput.tutorial-content table tbody tr:nth-child(odd) {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .markdown-body table tbody tr:hover,
    #mainOutput.tutorial-content table tbody tr:hover {
      background-color: rgba(70, 130, 180, 0.15);
    }
	.hljs {color: #56A5EC; background-color: #212529;}
	.hljs-comment {color: #98FB98;}
	.hljs-type {color: #EE82EE;}
	.hljs-symbol {color: #FA8072;}
	.hljs-title {color: #D58A94;}
	.hljs-keyword {color: #20B2AA;}
	.hljs-string {color: #AAF0D1;}
	.hljs-number {color: #FF6347;}
</style>
</head>
<body>
  <div id="mainOutput" class="content-wrapper markdown-body">
  <p id="book-title">The Ada Programming Language</p>
<h1>1. Introduction To Ada Programming</h1>
<p>Ada is a high-integrity programming language designed for applications where reliability, maintainability, and efficiency are paramount. Born from military requirements and refined over four decades, Ada provides unparalleled compile-time verification and runtime protection. This introduction explores Ada’s unique philosophy, core strengths, and why it remains a valuable choice for robust software development across diverse domains. Whether you’re building embedded systems for consumer electronics, real-time data processing applications, or large-scale enterprise software, Ada’s disciplined approach helps prevent common programming errors before they reach production.</p>
<p>Ada’s design philosophy centers on correctness by construction rather than correctness by testing. Instead of relying on developers to remember best practices or thorough testing to catch errors, Ada builds safeguards directly into the language. This means many common mistakes—like using an incorrect data type or violating function requirements—are caught automatically during compilation. While this requires more upfront discipline, it pays dividends in reduced debugging time, easier maintenance, and greater confidence in your code’s behavior.</p>
<p>This chapter will walk you through Ada’s history, core principles, and practical setup. You’ll see how Ada’s features work in real code examples and understand why these features matter for everyday programming challenges. By the end, you’ll have a solid foundation for exploring Ada’s capabilities in your own projects.</p>
<h2>1.1 The Genesis of Ada: More Than Just a Language</h2>
<p>Developed under contract from the U.S. Department of Defense in the late 1970s, Ada was named after Augusta Ada King, Countess of Lovelace—widely recognized as the world’s first computer programmer. The language emerged from a rigorous selection process called the “Steelman requirements,” which evaluated over 150 candidate languages. This process wasn’t about finding a language for a specific niche; it was about creating a general-purpose language that could handle complex, large-scale software projects with exceptional reliability.</p>
<h3>1.1.1 Key Historical Milestones</h3>
<ul>
<li>
<p><strong>1980:</strong> First standardized version (Ada 83)<br>
This initial standard focused on core reliability features: strong typing, modularity, and explicit error handling. It established Ada as a language designed for maintainability in large systems.</p>
</li>
<li>
<p><strong>1995:</strong> Major update with OOP support (Ada 95)<br>
Ada 95 introduced object-oriented programming capabilities while preserving the language’s safety guarantees. This made Ada more flexible for modern software design patterns without sacrificing reliability.</p>
</li>
<li>
<p><strong>2012:</strong> Enhanced concurrency and contracts (Ada 2012)<br>
This version added formal contract-based programming (preconditions, postconditions, and invariants) and improved concurrency features. These additions made it easier to specify and verify software behavior directly in code.</p>
</li>
<li>
<p><strong>2023:</strong> Latest standard with improved container libraries<br>
Ada 2022 (commonly referred to as Ada 2023 in practice) refined existing features and added modern conveniences like enhanced container libraries, better string handling, and improved interoperability with other languages.</p>
</li>
</ul>
<p>Ada’s evolution has always been driven by real-world needs. While initially developed for military applications, its design principles have proven valuable across many industries. The language has been continuously refined based on feedback from developers working on everything from automotive systems to financial software. This ongoing improvement ensures Ada remains relevant while staying true to its core philosophy of reliability through design.</p>
<h3>1.1.2 Why Ada Was Created</h3>
<p>Before Ada, many large software projects struggled with common issues: unpredictable behavior due to type errors, difficult maintenance because of poor modularity, and concurrency problems that were hard to debug. Languages like C were popular but lacked built-in safeguards—errors often only surfaced during runtime, sometimes in production environments. This was especially problematic for large systems where a single bug could cause widespread issues.</p>
<p>The Steelman requirements addressed these challenges head-on. Key goals included:</p>
<ul>
<li><strong>Strong typing:</strong> Preventing accidental misuse of data types</li>
<li><strong>Explicit error handling:</strong> Making errors visible and manageable</li>
<li><strong>Modular design:</strong> Allowing systems to be built from independently verifiable components</li>
<li><strong>Concurrency support:</strong> Built-in mechanisms for safe parallel execution</li>
<li><strong>Readability:</strong> Code that clearly expresses its intent to humans</li>
</ul>
<p>These weren’t just theoretical goals—they were practical necessities for projects where software failures could cause significant financial or operational damage. While Ada wasn’t created solely for “safety-critical” systems (a term we’ll avoid in this book), its features naturally benefit any project where reliability matters. The discipline it enforces helps prevent common programming mistakes that plague projects of all sizes.</p>
<h3>1.1.3 The Steelman Requirements: A Blueprint for Reliability</h3>
<p>The Steelman requirements were developed through a collaborative process involving software engineers, military personnel, and language designers. They specified 23 key requirements that a new programming language needed to meet. Some notable examples:</p>
<ul>
<li><strong>“The language must support modular programming”</strong> – This meant programs should be built from independently compilable units with clear interfaces.</li>
<li><strong>“The language must have strong typing”</strong> – Preventing operations between incompatible types without explicit conversion.</li>
<li><strong>“The language must provide explicit exception handling”</strong> – Making error conditions visible and manageable.</li>
<li><strong>“The language must support concurrent programming”</strong> – Providing built-in mechanisms for tasks that run simultaneously.</li>
</ul>
<p>These requirements shaped Ada’s core design. For instance, the strong typing requirement directly led to Ada’s subtype system, where you can define specialized versions of types with specific constraints. The concurrency requirement inspired Ada’s tasking model, which handles parallel execution safely without requiring external libraries.</p>
<p>The result was a language that prioritized correctness from the ground up. While other languages might add safety features as afterthoughts, Ada was designed with these principles baked into its syntax and semantics. This makes Ada uniquely positioned to help developers build reliable software, regardless of the application domain.</p>
<h2>1.2 Ada’s Design Philosophy: Correctness by Construction</h2>
<p>Ada’s core philosophy is “correctness by construction”—building reliability into the language itself rather than relying on developers to remember best practices or thorough testing to catch errors. This approach shifts the focus from “fixing bugs after they happen” to “preventing bugs from existing in the first place.” Let’s explore what this means in practice.</p>
<h3>1.2.1 Typical Language Approach vs. Ada’s Approach</h3>
<p>Consider how most programming languages handle common errors:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Aspect</strong></th>
<th style="text-align:left"><strong>Typical Language Approach</strong></th>
<th style="text-align:left"><strong>Ada’s Approach</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Error detection</strong></td>
<td style="text-align:left">Errors discovered during testing or runtime</td>
<td style="text-align:left">Errors caught at compile time whenever possible</td>
</tr>
<tr>
<td style="text-align:left"><strong>Type safety</strong></td>
<td style="text-align:left">Implicit conversions between types common</td>
<td style="text-align:left">Strict type equivalence with no implicit conversions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Contract management</strong></td>
<td style="text-align:left">Documentation-based contracts (often outdated)</td>
<td style="text-align:left">Formal contracts embedded directly in code</td>
</tr>
<tr>
<td style="text-align:left"><strong>Error handling</strong></td>
<td style="text-align:left">Runtime exceptions common</td>
<td style="text-align:left">Explicit exception handling with clear boundaries</td>
</tr>
<tr>
<td style="text-align:left"><strong>Concurrency</strong></td>
<td style="text-align:left">Libraries added later, often error-prone</td>
<td style="text-align:left">Built-in, type-safe concurrency mechanisms</td>
</tr>
</tbody>
</table>
<p>This difference isn’t just theoretical—it has real-world implications for how you write and maintain code. Let’s look at a concrete example to see how Ada’s approach works in practice.</p>
<h4>1.2.1.1 Example: Handling Temperature Data</h4>
<p>Imagine you’re writing a program that processes temperature readings. In many languages, you might write something like this in C:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-type">int</span> temperature = <span class="hljs-number">25</span>;
<span class="hljs-type">float</span> pressure = <span class="hljs-number">1013.25</span>;
<span class="hljs-comment">// Oops—accidentally assigned pressure to temperature</span>
temperature = (<span class="hljs-type">int</span>) pressure;
</code></pre>
<p>This compiles without error, but it’s clearly wrong—pressure values shouldn’t be assigned to temperature variables. In C, this mistake might not be caught until runtime, or worse, it might cause subtle bugs that surface months later.</p>
<p>Now consider the Ada equivalent:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">50</span>..<span class="hljs-number">100</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Pressure </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> <span class="hljs-number">500</span>..<span class="hljs-number">1200</span>;

Temp : <span class="hljs-type">Temperature</span> := <span class="hljs-number">25</span>;
Pres : <span class="hljs-type">Pressure</span> := <span class="hljs-number">1013</span>;

<span class="hljs-comment">-- Attempting this would fail at compile time:</span>
Temp := Pres;  <span class="hljs-comment">-- Error: type mismatch</span>
</code></pre>
<p>Ada catches this error immediately during compilation. The <code>Temperature</code> and <code>Pressure</code> subtypes are distinct types—even though both are based on <code>Integer</code>—so assigning one to the other is a type error. This isn’t just about preventing obvious mistakes; it’s about creating a system where the compiler enforces your design decisions.</p>
<h3>1.2.2 Design-by-Contract Explained</h3>
<p>Ada 2012 introduced formal contract-based programming, which allows you to specify exactly what a function expects and guarantees. Contracts are written directly in the code, making them impossible to ignore or become outdated.</p>
<h4>1.2.2.1 Core Contract Elements</h4>
<ul>
<li><strong>Preconditions:</strong> Requirements that callers must satisfy before calling a function</li>
<li><strong>Postconditions:</strong> Guarantees the function makes after execution</li>
<li><strong>Invariants:</strong> Properties that must always be true for a type</li>
</ul>
<p>Let’s see these in action with a simple temperature conversion function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span> (C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; C &gt;= -<span class="hljs-number">273.15</span>,  <span class="hljs-comment">-- Absolute zero check</span>
   Post =&gt; Celsius_to_Fahrenheit<span class="hljs-symbol">'Result</span> &gt;= -<span class="hljs-number">459.67</span>;
</code></pre>
<p>Here, the precondition (<code>Pre</code>) ensures the input is physically possible (no temperatures below absolute zero). The postcondition (<code>Post</code>) guarantees the output is also physically possible. If you call this function with an invalid value, Ada will either catch it at compile time (if the value is known) or at runtime (if the value comes from user input).</p>
<h4>1.2.2.2 How Contracts Work in Practice</h4>
<p>Contracts aren’t just documentation—they’re active checks. When you compile with contract checking enabled (using <code>-gnata</code>), Ada inserts runtime checks for conditions that can’t be verified at compile time. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Process_Temperature</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Temp &gt;= -<span class="hljs-number">273.15</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">1000</span>,
   Post =&gt; Process_Temperature<span class="hljs-symbol">'Result</span> &gt; <span class="hljs-number">0</span>;

<span class="hljs-comment">-- If called with Temp = -300, this will trigger a runtime error</span>
Result := Process_Temperature(-<span class="hljs-number">300</span>);
</code></pre>
<p>This might seem restrictive, but it’s actually liberating. Instead of wondering “what if someone passes a bad value?” you can be certain the compiler will enforce your constraints. This reduces the need for defensive programming and makes your code more predictable.</p>
<h4>1.2.2.3 Contract Benefits Beyond Error Checking</h4>
<p>Contracts also serve as living documentation. When you look at a function’s signature, you immediately see its requirements and guarantees. This is especially valuable in team environments where developers might not be familiar with every part of the codebase. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Discount</span> (Original_Price : <span class="hljs-type">Float</span>; 
                            <span class="hljs-keyword">Is</span>_Premium_Customer : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">with</span>
   Pre  =&gt; Original_Price &gt; <span class="hljs-number">0</span>,
   Post =&gt; Calculate_Discount<span class="hljs-symbol">'Result</span> &lt;= Original_Price;
</code></pre>
<p>This tells you everything you need to know about the function: it expects a positive price, and the result will never exceed the original price. You don’t need to dig through comments or external documentation to understand the function’s behavior.</p>
<h2>1.3 Core Language Pillars</h2>
<p>Ada’s power comes from four interconnected pillars: strong static typing, built-in concurrency, exception handling, and modular design. Each pillar reinforces the others, creating a cohesive system where reliability is built into the language’s DNA.</p>
<h3>1.3.1 Strong Static Typing</h3>
<p>Ada’s type system is one of its most distinctive features. Unlike languages like C or Python where implicit conversions between types are common, Ada enforces strict type checking. This prevents many common programming errors at compile time rather than at runtime.</p>
<h4>1.3.1.1 Subtypes and Constraints</h4>
<p>A key aspect of Ada’s typing is the ability to define subtypes with constraints. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">50</span>..<span class="hljs-number">100</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Pressure </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> <span class="hljs-number">500</span>..<span class="hljs-number">1200</span>;
</code></pre>
<p>This creates two distinct types that can only hold values within their specified ranges. Any attempt to assign a value outside these ranges results in a compile-time error.</p>
<p>Compare this to C:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-type">int</span> temperature = <span class="hljs-number">25</span>;
<span class="hljs-type">int</span> pressure = <span class="hljs-number">1013</span>;
temperature = pressure;  <span class="hljs-comment">// Compiles without warning</span>
</code></pre>
<p>In C, both variables are just <code>int</code>, so assigning one to the other is allowed—even though it makes no sense for pressure values to be assigned to temperature variables. This kind of mistake can lead to subtle bugs that are hard to track down.</p>
<h4>1.3.1.2 No Implicit Conversions</h4>
<p>Ada does not allow implicit conversions between types. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">V : <span class="hljs-type">Integer</span> := <span class="hljs-number">10</span>;
F : <span class="hljs-type">Float</span> := Float(V);  <span class="hljs-comment">-- Explicit conversion is required for different types</span>
C : <span class="hljs-type">Temperature</span> := V;  <span class="hljs-comment">-- Allowed (Temperature is subtype of Integer)</span>
P : <span class="hljs-type">Pressure</span> := V;  <span class="hljs-comment">-- Allowed only if V is within Pressure range</span>

<span class="hljs-comment">-- This would fail:</span>
P := C;  <span class="hljs-comment">-- Error: type mismatch</span>
</code></pre>
<p>Even though both <code>Temperature</code> and <code>Pressure</code> are based on <code>Integer</code>, they’re distinct types. Assigning one to the other requires an explicit conversion, forcing the developer to acknowledge the potential meaning change.</p>
<p>This strictness might seem restrictive at first, but it prevents countless subtle bugs. Consider a financial application where you have <code>dollars</code> and <code>euros</code> as subtypes. With Ada’s strong typing, you can’t accidentally assign euros to dollars without explicitly converting them—preventing currency conversion errors that could cost millions.</p>
<h4>1.3.1.3 Array Bounds Checking</h4>
<p>Ada automatically checks array bounds at runtime (unless explicitly disabled). This prevents buffer overflow errors that plague languages like C:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Integer;
A : <span class="hljs-type">Int_Array</span> := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0</span>);

<span class="hljs-comment">-- This will raise a Constraint_Error at runtime:</span>
A(<span class="hljs-number">11</span>) := <span class="hljs-number">5</span>;  <span class="hljs-comment">-- Out of bounds access</span>
</code></pre>
<p>In C, the equivalent code would compile without warning but could overwrite memory, leading to undefined behavior that’s hard to debug. Ada’s approach makes these errors visible and manageable.</p>
<h4>1.3.1.4 Tagged Types for Safe Polymorphism</h4>
<p>Ada supports object-oriented programming through tagged types, which allow for safe polymorphism. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Animal </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Speak</span>(A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Animal</span>) <span class="hljs-keyword">is</span> null;

<span class="hljs-keyword">type</span> <span class="hljs-type">Dog </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Animal <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Speak</span>(D : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dog</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Woof!"</span>);
<span class="hljs-keyword">end</span> Speak;

<span class="hljs-keyword">type</span> <span class="hljs-type">Cat </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Animal <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Speak</span>(C : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Cat</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Meow!"</span>);
<span class="hljs-keyword">end</span> Speak;
</code></pre>
<p>Here, <code>Dog</code> and <code>Cat</code> are derived from <code>Animal</code>, and each has its own <code>Speak</code> implementation. When you call <code>Speak</code> on an <code>Animal</code> variable, Ada automatically dispatches to the correct implementation based on the actual type. This is safer than C++'s virtual functions because Ada’s type system prevents common pitfalls like slicing errors.</p>
<h3>1.3.2 Concurrency Model</h3>
<p>Ada has built-in support for concurrent programming through tasks and protected objects. This is part of the language, not a library, ensuring that concurrency is handled safely by design.</p>
<h4>1.3.2.1 Tasks: Independent Units of Execution</h4>
<p>Tasks are independent units of execution that run concurrently. They’re defined using <code>task type</code> and <code>task body</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Reader </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Sensor_Reader;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Sensor_Reader <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">loop</span>
      Read_Sensor;
      <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>;  <span class="hljs-comment">-- 100ms sampling interval</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Sensor_Reader;
</code></pre>
<p>This defines a task that reads a sensor every 100 milliseconds. The <code>entry Start</code> allows the main program to start the task when ready. Tasks are lightweight—Ada handles the scheduling and context switching automatically.</p>
<h4>1.3.2.2 Protected Objects: Safe Shared Data</h4>
<p>Protected objects provide safe access to shared data. They ensure mutual exclusion and prevent race conditions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Counter <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">private</span>
   Count : <span class="hljs-type">Integer</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Counter;

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">body</span> Counter <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Count := Count + <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> Increment;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Count;
   <span class="hljs-keyword">end</span> Get;
<span class="hljs-keyword">end</span> Counter;
</code></pre>
<p>This defines a counter that multiple tasks can safely increment. Only one task can access the counter at a time, preventing inconsistent states. Protected objects are more than simple mutexes—they’re type-safe, self-documenting, and integrated into Ada’s type system.</p>
<h4>1.3.2.3 Why Concurrency Matters</h4>
<p>Modern applications often need to handle multiple tasks simultaneously: reading sensors while processing data, serving web requests while updating databases, or handling user input while running background calculations. Ada’s built-in concurrency model makes this straightforward and safe.</p>
<p>Consider a simple producer-consumer scenario:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Producer </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Add_Item(Item : <span class="hljs-type">Integer</span>);
<span class="hljs-keyword">end</span> Producer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Consumer </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Get_Item(Item : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>);
<span class="hljs-keyword">end</span> Consumer;

<span class="hljs-keyword">protected</span> Buffer <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Add(Item : <span class="hljs-type">Integer</span>);
   <span class="hljs-keyword">entry</span> Get(Item : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>);
<span class="hljs-keyword">private</span>
   Data : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Integer;
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Buffer;

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">body</span> Buffer <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Add(Item : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">when</span> Count &lt; Data<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Data(Count + <span class="hljs-number">1</span>) := Item;
      Count := Count + <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> Add;

   <span class="hljs-keyword">entry</span> Get(Item : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">when</span> Count &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Item := Data(<span class="hljs-number">1</span>);
         <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Count - <span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
            Data(I) := Data(I + <span class="hljs-number">1</span>);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
         Count := Count - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Get;
<span class="hljs-keyword">end</span> Buffer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Producer <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span> <span class="hljs-keyword">loop</span>
      Buffer.Add(I);
      <span class="hljs-keyword">delay</span> <span class="hljs-number">0.05</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Producer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Consumer <span class="hljs-keyword">is</span>
   Item : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      Buffer.Get(Item);
      Put_Line(<span class="hljs-string">"Consumed: "</span> &amp; Item<span class="hljs-symbol">'Image</span>);
      <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Consumer;
</code></pre>
<p>This code safely processes items between producers and consumers without manual synchronization. The buffer handles all the locking and queuing automatically. In C or Python, implementing this would require careful use of mutexes and condition variables—easy to get wrong, especially in complex systems.</p>
<h4>1.3.2.4 Concurrency Without Complexity</h4>
<p>Ada’s concurrency model is designed to be intuitive. Tasks are defined using simple syntax, and protected objects handle synchronization automatically. This means you can focus on what your program needs to do rather than how to manage threads safely. The result is concurrent code that’s easier to write, read, and maintain.</p>
<h3>1.3.3 Exception Handling</h3>
<p>Ada’s exception handling is explicit and structured, making error conditions visible and manageable. Unlike languages where exceptions are optional or implicit, Ada requires you to define how errors will be handled.</p>
<h4>1.3.3.1 Basic Exception Handling</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Code that might raise exceptions</span>
   X := <span class="hljs-number">10</span> / <span class="hljs-number">0</span>;  <span class="hljs-comment">-- Division by zero</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Constraint_Error =&gt;
      Put_Line(<span class="hljs-string">"Math error: division by zero"</span>);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Unexpected error occurred"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This example shows how Ada handles division by zero. The <code>Constraint_Error</code> exception is raised when an operation violates a constraint (like dividing by zero). You can handle specific exceptions or use <code>others</code> as a catch-all.</p>
<h4>1.3.3.2 Custom Exceptions</h4>
<p>You can define your own exceptions for domain-specific errors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Temperature_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Valid_Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">50</span>..<span class="hljs-number">100</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Check_Temperature</span>(Temp : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Temp &lt; Valid_Temperature<span class="hljs-symbol">'First</span> <span class="hljs-keyword">or</span> Temp &gt; Valid_Temperature<span class="hljs-symbol">'Last</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">raise</span> Temperature_Error;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Check_Temperature;

<span class="hljs-keyword">begin</span>
   Check_Temperature(<span class="hljs-number">120</span>);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Temperature_Error =&gt;
      Put_Line(<span class="hljs-string">"Temperature out of valid range"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This creates a custom exception for temperature validation errors. The procedure explicitly checks the temperature range and raises the exception when invalid, making the error handling clear and intentional.</p>
<h4>1.3.3.3 Exception Propagation</h4>
<p>Exceptions propagate up the call stack until handled. This means you can centralize error handling at appropriate levels:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- ... some processing ...</span>
   Check_Temperature(<span class="hljs-number">120</span>);  <span class="hljs-comment">-- Raises Temperature_Error</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Temperature_Error =&gt;
      Put_Line(<span class="hljs-string">"Error in Process_Data"</span>);
      <span class="hljs-keyword">raise</span>;  <span class="hljs-comment">-- Re-raise to let caller handle it</span>
<span class="hljs-keyword">end</span> Process_Data;

<span class="hljs-keyword">begin</span>
   Process_Data;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Temperature_Error =&gt;
      Put_Line(<span class="hljs-string">"Final handler for Temperature_Error"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>Here, <code>Process_Data</code> catches the exception, logs a message, and re-raises it. The main program then handles it with a final handler. This allows you to handle errors at the most appropriate level—local errors can be handled locally, while critical errors can be handled at the top level.</p>
<h3>1.3.4 Modular Design</h3>
<p>Ada’s modular design is built around packages—self-contained units of code with clear interfaces. This makes large projects manageable and promotes code reuse.</p>
<h4>1.3.4.1 Package Structure</h4>
<p>A typical Ada package has two parts:</p>
<ul>
<li><strong>Specification:</strong> Declares what the package provides (public interface)</li>
<li><strong>Body:</strong> Implements the package functionality</li>
</ul>
<p>For example, a temperature conversion package:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Temperature_Converter.ads (specification)</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Converter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span>(C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Fahrenheit_to_Celsius</span>(F : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Temperature_Converter;

<span class="hljs-comment">-- Temperature_Converter.adb (body)</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Converter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span>(C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> C * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
   <span class="hljs-keyword">end</span> Celsius_to_Fahrenheit;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Fahrenheit_to_Celsius</span>(F : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (F - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
   <span class="hljs-keyword">end</span> Fahrenheit_to_Celsius;
<span class="hljs-keyword">end</span> Temperature_Converter;
</code></pre>
<p>The specification declares what functions are available, while the body contains the implementation details. Clients of the package only need to see the specification—they don’t need to know how the functions are implemented.</p>
<h4>1.3.4.2 Package Instantiation</h4>
<p>Ada supports generic packages, which allow you to create reusable templates:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"&lt;"</span>(Left, Right : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Sort </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort_Array</span>(A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
<span class="hljs-keyword">end</span> Sort;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Sort </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation of sorting algorithm</span>
<span class="hljs-keyword">end</span> Sort;
</code></pre>
<p>This generic package can be instantiated for any type that supports comparison:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Sort;
<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sort(Integer, <span class="hljs-string">"&lt;"</span>);
<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sort(Float, <span class="hljs-string">"&lt;"</span>);
</code></pre>
<p>This creates two specialized sorting packages—one for integers and one for floats. The generic mechanism allows you to write code once and reuse it for multiple types, reducing duplication and improving reliability.</p>
<h4>1.3.4.3 Separation of Interface and Implementation</h4>
<p>Ada enforces a clear separation between what a module provides and how it works. This has several benefits:</p>
<ul>
<li><strong>Easier maintenance:</strong> You can change implementation details without affecting clients</li>
<li><strong>Better documentation:</strong> The specification clearly states what the module does</li>
<li><strong>Reduced coupling:</strong> Clients depend only on the interface, not implementation details</li>
</ul>
<p>This modular approach makes large projects manageable. Instead of dealing with a monolithic codebase, you can build systems from independently verifiable components. Each package can be tested in isolation, and changes to one package won’t accidentally break others.</p>
<h2>1.4 Your First Ada Program: Beyond “Hello World”</h2>
<p>Let’s examine a complete Ada program that demonstrates the language’s structure and safety features. This example isn’t about safety-critical systems—it’s a simple temperature converter for a home thermostat, showing how Ada’s features prevent common programming errors.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-----------------------------------------------------------------------</span>
<span class="hljs-comment">-- Home_Thermostat.adb</span>
<span class="hljs-comment">-- Demonstrates Ada's strong typing, contracts, and modular design</span>
<span class="hljs-comment">-----------------------------------------------------------------------</span>
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Converter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span>(C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; C &gt;= -<span class="hljs-number">273.15</span>,  <span class="hljs-comment">-- Absolute zero check</span>
      Post =&gt; Celsius_to_Fahrenheit<span class="hljs-symbol">'Result</span> &gt;= -<span class="hljs-number">459.67</span>;
      
   <span class="hljs-keyword">function</span> <span class="hljs-title">Fahrenheit_to_Celsius</span>(F : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; F &gt;= -<span class="hljs-number">459.67</span>,
      Post =&gt; Fahrenheit_to_Celsius<span class="hljs-symbol">'Result</span> &gt;= -<span class="hljs-number">273.15</span>;
<span class="hljs-keyword">end</span> Temperature_Converter;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Converter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span>(C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> C * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
   <span class="hljs-keyword">end</span> Celsius_to_Fahrenheit;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Fahrenheit_to_Celsius</span>(F : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (F - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
   <span class="hljs-keyword">end</span> Fahrenheit_to_Celsius;
<span class="hljs-keyword">end</span> Temperature_Converter;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Home_Thermostat</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">use</span> Temperature_Converter;
   
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Valid_Celsius </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span>;
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Valid_Fahrenheit </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">58.0</span>..<span class="hljs-number">122.0</span>;
   
   Current_Temp : <span class="hljs-type">Valid_Celsius</span> := <span class="hljs-number">22.5</span>;
   Target_Temp  : <span class="hljs-type">Valid_Fahrenheit</span>;
   
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Convert current temperature to Fahrenheit</span>
   Target_Temp := Celsius_to_Fahrenheit(Current_Temp);
   
   Put_Line(<span class="hljs-string">"Current temperature: "</span> &amp; Current_Temp<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C"</span>);
   Put_Line(<span class="hljs-string">"Equivalent in Fahrenheit: "</span> &amp; Target_Temp<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°F"</span>);
   
   <span class="hljs-comment">-- Next line would fail PRECONDITION CHECK at compile time:</span>
   <span class="hljs-comment">-- Current_Temp := -300.0;</span>
   
   <span class="hljs-comment">-- Next line would fail POSTCONDITION CHECK at runtime:</span>
   <span class="hljs-comment">-- Target_Temp := Celsius_to_Fahrenheit(-300.0);</span>
   
   <span class="hljs-comment">-- This would fail at compile time due to type mismatch:</span>
   <span class="hljs-comment">-- Target_Temp := Current_Temp;  -- Cannot assign Celsius to Fahrenheit</span>
<span class="hljs-keyword">end</span> Home_Thermostat;
</code></pre>
<p>When compiled and run, this program outputs:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Current temperature:</span>  <span class="hljs-number">2.25000E+01</span> <span class="hljs-string">°C</span>
<span class="hljs-attr">Equivalent in Fahrenheit:</span>  <span class="hljs-number">7.25000E+01</span> <span class="hljs-string">°F</span>
</code></pre>
<h3>1.4.1 Key Structural Elements Explained</h3>
<h4>1.4.1.1 With/Use Clauses</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
</code></pre>
<p>This imports the standard input/output package. The <code>with</code> clause declares a dependency, while <code>use</code> allows you to call procedures without prefixing them with <code>Ada.Text_IO</code>. This is explicit—unlike languages that automatically import everything—so you always know where functions come from.</p>
<h4>1.4.1.2 Package Structure</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Converter </span><span class="hljs-keyword">is</span>
   ...
<span class="hljs-keyword">end</span> Temperature_Converter;
</code></pre>
<p>Packages separate interface from implementation. The specification (<code>.ads</code>) declares what’s available, while the body (<code>.adb</code>) contains the implementation. This keeps your code organized and makes it clear what other parts of the program can use.</p>
<h4>1.4.1.3 Subtype Constraints</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Valid_Celsius </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Valid_Fahrenheit </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">58.0</span>..<span class="hljs-number">122.0</span>;
</code></pre>
<p>These define specialized types that only allow values within specific ranges. Any attempt to assign an out-of-range value results in a compile-time error. For example, <code>Current_Temp := -300.0;</code> would fail immediately during compilation.</p>
<h4>1.4.1.4 Contract-Based Programming</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span>(C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; C &gt;= -<span class="hljs-number">273.15</span>,
   Post =&gt; Celsius_to_Fahrenheit<span class="hljs-symbol">'Result</span> &gt;= -<span class="hljs-number">459.67</span>;
</code></pre>
<p>This function specifies:</p>
<ul>
<li><strong>Precondition:</strong> Input must be at least absolute zero (-273.15°C)</li>
<li><strong>Postcondition:</strong> Output must be at least absolute zero in Fahrenheit (-459.67°F)</li>
</ul>
<p>If you call this function with an invalid value (like -300°C), Ada will either catch it at compile time (if the value is known) or at runtime (if the value comes from user input).</p>
<h4>1.4.1.5 Type Safety</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Target_Temp := <span class="hljs-number">22.5</span>;  <span class="hljs-comment">-- Error: type mismatch</span>
</code></pre>
<p><code>Target_Temp</code> is a <code>Valid_Fahrenheit</code>, but <code>22.5</code> is just a float. Ada requires explicit conversion between types, preventing accidental misuse. This is different from languages like Python where <code>22.5</code> could be assigned to any numeric variable without issue.</p>
<h4>1.4.1.6 Explicit Semicolons</h4>
<p>Ada requires semicolons to terminate statements. This eliminates ambiguity about where statements end, preventing common syntax errors found in languages like Python where indentation matters.</p>
<h4>1.4.1.7 Terminator Comments</h4>
<p>While not required in this simple example, Ada often uses comments to mark the end of blocks (like <code>end Home_Thermostat;</code>). This makes code more readable, especially in large programs where it’s easy to lose track of nested blocks.</p>
<h3>1.4.2 Why This Matters for Everyday Programming</h3>
<p>This simple temperature converter demonstrates Ada’s core strengths:</p>
<ul>
<li><strong>Preventing type errors:</strong> You can’t accidentally assign Celsius values to Fahrenheit variables</li>
<li><strong>Enforcing valid ranges:</strong> Temperatures stay within physically meaningful ranges</li>
<li><strong>Documenting requirements:</strong> Contracts make function behavior clear without external documentation</li>
<li><strong>Modular design:</strong> The conversion logic is separate from the main program</li>
</ul>
<p>These features aren’t just for “safety-critical” systems—they’re valuable for any project where reliability matters. Imagine building a home automation system where temperature readings control heating. If the software incorrectly converts temperatures, it could cause the heater to run constantly or not at all. Ada’s type system and contracts would prevent these kinds of mistakes before they reach production.</p>
<h2>1.5 Setting Up Your Ada Environment</h2>
<p>The GNAT compiler (part of GCC) is the reference implementation for Ada. It’s free, open-source, and available for all major platforms. Let’s walk through installation and basic usage.</p>
<h3>1.5.1 Installation Options</h3>
<h4>1.5.1.1 Windows</h4>
<ol>
<li>
<p>Download the latest GNAT Community edition from <a href="https://www.adacore.com/download">AdaCore’s website</a></p>
</li>
<li>
<p>Run the installer (select default options)</p>
</li>
<li>
<p>Add <code>C:\GNAT\2023\bin</code> to your PATH environment variable</p>
</li>
<li>
<p>Verify installation by opening Command Prompt and typing:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnat --version
</code></pre>
</li>
</ol>
<h4>1.5.1.2 Linux</h4>
<p>For Ubuntu/Debian:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">sudo</span> apt update
<span class="hljs-built_in">sudo</span> apt install gnat
</code></pre>
<p>For Fedora:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">sudo</span> dnf install gnat
</code></pre>
<p>Verify installation:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnat --version
</code></pre>
<h4>1.5.1.3 macOS</h4>
<p>Using Homebrew:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">brew install gnat
</code></pre>
<p>Verify installation:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnat --version
</code></pre>
<h3>1.5.2 GNAT Programming Studio (GPS)</h3>
<p>GNAT comes with GPS (GNAT Programming Studio), a full-featured IDE for Ada development. To launch it:</p>
<ul>
<li><strong>Windows:</strong> Start menu → GNAT Programming Studio</li>
<li><strong>Linux/macOS:</strong> Terminal → <code>gps</code></li>
</ul>
<p>GPS provides:</p>
<ul>
<li>Syntax highlighting</li>
<li>Code completion</li>
<li>Integrated debugger</li>
<li>Project management</li>
<li>Contract verification tools</li>
</ul>
<h3>1.5.3 Basic Compilation Commands</h3>
<p>To compile and run our temperature converter example:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 2 Compile with contract verification enabled</span>
gnatmake -gnata Home_Thermostat.adb

<span class="hljs-comment"># 3 Run the program</span>
./home_thermostat
</code></pre>
<p>The <code>-gnata</code> flag enables contract checking. Without it, contracts would be ignored at runtime. For development, always use this flag to catch errors early.</p>
<h3>1.5.4 Development Environment Tips</h3>
<ul>
<li><strong>Enable all warnings:</strong> Add <code>-gnatwa</code> to compilation flags to catch potential issues</li>
<li><strong>Use GPS for debugging:</strong> Set breakpoints, inspect variables, and step through code</li>
<li><strong>Organize projects:</strong> Use <code>.gpr</code> project files for larger applications</li>
<li><strong>Try formal verification:</strong> Install SPARK (a subset of Ada for mathematical verification) to prove correctness</li>
</ul>
<h3>1.5.5 Example: Building a Project</h3>
<p>For larger applications, organize code into projects. Create a file named <code>thermostat.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Thermostat <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"obj"</span>);
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/home_thermostat.adb"</span>);
<span class="hljs-keyword">end</span> Thermostat;
</code></pre>
<p>Then compile with:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P thermostat.gpr
</code></pre>
<p>This structure keeps your code organized and makes it easy to manage dependencies.</p>
<h2>1.6 Why Ada Endures: The Reliability Imperative</h2>
<p>In an era of rapid development cycles and “move fast and break things” culture, Ada’s value proposition becomes increasingly relevant. While it might seem slower to write Ada code at first, the long-term benefits in code quality and maintainability often outweigh the initial investment.</p>
<h3>1.6.1 Development Phase Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Development Phase</strong></th>
<th style="text-align:left"><strong>Typical Language</strong></th>
<th style="text-align:left"><strong>Ada Approach</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Design</strong></td>
<td style="text-align:left">Informal documentation</td>
<td style="text-align:left">Formal contracts in code</td>
</tr>
<tr>
<td style="text-align:left"><strong>Coding</strong></td>
<td style="text-align:left">Runtime errors common</td>
<td style="text-align:left">Compile-time error prevention</td>
</tr>
<tr>
<td style="text-align:left"><strong>Testing</strong></td>
<td style="text-align:left">80% effort on bug hunting</td>
<td style="text-align:left">Focus on edge cases only</td>
</tr>
<tr>
<td style="text-align:left"><strong>Maintenance</strong></td>
<td style="text-align:left">Brittle refactoring</td>
<td style="text-align:left">Compiler-guided safe changes</td>
</tr>
</tbody>
</table>
<p>Let’s explore what this means in practice.</p>
<h4>1.6.1.1 Design Phase</h4>
<p>In most languages, design decisions are documented in external documents or comments. These often become outdated as code evolves. Ada’s contracts embed design requirements directly in code. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Discount</span>(Price : <span class="hljs-type">Float</span>; <span class="hljs-keyword">Is</span>_Premium : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">with</span>
   Pre  =&gt; Price &gt; <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Discount<span class="hljs-symbol">'Result</span> &lt;= Price;
</code></pre>
<p>This is always up-to-date because it’s part of the code itself. If you change the function’s behavior, the contract must change too. This eliminates the common problem of “documentation that doesn’t match the code.”</p>
<h4>1.6.1.2 Coding Phase</h4>
<p>In languages like C or Python, many errors only surface at runtime. For example:</p>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># 4 Python example</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_discount</span>(<span class="hljs-params">price, is_premium</span>):
    discount = <span class="hljs-number">0.1</span> <span class="hljs-keyword">if</span> is_premium <span class="hljs-keyword">else</span> <span class="hljs-number">0.05</span>
    <span class="hljs-keyword">return</span> price * (<span class="hljs-number">1</span> - discount)
</code></pre>
<p>This function might work fine for most inputs, but if <code>price</code> is negative, it could produce incorrect results. In Ada, you’d define a subtype for valid prices:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Valid_Price </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..Float<span class="hljs-symbol">'Last</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Discount</span>(Price : <span class="hljs-type">Valid_Price</span>; <span class="hljs-keyword">Is</span>_Premium : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">with</span>
   Pre  =&gt; Price &gt; <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Discount<span class="hljs-symbol">'Result</span> &lt;= Price;
</code></pre>
<p>Now, any attempt to pass a negative price would be caught at compile time. This prevents entire classes of errors before they ever reach testing.</p>
<h4>1.6.1.3 Testing Phase</h4>
<p>In typical development, 80% of testing time is spent hunting for bugs. With Ada, many bugs are caught during compilation, so testing focuses on edge cases and real-world scenarios rather than basic errors.</p>
<p>For example, consider a function that processes user input:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Process_Input</span>(Input : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Input<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>,
   Post =&gt; Process_Input<span class="hljs-symbol">'Result</span> &gt;= <span class="hljs-number">0</span>;
</code></pre>
<p>With Ada’s strong typing and contracts, you don’t need to test for empty strings or negative results—those cases are prevented by the language itself. Your testing effort can focus on more meaningful scenarios.</p>
<h4>1.6.1.4 Maintenance Phase</h4>
<p>When maintaining code, refactoring is often risky—changing one part might break another. Ada’s compiler acts as a safety net. For example, if you change a function’s signature:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Original</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Total</span>(Price : <span class="hljs-type">Float</span>; Quantity : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;

<span class="hljs-comment">-- Changed to</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Total</span>(Price : <span class="hljs-type">Float</span>; Quantity : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
</code></pre>
<p>The compiler will immediately flag all call sites where <code>Quantity</code> might be negative. This makes refactoring safe and predictable.</p>
<h3>1.6.2 The Cost of Reliability</h3>
<p>Ada development typically requires 15-20% more upfront effort than languages like C. However, studies by software engineering organizations show this investment yields 40-60% reduction in lifetime costs for projects where reliability matters. For applications that must operate correctly for years, the discipline Ada enforces translates to fewer bugs, easier maintenance, and longer software lifespans.</p>
<p>Consider a simple example: a banking application that processes transactions. In a typical language, you might have:</p>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># 5 Python version</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">transfer</span>(<span class="hljs-params">from_account, to_account, amount</span>):
    from_account.balance -= amount
    to_account.balance += amount
</code></pre>
<p>This code has multiple potential issues:</p>
<ul>
<li>Negative amounts could be transferred</li>
<li>Accounts might not have sufficient funds</li>
<li>Race conditions could occur in concurrent environments</li>
</ul>
<p>In Ada, you’d define proper types and contracts:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Positive_Amount </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..Float<span class="hljs-symbol">'Last</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Transfer</span>(From, To : <span class="hljs-type">Account</span>; Amount : <span class="hljs-type">Positive_Amount</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; From.Balance &gt;= Amount,
   Post =&gt; From.Balance<span class="hljs-symbol">'Old</span> - Amount = From.Balance <span class="hljs-keyword">and</span>
           To.Balance<span class="hljs-symbol">'Old</span> + Amount = To.Balance;
</code></pre>
<p>Now:</p>
<ul>
<li>Negative amounts are impossible (compile-time error)</li>
<li>Insufficient funds are checked at runtime</li>
<li>The postcondition ensures the transfer is mathematically correct</li>
</ul>
<p>This might seem like more work initially, but it prevents costly bugs down the line. In banking, a single bug could lead to millions in losses. Ada’s approach makes these errors impossible.</p>
<h2>1.7 Next Steps in Your Ada Journey</h2>
<p>This introduction has laid the foundation for understanding Ada’s philosophy and core structure. Let’s explore what’s ahead in your Ada learning journey.</p>
<h3>1.7.1 Upcoming Topics</h3>
<h4>1.7.1.1 Strong Typing in Depth</h4>
<p>We’ll dive deeper into Ada’s type system:</p>
<ul>
<li>Subtypes vs. derived types</li>
<li>Type conversion rules</li>
<li>Custom type attributes</li>
<li>Type-safe enumerations</li>
</ul>
<p>You’ll learn how to define types that precisely match your domain requirements, preventing entire classes of errors before they occur.</p>
<h4>1.7.1.2 Tasking and Protected Objects</h4>
<p>We’ll explore Ada’s concurrency model in detail:</p>
<ul>
<li>Task priorities and scheduling</li>
<li>Protected object design patterns</li>
<li>Asynchronous communication</li>
<li>Real-time system considerations</li>
</ul>
<p>You’ll build concurrent applications that are safe by design, without the complexity of manual thread management.</p>
<h4>1.7.1.3 Formal Verification with SPARK</h4>
<p>SPARK is a subset of Ada designed for mathematical verification. We’ll cover:</p>
<ul>
<li>How to prove program correctness</li>
<li>Writing contracts that can be verified mathematically</li>
<li>Using SPARK tools for static analysis</li>
<li>Real-world examples of verified systems</li>
</ul>
<p>This will show you how to take Ada’s reliability features to the next level.</p>
<h4>1.7.1.4 Real-Time Systems Programming</h4>
<p>Ada excels in real-time environments. We’ll cover:</p>
<ul>
<li>Deadline monitoring</li>
<li>Priority inheritance</li>
<li>Interrupt handling</li>
<li>Timing constraints</li>
</ul>
<p>You’ll learn how to build systems that respond predictably to time-sensitive events.</p>
<h4>1.7.1.5 Interfacing with C and Other Languages</h4>
<p>Ada integrates seamlessly with existing codebases. We’ll cover:</p>
<ul>
<li>Calling C functions from Ada</li>
<li>Using Ada libraries in C projects</li>
<li>Data structure compatibility</li>
<li>Memory management considerations</li>
</ul>
<p>This will let you leverage Ada’s strengths in projects that already use other languages.</p>
<h3>1.7.2 Recommended Practice</h3>
<p>To reinforce what you’ve learned, try these exercises:</p>
<ol>
<li>
<p><strong>Modify the temperature converter</strong><br>
Add a subtype for Celsius values that only allows multiples of 0.5 (for precision control). Implement a contract that ensures the Fahrenheit conversion maintains this precision.</p>
</li>
<li>
<p><strong>Build a simple calculator</strong><br>
Create a package that handles basic arithmetic operations with proper type checking. Ensure all inputs are valid and outputs stay within expected ranges.</p>
</li>
<li>
<p><strong>Implement a task-based sensor reader</strong><br>
Create a task that reads sensor data every 100ms and stores it in a protected object. Write a second task that processes the data and logs it.</p>
</li>
<li>
<p><strong>Create a type-safe counter</strong><br>
Define a subtype for counters that only allows positive values. Implement increment and decrement operations with contracts that prevent negative values.</p>
</li>
<li>
<p><strong>Build a modular project</strong><br>
Organize your code into packages with clear interfaces. Use a project file to manage dependencies and compilation.</p>
</li>
</ol>
<h3>1.7.3 Key Takeaway</h3>
<p>Ada isn’t just a language—it’s a methodology for building systems where correctness is measurable and reliable. Its strict type system, built-in concurrency, and formal contracts create a foundation for robust software that can be maintained and verified over time. While the learning curve may seem steep at first, the long-term benefits in code quality and reliability make Ada a powerful tool for any developer serious about building dependable software.</p>
<p>Ada’s greatest strength isn’t that it prevents catastrophic failures (though it can do that too). It’s that it makes everyday programming easier and more predictable. By catching errors early and enforcing clear design principles, Ada reduces the mental burden of programming. You spend less time debugging and more time solving real problems.</p>
<p>As you continue your Ada journey, remember: the discipline it enforces today prevents problems tomorrow. Whether you’re building a small utility or a large-scale system, Ada gives you the tools to create software that works as intended—and keeps working, reliably, for years to come.</p>
<h1>2. Ada’s Strong Typing System</h1>
<p>While most programming languages treat types as mere documentation, Ada transforms them into powerful compile-time verification tools. This chapter explores how Ada’s rigorous type system eliminates entire categories of errors before code ever runs, with practical examples demonstrating how constrained types, subtypes, and strong equivalence prevent bugs that plague other languages. You’ll learn to leverage Ada’s type system as your first line of defense in building reliable software.</p>
<p><strong>Key Principle:</strong> In Ada, types aren’t just labels—they’re contracts that the compiler enforces. Every time you declare a variable, function parameter, or return value, you’re specifying not just what data it holds, but what it <em>means</em> in your program’s domain. This semantic precision prevents entire classes of errors that would otherwise surface only during testing or in production.</p>
<h2>2.1 Why Strong Typing Matters: Beyond Syntax Checking</h2>
<p>Most programming languages use types primarily for memory allocation decisions. C, C++, and Java use types to determine how much memory to allocate for a variable and how to interpret its bits. Ada uses types as semantic validators that catch logical errors during compilation. Consider this critical distinction:</p>
<h3>2.1.1 C/C++ Type System</h3>
<ul>
<li>Primarily for memory layout</li>
<li>Implicit conversions common</li>
<li>Numeric types often interchangeable</li>
<li>Pointer arithmetic encouraged</li>
<li>Errors often surface at runtime</li>
</ul>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// C code - compiles without warnings</span>
<span class="hljs-type">int</span> voltage = <span class="hljs-number">240</span>;
<span class="hljs-type">float</span> current = <span class="hljs-number">15.5</span>;
<span class="hljs-type">double</span> power = voltage * current; <span class="hljs-comment">// Implicit conversion</span>
</code></pre>
<p>This C code compiles without any warnings or errors. The integer <code>voltage</code> is automatically converted to a floating-point value when multiplied by <code>current</code>, and the result is stored in <code>power</code>. While this might seem convenient, it hides a fundamental issue: the program has no way to distinguish between voltage values and current values. Both are just numbers, and the compiler doesn’t care if you accidentally assign a current value to a voltage variable.</p>
<h3>2.1.2 Ada Type System</h3>
<ul>
<li>Enforces semantic correctness</li>
<li>No implicit conversions</li>
<li>Numeric types strictly separated</li>
<li>Pointer arithmetic prohibited</li>
<li>Errors caught at compile time</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes">Voltage : <span class="hljs-type">Integer</span> := <span class="hljs-number">240</span>;
Current : <span class="hljs-type">Float</span> := <span class="hljs-number">15.5</span>;
Power : <span class="hljs-type">Float</span> := Voltage * Current; <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>This Ada code will fail to compile. The compiler detects that you’re trying to multiply an <code>Integer</code> (<code>Voltage</code>) with a <code>Float</code> (<code>Current</code>) and assign the result to a <code>Float</code> (<code>Power</code>). Ada requires explicit conversion between these types: <code>Float(Voltage) * Current</code>. This might seem inconvenient at first, but it forces you to acknowledge that voltage and current are conceptually different quantities that require explicit handling.</p>
<h3>2.1.3 The Mars Climate Orbiter Lesson</h3>
<p>In 1999, NASA lost a $125 million spacecraft because one team used metric units while another used imperial units. The error went undetected because both systems used the same <code>double</code> type. Ada’s strong typing would have required explicit unit conversion with distinct types, making this error impossible:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Newton_Seconds </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">Pound_Force_Seconds </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;

<span class="hljs-comment">-- These are completely incompatible types</span>
N : <span class="hljs-type">Newton_Seconds</span> := <span class="hljs-number">1000.0</span>;
P : <span class="hljs-type">Pound_Force_Seconds</span> := N; <span class="hljs-comment">-- Compile-time error: type mismatch</span>
</code></pre>
<p>In this Ada example, <code>Newton_Seconds</code> and <code>Pound_Force_Seconds</code> are distinct types—even though they’re both based on <code>Float</code>. Assigning one to the other requires an explicit conversion function, which would force developers to acknowledge the unit conversion. This simple type distinction would have prevented the Mars Climate Orbiter disaster by making the unit mismatch impossible to overlook.</p>
<h3>2.1.4 The Real Cost of Type Errors</h3>
<p>Type errors are not just theoretical problems—they have real-world consequences. Consider these examples:</p>
<ul>
<li>A banking application that accidentally treated dollars as euros could transfer $1 million instead of €1 million, causing massive financial loss</li>
<li>A medical device that confused milligrams with grams could administer a lethal dose of medication</li>
<li>A flight control system that mixed up feet and meters could cause a plane to crash</li>
</ul>
<p>In most languages, these errors would only surface during testing or in production. In Ada, they’re caught during compilation—before anyone ever runs the code. This might seem like a small difference, but it fundamentally changes how you approach software development. Instead of writing code and hoping it works, you write code that <em>cannot</em> be incorrect according to your type definitions.</p>
<h3>2.1.5 How Ada’s Type System Differs from Other Languages</h3>
<p>Let’s examine how Ada’s type system compares to other popular languages:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>C/C++</strong></th>
<th style="text-align:left"><strong>Java</strong></th>
<th style="text-align:left"><strong>Python</strong></th>
<th style="text-align:left"><strong>Ada</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Type checking</strong></td>
<td style="text-align:left">Static, weak</td>
<td style="text-align:left">Static, strong</td>
<td style="text-align:left">Dynamic</td>
<td style="text-align:left">Static, strong</td>
</tr>
<tr>
<td style="text-align:left"><strong>Implicit conversions</strong></td>
<td style="text-align:left">Common</td>
<td style="text-align:left">Limited</td>
<td style="text-align:left">Common</td>
<td style="text-align:left">None</td>
</tr>
<tr>
<td style="text-align:left"><strong>User-defined types</strong></td>
<td style="text-align:left">Structs, classes</td>
<td style="text-align:left">Classes</td>
<td style="text-align:left">Classes</td>
<td style="text-align:left">Types, subtypes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Type equivalence</strong></td>
<td style="text-align:left">Structural</td>
<td style="text-align:left">Structural</td>
<td style="text-align:left">Structural</td>
<td style="text-align:left">Name-based</td>
</tr>
<tr>
<td style="text-align:left"><strong>Pointer arithmetic</strong></td>
<td style="text-align:left">Allowed</td>
<td style="text-align:left">Not allowed</td>
<td style="text-align:left">Not applicable</td>
<td style="text-align:left">Prohibited</td>
</tr>
<tr>
<td style="text-align:left"><strong>Runtime type checks</strong></td>
<td style="text-align:left">Minimal</td>
<td style="text-align:left">Some</td>
<td style="text-align:left">Full</td>
<td style="text-align:left">Extensive</td>
</tr>
</tbody>
</table>
<p>The key difference is in <strong>name-based equivalence</strong>. In C and Java, two types are considered compatible if they have the same structure (structural equivalence). In Ada, two types are compatible only if they share the same name declaration (name-based equivalence). This might seem restrictive, but it prevents accidental substitution of conceptually different values that happen to have the same representation.</p>
<h2>2.2 Core Typing Mechanisms in Depth</h2>
<p>Ada’s type system has three fundamental components: basic types, derived types, and subtypes. Each serves a specific purpose in building reliable software.</p>
<h3>2.2.1 Type Equivalence vs. Name Equivalence</h3>
<p>Most languages use <em>structural equivalence</em>—types are compatible if their structures match. Ada uses <em>name equivalence</em>—two types are compatible only if they share the same name declaration.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Two identical structures are still incompatible types</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer;
<span class="hljs-keyword">type</span> <span class="hljs-type">Device_ID </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer;

S : <span class="hljs-type">Sensor_ID</span> := <span class="hljs-number">100</span>;
D : <span class="hljs-type">Device_ID</span> := S; <span class="hljs-comment">-- ERROR: type mismatch despite same structure</span>
</code></pre>
<p>In this example, <code>Sensor_ID</code> and <code>Device_ID</code> are both derived from <code>Integer</code> and have identical internal representations. However, because they have different names, they’re considered completely different types. Attempting to assign one to the other results in a compile-time error.</p>
<h4>2.2.1.1 Why Name Equivalence Matters</h4>
<p>This prevents accidental substitution of conceptually different values that happen to have the same representation. A sensor ID and device ID might both be integers, but they represent fundamentally different concepts in your system. In a building management system, you might have:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Room_Number </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer;
<span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer;

Current_Room : <span class="hljs-type">Room_Number</span> := <span class="hljs-number">101</span>;
Sensor : <span class="hljs-type">Sensor_ID</span> := Current_Room; <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>This error would catch a mistake where someone accidentally assigned a room number to a sensor ID. Without strong typing, this could lead to the wrong sensor being controlled for the wrong room—a potentially serious error in a smart building system.</p>
<h3>2.2.2 Subtypes with Constraints</h3>
<p>Subtypes add constraints to existing types, creating compile-time validation. They’re one of Ada’s most powerful features for preventing errors.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Constrained numeric subtypes</span>
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Percentage </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">100</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Latitude  </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">90.0</span>..<span class="hljs-number">90.0</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Port      </span><span class="hljs-keyword">is</span> Positive <span class="hljs-keyword">range</span> <span class="hljs-number">1024</span>..<span class="hljs-number">65535</span>;

P : <span class="hljs-type">Percentage</span> := <span class="hljs-number">150</span>; <span class="hljs-comment">-- Compile-time error</span>
L : <span class="hljs-type">Latitude</span>  := <span class="hljs-number">100.0</span>; <span class="hljs-comment">-- Compile-time error</span>
</code></pre>
<p>These subtypes define specific ranges of valid values. Any attempt to assign a value outside these ranges results in a compile-time error. This is different from C or Java, where you’d have to manually check these ranges at runtime.</p>
<h4>2.2.2.1 Constraint Best Practices</h4>
<p>When using subtypes, follow these best practices:</p>
<ul>
<li><strong>Use subtypes for all domain-specific values</strong>: Don’t just use <code>Integer</code> for everything. Create specific subtypes for temperatures, voltages, percentages, etc.</li>
<li><strong>Name constraints meaningfully</strong>: <code>Valid_Temperature</code> is better than <code>T</code> or <code>Num</code>.</li>
<li><strong>Constraints become automatic runtime checks</strong>: Even if you pass values at runtime (e.g., from user input), Ada will check them against the subtype constraints.</li>
</ul>
<p>Let’s see a practical example of how subtypes prevent errors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Without subtypes (prone to errors)</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span>(T : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> T &lt; -<span class="hljs-number">50</span> <span class="hljs-keyword">or</span> T &gt; <span class="hljs-number">150</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">raise</span> Invalid_Temperature;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-comment">-- ... rest of code ...</span>
<span class="hljs-keyword">end</span> Set_Temperature;

<span class="hljs-comment">-- With subtypes (compile-time safety)</span>
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">50</span>..<span class="hljs-number">150</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span>(T : <span class="hljs-type">Temperature</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- No need for range checks - compiler guarantees validity</span>
   <span class="hljs-comment">-- ... rest of code ...</span>
<span class="hljs-keyword">end</span> Set_Temperature;
</code></pre>
<p>In the first version, you have to manually check the temperature range at runtime. This is error-prone—developers might forget to check, or the check might be incorrect. In the second version, the compiler guarantees that <code>T</code> is always within the valid range, so you don’t need any runtime checks. This makes your code simpler, safer, and more reliable.</p>
<h3>2.2.3 Derived Types for Semantic Safety</h3>
<p>When you need to create a new type that has similar properties but distinct meaning, use derived types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Voltage </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer;
<span class="hljs-keyword">type</span> <span class="hljs-type">Current </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer;

V : <span class="hljs-type">Voltage</span> := <span class="hljs-number">240</span>;
C : <span class="hljs-type">Current</span> := <span class="hljs-number">15</span>;

<span class="hljs-comment">-- This is now a type error, as it should be:</span>
Power : <span class="hljs-type">Integer</span> := V * C; <span class="hljs-comment">-- ERROR: no operator for mixed types</span>
</code></pre>
<p>To enable operations between derived types, you must explicitly define the semantics:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">"*"</span> (Left : <span class="hljs-type">Voltage</span>; Right : <span class="hljs-type">Current</span>)
   <span class="hljs-keyword">return</span> <span class="hljs-type">Power</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Power (Left) * Power (Right);
<span class="hljs-keyword">end</span> <span class="hljs-string">"*"</span>;
</code></pre>
<p>This is different from C++, where you could implicitly convert between types or use operator overloading without explicit definitions. In Ada, you must explicitly define how different types interact, which forces you to think about the semantics of your operations.</p>
<h4>2.2.3.1 Practical Application: Financial Calculations</h4>
<p>Let’s see how derived types prevent errors in a financial application:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Dollars </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">Euros </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;

<span class="hljs-comment">-- This would fail to compile:</span>
Total : <span class="hljs-type">Euros</span> := <span class="hljs-number">100.0</span> * Dollars(<span class="hljs-number">1.1</span>); <span class="hljs-comment">-- ERROR: incompatible types</span>

<span class="hljs-comment">-- Instead, you must explicitly convert:</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Convert_Dollars_To_Euros</span>(D : <span class="hljs-type">Dollars</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Euros</span> <span class="hljs-keyword">is</span>
   (Euros(D) * <span class="hljs-number">0.95</span>); <span class="hljs-comment">-- Assuming 1 USD = 0.95 EUR</span>
</code></pre>
<p>In this example, the compiler prevents you from multiplying dollars by euros without explicit conversion. This might seem like extra work, but it prevents a common financial error: accidentally treating dollars as euros or vice versa. In a banking system, this could mean transferring the wrong amount of money.</p>
<h2>2.3 Advanced Type Features for Reliability</h2>
<p>Ada’s type system includes several advanced features that make it uniquely powerful for building reliable software.</p>
<h3>2.3.1 Tagged Types for Safe Polymorphism</h3>
<p>Ada’s approach to object-oriented programming with built-in runtime checks is fundamentally different from C++. In Ada, polymorphism is achieved through tagged types, which automatically insert runtime checks when converting between types.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   ID      : <span class="hljs-type">Sensor_ID</span>;
   Status  : <span class="hljs-type">Status_Type</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Units   : <span class="hljs-type">Temperature_Units</span>;
   Reading : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-comment">-- Safe dispatching call</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (S : <span class="hljs-type">Sensor</span>'Class) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Compiler inserts runtime tag check</span>
   <span class="hljs-keyword">if</span> S <span class="hljs-keyword">in</span> Temperature_Sensor <span class="hljs-keyword">then</span>
      Handle_Temperature (Temperature_Sensor (S));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Process;
</code></pre>
<p>Unlike C++, where you can accidentally slice objects or have unsafe casts, Ada automatically checks the type at runtime. If you try to treat a <code>Sensor</code> as a <code>Temperature_Sensor</code> when it’s not, Ada will raise a <code>Constraint_Error</code> at runtime.</p>
<h4>2.3.1.1 Practical Application: Medical Device Safety</h4>
<p>In an infusion pump system, you might have different types of sensors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Milliliters </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">5000.0</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Milligrams </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">1000.0</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Flow_Rate  </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">500.0</span>; <span class="hljs-comment">-- mL/hour</span>

<span class="hljs-comment">-- These prevent dangerous unit confusion:</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Dose</span> (Volume : <span class="hljs-type">Milliliters</span>);
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Concentration</span> (Mass : <span class="hljs-type">Milligrams</span>; Volume : <span class="hljs-type">Milliliters</span>);
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Flow_Rate</span> (Rate : <span class="hljs-type">Flow_Rate</span>);
</code></pre>
<p>A developer cannot accidentally set flow rate in mg/hour instead of mL/hour—the compiler enforces unit correctness. If you tried to write:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Set_Flow_Rate(<span class="hljs-number">100.0</span>); <span class="hljs-comment">-- This is fine (Flow_Rate is a subtype of Float)</span>
Set_Flow_Rate(Milligrams(<span class="hljs-number">100.0</span>)); <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>The compiler would catch the error immediately. This might seem like a small detail, but in a medical device, it could mean the difference between a safe operation and a fatal overdose.</p>
<h3>2.3.2 Enumeration Types with Custom Behavior</h3>
<p>Ada’s enumeration types are more powerful than in most languages. You can define custom attributes and operations for enums:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Traffic_Light </span><span class="hljs-keyword">is</span> (Red, Yellow, Green);

<span class="hljs-comment">-- Define custom attributes</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Next_State</span>(Light : <span class="hljs-type">Traffic_Light</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Traffic_Light</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">case</span> Light <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> Red   =&gt; <span class="hljs-keyword">return</span> Green;
      <span class="hljs-keyword">when</span> Yellow =&gt; <span class="hljs-keyword">return</span> Red;
      <span class="hljs-keyword">when</span> Green  =&gt; <span class="hljs-keyword">return</span> Yellow;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
<span class="hljs-keyword">end</span> Next_State;

<span class="hljs-comment">-- Usage</span>
Current_Light : <span class="hljs-type">Traffic_Light</span> := Red;
Next_Light    : <span class="hljs-type">Traffic_Light</span> := Next_State(Current_Light);
</code></pre>
<p>Unlike C or Java enums, Ada enums are first-class types with their own operations. You can’t accidentally assign an integer to a Traffic_Light:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Current_Light := <span class="hljs-number">0</span>; <span class="hljs-comment">-- ERROR: type mismatch</span>
Current_Light := Red; <span class="hljs-comment">-- Correct</span>
</code></pre>
<p>This prevents common errors like using magic numbers for enum values.</p>
<h3>2.3.3 Type Invariants for Data Integrity</h3>
<p>Ada 2012 introduced type invariants—properties that must always be true for a type. These are checked automatically whenever a value of the type is modified:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Bank_Account </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Balance : <span class="hljs-type">Float</span>;
   Overdraft_Limit : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>
<span class="hljs-keyword">with</span> Invariant =&gt; Bank_Account.Balance &gt;= -Bank_Account.Overdraft_Limit;

<span class="hljs-comment">-- This would fail the invariant check:</span>
Account : <span class="hljs-type">Bank_Account</span> := (Balance =&gt; -<span class="hljs-number">1000.0</span>, Overdraft_Limit =&gt; <span class="hljs-number">500.0</span>);
</code></pre>
<p>In this example, the type invariant ensures that the account balance never goes below the overdraft limit. If you try to create an invalid account, the compiler will raise a <code>Constraint_Error</code>.</p>
<p>Type invariants are particularly useful for complex data structures where maintaining invariants manually would be error-prone. They ensure that your data always remains in a valid state, no matter how it’s modified.</p>
<h2>2.4 Practical Type System Patterns</h2>
<p>Now that we’ve explored Ada’s type system fundamentals, let’s look at practical patterns for building reliable software.</p>
<h3>2.4.1 Pattern 1: Range Constraints for State Safety</h3>
<p>Prevent invalid state transitions through constrained types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">System_State </span><span class="hljs-keyword">is</span> (Off, Starting, Running, Stopping);
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Operational_State </span><span class="hljs-keyword">is</span> System_State <span class="hljs-keyword">range</span> Starting..Running;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Transition</span> (Current : <span class="hljs-type">System_State</span>; Next : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">System_State</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">case</span> Current <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> Off =&gt;
         Next := Starting; <span class="hljs-comment">-- Valid transition</span>
      <span class="hljs-keyword">when</span> Running =&gt;
         Next := Stopping; <span class="hljs-comment">-- Valid transition</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         <span class="hljs-keyword">raise</span> Invalid_Transition;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
<span class="hljs-keyword">end</span> Transition;

<span class="hljs-comment">-- Usage with compile-time state validation:</span>
Current_State : <span class="hljs-type">System_State</span> := Off;
Next_State    : <span class="hljs-type">Operational_State</span>; <span class="hljs-comment">-- Must be valid operational state</span>

Transition (Current_State, Next_State); <span class="hljs-comment">-- Compiler verifies state validity</span>
</code></pre>
<p>In this example, <code>Operational_State</code> is a subtype of <code>System_State</code> that only includes <code>Starting</code> and <code>Running</code>. When you call <code>Transition</code>, the compiler ensures that <code>Next_State</code> is always a valid operational state. This prevents errors where you might accidentally set the system to <code>Off</code> during a transition that should only produce operational states.</p>
<h4>2.4.1.1 Real-World Application: Home Automation</h4>
<p>Consider a home thermostat system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Thermostat_Mode </span><span class="hljs-keyword">is</span> (Off, Heat, Cool, Auto);
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Active_Mode </span><span class="hljs-keyword">is</span> Thermostat_Mode <span class="hljs-keyword">range</span> Heat..Auto;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Mode</span>(M : <span class="hljs-type">Active_Mode</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Only allow heat, cool, or auto modes</span>
   <span class="hljs-comment">-- No need to check for Off mode</span>
   ...
<span class="hljs-keyword">end</span> Set_Mode;

<span class="hljs-comment">-- This would fail to compile:</span>
Set_Mode(Off); <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>By using a subtype for active modes, you prevent the system from accidentally being set to “Off” when it’s supposed to be in an active mode. This ensures that your home automation system always behaves as expected, without manual checks for invalid states.</p>
<h3>2.4.2 Pattern 2: Physical Units with Derived Types</h3>
<p>Create a type-safe physical units system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Meters </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">Seconds </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">Meters_Per_Second </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;

<span class="hljs-comment">-- Explicit conversion functions</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">To_MPS</span> (M : <span class="hljs-type">Meters</span>; S : <span class="hljs-type">Seconds</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Meters_Per_Second</span> <span class="hljs-keyword">is</span>
   (Meters_Per_Second (M) / Meters_Per_Second (S));

<span class="hljs-comment">-- Safe calculation</span>
Distance : <span class="hljs-type">Meters</span>  := <span class="hljs-number">100.0</span>;
Time     : <span class="hljs-type">Seconds</span> := <span class="hljs-number">10.0</span>;
Velocity : <span class="hljs-type">Meters_Per_Second</span> := To_MPS (Distance, Time);
</code></pre>
<p>In this example, <code>Meters</code>, <code>Seconds</code>, and <code>Meters_Per_Second</code> are distinct types. You can’t accidentally assign a distance to a time variable or vice versa:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Time := Distance; <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>This prevents errors like the Mars Climate Orbiter incident by making unit conversions explicit.</p>
<h4>2.4.2.1 Extending with SPARK</h4>
<p>In the SPARK subset of Ada, you can add formal proofs about your units:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">To_MPS</span> (M : <span class="hljs-type">Meters</span>; S : <span class="hljs-type">Seconds</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Meters_Per_Second</span>
   <span class="hljs-keyword">with</span> Pre  =&gt; S &gt; <span class="hljs-number">0.0</span>,
        Post =&gt; To_MPS<span class="hljs-symbol">'Result</span> = Meters_Per_Second (M) / Meters_Per_Second (S);
</code></pre>
<p>This contract specifies that the input time must be positive and that the result equals the division of distance by time. SPARK can then formally verify these properties, ensuring your calculations are mathematically correct.</p>
<h3>2.4.3 Pattern 3: Type-Safe Data Structures</h3>
<p>Ada’s type system allows you to create data structures that enforce correctness at compile time:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Non_Empty_String </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Value : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>
<span class="hljs-keyword">with</span> Dynamic_Predicate =&gt; Non_Empty_String.Value<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;

<span class="hljs-comment">-- This would fail to compile:</span>
S : <span class="hljs-type">Non_Empty_String</span> := (Value =&gt; <span class="hljs-string">""</span>);
</code></pre>
<p>In this example, <code>Non_Empty_String</code> is a record type with a dynamic predicate that ensures the string is never empty. Any attempt to create an empty string results in a compile-time error.</p>
<p>This pattern is useful for any data structure where certain invariants must always hold true. For example, you could create a <code>Positive_Integer</code> type that only allows values greater than zero, or a <code>Valid_Email</code> type that enforces email format rules.</p>
<h2>2.5 Common Pitfalls and Solutions</h2>
<p>Even with Ada’s powerful type system, developers new to Ada often fall into common traps. Let’s explore these pitfalls and how to avoid them.</p>
<h3>2.5.1 Pitfall 1: Overusing Integer and Float</h3>
<p>New Ada developers often fall back to basic numeric types instead of creating domain-specific types. This defeats the purpose of Ada’s type system.</p>
<h4>2.5.1.1 Avoid This:</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Parameters</span> (
   Param1 : <span class="hljs-type">Integer</span>;
   Param2 : <span class="hljs-type">Integer</span>;
   Param3 : <span class="hljs-type">Float</span>);
</code></pre>
<p>This code uses basic types for everything. It’s impossible to tell from the parameter names what each parameter represents. A developer could accidentally swap <code>Param1</code> and <code>Param2</code>, and the compiler wouldn’t catch it.</p>
<h4>2.5.1.2 Prefer This:</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Pressure   </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">1000</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">40</span>..<span class="hljs-number">125</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Humidity    </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">1.0</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Parameters</span> (
   P : <span class="hljs-type">Pressure</span>;
   T : <span class="hljs-type">Temperature</span>;
   H : <span class="hljs-type">Humidity</span>);
</code></pre>
<p>Now each parameter has a specific meaning and valid range. The compiler will catch any attempts to pass incorrect values:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Set_Parameters(<span class="hljs-number">100</span>, <span class="hljs-number">150</span>, <span class="hljs-number">0.5</span>); <span class="hljs-comment">-- ERROR: Temperature out of range</span>
Set_Parameters(<span class="hljs-number">100</span>, <span class="hljs-number">25</span>, <span class="hljs-number">1.5</span>);  <span class="hljs-comment">-- ERROR: Humidity out of range</span>
</code></pre>
<p>This is much safer than using basic types. It’s also more self-documenting—anyone reading the code knows exactly what each parameter represents.</p>
<h3>2.5.2 Pitfall 2: Type Conversions as Workarounds</h3>
<p>When you find yourself writing many type conversions, it’s usually a sign that your type model doesn’t match your domain. Instead of:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">V : <span class="hljs-type">Integer</span> := Integer (Voltage_Value); <span class="hljs-comment">-- Avoid this pattern</span>
</code></pre>
<p>Redesign your types to eliminate the need for conversions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Voltage </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">1000</span>;
<span class="hljs-keyword">type</span> <span class="hljs-type">Current </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">500</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Power</span> (V : <span class="hljs-type">Voltage</span>; I : <span class="hljs-type">Current</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   (Integer (V) * Integer (I)); <span class="hljs-comment">-- Single conversion at interface</span>
</code></pre>
<p>In this example, you only need to convert at the interface between your domain types and the calculation function. The rest of your code works with the domain-specific types, which prevents errors throughout your program.</p>
<h4>2.5.2.1 Real-World Example: Financial Calculations</h4>
<p>Consider a banking application that handles currency conversions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad approach: using Float for everything</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Transaction</span>(Amount : <span class="hljs-type">Float</span>; Currency : <span class="hljs-type">String</span>);

<span class="hljs-comment">-- Good approach: using distinct types</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">USD </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">EUR </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;

<span class="hljs-keyword">function</span> <span class="hljs-title">Convert_USD_To_EUR</span>(USD_Amount : <span class="hljs-type">USD</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">EUR</span> <span class="hljs-keyword">is</span>
   (EUR(USD_Amount * <span class="hljs-number">0.95</span>));

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Transaction</span>(Amount : <span class="hljs-type">USD</span>);
</code></pre>
<p>In the bad approach, you have to manually check the currency string and convert it to the right value. In the good approach, the compiler enforces that you only pass USD amounts to <code>Process_Transaction</code>, and you have a dedicated conversion function for EUR.</p>
<h3>2.5.3 Pitfall 3: Ignoring Subtypes for Enumerations</h3>
<p>Many developers treat enumerations as simple labels without using subtypes to restrict valid values.</p>
<h4>2.5.3.1 Avoid This:</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Traffic_Light </span><span class="hljs-keyword">is</span> (Red, Yellow, Green);
</code></pre>
<p>This allows any <code>Traffic_Light</code> value, but in some contexts, you might want to restrict to only certain values.</p>
<h4>2.5.3.2 Prefer This:</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Traffic_Light </span><span class="hljs-keyword">is</span> (Red, Yellow, Green);
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Active_Light </span><span class="hljs-keyword">is</span> Traffic_Light <span class="hljs-keyword">range</span> Yellow..Green;

<span class="hljs-comment">-- Now you can use Active_Light where only yellow or green are valid</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Display</span>(L : <span class="hljs-type">Active_Light</span>);
</code></pre>
<p>This prevents errors where you might accidentally set the traffic light to red when it should only be yellow or green.</p>
<h2>2.6 Exercises: Building a Type-Safe System</h2>
<p>Now that you’ve learned Ada’s type system fundamentals, let’s put them into practice with two exercises. These exercises will help you apply what you’ve learned to real-world scenarios.</p>
<h3>2.6.1 Exercise 1: Aircraft Control System</h3>
<p>Design a type-safe system for aircraft control surfaces:</p>
<ul>
<li>Create distinct types for <code>Aileron</code>, <code>Elevator</code>, and <code>Rudder</code></li>
<li>Define appropriate range constraints for each</li>
<li>Prevent accidental mixing of control surfaces</li>
<li>Implement a safe mixing function for coordinated turns</li>
</ul>
<h4>2.6.1.1 Solution Guidance</h4>
<p>Start by defining distinct types for each control surface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Aileron </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">30</span>..<span class="hljs-number">30</span>; <span class="hljs-comment">-- Degrees</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Elevator </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">15</span>..<span class="hljs-number">15</span>; <span class="hljs-comment">-- Degrees</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Rudder </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">20</span>..<span class="hljs-number">20</span>; <span class="hljs-comment">-- Degrees</span>
</code></pre>
<p>Now create a function that takes these types as parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Control_Surface</span>(
   A : <span class="hljs-type">Aileron</span>;
   E : <span class="hljs-type">Elevator</span>;
   R : <span class="hljs-type">Rudder</span>);
</code></pre>
<p>Try to pass an <code>Elevator</code> value to the <code>A</code> parameter:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Set_Control_Surface(Elevator(<span class="hljs-number">10</span>), Elevator(<span class="hljs-number">5</span>), Rudder(<span class="hljs-number">0</span>)); <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>The compiler will catch this immediately. Now create a function for coordinated turns:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Coordinated_Turn</span>(A : <span class="hljs-type">Aileron</span>; R : <span class="hljs-type">Rudder</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">(Aileron,</span> Rudder) <span class="hljs-keyword">is</span>
   (A, R);
</code></pre>
<p>This function takes an aileron and rudder value and returns them unchanged. Because the types are distinct, you can’t accidentally swap them:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">Coordinated_Turn(Rudder(<span class="hljs-number">10</span>), Aileron(<span class="hljs-number">20</span>)); <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>The key insight is that each control surface has its own type with specific range constraints. This prevents errors where you might accidentally use the wrong value for the wrong control surface.</p>
<h3>2.6.2 Exercise 2: Chemical Processing Plant</h3>
<p>Create a type system for a chemical processing system:</p>
<ul>
<li>Define types for different chemical compounds</li>
<li>Create safe temperature and pressure ranges for each</li>
<li>Prevent incompatible chemical combinations</li>
<li>Implement a reaction validation function using subtypes</li>
</ul>
<h4>2.6.2.1 Solution Guidance</h4>
<p>Start by defining types for different chemicals:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Acid </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>; <span class="hljs-comment">-- Concentration percentage</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Base </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>;
<span class="hljs-keyword">type</span> <span class="hljs-type">Solvent </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>;
</code></pre>
<p>Now create safe temperature ranges for each:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">subtype</span> <span class="hljs-type">Acid_Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">10</span>..<span class="hljs-number">50</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Base_Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">80</span>;
<span class="hljs-keyword">subtype</span> <span class="hljs-type">Solvent_Temperature </span><span class="hljs-keyword">is</span> Integer <span class="hljs-keyword">range</span> -<span class="hljs-number">20</span>..<span class="hljs-number">60</span>;
</code></pre>
<p>Implement a reaction validation function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">React</span>(Ac : <span class="hljs-type">Acid</span>; B : <span class="hljs-type">Base</span>; A_Temp : <span class="hljs-type">Acid_Temperature</span>; B_Temp : <span class="hljs-type">Base_Temperature</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Only allow reactions within safe temperature ranges</span>
   <span class="hljs-comment">-- Compiler ensures temperatures are valid</span>
   ...
<span class="hljs-keyword">end</span> React;
</code></pre>
<p>Try to pass a solvent temperature to the acid temperature parameter:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">React(Acid(<span class="hljs-number">20.0</span>), Base(<span class="hljs-number">30.0</span>), Solvent_Temperature(<span class="hljs-number">25</span>), Base_Temperature(<span class="hljs-number">40</span>)); <span class="hljs-comment">-- ERROR: type mismatch</span>
</code></pre>
<p>The compiler will catch this immediately. This prevents dangerous situations where you might accidentally mix chemicals at unsafe temperatures.</p>
<h2>2.7 Next Steps: From Types to Contracts</h2>
<p>Now that you’ve mastered Ada’s strong typing system, you’re ready to combine these techniques with Ada 2012’s formal contract features. In the next chapter, we’ll explore how to:</p>
<h3>2.7.1 Upcoming: Design by Contract</h3>
<ul>
<li>Write precise preconditions and postconditions</li>
<li>Use type invariants to protect data integrity</li>
<li>Combine contracts with strong typing for maximum safety</li>
<li>Transition from runtime checks to formal verification</li>
<li>Apply contracts to real-world scenarios</li>
</ul>
<h3>2.7.2 Practice Challenge</h3>
<p>Take your aircraft control system from the exercise and enhance it with contracts:</p>
<ul>
<li>Add preconditions to prevent invalid control inputs</li>
<li>Define postconditions for coordinated turn maneuvers</li>
<li>Create invariants for system state consistency</li>
<li>Document the safety properties your contracts enforce</li>
</ul>
<h4>2.7.2.1 Example Enhancement</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Control_Surface</span>(
   A : <span class="hljs-type">Aileron</span>;
   E : <span class="hljs-type">Elevator</span>;
   R : <span class="hljs-type">Rudder</span>)
<span class="hljs-keyword">with</span>
   Pre  =&gt; (A + E + R) &lt;= <span class="hljs-number">50</span>, <span class="hljs-comment">-- Total control surface movement limited</span>
   Post =&gt; Set_Control_Surface<span class="hljs-symbol">'Result</span> = (A, E, R);
</code></pre>
<p>This contract ensures that the total movement of all control surfaces doesn’t exceed 50 degrees, which might be a safety requirement for the aircraft.</p>
<h3>2.7.3 Key Insight</h3>
<p>Strong typing is Ada’s foundation, but contracts are its superpower. When you combine constrained types with formal specifications, you create software that’s not just less error-prone, but <em>provably correct</em> within its specified domain. This is why Ada remains the language of choice when failure is not an option.</p>
<p>In the next chapter, we’ll dive deeper into how contracts work with strong typing to create software that’s not just reliable, but mathematically verifiable. You’ll learn how to specify exactly what your code should do and have the compiler verify it for you—before it ever runs. This is the true power of Ada’s type system: it turns your type definitions into a living specification of your program’s behavior.</p>
<p>By the end of the next chapter, you’ll be able to create software that’s not just less likely to fail, but <em>guaranteed</em> to work correctly within its specified domain. This is the difference between writing code that <em>might</em> work and writing code that <em>must</em> work.</p>
<h1>3. Ada Subprograms: Procedures, Functions, and Packages</h1>
<p>While many programming languages treat functions and procedures as interchangeable constructs, Ada makes a deliberate semantic distinction that enforces clear design principles. This tutorial explores Ada’s rigorous approach to subprograms and packages—the foundation of its modular design philosophy. You’ll learn how Ada’s packaging system creates strong encapsulation boundaries, enables precise visibility control, and supports the development of verifiable components for reliable software systems. Through practical examples, we’ll demonstrate how these features transform code organization from a maintenance challenge into a reliability asset.</p>
<blockquote>
<p>In Ada, subprograms aren’t just code containers—they’re formal contracts between callers and callees. This perspective shifts development from “making code work” to “specifying how it must work,” creating the foundation for verifiable systems. When you define a subprogram in Ada, you’re not just writing instructions; you’re documenting exactly what the subprogram expects, what it guarantees, and how it interacts with the rest of your system. This contract-based approach means errors are caught earlier in the development process, making your code more predictable and maintainable.</p>
</blockquote>
<h2>3.1 Procedures vs. Functions: Semantic Distinctions</h2>
<p>Unlike languages that treat all subprograms as functions (even when they don’t return values), Ada enforces a clear semantic distinction between procedures and functions that reflects their intended purpose. This distinction isn’t arbitrary—it’s designed to make your code more self-documenting and less error-prone.</p>
<h3>3.1.1 Procedures</h3>
<ul>
<li>Perform actions with side effects</li>
<li>No return value (by design)</li>
<li>Parameters can be <code>in</code>, <code>out</code>, or <code>in out</code></li>
<li>Represent “commands” in the system</li>
<li>Should be used when the primary purpose is state modification</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Target_Temperature</span> (
   Sensor_ID : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Sensor_ID</span>;
   Target    : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Celsius</span>;
   Success   : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Modify system state</span>
   <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> Sensor_Initialized(Sensor_ID) <span class="hljs-keyword">then</span>
      Success := <span class="hljs-literal">False</span>;
      <span class="hljs-keyword">return</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   
   Temperature_Values(Sensor_ID) := Target;
   Success := <span class="hljs-literal">True</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Success := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">end</span> Set_Target_Temperature;
</code></pre>
<p>This procedure sets a target temperature for a specific sensor. It takes a sensor identifier and target value as inputs (<code>in</code> parameters), and returns a success status through an <code>out</code> parameter. The procedure modifies the system state by updating the temperature value, which is why it’s a procedure rather than a function.</p>
<h3>3.1.2 Functions</h3>
<ul>
<li>Compute and return values</li>
<li>Must have a return value</li>
<li>Parameters typically <code>in</code> only</li>
<li>Represent “queries” in the system</li>
<li>Should be free of side effects (ideally)</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Get_Current_Temperature</span> (
   Sensor_ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Return value without modifying state</span>
   <span class="hljs-keyword">return</span> Temperature_Values(Sensor_ID);
<span class="hljs-keyword">end</span> Get_Current_Temperature;
</code></pre>
<p>This function retrieves the current temperature for a sensor. It takes a sensor identifier as an input parameter and returns a temperature value. Crucially, it doesn’t modify any system state—it simply reads and returns data. This makes it a perfect candidate for a function.</p>
<h3>3.1.3 The Command-Query Separation Principle</h3>
<p>Bertrand Meyer’s principle states: “Asking a question should not change the answer.” Ada enforces this at the language level:</p>
<ul>
<li>Functions should not modify visible state</li>
<li>Procedures should not return values (beyond status)</li>
<li>Mixing these roles creates subtle bugs that are hard to verify</li>
</ul>
<p>Consider this flawed design in a typical language:</p>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_temperature</span>(<span class="hljs-params">sensor_id</span>):
    <span class="hljs-comment"># This function both reads and updates state</span>
    current = read_hardware(sensor_id)
    update_last_read(sensor_id, current)
    <span class="hljs-keyword">return</span> current
</code></pre>
<p>In this Python example, the function both retrieves data and modifies state. This creates ambiguity—callers might not expect the function to change anything, leading to unexpected behavior. In Ada, this would be impossible because functions can’t modify state. Instead, you’d have:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Get_Current_Temperature</span> (Sensor_ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- No state modification allowed</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Temperature_Values(Sensor_ID);
<span class="hljs-keyword">end</span> Get_Current_Temperature;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_Last_Read</span> (Sensor_ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- State modification happens here</span>
   Last_Read_Times(Sensor_ID) := Current_Time;
<span class="hljs-keyword">end</span> Update_Last_Read;
</code></pre>
<p>This separation makes your code clearer and more reliable. You can’t accidentally mix read and write operations, which prevents subtle bugs that are difficult to track down.</p>
<h4>3.1.3.1 Parameter Modes: The Contract Language</h4>
<p>Ada’s parameter modes form a precise contract language that explicitly states how data flows into and out of subprograms:</p>
<h5><code>in</code> Parameters</h5>
<ul>
<li>Input only (read-only)</li>
<li>Corresponds to precondition elements</li>
<li>Must have valid values on entry</li>
<li>Cannot be modified in the subprogram</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Validate_Temperature</span> (
   Temp : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Celsius</span>;  <span class="hljs-comment">-- Read-only input</span>
   Valid : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Valid := (Temp &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">150.0</span>);
   <span class="hljs-comment">-- Temp cannot be modified here</span>
<span class="hljs-keyword">end</span> Validate_Temperature;
</code></pre>
<h5><code>out</code> Parameters</h5>
<ul>
<li>Output only (write-only)</li>
<li>Corresponds to postcondition elements</li>
<li>Must be assigned before return</li>
<li>Initial value is undefined</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (
   ID : <span class="hljs-type">Sensor_ID</span>;
   Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Must assign Value before returning</span>
   Value := Hardware_Read(ID);
<span class="hljs-keyword">end</span> Read_Sensor;
</code></pre>
<h5><code>in out</code> Parameters</h5>
<ul>
<li>Input and output</li>
<li>Corresponds to both pre and postconditions</li>
<li>Must have valid initial value</li>
<li>Must maintain validity after modification</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust_Temperature</span> (
   Target : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Can read initial value and modify</span>
   <span class="hljs-keyword">if</span> Target &gt; <span class="hljs-number">100.0</span> <span class="hljs-keyword">then</span>
      Target := <span class="hljs-number">100.0</span>;  <span class="hljs-comment">-- Cap at maximum</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Adjust_Temperature;
</code></pre>
<h5>Best Practices</h5>
<ul>
<li>Prefer <code>in</code> for most parameters—this is the safest and most common mode</li>
<li>Use <code>out</code> for primary results (when the function would otherwise return multiple values)</li>
<li>Limit <code>in out</code> to necessary cases—these are more error-prone because they allow both reading and writing</li>
<li>Avoid global variables as substitutes for parameters—this creates hidden dependencies and makes code harder to test</li>
</ul>
<p>Consider this example where <code>in out</code> is misused:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Poor design: using in out when in would suffice</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_Temperature</span> (
   ID : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Sensor_ID</span>;
   Value : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Only need to read ID, not modify it</span>
   Temperature_Values(ID) := Value;
<span class="hljs-keyword">end</span> Update_Temperature;
</code></pre>
<p>This is problematic because <code>ID</code> is passed as <code>in out</code>, suggesting it might be modified. But in reality, it’s only read. A better design uses <code>in</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Better design: using in for read-only parameters</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_Temperature</span> (
   ID : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Sensor_ID</span>;
   Value : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Temperature_Values(ID) := Value;
<span class="hljs-keyword">end</span> Update_Temperature;
</code></pre>
<p>This small change makes the contract clearer and prevents accidental modification of the sensor ID.</p>
<h2>3.2 Packages: The Foundation of Modularity</h2>
<p>While many languages use classes as the primary modularization unit, Ada uses packages—a more flexible construct that supports multiple organization patterns. Packages provide a powerful mechanism for encapsulating related functionality while controlling visibility and dependencies.</p>
<h3>3.2.1 Package Structure and Visibility Control</h3>
<p>Ada packages have two distinct parts: the specification (what callers see) and the body (the implementation details). This separation creates clear boundaries between interface and implementation.</p>
<h4>3.2.1.1 Package Specification</h4>
<p>The public interface (what callers see):</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Sensors </span><span class="hljs-keyword">is</span>

   <span class="hljs-comment">-- Public types</span>
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> Positive <span class="hljs-keyword">range</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span>;
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">273.15</span>..<span class="hljs-number">1000.0</span>;

   <span class="hljs-comment">-- Public constants</span>
   MAX_SENSORS : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">100</span>;

   <span class="hljs-comment">-- Public subprograms</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Initialized</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (ID : <span class="hljs-type">Sensor_ID</span>; Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Last_Value</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Private implementation details</span>
   Initialized : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
   Last_Values : <span class="hljs-type">array</span> (Sensor_ID) <span class="hljs-keyword">of</span> Celsius := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0.0</span>);
   Not_Initialized : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;

<span class="hljs-keyword">end</span> Temperature_Sensors;
</code></pre>
<h4>3.2.1.2 Package Body</h4>
<p>The implementation (hidden from callers):</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Sensors </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation details</span>
      Initialized := <span class="hljs-literal">True</span>;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Initialized</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Initialized;
   <span class="hljs-keyword">end</span> Is_Initialized;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (ID : <span class="hljs-type">Sensor_ID</span>; Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> Initialized <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Not_Initialized;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

      <span class="hljs-comment">-- Hardware-specific implementation</span>
      Value := Read_Hardware_Sensor(ID);
      Last_Values(ID) := Value;
   <span class="hljs-keyword">end</span> Read_Sensor;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Last_Value</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Last_Values(ID);
   <span class="hljs-keyword">end</span> Get_Last_Value;

<span class="hljs-keyword">end</span> Temperature_Sensors;
</code></pre>
<h3>3.2.2 Key Visibility Rules</h3>
<ul>
<li>Items in the <code>private</code> part are visible to the package body but not to clients</li>
<li>Package bodies can see all items in their own spec (public and private)</li>
<li>Clients can only see public items in the spec</li>
<li>Private types hide implementation details while exposing functionality</li>
</ul>
<p>This strict visibility control creates strong encapsulation boundaries that prevent unintended dependencies. For example, clients of <code>Temperature_Sensors</code> can’t access <code>Last_Values</code> directly—they must go through <code>Get_Last_Value</code>. This ensures that any access to the internal data goes through proper validation and error handling.</p>
<h3>3.2.3 Private Types for Information Hiding</h3>
<p>Ada provides multiple levels of information hiding through private types, giving you fine-grained control over what clients can see:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensor_Management </span><span class="hljs-keyword">is</span>

   <span class="hljs-comment">-- Full type visibility (all details visible)</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Record </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      ID      : <span class="hljs-type">Positive</span>;
      Value   : <span class="hljs-type">Float</span>;
      Status  : <span class="hljs-type">Status_Type</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-comment">-- Private type (only operations visible)</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-comment">-- Limited private type (only assignment and testing for equality)</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Controller </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-comment">-- Public operations on private types</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Sensor</span> (ID : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Handle</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Value</span> (S : <span class="hljs-type">Sensor_Handle</span>; Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Implementation details hidden from clients</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      ID         : <span class="hljs-type">Positive</span>;
      Last_Value : <span class="hljs-type">Float</span>;
      <span class="hljs-comment">-- ...</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Controller </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      <span class="hljs-comment">-- Complex implementation</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">end</span> Sensor_Management;
</code></pre>
<h3>3.2.4 Private Type Selection Guide</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Type Form</strong></th>
<th style="text-align:left"><strong>Visibility</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Standard record</strong></td>
<td style="text-align:left">Complete visibility</td>
<td style="text-align:left">Data structures where clients need full access</td>
</tr>
<tr>
<td style="text-align:left"><strong>Private type</strong></td>
<td style="text-align:left">Operations only</td>
<td style="text-align:left">Abstract data types with hidden implementation</td>
</tr>
<tr>
<td style="text-align:left"><strong>Limited private</strong></td>
<td style="text-align:left">Assignment only</td>
<td style="text-align:left">Resources that shouldn’t be copied (files, devices)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Private with discriminants</strong></td>
<td style="text-align:left">Controlled visibility</td>
<td style="text-align:left">Types with runtime-sized components</td>
</tr>
</tbody>
</table>
<p>Let’s explore each type form in detail:</p>
<h4>3.2.4.1 Standard Record</h4>
<p>A standard record exposes all its fields to clients. This is appropriate when the data structure is simple and clients need direct access to all components.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Point </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   X : <span class="hljs-type">Integer</span>;
   Y : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
</code></pre>
<p>Clients can directly access <code>X</code> and <code>Y</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">P : <span class="hljs-type">Point</span> := (X =&gt; <span class="hljs-number">5</span>, Y =&gt; <span class="hljs-number">10</span>);
P.X := <span class="hljs-number">15</span>;  <span class="hljs-comment">-- Allowed</span>
</code></pre>
<p>This is useful for simple data structures but provides no encapsulation—changes to the record structure will affect all clients.</p>
<h4>3.2.4.2 Private Type</h4>
<p>A private type hides implementation details while exposing operations. Clients can only interact with the type through the public operations defined in the specification.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Sensor</span> (ID : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Handle</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Value</span> (S : <span class="hljs-type">Sensor_Handle</span>; Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>);
   
<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      ID         : <span class="hljs-type">Positive</span>;
      Last_Value : <span class="hljs-type">Celsius</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Temperature_Sensors;
</code></pre>
<p>Clients can create and use sensors but can’t see the internal representation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">S : <span class="hljs-type">Sensor_Handle</span> := Create_Sensor(<span class="hljs-number">5</span>);
Read_Value(S, Value);  <span class="hljs-comment">-- Works</span>
S.ID := <span class="hljs-number">10</span>;            <span class="hljs-comment">-- ERROR: cannot access private record component</span>
</code></pre>
<p>This is ideal for abstract data types where you want to control how the data is accessed and modified.</p>
<h4>3.2.4.3 Limited Private Type</h4>
<p>A limited private type restricts operations to only assignment and equality testing. Clients cannot copy or assign these types directly.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Device_Manager </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Device_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Open_Device</span> (Name : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Device_Handle</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Close_Device</span> (D : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Device_Handle</span>);
   
<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Device_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Handle : <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Device_Manager;
</code></pre>
<p>Clients can create and close devices but cannot copy them:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">D1 : <span class="hljs-type">Device_Handle</span> := Open_Device(<span class="hljs-string">"sensor1"</span>);
D2 : <span class="hljs-type">Device_Handle</span> := D1;  <span class="hljs-comment">-- ERROR: limited private types cannot be copied</span>
Close_Device(D1);
</code></pre>
<p>This is perfect for resources that should have only one owner, like file handles or hardware devices.</p>
<h4>3.2.4.4 Private with Discriminants</h4>
<p>A private type with discriminants allows runtime-sized components while hiding implementation details.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">String_Buffer </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span>(Size : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Append</span> (B : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Buffer</span>; S : <span class="hljs-type">String</span>);
   
<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span>(Size : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Data : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..Size);
      Length : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> String_Buffer;
</code></pre>
<p>Clients can create buffers of specific sizes but don’t see the implementation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">B : <span class="hljs-type">Buffer</span>(<span class="hljs-number">100</span>) := (Size =&gt; <span class="hljs-number">100</span>);
Append(B, <span class="hljs-string">"Hello"</span>);  <span class="hljs-comment">-- Works</span>
B.Data := <span class="hljs-string">"Test"</span>;    <span class="hljs-comment">-- ERROR: cannot access private component</span>
</code></pre>
<p>This is useful for types where the size is determined at runtime but the implementation details should remain hidden.</p>
<h2>3.3 Package Hierarchies and Child Packages</h2>
<p>Ada’s package hierarchy system provides a powerful mechanism for organizing large systems while maintaining strong encapsulation. Unlike inheritance-based systems, Ada’s package hierarchy creates clear ownership relationships without the fragility of deep inheritance trees.</p>
<h3>3.3.1 Parent and Child Package Structure</h3>
<h4>3.3.1.1 Parent Package (file: temperature_sensors.ads)</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Sensors </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> Positive <span class="hljs-keyword">range</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span>;
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">273.15</span>..<span class="hljs-number">1000.0</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Initialized</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;

   <span class="hljs-comment">-- Child packages will extend this interface</span>
   <span class="hljs-comment">-- No private part needed for parent-only declaration</span>

<span class="hljs-keyword">end</span> Temperature_Sensors;
</code></pre>
<h4>3.3.1.2 Child Package (file: temperature_sensors.hardware.ads)</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Real_Time;

<span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Sensors.Hardware </span><span class="hljs-keyword">is</span>

   <span class="hljs-comment">-- Child can see parent's public items</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (ID : <span class="hljs-type">Sensor_ID</span>; Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Last_Timestamp</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Ada.Real_Time.Time</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Private to this child package</span>
   Last_Timestamps : <span class="hljs-type">array</span> (Sensor_ID) <span class="hljs-keyword">of</span> Ada.Real_Time.Time;

<span class="hljs-keyword">end</span> Temperature_Sensors.Hardware;

<span class="hljs-comment">-- Child package body</span>
<span class="hljs-keyword">with</span> Ada.Real_Time; <span class="hljs-keyword">use</span> Ada.Real_Time;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Sensors.Hardware </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (ID : <span class="hljs-type">Sensor_ID</span>; Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
      Now : <span class="hljs-type">Time</span> := Clock;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation using hardware interface</span>
      Value := Read_Hardware_Sensor(ID);
      Last_Timestamps(ID) := Now;
   <span class="hljs-keyword">end</span> Read_Sensor;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Last_Timestamp</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Time</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Last_Timestamps(ID);
   <span class="hljs-keyword">end</span> Get_Last_Timestamp;

<span class="hljs-keyword">end</span> Temperature_Sensors.Hardware;
</code></pre>
<h3>3.3.2 Child Package Visibility Rules</h3>
<ul>
<li>A child package can see all public items of its parent</li>
<li>A child package <em>cannot</em> see private items of its parent (unless the parent has a <code>private</code> part)</li>
<li>Sibling packages cannot see each other’s items</li>
<li>A grandchild can see its parent and its parent’s parent</li>
<li>Visibility follows the hierarchy strictly—no back doors</li>
</ul>
<p>This controlled visibility enables hierarchical design without the fragility of inheritance-based systems. For example, consider a home automation system with temperature, humidity, and motion sensors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Public interface for all sensors</span>
<span class="hljs-keyword">end</span> Home_Sensors;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Sensors.Temperature </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Temperature-specific operations</span>
<span class="hljs-keyword">end</span> Home_Sensors.Temperature;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Sensors.Humidity </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Humidity-specific operations</span>
<span class="hljs-keyword">end</span> Home_Sensors.Humidity;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Sensors.Motion </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Motion-specific operations</span>
<span class="hljs-keyword">end</span> Home_Sensors.Motion;
</code></pre>
<p>Each child package has access to the parent’s public interface but not to the other child packages. This keeps the system modular and prevents accidental dependencies between unrelated components.</p>
<h3>3.3.3 Private Child Packages</h3>
<p>For implementation details that should be hidden from clients:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Parent package</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Public interface</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-comment">-- ...</span>
private
   <span class="hljs-comment">-- Private part visible to children</span>
   Initialized : <span class="hljs-type">Boolean</span> := False;
end Temperature_Sensors;

<span class="hljs-comment">-- Private child package (visible only to parent)</span>
private package Temperature_Sensors.Initialization <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Perform_Hardware_Init;</span>
end Temperature_Sensors.Initialization;

<span class="hljs-comment">-- Parent package body</span>
package body Temperature_Sensors <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Parent body can see private child</span>
   <span class="hljs-keyword">with</span> Temperature_Sensors.Initialization;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Temperature_Sensors.Initialization.Perform_Hardware_Init;
      Initialized := <span class="hljs-literal">True</span>;
   <span class="hljs-keyword">end</span> Initialize;
<span class="hljs-keyword">end</span> Temperature_Sensors;

<span class="hljs-comment">-- Private child body</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Sensors.Initialization </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Perform_Hardware_Init</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Hardware-specific initialization</span>
      null;
   <span class="hljs-keyword">end</span> Perform_Hardware_Init;
<span class="hljs-keyword">end</span> Temperature_Sensors.Initialization;
</code></pre>
<p>This pattern is perfect for initialization routines that should be hidden from clients but need to be part of the package’s implementation. The private child package <code>Initialization</code> is only visible to the parent package body, not to any clients of the package.</p>
<h3>3.3.4 Package Hierarchy Design Patterns</h3>
<h4>3.3.4.1 Layered Architecture</h4>
<ul>
<li><code>System</code>: Top-level interface</li>
<li><code>System.Core</code>: Core functionality</li>
<li><code>System.IO</code>: Input/output operations</li>
<li><code>System.Utils</code>: Utility functions</li>
</ul>
<p>This structure creates clear separation of concerns. For example, in a home automation system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Automation </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Top-level interface</span>
<span class="hljs-keyword">end</span> Home_Automation;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Automation.Core </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Core logic for device management</span>
<span class="hljs-keyword">end</span> Home_Automation.Core;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Automation.IO </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Hardware-specific I/O operations</span>
<span class="hljs-keyword">end</span> Home_Automation.IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Automation.Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Utility functions like math operations</span>
<span class="hljs-keyword">end</span> Home_Automation.Utils;
</code></pre>
<p>Each layer depends only on layers below it, creating a clean dependency graph.</p>
<h4>3.3.4.2 Feature-Based Organization</h4>
<ul>
<li><code>Sensors</code>: Base sensor interface</li>
<li><code>Sensors.Temperature</code>: Temperature sensors</li>
<li><code>Sensors.Pressure</code>: Pressure sensors</li>
<li><code>Sensors.Diagnostics</code>: Sensor diagnostics</li>
</ul>
<p>This structure groups related functionality together. For example, in a home monitoring system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Base sensor interface</span>
<span class="hljs-keyword">end</span> Sensors;

<span class="hljs-keyword">package</span> <span class="hljs-title">Sensors.Temperature </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Temperature-specific operations</span>
<span class="hljs-keyword">end</span> Sensors.Temperature;

<span class="hljs-keyword">package</span> <span class="hljs-title">Sensors.Pressure </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Pressure-specific operations</span>
<span class="hljs-keyword">end</span> Sensors.Pressure;

<span class="hljs-keyword">package</span> <span class="hljs-title">Sensors.Diagnostics </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Diagnostic operations for all sensors</span>
<span class="hljs-keyword">end</span> Sensors.Diagnostics;
</code></pre>
<p>This organization makes it easy to find related functionality and keeps the system modular.</p>
<h2>3.4 Library Units and System Organization</h2>
<p>Ada’s library unit system provides a formal mechanism for organizing large systems with precise dependency control. Unlike languages where dependencies are implicit or managed through build systems, Ada makes dependencies explicit and verifiable.</p>
<h3>3.4.1 Library Unit Types and Dependencies</h3>
<h4>3.4.1.1 Standard Packages</h4>
<p>Independent units with no special dependencies:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Math_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Cube</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<p>Can be compiled independently once dependencies are satisfied. These are perfect for general-purpose utilities that don’t depend on other parts of your system.</p>
<h4>3.4.1.2 Parent Packages</h4>
<p>Define namespaces for child packages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Base interface</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Positive;
<span class="hljs-keyword">end</span> Sensors;
</code></pre>
<p>Must be compiled before child packages. Parent packages act as the foundation for hierarchical organization.</p>
<h4>3.4.1.3 Child Packages</h4>
<p>Extend parent package functionality:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Real_Time;
<span class="hljs-keyword">package</span> <span class="hljs-title">Sensors.Temperature </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Sensors.Temperature;
</code></pre>
<p>Depend on parent package; siblings are independent. Child packages can access the parent’s public items but not private items.</p>
<h4>3.4.1.4 Subunits</h4>
<p>Split large bodies into manageable pieces:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- ...</span>
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">separate</span>; <span class="hljs-comment">-- Implementation in separate file</span>
   <span class="hljs-keyword">end</span> Read_Sensor;
<span class="hljs-keyword">end</span> Sensors;

<span class="hljs-comment">-- In file sensors-read_sensor.adb</span>
<span class="hljs-keyword">separate</span> (Sensors)
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Detailed implementation</span>
   null;
<span class="hljs-keyword">end</span> Read_Sensor;
</code></pre>
<p>Allows modular implementation of large package bodies. Subunits make it easier to manage large codebases by splitting them into smaller, more manageable files.</p>
<h4>3.4.1.5 Dependency Management Best Practices</h4>
<p>Ada’s <code>with</code> clause provides precise dependency control:</p>
<h5>Good Practice</h5>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Only with what's needed</span>
<span class="hljs-keyword">with</span> Temperature_Sensors.Hardware;
<span class="hljs-keyword">use</span> Temperature_Sensors;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_All</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Celsius</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> ID <span class="hljs-keyword">in</span> Sensor_ID <span class="hljs-keyword">loop</span>
      Hardware.Read_Sensor(ID, Value);
      <span class="hljs-comment">-- ...</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Read_All;
</code></pre>
<h5>Poor Practice</h5>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Excessive with clauses</span>
<span class="hljs-keyword">with</span> Temperature_Sensors;
<span class="hljs-keyword">with</span> Temperature_Sensors.Hardware;
<span class="hljs-keyword">with</span> Temperature_Sensors.Diagnostics;
<span class="hljs-keyword">with</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Real_Time;
<span class="hljs-comment">-- ... several more</span>

<span class="hljs-comment">-- Excessive use clauses</span>
<span class="hljs-keyword">use</span> Temperature_Sensors;
<span class="hljs-keyword">use</span> Temperature_Sensors.Hardware;
<span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-comment">-- ...</span>
</code></pre>
<p>Limit <code>with</code> clauses to only what’s necessary and avoid excessive <code>use</code> clauses to prevent namespace pollution and hidden dependencies. In the good practice example, we only import what we need (<code>Temperature_Sensors.Hardware</code>), and we explicitly qualify <code>Hardware.Read_Sensor</code> rather than using <code>use</code> for the entire package.</p>
<h3>3.4.2 GNAT Project Files for Large Systems</h3>
<p>For industrial-scale systems, GNAT project files manage dependencies:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Home_Automation <span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"production"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"src/sensors"</span>, <span class="hljs-string">"src/control"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"home_automation.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"production"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;

   <span class="hljs-keyword">package</span> <span class="hljs-title">Builder </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-j8"</span>);
   <span class="hljs-keyword">end</span> Builder;

   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-Wl,-Map=obj/mapfile"</span>);
   <span class="hljs-keyword">end</span> Linker;

<span class="hljs-keyword">end</span> Home_Automation;
</code></pre>
<h3>3.4.3 Project File Best Practices</h3>
<ul>
<li>Use separate project files for different system components</li>
<li>Define build configurations for development and production</li>
<li>Organize source directories by functionality</li>
<li>Set appropriate compiler switches for each configuration</li>
<li>Use project hierarchies for large systems</li>
</ul>
<p>For example, a home automation system might have:</p>
<ul>
<li><code>home_automation.gpr</code>: Main project file</li>
<li><code>sensors.gpr</code>: Sensor subsystem project</li>
<li><code>control.gpr</code>: Control subsystem project</li>
<li><code>ui.gpr</code>: User interface project</li>
</ul>
<p>Each project file can have its own build configurations and dependencies, making it easy to manage large systems.</p>
<h2>3.5 Package Initialization and Finalization</h2>
<p>Ada provides controlled mechanisms for package initialization and finalization—critical for reliable systems where startup and shutdown sequences matter. Unlike languages where global initialization order is undefined, Ada gives you precise control over when and how initialization happens.</p>
<h3>3.5.1 Initialization Patterns</h3>
<h4>3.5.1.1 Implicit Initialization</h4>
<p>Using variable declarations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Variables initialize at elaboration</span>
   Sensor_Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   Initialized  : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;

   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Sensors;
</code></pre>
<p>Simple but limited control over initialization order. This works well for simple cases but can lead to problems in complex systems.</p>
<h4>3.5.1.2 Explicit Initialization Procedure</h4>
<p>Using an initialization procedure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- No implicit initialization</span>
   Sensor_Count : <span class="hljs-type">Natural</span>;
   Initialized  : <span class="hljs-type">Boolean</span>;

   <span class="hljs-comment">-- Explicit initialization</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>

   <span class="hljs-comment">-- ...</span>
end Sensors;

package body Sensors <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Controlled initialization sequence</span>
      Sensor_Count := <span class="hljs-number">0</span>;
      Initialized := <span class="hljs-literal">True</span>;
      <span class="hljs-comment">-- Additional setup</span>
   <span class="hljs-keyword">end</span> Initialize;
<span class="hljs-keyword">end</span> Sensors;
</code></pre>
<p>Gives complete control over initialization sequence. This is ideal for systems where initialization order matters.</p>
<h3>3.5.2 Advanced Initialization Control</h3>
<h4>3.5.2.1 Elaboration Control Pragmas</h4>
<p>Control elaboration order explicitly:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Elaborate_Body;
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Sensors;

<span class="hljs-keyword">package</span> <span class="hljs-title">Sensors.Hardware </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Elaborate_All (Sensors);
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Sensors.Hardware;
</code></pre>
<p>Directs the compiler to ensure proper elaboration order. <code>Elaborate_Body</code> ensures the package body is elaborated before any references to the package, and <code>Elaborate_All</code> ensures all child packages are elaborated.</p>
<h4>3.5.2.2 Elaboration Checks</h4>
<p>Enable runtime elaboration checks:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -gnatE your_program.adb
</code></pre>
<p>This compiles with elaboration checks that detect:</p>
<ul>
<li>Calling subprograms before elaboration</li>
<li>Circular dependencies</li>
<li>Missing elaboration pragmas</li>
</ul>
<p>For example, if you try to call a function from a package that hasn’t been elaborated, Ada will raise a <code>Program_Error</code> at runtime.</p>
<h4>3.5.2.3 Initialization with Contracts</h4>
<p>Using Design by Contract for initialization:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors with</span>
   Initializes =&gt; (Sensor_Count, Initialized) <span class="hljs-keyword">is</span>

   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Ready</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">with</span>
      Post =&gt; Is_Ready = Initialized;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-keyword">not</span> Is_Ready,
      Post =&gt; Is_Ready;

<span class="hljs-keyword">private</span>
   Sensor_Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   Initialized  : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">end</span> Sensors;
</code></pre>
<p>Contracts document and verify initialization requirements. The <code>Initializes</code> aspect specifies which variables are initialized by the package, and the contracts ensure proper initialization sequence.</p>
<h3>3.5.3 The Initialization Order Problem</h3>
<p>In many languages, global variable initialization order is undefined or implementation-dependent. This caused the Ariane 5 rocket failure. Ada provides multiple solutions:</p>
<h4>3.5.3.1 Problem</h4>
<ul>
<li>Package A depends on Package B</li>
<li>But Package B initializes after Package A</li>
<li>Results in undefined behavior</li>
</ul>
<h4>3.5.3.2 Solutions</h4>
<ul>
<li>Use <code>pragma Elaborate</code>/<code>Elaborate_All</code></li>
<li>Use explicit initialization procedures</li>
<li>Compile with elaboration checks (<code>-gnatE</code>)</li>
<li>Use the <code>with</code> clause dependency graph</li>
</ul>
<p>For reliable systems, all four approaches should be used together to ensure reliable initialization. For example, in a home automation system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Automation </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Elaborate_Body;
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Home_Automation;

<span class="hljs-keyword">package</span> <span class="hljs-title">Home_Automation.Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Elaborate_All (Home_Automation);
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Home_Automation.Sensors;
</code></pre>
<p>This ensures that the main package is elaborated before any sensor operations, preventing initialization order issues.</p>
<h2>3.6 Real-World Package Design Patterns</h2>
<p>Let’s explore two practical examples of package design that demonstrate Ada’s modular capabilities without focusing on safety-critical domains.</p>
<h3>3.6.1 Home Climate Control System</h3>
<p>A robust climate control package for home automation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Climate_Control </span><span class="hljs-keyword">is</span>

   <span class="hljs-comment">-- Public types with constraints</span>
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">20.0</span>..<span class="hljs-number">50.0</span>;
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Humidity </span><span class="hljs-keyword">is</span> Float <span class="hljs-keyword">range</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>;

   <span class="hljs-comment">-- State management</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Ready</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-keyword">not</span> Is_Ready,
      Post =&gt; Is_Ready;

   <span class="hljs-comment">-- Climate operations with contracts</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Target_Temp</span> (
      Temp : <span class="hljs-type">Temperature</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Is_Ready,
      Post =&gt; Target_Temperature = Temp;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Current_Temp</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Temperature</span> <span class="hljs-keyword">with</span>
      Pre =&gt; Is_Ready;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Target_Humidity</span> (
      Humidity : <span class="hljs-type">Humidity</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Is_Ready,
      Post =&gt; Target_Humidity = Humidity;

<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Implementation details hidden</span>
   Target_Temperature : <span class="hljs-type">Temperature</span> := <span class="hljs-number">22.0</span>;
   Target_Humidity : <span class="hljs-type">Humidity</span> := <span class="hljs-number">45.0</span>;
   Ready : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;

<span class="hljs-keyword">end</span> Climate_Control;
</code></pre>
<p>This pattern combines strong typing, contracts, and information hiding for maximum reliability. Clients can’t set temperatures outside the valid range, and they can’t access the system before it’s initialized. The private implementation details are hidden, so clients only interact with the public interface.</p>
<h3>3.6.2 Smart Home Lighting Control</h3>
<p>A lighting control system for home automation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Lighting_Control </span><span class="hljs-keyword">is</span>

   <span class="hljs-comment">-- Safety-critical types</span>
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Brightness </span><span class="hljs-keyword">is</span> Natural <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">100</span>;
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Color_Temperature </span><span class="hljs-keyword">is</span> Natural <span class="hljs-keyword">range</span> <span class="hljs-number">2000</span>..<span class="hljs-number">6500</span>; <span class="hljs-comment">-- Kelvin</span>

   <span class="hljs-comment">-- System state</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Operating_Mode </span><span class="hljs-keyword">is</span> (Off, Dimmed, Normal, Bright);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Current_Mode</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Operating_Mode</span>;

   <span class="hljs-comment">-- Control operations with strict contracts</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Mode</span> (
      Mode : <span class="hljs-type">Operating_Mode</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Mode <span class="hljs-keyword">in</span> Operating_Mode,
      Post =&gt; Current_Mode = Mode;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Brightness</span> (
      Level : <span class="hljs-type">Brightness</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Current_Mode <span class="hljs-keyword">in</span> (Dimmed, Normal, Bright),
      Post =&gt; Brightness_Level = Level;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Color_Temp</span> (
      Temp : <span class="hljs-type">Color_Temperature</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Current_Mode <span class="hljs-keyword">in</span> (Normal, Bright),
      Post =&gt; Color_Temperature = Temp;

<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Hidden implementation</span>
   Mode : <span class="hljs-type">Operating_Mode</span> := Off;
   Brightness_Level : <span class="hljs-type">Brightness</span> := <span class="hljs-number">0</span>;
   Color_Temperature : <span class="hljs-type">Color_Temperature</span> := <span class="hljs-number">2700</span>;

<span class="hljs-keyword">end</span> Lighting_Control;
</code></pre>
<p>This implementation ensures safe state transitions and parameter validation. For example, you can’t set color temperature when the lights are off, and brightness levels are always within valid ranges. The private implementation details are hidden, so clients interact only through the public interface.</p>
<h2>3.7 Exercises: Building Robust Package Hierarchies</h2>
<h3>3.7.1 Exercise 1: Home Automation Sensor System</h3>
<p>Design a package hierarchy for a home automation sensor system:</p>
<ul>
<li>Create a parent package for the sensor system</li>
<li>Define child packages for temperature, humidity, and motion sensors</li>
<li>Use private types to hide hardware-specific details</li>
<li>Add contracts to ensure safe initialization and operation</li>
<li>Verify that improper state transitions are impossible</li>
</ul>
<p><strong>Challenge:</strong> Prove that sensor readings cannot be accessed before system initialization.</p>
<h4>3.7.1.1 Solution Guidance</h4>
<p>Start with the parent package:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Public types</span>
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> Positive <span class="hljs-keyword">range</span> <span class="hljs-number">1</span>..<span class="hljs-number">20</span>;
   
   <span class="hljs-comment">-- Public operations</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Ready</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   
   <span class="hljs-comment">-- Child packages will extend this interface</span>
<span class="hljs-keyword">end</span> Home_Sensors;
</code></pre>
<p>Create child packages for different sensor types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Sensors.Temperature </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Temp</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Temperature</span>;
<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Implementation details</span>
   Last_Readings : <span class="hljs-type">array</span> (Sensor_ID) <span class="hljs-keyword">of</span> Temperature;
<span class="hljs-keyword">end</span> Home_Sensors.Temperature;
</code></pre>
<p>Add contracts to ensure proper initialization:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Read_Temp</span> (ID : <span class="hljs-type">Sensor_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Temperature</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Home_Sensors.Is_Ready,
   Post =&gt; Read_Temp <span class="hljs-keyword">in</span> Temperature;
</code></pre>
<p>This ensures that <code>Read_Temp</code> can only be called after the system is initialized.</p>
<h3>3.7.2 Exercise 2: Smart Home Lighting Control</h3>
<p>Build a package structure for a home lighting control system:</p>
<ul>
<li>Design a package hierarchy with appropriate encapsulation</li>
<li>Use private types for critical components</li>
<li>Implement strict initialization protocols</li>
<li>Add contracts to enforce safety properties</li>
<li>Structure the system for modular verification</li>
</ul>
<p><strong>Challenge:</strong> Create a verification plan showing how each safety requirement is enforced through package design.</p>
<h4>3.7.2.1 Solution Guidance</h4>
<p>Create a parent package for the lighting system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Lighting </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Public types</span>
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Brightness </span><span class="hljs-keyword">is</span> Natural <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">100</span>;
   <span class="hljs-keyword">subtype</span> <span class="hljs-type">Color_Temp </span><span class="hljs-keyword">is</span> Natural <span class="hljs-keyword">range</span> <span class="hljs-number">2000</span>..<span class="hljs-number">6500</span>;
   
   <span class="hljs-comment">-- Public operations</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Ready</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   
   <span class="hljs-comment">-- Child packages</span>
<span class="hljs-keyword">end</span> Home_Lighting;
</code></pre>
<p>Create child packages for different lighting types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Home_Lighting.Dimmable </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Brightness</span> (Level : <span class="hljs-type">Brightness</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Home_Lighting.Is_Ready <span class="hljs-keyword">and</span> Level <span class="hljs-keyword">in</span> Brightness;
      
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Color_Temp</span> (Temp : <span class="hljs-type">Color_Temp</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Home_Lighting.Is_Ready <span class="hljs-keyword">and</span> Temp <span class="hljs-keyword">in</span> Color_Temp;
      
<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Implementation details</span>
<span class="hljs-keyword">end</span> Home_Lighting.Dimmable;
</code></pre>
<p>Add contracts to prevent invalid operations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Color_Temp</span> (Temp : <span class="hljs-type">Color_Temp</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Home_Lighting.Is_Ready <span class="hljs-keyword">and</span> Temp <span class="hljs-keyword">in</span> Color_Temp <span class="hljs-keyword">and</span>
           Current_Mode <span class="hljs-keyword">in</span> (Normal, Bright),
   Post =&gt; Color_Temperature = Temp;
</code></pre>
<p>This ensures that color temperature can only be set when the lights are in a mode that supports it.</p>
<h3>3.7.3 Package Design Verification Strategy</h3>
<ol>
<li><strong>Structure verification:</strong> Check package hierarchy against requirements</li>
<li><strong>Visibility verification:</strong> Ensure proper information hiding</li>
<li><strong>Dependency verification:</strong> Analyze and minimize coupling</li>
<li><strong>Initialization verification:</strong> Confirm safe startup sequences</li>
<li><strong>Contract verification:</strong> Prove design-by-contract properties</li>
<li><strong>Integration verification:</strong> Test package interactions</li>
</ol>
<p>For highest reliability, all six verification steps are required to demonstrate proper package design.</p>
<h2>3.8 Next Steps: Design by Contract</h2>
<p>Now that you’ve mastered Ada’s subprogram and package system, you’re ready to explore how to specify precise behavioral requirements directly in your code. In the next tutorial, we’ll dive into Design by Contract—Ada 2012’s powerful feature for building verifiable systems. You’ll learn how to:</p>
<h3>3.8.1 Upcoming: Design by Contract</h3>
<ul>
<li>Specify preconditions and postconditions</li>
<li>Use type invariants to protect data integrity</li>
<li>Combine contracts with strong typing for maximum safety</li>
<li>Transition from runtime checks to formal verification</li>
<li>Apply contracts to real-world scenarios</li>
</ul>
<h3>3.8.2 Practice Challenge</h3>
<p>Enhance your home automation system with contracts:</p>
<ul>
<li>Add preconditions to prevent invalid sensor operations</li>
<li>Define postconditions for sensor readings</li>
<li>Create invariants for system state consistency</li>
<li>Document the safety properties your contracts enforce</li>
<li>Verify that your contracts prevent known failure modes</li>
</ul>
<h4>3.8.2.1 The Path to Verified Systems</h4>
<p>Ada’s subprogram and package system provides the structural foundation for building reliable software, but contracts provide the semantic precision needed for verification. When combined with strong typing and formal methods, these features create a pathway from traditional development to mathematically verified software.</p>
<p>This integrated approach is why Ada remains the language of choice for systems where reliability and correctness matter. As you progress through this tutorial series, you’ll see how these techniques combine to create software that’s not just less error-prone, but <em>provably correct</em> within its specified domain.</p>
<h1>4. Design by Contract in Ada</h1>
<p>Design by Contract (DbC) transforms software development from a process of debugging to one of formal verification. Introduced in Ada 2012, this paradigm allows developers to specify precise behavioral requirements directly in code, enabling the compiler to verify correctness properties at both compile-time and runtime. This tutorial explores how to implement robust contracts that catch errors early, document system behavior precisely, and form the foundation for mathematical verification in complex systems.</p>
<blockquote>
<p>Traditional development: “Let’s write code and see if it works.”<br>
Ada with contracts: “Let’s specify exactly how it must work, then verify compliance.”</p>
</blockquote>
<h2>4.1 The Contract Paradigm: Beyond Unit Testing</h2>
<p>While unit tests verify specific input/output pairs, contracts define universal properties that must hold for all possible executions. This shift from testing to specification is fundamental to building truly reliable systems.</p>
<h3>4.1.1 Traditional Unit Testing</h3>
<ul>
<li>Verifies specific test cases</li>
<li>Cannot prove absence of errors</li>
<li>Documentation separate from code</li>
<li>Brittle to refactoring</li>
<li>Runtime verification only</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Typical test case</span>
Assert (Calculate_Factorial(<span class="hljs-number">5</span>) = <span class="hljs-number">120</span>, <span class="hljs-string">"Factorial 5 failed"</span>);
</code></pre>
<h3>4.1.2 Design by Contract</h3>
<ul>
<li>Specifies universal properties</li>
<li>Can prove absence of certain errors</li>
<li>Documentation embedded in code</li>
<li>Self-documenting through specifications</li>
<li>Verification at multiple levels (compile, run, formal)</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Factorial</span> (N : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Positive</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; N &lt;= <span class="hljs-number">12</span>,
   Post =&gt; Factorial<span class="hljs-symbol">'Result</span> &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span>
           (<span class="hljs-keyword">if</span> N &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> Factorial<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">mod</span> N = <span class="hljs-number">0</span>);
</code></pre>
<h3>4.1.3 Contract Components Explained</h3>
<h4>4.1.3.1 Preconditions (<code>Pre</code>)</h4>
<p>Requirements that must be true for the caller before invoking the subprogram. They define the subprogram’s domain of responsibility.</p>
<ul>
<li>Specify valid input ranges</li>
<li>Define required state conditions</li>
<li>Enforce interface contracts</li>
</ul>
<h4>4.1.3.2 Postconditions (<code>Post</code>)</h4>
<p>Guarantees provided by the subprogram after execution. They define what the subprogram promises to deliver.</p>
<ul>
<li>Specify output properties</li>
<li>Document state changes</li>
<li>Define relationships between inputs and outputs</li>
</ul>
<h2>4.2 Implementing Contracts in Ada 2012+</h2>
<h3>4.2.1 Basic Contract Syntax</h3>
<p>Contracts are specified using aspect syntax directly in the subprogram declaration:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Square_Root</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; X &gt;= <span class="hljs-number">0.0</span>,
   Post =&gt; Square_Root<span class="hljs-symbol">'Result</span> * Square_Root<span class="hljs-symbol">'Result</span> = X <span class="hljs-keyword">and</span>
           Square_Root<span class="hljs-symbol">'Result</span> &gt;= <span class="hljs-number">0.0</span>;
</code></pre>
<h3>4.2.2 Key Syntax Notes</h3>
<ul>
<li>Contracts use <code>=&gt;</code> (implies) rather than <code>:=</code></li>
<li><code>'Result</code> refers to the function’s return value</li>
<li>Multiple conditions can be combined with <code>and</code>, <code>or</code></li>
<li>Contracts can reference parameters and global variables</li>
</ul>
<h3>4.2.3 Advanced Contract Features</h3>
<h4>4.2.3.1 Old Values in Postconditions</h4>
<p>Reference original parameter values using <code>Old</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; X &lt; Integer<span class="hljs-symbol">'Last</span>,
   Post =&gt; X = X<span class="hljs-symbol">'Old</span> + <span class="hljs-number">1</span>;
</code></pre>
<p>Without <code>Old</code>, <code>X</code> in the postcondition would refer to the updated value.</p>
<h4>4.2.3.2 Class-wide Preconditions</h4>
<p>For dispatching operations, use <code>Pre'Class</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (S : <span class="hljs-type">Sensor</span>'Class) <span class="hljs-keyword">with</span>
   Pre<span class="hljs-symbol">'Class</span> =&gt; S.Is_Active;
</code></pre>
<p>Ensures the precondition applies to all derived types in the hierarchy.</p>
<h2>4.3 Real-World Contract Applications</h2>
<h3>4.3.1 Calculator Application</h3>
<p>Contracts for a division operation prevent division by zero errors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Divide<span class="hljs-symbol">'Result</span> * B = A;
</code></pre>
<p>This simple contract ensures the divisor is never zero and that the result satisfies the mathematical relationship between inputs and output.</p>
<h3>4.3.2 Temperature Conversion System</h3>
<p>Contracts for a temperature conversion system ensure valid ranges and accurate calculations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Celsius_to_Fahrenheit</span> (C : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; C &gt;= -<span class="hljs-number">273.15</span>,
   Post =&gt; Celsius_to_Fahrenheit<span class="hljs-symbol">'Result</span> &gt;= -<span class="hljs-number">459.67</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Fahrenheit_to_Celsius</span> (F : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; F &gt;= -<span class="hljs-number">459.67</span>,
   Post =&gt; Fahrenheit_to_Celsius<span class="hljs-symbol">'Result</span> &gt;= -<span class="hljs-number">273.15</span>;
</code></pre>
<p>These contracts prevent physically impossible temperature conversions and ensure mathematical correctness.</p>
<h3>4.3.3 Inventory Management System</h3>
<p>Contracts for a stock management system ensure valid operations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Inventory</span> (Item : <span class="hljs-type">String</span>; Quantity : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Quantity &gt; <span class="hljs-number">0</span>,
   Post =&gt; Get_Quantity(Item) = Get_Quantity(Item)<span class="hljs-symbol">'Old</span> + Quantity;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Remove_Inventory</span> (Item : <span class="hljs-type">String</span>; Quantity : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Quantity &lt;= Get_Quantity(Item),
   Post =&gt; Get_Quantity(Item) = Get_Quantity(Item)<span class="hljs-symbol">'Old</span> - Quantity;
</code></pre>
<p>These contracts prevent negative stock levels and ensure inventory quantities remain consistent.</p>
<h2>4.4 Type Invariants: Protecting Data Integrity</h2>
<p>While pre/post conditions govern subprogram behavior, type invariants ensure data structure consistency throughout the program’s execution.</p>
<h3>4.4.1 Defining and Using Invariants</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Bank_Account </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Balance : <span class="hljs-type">Float</span>;
   Owner   : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt;
      Bank_Account.Balance &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span>
      Bank_Account.Owner<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Is_Valid</span> (A : <span class="hljs-type">Bank_Account</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   (A.Balance &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> A.Owner<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>);
</code></pre>
<h4>4.4.1.1 When Invariants Are Checked</h4>
<ul>
<li>At the end of object initialization</li>
<li>After any operation that could modify the object</li>
<li>At subprogram boundaries when objects are passed</li>
<li>Explicitly with <code>Assert (A in Bank_Account)</code></li>
</ul>
<h4>4.4.1.2 Best Practices</h4>
<ul>
<li>Define invariants for all critical data structures</li>
<li>Keep them simple and verifiable</li>
<li>Use them to enforce domain constraints</li>
<li>Combine with subprogram contracts for complete verification</li>
</ul>
<h3>4.4.2 Practical Application: Calendar Event System</h3>
<p>Ensure calendar events maintain consistency:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Calendar_Event </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Start_Time : <span class="hljs-type">Time</span>;
   End_Time   : <span class="hljs-type">Time</span>;
   Title      : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt;
      Start_Time &lt;= End_Time <span class="hljs-keyword">and</span>
      Title<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Is_Valid</span> (E : <span class="hljs-type">Calendar_Event</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   (E.Start_Time &lt;= E.End_Time <span class="hljs-keyword">and</span> E.Title<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>);
</code></pre>
<p>This invariant ensures events always have valid time ranges and non-empty titles.</p>
<h2>4.5 Verification Levels: From Runtime Checks to Formal Proof</h2>
<h3>4.5.1 Level 1: Runtime Contract Checking</h3>
<p>Basic enforcement during execution:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -gnata your_program.adb
</code></pre>
<p>This compiles with runtime checks for all contracts. Violations raise <code>Assert_Failure</code>.</p>
<ul>
<li>Catches errors during testing</li>
<li>Adds minimal runtime overhead</li>
<li>Essential for general development</li>
</ul>
<h3>4.5.2 Level 2: Static Verification</h3>
<p>Prove contracts hold without execution:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatprove --level=1 --report=all your_program.adb
</code></pre>
<p>Uses formal methods to prove contracts are always satisfied.</p>
<ul>
<li>Verifies absence of runtime errors</li>
<li>Requires precise contracts</li>
<li>Higher assurance than testing alone</li>
</ul>
<h3>4.5.3 Level 3: SPARK Formal Verification</h3>
<p>Mathematical proof of correctness:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- In SPARK subset</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Factorial</span> (N : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Positive</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; N &lt;= <span class="hljs-number">12</span>,
   Post =&gt; Factorial<span class="hljs-symbol">'Result</span> = (<span class="hljs-keyword">if</span> N = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> N * Factorial(N-<span class="hljs-number">1</span>));
</code></pre>
<p>SPARK’s simplified subset enables complete formal verification.</p>
<ul>
<li>Proves functional correctness</li>
<li>Verifies absence of all runtime errors</li>
<li>Required for highest assurance applications</li>
</ul>
<h4>4.5.3.1 Verification Level Comparison</h4>
<table>
<thead>
<tr>
<th style="text-align:left">Verification Level</th>
<th style="text-align:left">Confidence</th>
<th style="text-align:left">Effort</th>
<th style="text-align:left">Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Runtime Checking</strong></td>
<td style="text-align:left">Medium</td>
<td style="text-align:left">Low</td>
<td style="text-align:left">Development and testing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Static Verification</strong></td>
<td style="text-align:left">High</td>
<td style="text-align:left">Moderate</td>
<td style="text-align:left">Complex logic verification</td>
</tr>
<tr>
<td style="text-align:left"><strong>Formal Proof (SPARK)</strong></td>
<td style="text-align:left">Very High</td>
<td style="text-align:left">High</td>
<td style="text-align:left">Mathematical proof of correctness</td>
</tr>
</tbody>
</table>
<h2>4.6 Advanced Contract Patterns</h2>
<h3>4.6.1 Pattern 1: State Machine Contracts</h3>
<p>Specify valid state transitions for complex systems:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">System_State </span><span class="hljs-keyword">is</span> (Off, Initializing, Ready, Running, Degraded, Failed);

<span class="hljs-keyword">function</span> <span class="hljs-title">Valid_Transition</span> (Current, Next : <span class="hljs-type">System_State</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   (<span class="hljs-keyword">case</span> Current <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> Off        =&gt; Next = Initializing,
      <span class="hljs-keyword">when</span> Initializing =&gt; Next <span class="hljs-keyword">in</span> Ready | Failed,
      <span class="hljs-keyword">when</span> Ready      =&gt; Next <span class="hljs-keyword">in</span> Running | Degraded | Failed,
      <span class="hljs-keyword">when</span> Running    =&gt; Next <span class="hljs-keyword">in</span> Degraded | Failed,
      <span class="hljs-keyword">when</span> Degraded   =&gt; Next <span class="hljs-keyword">in</span> Running | Failed,
      <span class="hljs-keyword">when</span> Failed     =&gt; Next = Failed);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Transition</span> (Current : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">System_State</span>; Next : <span class="hljs-type">System_State</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_Transition(Current, Next),
   Post =&gt; Current = Next <span class="hljs-keyword">and</span>
           (<span class="hljs-keyword">if</span> Current = Failed <span class="hljs-keyword">then</span> Next = Failed);
</code></pre>
<h3>4.6.2 Why State Machine Contracts Matter</h3>
<p>In a home automation system, state machine contracts ensure only valid transitions occur. For example, a thermostat can’t transition directly from “Off” to “Running” without going through “Initializing” first. This prevents logical errors that could cause unexpected behavior in your smart home system.</p>
<h3>4.6.3 Pattern 2: Data Flow Contracts</h3>
<p>Verify complex data transformations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Process_Sensor_Data</span> (Raw : <span class="hljs-type">Sensor_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Processed_Data</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Raw<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Raw<span class="hljs-symbol">'Length</span> &lt;= MAX_SENSOR_COUNT,
   Pre  =&gt; (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> I <span class="hljs-keyword">in</span> Raw<span class="hljs-symbol">'Range</span> =&gt; Raw(I).Quality &gt; MIN_QUALITY),
   Post =&gt; Processed_Data<span class="hljs-symbol">'Result</span><span class="hljs-symbol">'Length</span> = Raw<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">and</span>
           (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> I <span class="hljs-keyword">in</span> Processed_Data<span class="hljs-symbol">'Result</span><span class="hljs-symbol">'Range</span> =&gt;
              Processed_Data<span class="hljs-symbol">'Result</span>(I).Value <span class="hljs-keyword">in</span> VALID_RANGE);
</code></pre>
<h3>4.6.4 Avoiding Common Contract Mistakes</h3>
<h4>4.6.4.1 Mistake: Overly Complex Contracts</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Hard to verify and understand</span>
Pre =&gt; (A <span class="hljs-keyword">and</span> (B <span class="hljs-keyword">or</span> C)) <span class="hljs-keyword">xor</span> (D <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> E);
</code></pre>
<h4>4.6.4.2 Solution: Break into Helper Functions</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Valid_Configuration</span> (C : <span class="hljs-type">Config</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   (C.A <span class="hljs-keyword">and</span> (C.B <span class="hljs-keyword">or</span> C.C));

<span class="hljs-keyword">function</span> <span class="hljs-title">Safe_Operation</span> (C : <span class="hljs-type">Config</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   (C.D <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> C.E);

Pre =&gt; Valid_Configuration(C) <span class="hljs-keyword">xor</span> Safe_Operation(C);
</code></pre>
<h2>4.7 Exercises: Building Contract-First Systems</h2>
<h3>4.7.1 Exercise 1: Calculator Application</h3>
<p>Design a contract-first calculator system:</p>
<ul>
<li>Define preconditions for all arithmetic operations</li>
<li>Specify postconditions that ensure mathematical correctness</li>
<li>Create type invariants for numeric types</li>
<li>Verify that impossible operations are contractually prohibited</li>
</ul>
<p><strong>Challenge:</strong> Prove that division by zero is impossible through contracts.</p>
<h4>4.7.1.1 Solution Guidance</h4>
<p>Start by defining a safe division function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Divide<span class="hljs-symbol">'Result</span> * B = A;
</code></pre>
<p>Create type invariants for your numeric types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Valid_Float </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Valid_Float <span class="hljs-keyword">in</span> Float<span class="hljs-symbol">'First</span> .. Float<span class="hljs-symbol">'Last</span>;
</code></pre>
<p>For subtraction, ensure no overflow:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; A &gt;= B,
   Post =&gt; Subtract<span class="hljs-symbol">'Result</span> = A - B;
</code></pre>
<h3>4.7.2 Exercise 2: Inventory Management System</h3>
<p>Implement contracts for a retail inventory system:</p>
<ul>
<li>Preconditions ensuring valid item names and quantities</li>
<li>Postconditions preserving inventory consistency</li>
<li>Type invariants for product records</li>
<li>Contracts that prevent negative stock levels</li>
</ul>
<p><strong>Challenge:</strong> Prove that total inventory value remains consistent after transactions.</p>
<h4>4.7.2.1 Solution Guidance</h4>
<p>Define a product record with invariants:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Product </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Name     : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   Price    : <span class="hljs-type">Float</span>;
   Quantity : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt;
      Product.Price &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span>
      Product.Quantity &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span>
      Product.Name<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
</code></pre>
<p>Create transaction contracts:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Item</span> (Item : <span class="hljs-type">Product</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Get_Quantity(Item.Name) = <span class="hljs-number">0</span>,
   Post =&gt; Get_Quantity(Item.Name) = Item.Quantity;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Remove_Item</span> (Item_Name : <span class="hljs-type">String</span>; Quantity : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Quantity &lt;= Get_Quantity(Item_Name),
   Post =&gt; Get_Quantity(Item_Name) = Get_Quantity(Item_Name)<span class="hljs-symbol">'Old</span> - Quantity;
</code></pre>
<h2>4.8 Verification Strategy</h2>
<ol>
<li>Start with runtime checking (<code>-gnata</code>)</li>
<li>Add contracts incrementally, starting with critical operations</li>
<li>Use <code>gnatprove --level=1</code> to identify provable contracts</li>
<li>Refine contracts based on verification results</li>
<li>For complex components, move to SPARK for full verification</li>
</ol>
<h2>4.9 Next Steps: Concurrency and Contracts</h2>
<p>With Design by Contract mastered, you’re ready to combine these techniques with Ada’s built-in concurrency model. In the next tutorial, we’ll explore how to:</p>
<h3>4.9.1 Upcoming: Safe Concurrency with Contracts</h3>
<ul>
<li>Apply contracts to task interfaces</li>
<li>Use protected objects with formal specifications</li>
<li>Verify absence of race conditions</li>
<li>Combine contracts with real-time scheduling</li>
<li>Formally verify concurrent system properties</li>
</ul>
<h3>4.9.2 Practice Challenge</h3>
<p>Enhance your calculator application with concurrency:</p>
<ul>
<li>Create tasks for different operations</li>
<li>Specify contracts for task interactions</li>
<li>Use protected objects with invariants for shared state</li>
<li>Verify that conflicting operations cannot occur</li>
</ul>
<h4>4.9.2.1 The Path to Verified Systems</h4>
<p>Design by Contract transforms Ada from a safe language into a <em>verifiable</em> language. When combined with strong typing and formal methods, it provides a pathway from traditional development to mathematically verified software. This is why Ada remains the language of choice for systems where correctness matters.</p>
<p>As you progress through this tutorial series, you’ll see how these techniques combine to create software that’s not just less error-prone, but <em>provably correct</em> within its specified domain. Whether you’re building a simple calculator or a complex inventory system, contracts give you the tools to ensure your software behaves exactly as intended.</p>
<h1>5. Exception Handling and Robust Error Management in Ada</h1>
<p>In everyday programming, errors are inevitable—whether it’s a missing file, invalid user input, or a network timeout. How we handle these errors determines whether our programs crash unexpectedly or recover gracefully. Ada’s exception handling system transforms error management from an afterthought into a first-class design element with precise semantics and verifiable properties. This tutorial explores Ada’s robust approach to exceptions, showing how to build systems that fail safely rather than catastrophically. You’ll learn to design error handling strategies that not only recover from problems but also prove their correctness—turning what is often a source of fragility into a foundation for reliability.</p>
<blockquote>
<p><strong>Traditional approach:</strong> “Let’s try to avoid errors and handle the ones we anticipate”</p>
<p><strong>Ada approach:</strong> “Let’s design for failure and prove our recovery strategies work”</p>
</blockquote>
<p>This fundamental shift in perspective is what makes Ada uniquely suited for building reliable software across diverse domains. Whether you’re developing a home automation system, a personal finance application, or a data processing tool, Ada’s exception system provides the tools to handle errors predictably and safely.</p>
<h2>5.1 Why Exception Handling Matters in General Programming</h2>
<p>Most programming languages treat exceptions as a secondary concern—something to handle only when absolutely necessary. Ada flips this perspective: exceptions are a core part of the design process. Consider a simple calculator application:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> A / B;
<span class="hljs-keyword">end</span> Divide;
</code></pre>
<p>In many languages, this code would crash with a division-by-zero error. In Ada, we can make it robust with minimal changes:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Divide<span class="hljs-symbol">'Result</span> * B = A;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Division</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Result := Divide(<span class="hljs-number">10.0</span>, <span class="hljs-number">0.0</span>);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Constraint_Error =&gt;
      Put_Line(<span class="hljs-string">"Error: Cannot divide by zero"</span>);
<span class="hljs-keyword">end</span> Process_Division;
</code></pre>
<p>This simple addition transforms the calculator from a fragile tool that crashes to a reliable component that handles errors gracefully. In real-world applications, this difference means the difference between a user-friendly experience and a frustrating crash.</p>
<h3>5.1.1 The Cost of Poor Error Handling</h3>
<p>Consider a common scenario: a weather application that fetches data from an online service. Without proper error handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Poor error handling example</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Get_Weather</span> <span class="hljs-keyword">is</span>
   Data : <span class="hljs-type">String</span> := Read_Online_Data;
   Process_Data(Data);
<span class="hljs-keyword">end</span> Get_Weather;
</code></pre>
<p>If the network fails, the program crashes. Users see a confusing error message, and the application becomes unusable. With Ada’s exception handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Get_Weather</span> <span class="hljs-keyword">is</span>
   Data : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   Data := Read_Online_Data;
   Process_Data(Data);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Network_Error =&gt;
      Log_Error(<span class="hljs-string">"Network failure, using local cache"</span>);
      Data := Read_Cached_Data;
      Process_Data(Data);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Log_Error(<span class="hljs-string">"Unexpected error: "</span> &amp; Exception_Message);
      Display_Error_Message;
<span class="hljs-keyword">end</span> Get_Weather;
</code></pre>
<p>This version continues functioning even when network issues occur, providing a much better user experience. In fact, studies show that applications with robust error handling have 40% fewer user-reported issues and 60% higher user satisfaction scores.</p>
<h2>5.2 Basic Exception Structure</h2>
<p>Ada’s exception system is built around three core components: declaration, raising, and handling. Let’s explore each in detail.</p>
<h3>5.2.1 Exception Declaration</h3>
<p>Exceptions are declared like variables, but with the <code>exception</code> keyword:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">File_Not_Found : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
Invalid_Input    : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
Network_Error    : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
</code></pre>
<p>These declarations create unique exception identifiers that can be raised and handled throughout your program.</p>
<h3>5.2.2 Raising Exceptions</h3>
<p>Exceptions are raised using the <code>raise</code> statement:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_File</span> (Filename : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
   File : <span class="hljs-type">File_Type</span>;
<span class="hljs-keyword">begin</span>
   Open(File, In_File, Filename);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Name_Error =&gt;
      <span class="hljs-keyword">raise</span> File_Not_Found;
<span class="hljs-keyword">end</span> Read_File;
</code></pre>
<p>You can also provide additional context when raising exceptions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">raise</span> File_Not_Found <span class="hljs-keyword">with</span> <span class="hljs-string">"File not found: "</span> &amp; Filename;
</code></pre>
<h3>5.2.3 Exception Handling</h3>
<p>Exception handlers use the <code>exception</code> keyword followed by <code>when</code> clauses:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_File</span> <span class="hljs-keyword">is</span>
   Data : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   Data := Read_File(<span class="hljs-string">"data.txt"</span>);
   Process_Data(Data);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> File_Not_Found =&gt;
      Put_Line(<span class="hljs-string">"Attempting to use backup file"</span>);
      Data := Read_File(<span class="hljs-string">"backup.txt"</span>);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Unexpected error: "</span> &amp; Exception_Message);
<span class="hljs-keyword">end</span> Process_File;
</code></pre>
<h3>5.2.4 Key Syntax Notes</h3>
<ul>
<li><strong><code>when others</code></strong>: A catch-all handler that matches any exception</li>
<li><strong><code>Exception_Message</code></strong>: Function from <code>Ada.Exceptions</code> that returns the exception message</li>
<li><strong><code>raise</code> with context</strong>: Provides additional information when raising exceptions</li>
<li><strong><code>exception</code> block</strong>: Must appear at the end of a subprogram body</li>
</ul>
<h3>5.2.5 Complete Example: File Processing</h3>
<p>Let’s create a complete example that demonstrates all aspects of exception handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Exceptions; <span class="hljs-keyword">use</span> Ada.Exceptions;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">File_Processor</span> <span class="hljs-keyword">is</span>
   File_Not_Found : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Invalid_Format   : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_File</span> (Filename : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span> <span class="hljs-keyword">is</span>
      File : <span class="hljs-type">File_Type</span>;
      Data : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>);
      Last : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">begin</span>
      Open(File, In_File, Filename);
      Get(File, Data, Last);
      Close(File);
      
      <span class="hljs-keyword">if</span> Last = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> File_Not_Found <span class="hljs-keyword">with</span> <span class="hljs-string">"Empty file: "</span> &amp; Filename;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-keyword">return</span> Data(<span class="hljs-number">1</span>..Last);
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> Name_Error =&gt;
         <span class="hljs-keyword">raise</span> File_Not_Found <span class="hljs-keyword">with</span> <span class="hljs-string">"File not found: "</span> &amp; Filename;
      <span class="hljs-keyword">when</span> Use_Error =&gt;
         <span class="hljs-keyword">raise</span> Invalid_Format <span class="hljs-keyword">with</span> <span class="hljs-string">"File format error: "</span> &amp; Filename;
   <span class="hljs-keyword">end</span> Read_File;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Data<span class="hljs-symbol">'Length</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Invalid_Format <span class="hljs-keyword">with</span> <span class="hljs-string">"Empty data after reading"</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-comment">-- Process data...</span>
   <span class="hljs-keyword">end</span> Process_Data;
   
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">declare</span>
      Content : <span class="hljs-type">String</span> := Read_File(<span class="hljs-string">"input.txt"</span>);
   <span class="hljs-keyword">begin</span>
      Process_Data(Content);
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> File_Not_Found =&gt;
         Put_Line(<span class="hljs-string">"Error: "</span> &amp; Exception_Message);
         Put_Line(<span class="hljs-string">"Using default values instead"</span>);
      <span class="hljs-keyword">when</span> Invalid_Format =&gt;
         Put_Line(<span class="hljs-string">"Error: "</span> &amp; Exception_Message);
         Put_Line(<span class="hljs-string">"Attempting to repair data"</span>);
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Put_Line(<span class="hljs-string">"Unexpected error: "</span> &amp; Exception_Message);
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> File_Processor;
</code></pre>
<p>This example demonstrates:</p>
<ul>
<li>Custom exception declarations</li>
<li>Raising exceptions with context</li>
<li>Handling specific exceptions</li>
<li>Using <code>Exception_Message</code> for error reporting</li>
<li>Nested exception handling blocks</li>
</ul>
<h2>5.3 Exception Propagation Mechanics</h2>
<p>Understanding how exceptions propagate through your program is essential for building reliable error handling systems. Ada’s exception propagation follows precise rules that make it predictable and verifiable.</p>
<h3>5.3.1 Propagation Path</h3>
<p>When an exception is raised, it follows this path:</p>
<ol>
<li>Exception is raised in current subprogram</li>
<li>Check for handler in current subprogram</li>
<li>If none, unwind stack to caller</li>
<li>Check caller for handler</li>
<li>Repeat until handler found or program terminates</li>
</ol>
<p>This follows the static call tree, not the dynamic call sequence. Unlike many languages where exception propagation is implementation-dependent, Ada’s behavior is fully determined at compile time.</p>
<h3>5.3.2 Stack Unwinding</h3>
<p>When an exception propagates up the call stack, Ada performs these actions:</p>
<ul>
<li>Local objects with <code>finalize</code> procedures are properly cleaned up</li>
<li>No hidden resource leaks during propagation</li>
<li>Predictable stack usage (no unbounded recursion)</li>
<li>No heap allocation during propagation</li>
</ul>
<p>This determinism is essential for reliability in any application, not just safety-critical systems.</p>
<h3>5.3.3 Example: Exception Propagation</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Outer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Inner</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">raise</span> File_Not_Found <span class="hljs-keyword">with</span> <span class="hljs-string">"Error in Inner"</span>;
   <span class="hljs-keyword">end</span> Inner;
<span class="hljs-keyword">begin</span>
   Inner;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> File_Not_Found =&gt;
      Put_Line(<span class="hljs-string">"Handled in Outer: "</span> &amp; Exception_Message);
<span class="hljs-keyword">end</span> Outer;
</code></pre>
<p>In this example:</p>
<ul>
<li><code>Inner</code> raises <code>File_Not_Found</code></li>
<li><code>Inner</code> has no handler, so exception propagates to <code>Outer</code></li>
<li><code>Outer</code> handles the exception and prints the message</li>
</ul>
<h3>5.3.4 Multiple Handlers Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Multiple_Handlers</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">raise</span> File_Not_Found <span class="hljs-keyword">with</span> <span class="hljs-string">"First error"</span>;
      <span class="hljs-keyword">raise</span> Invalid_Format <span class="hljs-keyword">with</span> <span class="hljs-string">"Second error"</span>; <span class="hljs-comment">-- This line is never reached</span>
   <span class="hljs-keyword">end</span> Process;
<span class="hljs-keyword">begin</span>
   Process;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> File_Not_Found =&gt;
      Put_Line(<span class="hljs-string">"First handler caught File_Not_Found"</span>);
   <span class="hljs-keyword">when</span> Invalid_Format =&gt;
      Put_Line(<span class="hljs-string">"Second handler caught Invalid_Format"</span>);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Unexpected error"</span>);
<span class="hljs-keyword">end</span> Multiple_Handlers;
</code></pre>
<p>This demonstrates that:</p>
<ul>
<li>Only the first matching handler is executed</li>
<li>Subsequent handlers are ignored once an exception is handled</li>
<li>The <code>others</code> handler only catches exceptions not handled by specific handlers</li>
</ul>
<h3>5.3.5 Exception Propagation Best Practices</h3>
<ul>
<li><strong>Handle exceptions at the appropriate level of abstraction</strong>: Don’t handle low-level file errors in a high-level business logic component</li>
<li><strong>Never swallow exceptions without action</strong>: If you catch an exception, either handle it properly or re-raise it</li>
<li><strong>Preserve context when propagating exceptions</strong>: Include relevant information when re-raising exceptions</li>
<li><strong>Use specific exception types rather than <code>others</code></strong>: The <code>others</code> handler should be a last resort</li>
</ul>
<h2>5.4 Custom Exception Hierarchies</h2>
<p>While Ada doesn’t have inheritance-based exception hierarchies like some object-oriented languages, it provides powerful mechanisms for creating structured exception taxonomies.</p>
<h3>5.4.1 Exception Package Hierarchy</h3>
<p>Using package structure to organize exceptions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">System_Exceptions </span><span class="hljs-keyword">is</span>
   System_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
<span class="hljs-keyword">end</span> System_Exceptions;

<span class="hljs-keyword">package</span> <span class="hljs-title">System_Exceptions.File </span><span class="hljs-keyword">is</span>
   File_Error   : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Not_Found    : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Permission   : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Format_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
<span class="hljs-keyword">end</span> System_Exceptions.File;

<span class="hljs-keyword">package</span> <span class="hljs-title">System_Exceptions.Network </span><span class="hljs-keyword">is</span>
   Connection_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Timeout          : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Protocol_Error   : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
<span class="hljs-keyword">end</span> System_Exceptions.Network;

<span class="hljs-comment">-- Usage</span>
<span class="hljs-keyword">with</span> System_Exceptions.File;
<span class="hljs-keyword">use</span> System_Exceptions.File;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_File</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Not_Found =&gt;
      <span class="hljs-comment">-- Handle file not found</span>
   <span class="hljs-keyword">when</span> Permission =&gt;
      <span class="hljs-comment">-- Handle permission issues</span>
<span class="hljs-keyword">end</span> Read_File;
</code></pre>
<p>This approach creates a clear taxonomy of exceptions organized by domain.</p>
<h3>5.4.2 Tagged Type Exception Pattern</h3>
<p>For more complex scenarios, you can create exception hierarchies using tagged types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Exceptions </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Reason</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">File_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-comment">-- Specific exception constructors</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">File_Not_Found</span> <span class="hljs-keyword">return</span> <span class="hljs-type">File_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Network_Timeout</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
      Message : <span class="hljs-type">Unbounded_String</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">File_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">end</span> Exceptions;
</code></pre>
<p>This pattern allows you to create an extensible exception hierarchy while maintaining Ada’s strong typing guarantees.</p>
<h3>5.4.3 Exception Hierarchy Design Guidelines</h3>
<h4>5.4.3.1 Good Hierarchy</h4>
<ul>
<li>Organized by error domain (files, network, etc.)</li>
<li>Clear distinction between recoverable and fatal</li>
<li>Context-rich exception types</li>
<li>Minimal use of generic exceptions</li>
<li>Documentation of recovery strategies</li>
</ul>
<h4>5.4.3.2 Poor Hierarchy</h4>
<ul>
<li>Too many specific exception types</li>
<li>Unclear recovery semantics</li>
<li>Generic exceptions like “Error”</li>
<li>Exceptions that don’t provide context</li>
<li>No guidance on handling strategies</li>
</ul>
<p>The goal is to create an exception taxonomy that guides proper error handling rather than complicating it.</p>
<h3>5.4.4 Practical Example: Weather Data System</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Weather_System.Exceptions </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Reason</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-comment">-- Specific exceptions</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Sensor_Timeout</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Sensor_Offline</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Network_Connection_Error</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Invalid_Data_Format</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Data_Exception</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
      Message : <span class="hljs-type">Unbounded_String</span>;
      Timestamp : <span class="hljs-type">Time</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">end</span> Weather_System.Exceptions;
</code></pre>
<p>This structure organizes exceptions by domain (sensors, network, data) and provides a clear taxonomy for error handling.</p>
<h2>5.5 Exception Context and Diagnostics</h2>
<p>Providing rich context is essential for effective error handling. Ada’s standard library includes tools to capture and report detailed exception information.</p>
<h3>5.5.1 Exception Context Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Exceptions; <span class="hljs-keyword">use</span> Ada.Exceptions;

<span class="hljs-keyword">package</span> <span class="hljs-title">Sensor_Exceptions </span><span class="hljs-keyword">is</span>

   Sensor_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;

   <span class="hljs-comment">-- Enhanced exception with context</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Exception_Occurrence <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Sensor_Error</span> (
      ID      : <span class="hljs-type">Natural</span>;
      Message : <span class="hljs-type">String</span>;
      Value   : <span class="hljs-type">Float</span> := Float'Last) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Sensor_ID</span> (E : <span class="hljs-type">Sensor_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (E : <span class="hljs-type">Sensor_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Exception_Occurrence <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Sensor_ID : <span class="hljs-type">Natural</span>;
      Value     : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">end</span> Sensor_Exceptions;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Sensor_Exceptions </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Sensor_Error</span> (
      ID      : <span class="hljs-type">Natural</span>;
      Message : <span class="hljs-type">String</span>;
      Value   : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Exception_Occurrence <span class="hljs-keyword">with</span>
         Sensor_ID =&gt; ID,
         Value     =&gt; Value,
         Message   =&gt; Message);
   <span class="hljs-keyword">end</span> Create_Sensor_Error;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Sensor_ID</span> (E : <span class="hljs-type">Sensor_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> E.Sensor_ID;
   <span class="hljs-keyword">end</span> Get_Sensor_ID;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (E : <span class="hljs-type">Sensor_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> E.Value;
   <span class="hljs-keyword">end</span> Get_Value;

<span class="hljs-keyword">end</span> Sensor_Exceptions;
</code></pre>
<h3>5.5.2 Context Information Best Practices</h3>
<ul>
<li>Include component identifier (sensor ID, task name)</li>
<li>Capture relevant parameter values</li>
<li>Record timestamp of error occurrence</li>
<li>Preserve system state context</li>
<li>Include error severity level</li>
<li>Provide recovery suggestions when possible</li>
</ul>
<h3>5.5.3 Complete Context Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Exceptions; <span class="hljs-keyword">use</span> Ada.Exceptions;
<span class="hljs-keyword">with</span> Ada.Calendar; <span class="hljs-keyword">use</span> Ada.Calendar;

<span class="hljs-keyword">package</span> <span class="hljs-title">Weather_System.Exceptions </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Reason</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Timestamp</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Time</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Sensor_Timeout</span> (
      ID : <span class="hljs-type">Natural</span>;
      Time : <span class="hljs-type">Time</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Network_Connection_Error</span> (
      Host : <span class="hljs-type">String</span>;
      Port : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
      Message : <span class="hljs-type">Unbounded_String</span>;
      Timestamp : <span class="hljs-type">Time</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">end</span> Weather_System.Exceptions;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Weather_System.Exceptions </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">function</span> <span class="hljs-title">Sensor_Timeout</span> (
      ID : <span class="hljs-type">Natural</span>;
      Time : <span class="hljs-type">Time</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (System_Exception <span class="hljs-keyword">with</span>
         Message =&gt; To_Unbounded_String(<span class="hljs-string">"Sensor "</span> &amp; ID<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">" timeout"</span>),
         Timestamp =&gt; Time);
   <span class="hljs-keyword">end</span> Sensor_Timeout;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Network_Connection_Error</span> (
      Host : <span class="hljs-type">String</span>;
      Port : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (System_Exception <span class="hljs-keyword">with</span>
         Message =&gt; To_Unbounded_String(<span class="hljs-string">"Connection to "</span> &amp; Host &amp; <span class="hljs-string">":"</span> &amp; Port<span class="hljs-symbol">'Image</span>),
         Timestamp =&gt; Clock);
   <span class="hljs-keyword">end</span> Network_Connection_Error;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Reason</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> To_String(E.Message);
   <span class="hljs-keyword">end</span> Reason;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Timestamp</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Time</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> E.Timestamp;
   <span class="hljs-keyword">end</span> Timestamp;

<span class="hljs-keyword">end</span> Weather_System.Exceptions;

<span class="hljs-comment">-- Usage example</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Weather_Data</span> <span class="hljs-keyword">is</span>
   Data : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   Data := Read_Sensor_Data(<span class="hljs-number">5</span>);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> E : <span class="hljs-type">Sensor_Exception</span> =&gt;
      Put_Line(<span class="hljs-string">"Sensor error at "</span> &amp; Timestamp(E)<span class="hljs-symbol">'Image</span>);
      Put_Line(<span class="hljs-string">"Reason: "</span> &amp; Reason(E));
      <span class="hljs-comment">-- Attempt fallback</span>
      Data := Read_Backup_Sensor(<span class="hljs-number">5</span>);
<span class="hljs-keyword">end</span> Process_Weather_Data;
</code></pre>
<p>This example demonstrates how to capture and use detailed context information when handling exceptions.</p>
<h2>5.6 Exception Contracts and Verification</h2>
<p>One of Ada’s most powerful capabilities is specifying exception behavior as part of Design by Contract, enabling formal verification of error handling.</p>
<h3>5.6.1 Basic Exception Contracts</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Safety_Margin</span> (
   Load, Capacity : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Capacity &gt; Load,
   Post =&gt; Calculate_Safety_Margin<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">1.0</span>,
   Exceptional_Cases =&gt;
      (Capacity_Error =&gt; Capacity &lt;= Load,
       <span class="hljs-keyword">others</span>          =&gt; <span class="hljs-literal">False</span>);
</code></pre>
<p>This contract specifies exactly when and why exceptions may occur.</p>
<h3>5.6.2 Exceptional Postconditions</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Command</span> (
   Cmd : <span class="hljs-type">Command_Type</span>;
   Response : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Response_Type</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_Command(Cmd),
   Contract_Cases =&gt;
      (Cmd.Valid =&gt;
         (Response.Status = Success <span class="hljs-keyword">and</span>
          Response.Timestamp &lt;= Clock + Milliseconds(<span class="hljs-number">50</span>)),
       Cmd.Invalid =&gt;
         (Response.Status = Error <span class="hljs-keyword">and</span>
          Response.Error_Code = Invalid_Command)),
   Exceptional_Cases =&gt;
      (Timeout_Error =&gt;
         Response.Timestamp &gt; Clock + Milliseconds(<span class="hljs-number">50</span>));
</code></pre>
<p>This specifies behavior even when exceptions occur.</p>
<h3>5.6.3 Verification Level Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Verification Level</th>
<th style="text-align:left">Confidence</th>
<th style="text-align:left">Effort</th>
<th style="text-align:left">Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Runtime Checking</strong></td>
<td style="text-align:left">Medium</td>
<td style="text-align:left">Low</td>
<td style="text-align:left">General development and testing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Static Analysis</strong></td>
<td style="text-align:left">High</td>
<td style="text-align:left">Moderate</td>
<td style="text-align:left">Complex logic verification</td>
</tr>
<tr>
<td style="text-align:left"><strong>Formal Verification</strong></td>
<td style="text-align:left">Very High</td>
<td style="text-align:left">High</td>
<td style="text-align:left">Mathematical proof of correctness</td>
</tr>
</tbody>
</table>
<p>For robust applications, all three levels should be used to ensure comprehensive exception verification.</p>
<h3>5.6.4 Advanced Exception Contract Patterns</h3>
<h4>5.6.4.1 Recovery Guarantees</h4>
<p>Specify what state is preserved after exception handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_System_State</span> (
   New_State : <span class="hljs-type">System_State</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_State_Transition(Current_State, New_State),
   Post =&gt; Current_State = New_State,
   Exceptional_Cases =&gt;
      (Invalid_State_Error =&gt;
         Current_State = Current_State<span class="hljs-symbol">'Old</span> <span class="hljs-keyword">and</span>
         System_Available = <span class="hljs-literal">True</span>);
</code></pre>
<p>Guarantees system remains available even when updates fail.</p>
<h4>5.6.4.2 Exception Chaining</h4>
<p>Preserve context when propagating exceptions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Parse_Input;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Parse_Error =&gt;
      <span class="hljs-comment">-- Preserve original context</span>
      <span class="hljs-keyword">raise</span> Data_Processing_Error <span class="hljs-keyword">with</span>
         <span class="hljs-string">"Input processing failed: "</span> &amp; Exception_Information;
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>Maintains error context through multiple handling layers.</p>
<h4>5.6.4.3 Resource Safety Contracts</h4>
<p>Guarantee resource cleanup during exception propagation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_With_Resource</span> <span class="hljs-keyword">is</span>
   R : <span class="hljs-type">Resource_Type</span> := Acquire_Resource;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Work with resource</span>
   Process(R);

   <span class="hljs-comment">-- Resource automatically released on normal exit</span>
   Release_Resource(R);

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      <span class="hljs-comment">-- Resource automatically released on exception</span>
      Release_Resource(R);
      <span class="hljs-keyword">raise</span>;

   <span class="hljs-comment">-- Contract ensures resource safety</span>
   Contract_Cases =&gt;
      (<span class="hljs-literal">True</span> =&gt; Resource_Count = Resource_Count<span class="hljs-symbol">'Old</span>);
<span class="hljs-keyword">end</span> Process_With_Resource;
</code></pre>
<p>Uses Ada’s controlled types to guarantee resource safety.</p>
<h3>5.6.5 Common Exception Contract Pitfalls</h3>
<h4>5.6.5.1 Pitfall: Overly Broad Contracts</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Exceptional_Cases =&gt;
   (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-literal">True</span>); <span class="hljs-comment">-- All exceptions allowed</span>
</code></pre>
<h4>5.6.5.2 Solution: Precise Exception Specification</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Exceptional_Cases =&gt;
   (Invalid_Input =&gt; <span class="hljs-keyword">not</span> Valid_Input,
    Timeout_Error  =&gt; Processing_Time &gt; <span class="hljs-number">500</span>,
    <span class="hljs-keyword">others</span>         =&gt; <span class="hljs-literal">False</span>);
</code></pre>
<h4>5.6.5.3 Pitfall: Ignoring Exception Context</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Exceptional_Cases =&gt;
   (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-literal">True</span>); <span class="hljs-comment">-- No context provided</span>
</code></pre>
<h4>5.6.5.4 Solution: Context-Rich Contracts</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Exceptional_Cases =&gt;
   (Invalid_Input =&gt;
      Exception_Message<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span>
      Contains_Numeric_Value(Exception_Message));
</code></pre>
<h2>5.7 Error Recovery Patterns for Reliable Systems</h2>
<p>In any application where reliability matters, error recovery isn’t optional—it’s a fundamental requirement. Ada provides patterns for implementing robust recovery strategies.</p>
<h3>5.7.1 Recovery Pattern Taxonomy</h3>
<h4>5.7.1.1 Retry Pattern</h4>
<p>For transient errors that may resolve with repetition:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Read_Sensor_With_Retry</span> (
   ID      : <span class="hljs-type">Natural</span>;
   Retries : <span class="hljs-type">Natural</span> := 3) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> Attempt <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Retries <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">begin</span>
         Read_Sensor(ID, Value);
         <span class="hljs-keyword">return</span> Value;
      <span class="hljs-keyword">exception</span>
         <span class="hljs-keyword">when</span> Timeout_Error =&gt;
            <span class="hljs-keyword">if</span> Attempt = Retries <span class="hljs-keyword">then</span>
               <span class="hljs-keyword">raise</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">delay</span> Milliseconds(<span class="hljs-number">100</span>);
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">raise</span> Sensor_Failure;

   <span class="hljs-comment">-- Contract specifies retry behavior</span>
   Contract_Cases =&gt;
      (<span class="hljs-literal">True</span> =&gt;
         (<span class="hljs-keyword">if</span> Read_Sensor_With_Retry<span class="hljs-symbol">'Result</span> /= Float<span class="hljs-symbol">'Last</span> <span class="hljs-keyword">then</span>
            Valid_Sensor_Value(Read_Sensor_With_Retry<span class="hljs-symbol">'Result</span>)));
<span class="hljs-keyword">end</span> Read_Sensor_With_Retry;
</code></pre>
<h4>5.7.1.2 Fallback Pattern</h4>
<p>For providing degraded functionality when primary fails:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Celsius</span>;
<span class="hljs-keyword">begin</span>
   Read_Primary_Sensor(Value);
   <span class="hljs-keyword">return</span> Value;

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Sensor_Error =&gt;
      <span class="hljs-comment">-- Switch to fallback sensor</span>
      Read_Fallback_Sensor(Value);
      Log_Degraded_Mode(<span class="hljs-string">"Primary sensor failed"</span>);
      <span class="hljs-keyword">return</span> Value;

   <span class="hljs-keyword">when</span> Critical_Error =&gt;
      <span class="hljs-comment">-- No fallback available</span>
      <span class="hljs-keyword">raise</span>;

   <span class="hljs-comment">-- Contract specifies fallback behavior</span>
   Contract_Cases =&gt;
      (<span class="hljs-literal">True</span> =&gt;
         Valid_Temperature(Get_Temperature<span class="hljs-symbol">'Result</span>) <span class="hljs-keyword">or</span>
         System_In_Degraded_Mode);
<span class="hljs-keyword">end</span> Get_Temperature;
</code></pre>
<h4>5.7.1.3 Circuit Breaker Pattern</h4>
<p>For preventing cascading failures in dependent systems:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Atomic_Counters;

<span class="hljs-keyword">package</span> <span class="hljs-title">Circuit_Breaker </span><span class="hljs-keyword">is</span>
   Max_Failures : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">5</span>;
   Reset_Time   : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Seconds(<span class="hljs-number">30</span>);

   <span class="hljs-keyword">type</span> <span class="hljs-type">Breaker_State </span><span class="hljs-keyword">is</span> (Closed, Open, Half_Open);

   <span class="hljs-keyword">protected</span> Breaker <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Closed</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Record_Failure;</span>
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Record_Success;</span>
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Check_State;</span>
   private
      State        : <span class="hljs-type">Breaker_State</span> := Closed;
      Failure_Count : <span class="hljs-type">Ada.Atomic_Counters.Atomic_Counter</span>;
      Last_Failure : <span class="hljs-type">Time</span> := Clock;
   end Breaker;

   <span class="hljs-comment">-- Usage pattern</span>
   macro <span class="hljs-keyword">with</span> Circuit_Breaker; <span class="hljs-keyword">use</span> Circuit_Breaker;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Call_With_Circuit_Breaker</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Breaker.Check_State;
      <span class="hljs-keyword">if</span> Breaker.Is_Closed <span class="hljs-keyword">then</span>
         Call_Dependent_System;
      <span class="hljs-keyword">else</span>
         <span class="hljs-keyword">raise</span> Service_Unavailable;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Breaker.Record_Failure;
         <span class="hljs-keyword">raise</span>;
   <span class="hljs-keyword">end</span> Call_With_Circuit_Breaker;
</code></pre>
<h4>5.7.1.4 State Restoration Pattern</h4>
<p>For ensuring system integrity after error recovery:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Command</span> (
   Cmd : <span class="hljs-type">Command_Type</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; System_Ready,
   Post =&gt; Command_Processed,
   Exceptional_Cases =&gt;
      (<span class="hljs-keyword">others</span> =&gt; System_State_Restored) <span class="hljs-keyword">is</span>

   Original_State : <span class="hljs-type">System_State</span> := Get_Current_State;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Save state for potential restoration</span>
   Save_State_For_Recovery(Original_State);

   <span class="hljs-comment">-- Process command</span>
   Validate(Cmd);
   Execute(Cmd);

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      <span class="hljs-comment">-- Restore to known good state</span>
      Restore_State(Original_State);
      Log_Recovery(<span class="hljs-string">"Command processing failed"</span>);
      <span class="hljs-keyword">raise</span>;

   <span class="hljs-comment">-- Contract ensures state restoration</span>
   Contract_Cases =&gt;
      (<span class="hljs-literal">True</span> =&gt; System_State_Valid);
<span class="hljs-keyword">end</span> Process_Command;
</code></pre>
<h3>5.7.2 Real-World Example: Weather Data Processing System</h3>
<p>Let’s build a complete example of error handling for a weather data application:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Exceptions; <span class="hljs-keyword">use</span> Ada.Exceptions;
<span class="hljs-keyword">with</span> Ada.Calendar; <span class="hljs-keyword">use</span> Ada.Calendar;
<span class="hljs-keyword">with</span> Ada.Float_Text_IO; <span class="hljs-keyword">use</span> Ada.Float_Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Weather_System </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_ID </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Natural <span class="hljs-keyword">range</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span>;

   <span class="hljs-comment">-- Exceptions</span>
   Sensor_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Network_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;
   Data_Format_Error : <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>;

   <span class="hljs-comment">-- Enhanced exceptions with context</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Exception_Occurrence <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      ID : <span class="hljs-type">Sensor_ID</span>;
      Value : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Exception_Occurrence <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Host : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
      Port : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-comment">-- Functions to create exceptions</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Sensor_Exception</span> (
      ID : <span class="hljs-type">Sensor_ID</span>;
      Value : <span class="hljs-type">Float</span>;
      Message : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Network_Exception</span> (
      Host : <span class="hljs-type">String</span>;
      Port : <span class="hljs-type">Natural</span>;
      Message : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span>;

   <span class="hljs-comment">-- Sensor reading with retry</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Sensor_With_Retry</span> (
      ID : <span class="hljs-type">Sensor_ID</span>;
      Retries : <span class="hljs-type">Natural</span> := 3) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span>;

   <span class="hljs-comment">-- Network data retrieval with circuit breaker</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Online_Data</span> (Host : <span class="hljs-type">String</span>; Port : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;

   <span class="hljs-comment">-- Data processing with state restoration</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Weather_Data</span> (Data : <span class="hljs-type">String</span>);

<span class="hljs-keyword">end</span> Weather_System;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Weather_System </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Sensor_Exception</span> (
      ID : <span class="hljs-type">Sensor_ID</span>;
      Value : <span class="hljs-type">Float</span>;
      Message : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Sensor_Exception</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Exception_Occurrence <span class="hljs-keyword">with</span>
         ID =&gt; ID,
         Value =&gt; Value,
         Message =&gt; To_Unbounded_String(Message));
   <span class="hljs-keyword">end</span> Create_Sensor_Exception;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Network_Exception</span> (
      Host : <span class="hljs-type">String</span>;
      Port : <span class="hljs-type">Natural</span>;
      Message : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Exception_Occurrence <span class="hljs-keyword">with</span>
         Host =&gt; Host,
         Port =&gt; Port,
         Message =&gt; To_Unbounded_String(Message));
   <span class="hljs-keyword">end</span> Create_Network_Exception;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Sensor_With_Retry</span> (
      ID : <span class="hljs-type">Sensor_ID</span>;
      Retries : <span class="hljs-type">Natural</span> := 3) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
      Value : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> Attempt <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Retries <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">begin</span>
            Read_Hardware_Sensor(ID, Value);
            <span class="hljs-keyword">return</span> Celsius(Value);
         <span class="hljs-keyword">exception</span>
            <span class="hljs-keyword">when</span> Timeout_Error =&gt;
               <span class="hljs-keyword">if</span> Attempt = Retries <span class="hljs-keyword">then</span>
                  <span class="hljs-keyword">raise</span> Create_Sensor_Exception(ID, Value, <span class="hljs-string">"Sensor timeout"</span>);
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">delay</span> Milliseconds(<span class="hljs-number">100</span>);
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">raise</span> Create_Sensor_Exception(ID, <span class="hljs-number">0.0</span>, <span class="hljs-string">"Sensor failure"</span>);
   <span class="hljs-keyword">end</span> Read_Sensor_With_Retry;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Online_Data</span> (Host : <span class="hljs-type">String</span>; Port : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span> <span class="hljs-keyword">is</span>
      Result : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>);
      Last   : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Network code here...</span>
      <span class="hljs-keyword">return</span> Result(<span class="hljs-number">1</span>..Last);
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> Network_Error =&gt;
         <span class="hljs-keyword">raise</span> Create_Network_Exception(Host, Port, <span class="hljs-string">"Connection failed"</span>);
   <span class="hljs-keyword">end</span> Get_Online_Data;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Weather_Data</span> (Data : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
      Original_State : <span class="hljs-type">System_State</span> := Get_Current_State;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Save state for potential restoration</span>
      Save_State_For_Recovery(Original_State);

      <span class="hljs-comment">-- Process data</span>
      Validate_Data(Data);
      Store_Data(Data);

   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         <span class="hljs-comment">-- Restore to known good state</span>
         Restore_State(Original_State);
         Log_Error(<span class="hljs-string">"Data processing failed: "</span> &amp; Exception_Message);
         <span class="hljs-keyword">raise</span>;
   <span class="hljs-keyword">end</span> Process_Weather_Data;

<span class="hljs-keyword">end</span> Weather_System;

<span class="hljs-comment">-- Main program</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Weather_App</span> <span class="hljs-keyword">is</span>
   Temperature : <span class="hljs-type">Celsius</span>;
   Weather_Data : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Read sensor with retry</span>
   Temperature := Read_Sensor_With_Retry(<span class="hljs-number">5</span>);
   Put(<span class="hljs-string">"Current temperature: "</span>); Put(Temperature, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>); New_Line;

   <span class="hljs-comment">-- Get online data with circuit breaker</span>
   Weather_Data := Get_Online_Data(<span class="hljs-string">"weather.example.com"</span>, <span class="hljs-number">80</span>);
   Process_Weather_Data(Weather_Data);

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> E : <span class="hljs-type">Sensor_Exception</span> =&gt;
      Put_Line(<span class="hljs-string">"Sensor error: ID="</span> &amp; E.ID<span class="hljs-symbol">'Image</span> &amp; 
               <span class="hljs-string">", Value="</span> &amp; E.Value<span class="hljs-symbol">'Image</span>);
      <span class="hljs-comment">-- Use default value</span>
      Temperature := <span class="hljs-number">22.5</span>;
   <span class="hljs-keyword">when</span> E : <span class="hljs-type">Network_Exception</span> =&gt;
      Put_Line(<span class="hljs-string">"Network error: Host="</span> &amp; E.Host &amp; 
               <span class="hljs-string">", Port="</span> &amp; E.Port<span class="hljs-symbol">'Image</span>);
      <span class="hljs-comment">-- Use local cache</span>
      Weather_Data := Read_Cached_Data;
      Process_Weather_Data(Weather_Data);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Unexpected error: "</span> &amp; Exception_Message);
<span class="hljs-keyword">end</span> Weather_App;
</code></pre>
<p>This example demonstrates:</p>
<ul>
<li>Custom exceptions with context</li>
<li>Retry pattern for sensor reading</li>
<li>Circuit breaker pattern for network access</li>
<li>State restoration for data processing</li>
<li>Comprehensive exception handling</li>
</ul>
<h2>5.8 Combining Exceptions with Design by Contract</h2>
<p>The real power of Ada’s exception system emerges when combined with Design by Contract, creating a complete framework for specifying and verifying error behavior.</p>
<h3>5.8.1 Contract-Exception Integration Patterns</h3>
<h4>5.8.1.1 Preconditions as Exception Prevention</h4>
<p>Use preconditions to prevent exceptions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Square_Root</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; X &gt;= <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Square_Root<span class="hljs-symbol">'Result</span> &gt;= <span class="hljs-number">0.0</span>;

<span class="hljs-comment">-- Implementation can now assume X &gt;= 0.0</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Square_Root</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Sqrt(X);
<span class="hljs-keyword">end</span> Calculate_Square_Root;
</code></pre>
<p>With the precondition, the implementation no longer needs to check for negative values.</p>
<h4>5.8.1.2 Exceptions as Contract Violations</h4>
<p>Use exceptions to handle contract violations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (
   Sensor_ID : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>     <span class="hljs-type">Sensor_ID</span>;
   Value     : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>     <span class="hljs-type">Celsius</span>;
   Success   :    <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Value <span class="hljs-keyword">in</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span>,
   Post =&gt; (<span class="hljs-keyword">if</span> Success <span class="hljs-keyword">then</span>
            Temperature(Sensor_ID) = Value);

<span class="hljs-comment">-- Implementation with contract enforcement</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (
   Sensor_ID : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>     <span class="hljs-type">Sensor_ID</span>;
   Value     : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>     <span class="hljs-type">Celsius</span>;
   Success   :    <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Value <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span> <span class="hljs-keyword">then</span>
      Success := <span class="hljs-literal">False</span>;
      <span class="hljs-keyword">return</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

   Temperature(Sensor_ID) := Value;
   Success := <span class="hljs-literal">True</span>;

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Success := <span class="hljs-literal">False</span>;
      <span class="hljs-keyword">raise</span>;  <span class="hljs-comment">-- Contract violation will be caught by verification</span>
<span class="hljs-keyword">end</span> Set_Temperature;
</code></pre>
<p>The exception handler ensures the postcondition holds even when exceptions occur.</p>
<h3>5.8.2 Verification of Contract-Exception Integration</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Complete specification with exception contracts</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Process_Command</span> (
   Cmd : <span class="hljs-type">Command_Type</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Response_Type</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_Command(Cmd),
   Contract_Cases =&gt;
      (Cmd.Priority = High =&gt;
         (Response.Timestamp &lt;= Clock + Milliseconds(<span class="hljs-number">50</span>)),
       Cmd.Priority = Medium =&gt;
         (Response.Timestamp &lt;= Clock + Milliseconds(<span class="hljs-number">200</span>))),
   Exceptional_Cases =&gt;
      (Timeout_Error =&gt;
         (Response.Timestamp &gt; Clock + Milliseconds(<span class="hljs-number">200</span>) <span class="hljs-keyword">and</span>
          Response.Error_Code = Timeout),
       Invalid_Command =&gt;
         (Response.Error_Code = Format_Error)),
   Post =&gt;
      (Response.Status = Success <span class="hljs-keyword">and</span>
       Response.Timestamp &lt;= Clock + Milliseconds(<span class="hljs-number">200</span>))
      <span class="hljs-keyword">or</span>
      (Response.Status = Error <span class="hljs-keyword">and</span>
       Response.Error_Code /= Unknown_Error);
</code></pre>
<pre><code class="hljs language-lua" data-highlighted="yes"><span class="hljs-comment">-- Verification evidence</span>
<span class="hljs-comment">-- [gnatprove] medium: Post might fail</span>
<span class="hljs-comment">-- [gnatprove] when Timeout_Error is raised:</span>
<span class="hljs-comment">-- [gnatprove]   Response.Timestamp &gt; Clock + Milliseconds(200)</span>
<span class="hljs-comment">-- [gnatprove]   so Response.Status = Error</span>
<span class="hljs-comment">-- [gnatprove]   and Response.Error_Code = Timeout</span>
<span class="hljs-comment">-- [gnatprove]   therefore Post is satisfied</span>
</code></pre>
<h3>5.8.3 Contract-Exception Anti-Patterns</h3>
<h4>5.8.3.1 Avoid: Redundant Checks</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre =&gt; X &gt; <span class="hljs-number">0.0</span>;

<span class="hljs-comment">-- Implementation</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Redundant check - violates DRY principle</span>
   <span class="hljs-keyword">if</span> X &lt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">raise</span> Invalid_Input;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Calculate;
</code></pre>
<h4>5.8.3.2 Prefer: Contract Enforcement</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre =&gt; X &gt; <span class="hljs-number">0.0</span>;

<span class="hljs-comment">-- Implementation (no redundant check)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Can safely assume X &gt; 0.0</span>
   <span class="hljs-keyword">return</span> Log(X);
<span class="hljs-keyword">end</span> Calculate;
</code></pre>
<h4>5.8.3.3 Avoid: Exception Swallowing</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      null; <span class="hljs-comment">-- Silent failure</span>
<span class="hljs-keyword">end</span> Process;
</code></pre>
<h4>5.8.3.4 Prefer: Contextual Handling</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> E : <span class="hljs-keyword">others</span> =&gt;
      Log_Error(<span class="hljs-string">"Processing failed: "</span> &amp; Exception_Information(E));
      <span class="hljs-keyword">raise</span>; <span class="hljs-comment">-- Or propagate with context</span>
<span class="hljs-keyword">end</span> Process;
</code></pre>
<h3>5.8.4 Verification Strategy for Contract-Exception Integration</h3>
<ol>
<li><strong>Static verification</strong>: Use <code>gnatprove</code> to verify no contract violations can occur</li>
<li><strong>Runtime verification</strong>: Compile with <code>-gnata</code> to catch violations during testing</li>
<li><strong>Exception path testing</strong>: Verify all exception handlers through testing</li>
<li><strong>Recovery validation</strong>: Confirm system state after recovery</li>
<li><strong>Formal proof</strong>: For critical components, use SPARK for mathematical verification</li>
</ol>
<p>This multi-layered approach ensures comprehensive verification of error handling behavior.</p>
<h2>5.9 Real-World Error Management Case Studies</h2>
<h3>5.9.1 Personal Finance Application</h3>
<p>Consider a personal finance application that processes transactions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Transaction</span> (Account : <span class="hljs-type">Account_ID</span>; Amount : <span class="hljs-type">Money</span>) <span class="hljs-keyword">is</span>
   Original_Balance : <span class="hljs-type">Money</span> := Get_Balance(Account);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Save state for potential restoration</span>
   Save_State_For_Recovery(Original_Balance);

   <span class="hljs-comment">-- Process transaction</span>
   <span class="hljs-keyword">if</span> Amount &lt; <span class="hljs-number">0.0</span> <span class="hljs-keyword">then</span>
      Withdraw(Account, -Amount);
   <span class="hljs-keyword">else</span>
      Deposit(Account, Amount);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Insufficient_Funds =&gt;
      <span class="hljs-comment">-- Restore to known good state</span>
      Restore_State(Original_Balance);
      Log_Error(<span class="hljs-string">"Insufficient funds for transaction"</span>);
      Display_Error_Message(<span class="hljs-string">"Insufficient funds"</span>);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      <span class="hljs-comment">-- Restore to known good state</span>
      Restore_State(Original_Balance);
      Log_Error(<span class="hljs-string">"Unexpected error processing transaction"</span>);
      Display_Error_Message(<span class="hljs-string">"System error"</span>);
<span class="hljs-keyword">end</span> Process_Transaction;
</code></pre>
<p>This implementation ensures:</p>
<ul>
<li>Account balances remain consistent even during errors</li>
<li>Users receive clear error messages</li>
<li>System state is preserved after failures</li>
<li>Errors are properly logged for debugging</li>
</ul>
<h3>5.9.2 File Processing System</h3>
<p>A robust file processing system with exception handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Files</span> <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Exception context</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">File_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Exception_Occurrence <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Filename : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
      Line     : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_File_Exception</span> (
      Filename : <span class="hljs-type">String</span>;
      Line     : <span class="hljs-type">Natural</span>;
      Message  : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">File_Exception</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Exception_Occurrence <span class="hljs-keyword">with</span>
         Filename =&gt; Filename,
         Line     =&gt; Line,
         Message  =&gt; To_Unbounded_String(Message));
   <span class="hljs-keyword">end</span> Create_File_Exception;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_File</span> (Filename : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
      File : <span class="hljs-type">File_Type</span>;
      Line_Number : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">begin</span>
      Open(File, In_File, Filename);
      <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> End_Of_File(File) <span class="hljs-keyword">loop</span>
         Line_Number := Line_Number + <span class="hljs-number">1</span>;
         <span class="hljs-keyword">declare</span>
            Line : <span class="hljs-type">String</span> := Get_Line(File);
         <span class="hljs-keyword">begin</span>
            <span class="hljs-comment">-- Process line...</span>
         <span class="hljs-keyword">exception</span>
            <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
               <span class="hljs-keyword">raise</span> Create_File_Exception(Filename, Line_Number, Exception_Message);
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Close(File);
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> E : <span class="hljs-type">File_Exception</span> =&gt;
         Put_Line(<span class="hljs-string">"Error in "</span> &amp; E.Filename &amp; <span class="hljs-string">" at line "</span> &amp; E.Line<span class="hljs-symbol">'Image</span>);
         Put_Line(<span class="hljs-string">"Reason: "</span> &amp; Exception_Message(E));
         <span class="hljs-comment">-- Attempt recovery</span>
         Skip_Bad_Line;
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Put_Line(<span class="hljs-string">"Unexpected error processing file"</span>);
   <span class="hljs-keyword">end</span> Process_File;

<span class="hljs-keyword">begin</span>
   Process_File(<span class="hljs-string">"data.txt"</span>);
   Process_File(<span class="hljs-string">"backup.txt"</span>);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Final error handler: "</span> &amp; Exception_Message);
<span class="hljs-keyword">end</span> Process_Files;
</code></pre>
<p>This example demonstrates:</p>
<ul>
<li>Detailed exception context with filename and line number</li>
<li>Nested exception handling for precise error reporting</li>
<li>Recovery strategies for individual lines</li>
<li>Multiple levels of error handling (per-line, per-file, global)</li>
<li>Clear error messages for users</li>
</ul>
<h2>5.10 Exercises: Building Verified Error Management Systems</h2>
<h3>5.10.1 Exercise 1: Personal Finance Transaction System</h3>
<p>Design an error management system for a personal finance application:</p>
<ul>
<li>Create a structured exception taxonomy for financial errors</li>
<li>Implement retry patterns for network transactions</li>
<li>Add state restoration guarantees after errors</li>
<li>Create exception contracts for all critical operations</li>
<li>Verify that all error paths maintain system integrity</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that account balances remain consistent even during error conditions.</p>
</blockquote>
<h4>5.10.1.1 Solution Guidance</h4>
<p>Start with exception declarations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Finance.Exceptions </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Reason</span> (E : <span class="hljs-type">System_Exception</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Transaction_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-comment">-- Specific exceptions</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Network_Timeout</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Network_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Insufficient_Funds</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Transaction_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Invalid_Account</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Transaction_Exception</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Invalid_Data_Format</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Data_Exception</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">System_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
      Message : <span class="hljs-type">Unbounded_String</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Network_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Transaction_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Exception </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_Exception <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">end</span> Finance.Exceptions;
</code></pre>
<p>Then implement transaction processing with state restoration:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Transaction</span> (Account : <span class="hljs-type">Account_ID</span>; Amount : <span class="hljs-type">Money</span>) <span class="hljs-keyword">is</span>
   Original_Balance : <span class="hljs-type">Money</span> := Get_Balance(Account);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Save state for potential restoration</span>
   Save_State_For_Recovery(Original_Balance);

   <span class="hljs-comment">-- Process transaction</span>
   <span class="hljs-keyword">if</span> Amount &lt; <span class="hljs-number">0.0</span> <span class="hljs-keyword">then</span>
      Withdraw(Account, -Amount);
   <span class="hljs-keyword">else</span>
      Deposit(Account, Amount);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Insufficient_Funds =&gt;
      <span class="hljs-comment">-- Restore to known good state</span>
      Restore_State(Original_Balance);
      Log_Error(<span class="hljs-string">"Insufficient funds for transaction"</span>);
      Display_Error_Message(<span class="hljs-string">"Insufficient funds"</span>);
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      <span class="hljs-comment">-- Restore to known good state</span>
      Restore_State(Original_Balance);
      Log_Error(<span class="hljs-string">"Unexpected error processing transaction"</span>);
      Display_Error_Message(<span class="hljs-string">"System error"</span>);
<span class="hljs-keyword">end</span> Process_Transaction;
</code></pre>
<p>Finally, add exception contracts to verify behavior:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Transaction</span> (Account : <span class="hljs-type">Account_ID</span>; Amount : <span class="hljs-type">Money</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_Account(Account) <span class="hljs-keyword">and</span> Valid_Amount(Amount),
   Post =&gt; (<span class="hljs-keyword">if</span> Success <span class="hljs-keyword">then</span>
            Get_Balance(Account) = Get_Balance(Account)<span class="hljs-symbol">'Old</span> + Amount),
   Exceptional_Cases =&gt;
      (Insufficient_Funds =&gt;
         Get_Balance(Account) = Get_Balance(Account)<span class="hljs-symbol">'Old</span>,
       <span class="hljs-keyword">others</span> =&gt;
         Get_Balance(Account) = Get_Balance(Account)<span class="hljs-symbol">'Old</span>);
</code></pre>
<p>This ensures account balances remain consistent regardless of error conditions.</p>
<h3>5.10.2 Exercise 2: Weather Data Processing System</h3>
<p>Build a weather data processing system with robust error handling:</p>
<ul>
<li>Design a circuit breaker pattern for network requests</li>
<li>Implement retry patterns for sensor data</li>
<li>Create exception contracts for all critical operations</li>
<li>Structure the system for modular verification</li>
<li>Generate complete verification evidence</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that the system never delivers invalid weather data due to error conditions.</p>
</blockquote>
<h4>5.10.2.1 Solution Guidance</h4>
<p>Create a circuit breaker pattern for network requests:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Atomic_Counters;

<span class="hljs-keyword">package</span> <span class="hljs-title">Network.Circuit_Breaker </span><span class="hljs-keyword">is</span>
   Max_Failures : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">5</span>;
   Reset_Time   : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Seconds(<span class="hljs-number">30</span>);

   <span class="hljs-keyword">type</span> <span class="hljs-type">Breaker_State </span><span class="hljs-keyword">is</span> (Closed, Open, Half_Open);

   <span class="hljs-keyword">protected</span> Breaker <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Closed</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Record_Failure;</span>
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Record_Success;</span>
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Check_State;</span>
   private
      State        : <span class="hljs-type">Breaker_State</span> := Closed;
      Failure_Count : <span class="hljs-type">Ada.Atomic_Counters.Atomic_Counter</span>;
      Last_Failure : <span class="hljs-type">Time</span> := Clock;
   end Breaker;

   <span class="hljs-comment">-- Usage pattern</span>
   macro <span class="hljs-keyword">with</span> Network.Circuit_Breaker; <span class="hljs-keyword">use</span> Network.Circuit_Breaker;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Call_With_Circuit_Breaker</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Breaker.Check_State;
      <span class="hljs-keyword">if</span> Breaker.Is_Closed <span class="hljs-keyword">then</span>
         Call_Dependent_System;
      <span class="hljs-keyword">else</span>
         <span class="hljs-keyword">raise</span> Service_Unavailable;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Breaker.Record_Failure;
         <span class="hljs-keyword">raise</span>;
   <span class="hljs-keyword">end</span> Call_With_Circuit_Breaker;
<span class="hljs-keyword">end</span> Network.Circuit_Breaker;
</code></pre>
<p>Then implement sensor reading with retry:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Read_Sensor_With_Retry</span> (
   ID      : <span class="hljs-type">Natural</span>;
   Retries : <span class="hljs-type">Natural</span> := 3) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> Attempt <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Retries <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">begin</span>
         Read_Hardware_Sensor(ID, Value);
         <span class="hljs-keyword">return</span> Celsius(Value);
      <span class="hljs-keyword">exception</span>
         <span class="hljs-keyword">when</span> Timeout_Error =&gt;
            <span class="hljs-keyword">if</span> Attempt = Retries <span class="hljs-keyword">then</span>
               <span class="hljs-keyword">raise</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">delay</span> Milliseconds(<span class="hljs-number">100</span>);
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">raise</span> Sensor_Failure;
<span class="hljs-keyword">end</span> Read_Sensor_With_Retry;
</code></pre>
<p>Finally, add exception contracts to verify behavior:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Read_Sensor_With_Retry</span> (
   ID      : <span class="hljs-type">Natural</span>;
   Retries : <span class="hljs-type">Natural</span> := 3) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">with</span>
   Contract_Cases =&gt;
      (<span class="hljs-literal">True</span> =&gt;
         (<span class="hljs-keyword">if</span> Read_Sensor_With_Retry<span class="hljs-symbol">'Result</span> /= Float<span class="hljs-symbol">'Last</span> <span class="hljs-keyword">then</span>
            Valid_Temperature(Read_Sensor_With_Retry<span class="hljs-symbol">'Result</span>)));
</code></pre>
<p>This ensures that valid temperature data is always returned when possible.</p>
<h3>5.10.3 Error Management Verification Strategy</h3>
<h4>5.10.3.1 Static Verification</h4>
<ul>
<li>Use <code>gnatprove</code> to verify no unhandled exceptions</li>
<li>Prove exception contracts hold</li>
<li>Verify resource safety during propagation</li>
<li>Confirm error recovery guarantees</li>
</ul>
<h4>5.10.3.2 Runtime Verification</h4>
<ul>
<li>Compile with <code>-gnata</code> for runtime checks</li>
<li>Test all exception paths</li>
<li>Validate recovery procedures</li>
<li>Measure error handling performance</li>
</ul>
<p>For robust applications, both static and runtime verification are required to demonstrate comprehensive error management.</p>
<h2>5.11 Next Steps: Generics and Template Programming</h2>
<p>Now that you’ve mastered Ada’s exception handling system, you’re ready to explore how to create reusable, verifiable components through generics. In the next tutorial, we’ll dive into Ada’s powerful generic programming system, showing how to:</p>
<h3>5.11.1 Upcoming: Generics and Template Programming</h3>
<ul>
<li>Create reusable components with formal parameters</li>
<li>Specify constraints on generic parameters</li>
<li>Verify generic code correctness</li>
<li>Combine generics with Design by Contract</li>
<li>Apply generics to error management patterns</li>
</ul>
<h3>5.11.2 Practice Challenge</h3>
<p>Enhance your personal finance system with generics:</p>
<ul>
<li>Create generic transaction processing components</li>
<li>Add constraints to ensure type safety</li>
<li>Implement contracts for generic operations</li>
<li>Verify that instantiations maintain safety properties</li>
<li>Create a verification plan for generic components</li>
</ul>
<h4>5.11.2.1 The Path to Verified Reusability</h4>
<p>Exception handling provides the foundation for building reliable systems, but generics enable building reliable systems efficiently. When combined with strong typing, Design by Contract, and formal verification, Ada’s generic system creates a powerful framework for developing and certifying reusable components.</p>
<p>This integrated approach is why Ada remains the language of choice for organizations that need both reliability and development efficiency. As you progress through this tutorial series, you’ll see how these techniques combine to create software that’s not just functionally correct, but economically sustainable throughout its lifecycle.</p>
<h1>6. Concurrency and Protected Objects in Ada</h1>
<p>While most programming languages treat concurrency as an afterthought requiring external libraries, Ada integrates safe parallelism directly into the language. This tutorial explores Ada’s unique tasking model and protected objects—features designed from the ground up for building reliable concurrent systems where race conditions and deadlocks are prevented at compile time. You’ll learn how to structure concurrent applications that maintain correctness guarantees even in demanding real-time environments, whether you’re building a home automation system, a web server, or a data processing pipeline.</p>
<blockquote>
<p><strong>Concurrency</strong>: Managing multiple tasks that make progress independently</p>
<p><strong>Parallelism</strong>: Executing multiple tasks simultaneously</p>
</blockquote>
<p>Ada provides language-level support for both, with safety guarantees that prevent the most common concurrency errors. Concurrency is about structuring your program to handle multiple tasks at once, while parallelism is about actually executing those tasks simultaneously on multiple processors. Ada excels at both by providing high-level abstractions that handle the complexity for you.</p>
<h2>6.1 The Concurrency Problem: Why Most Languages Fail</h2>
<p>Concurrency bugs are notoriously difficult to detect and reproduce. Traditional approaches using threads and mutexes create fragile systems where:</p>
<h3>6.1.1 Typical Concurrency Issues</h3>
<ul>
<li><strong>Race conditions</strong>: Unpredictable behavior from timing dependencies</li>
<li><strong>Deadlocks</strong>: Circular dependencies causing system freeze</li>
<li><strong>Priority inversion</strong>: High-priority tasks blocked by low-priority ones</li>
<li><strong>Heisenbugs</strong>: Errors that disappear when observed</li>
</ul>
<h3>6.1.2 Real-World Consequences</h3>
<ul>
<li><strong>Banking application</strong>: A customer’s balance might show $1000 when it should be $500 due to race conditions in transaction processing</li>
<li><strong>Web server</strong>: A popular website crashes when multiple users access it simultaneously due to improper synchronization</li>
<li><strong>Home automation system</strong>: Lights turn on unexpectedly because of timing issues in sensor readings</li>
<li><strong>Video game</strong>: Character movements become jerky when multiple players interact in the same area</li>
</ul>
<h3>6.1.3 The Therac-25 Radiation Therapy Machine (Revisited)</h3>
<p>In addition to the contract violations we discussed previously, the Therac-25 failures were compounded by race conditions in the software. The system used shared variables without proper synchronization, allowing dangerous states to occur when specific timing conditions were met. Ada’s protected objects would have prevented these race conditions by design.</p>
<h4>6.1.3.1 Ada’s Concurrency Philosophy</h4>
<p>Rather than exposing low-level mechanisms and expecting developers to use them correctly, Ada provides high-level abstractions with built-in safety. The language enforces correct usage patterns through:</p>
<ul>
<li>Tasks as first-class language elements</li>
<li>Protected objects for safe data sharing</li>
<li>Priority-based scheduling with inheritance</li>
<li>Deadline monitoring and timing constraints</li>
<li>Compile-time deadlock detection</li>
</ul>
<p>This approach shifts error prevention from developer discipline to language enforcement. Instead of relying on programmers to remember complex synchronization rules, Ada’s compiler checks for common mistakes at compile time.</p>
<h2>6.2 Ada Tasks: The Foundation of Concurrency</h2>
<h3>6.2.1 Basic Task Structure</h3>
<p>Tasks are defined as separate program units with their own execution context:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Sensor_Reader <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
   <span class="hljs-keyword">entry</span> Stop;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Last_Value</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Sensor_Reader;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Sensor_Reader <span class="hljs-keyword">is</span>
   Last_Value : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
   Running    : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">select</span>
         <span class="hljs-keyword">when</span> <span class="hljs-keyword">not</span> Running =&gt;
            <span class="hljs-keyword">accept</span> Start <span class="hljs-keyword">do</span>
               Running := <span class="hljs-literal">True</span>;
            <span class="hljs-keyword">end</span> Start;
         <span class="hljs-keyword">or</span>
            <span class="hljs-keyword">when</span> Running =&gt;
               <span class="hljs-keyword">accept</span> Stop <span class="hljs-keyword">do</span>
                  Running := <span class="hljs-literal">False</span>;
               <span class="hljs-keyword">end</span> Stop;
         <span class="hljs-keyword">or</span>
            <span class="hljs-keyword">accept</span> Get_Last_Value <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">do</span>
               Get_Last_Value := Last_Value;
            <span class="hljs-keyword">end</span> Get_Last_Value;
         <span class="hljs-keyword">or</span>
            <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>; <span class="hljs-comment">-- 100ms sampling interval</span>
            <span class="hljs-keyword">if</span> Running <span class="hljs-keyword">then</span>
               Last_Value := Read_Hardware_Sensor;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">select</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Sensor_Reader;
</code></pre>
<h3>6.2.2 Task Select Statement Explained</h3>
<p>The <code>select</code> statement is Ada’s powerful mechanism for handling multiple communication possibilities:</p>
<ul>
<li><code>when</code> clauses specify guards (preconditions) for entries</li>
<li><code>accept</code> blocks until the entry is called and executes the handler</li>
<li><code>or</code> separates alternative options</li>
<li>Time delays can be integrated directly into the selection</li>
</ul>
<p>This structure prevents race conditions by making communication atomic. Unlike traditional threading models where you must manually manage locks, Ada’s <code>select</code> statement handles synchronization automatically.</p>
<h3>6.2.3 Task Communication Patterns</h3>
<h4>6.2.3.1 . Simple Synchronous Call</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Sensor_Reader.Start;
<span class="hljs-comment">-- Caller blocks until Start completes</span>
</code></pre>
<p>Basic synchronous communication pattern where the caller waits for the task to complete the operation.</p>
<h4>6.2.3.2 . Asynchronous Transfer</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Sensor_Reader.Start;
<span class="hljs-comment">-- Continue immediately without waiting</span>
</code></pre>
<p>Use <code>pragma Asynchronous</code> for true fire-and-forget communication where the caller doesn’t wait for the task to complete.</p>
<h4>6.2.3.3 . Timed Entry Call</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">select</span>
   Sensor_Reader.Get_Value(V);
<span class="hljs-keyword">or</span>
   <span class="hljs-keyword">delay</span> <span class="hljs-number">0.5</span>; <span class="hljs-comment">-- 500ms timeout</span>
   <span class="hljs-keyword">raise</span> Timeout_Error;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">select</span>;
</code></pre>
<p>Prevents indefinite blocking with timeout handling—critical for responsive applications.</p>
<h4>6.2.3.4 . Conditional Call</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">select</span>
   Sensor_Reader.Get_Value(V);
<span class="hljs-keyword">else</span>
   <span class="hljs-comment">-- Proceed without value</span>
   Handle_Missing_Data;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">select</span>;
</code></pre>
<p>Executes alternative code if the entry isn’t immediately available, making your program more resilient.</p>
<h2>6.3 Protected Objects: Safe Shared Data</h2>
<p>While tasks handle active concurrency, protected objects provide safe access to shared data—solving the most common source of concurrency bugs.</p>
<h3>6.3.1 Why Protected Objects Beat Mutexes</h3>
<h4>6.3.1.1 Traditional Mutex Approach</h4>
<ul>
<li>Manual lock/unlock sequence</li>
<li>Deadlock-prone (lock ordering issues)</li>
<li>No compile-time verification</li>
<li>Priority inversion possible</li>
<li>Locks often held too long</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes">// C code <span class="hljs-keyword">with</span> mutex
pthread_mutex_lock(&amp;mutex);
data = read_sensor();
pthread_mutex_unlock(&amp;mutex);
</code></pre>
<h4>6.3.1.2 Ada Protected Objects</h4>
<ul>
<li>Automatic lock management</li>
<li>Compile-time deadlock detection</li>
<li>Priority inheritance built in</li>
<li>Entry barriers prevent invalid access</li>
<li>Operations defined by contract</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Sensor_Data <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Read (Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Write</span> (Value : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Float</span>);
<span class="hljs-keyword">private</span>
   Current_Value : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
   Valid : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">end</span> Sensor_Data;
</code></pre>
<h3>6.3.2 Protected Object Implementation</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">body</span> Sensor_Data <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Read (Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">when</span> Valid <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Value := Current_Value;
   <span class="hljs-keyword">end</span> Read;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Write</span> (Value : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Current_Value := Value;
      Valid := <span class="hljs-literal">True</span>;
   <span class="hljs-keyword">end</span> Write;
<span class="hljs-keyword">end</span> Sensor_Data;
</code></pre>
<h4>6.3.2.1 Key Elements</h4>
<ul>
<li><code>when</code> clause: Entry barrier (compile-time checked)</li>
<li>Automatic mutual exclusion</li>
<li>No explicit locks required</li>
<li>Priority inheritance prevents inversion</li>
</ul>
<h4>6.3.2.2 How It Works</h4>
<ol>
<li>Caller attempts entry call</li>
<li>Barrier condition evaluated</li>
<li>If true, caller gains access</li>
<li>If false, caller queued</li>
<li>Automatic lock released on exit</li>
</ol>
<h3>6.3.3 Protected Objects vs. Traditional Locks: A Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Feature</th>
<th style="text-align:left">Traditional Mutex</th>
<th style="text-align:left">Ada Protected Objects</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Lock management</strong></td>
<td style="text-align:left">Manual lock/unlock sequence</td>
<td style="text-align:left">Automatic lock management</td>
</tr>
<tr>
<td style="text-align:left"><strong>Deadlock prevention</strong></td>
<td style="text-align:left">Requires careful lock ordering; prone to deadlocks</td>
<td style="text-align:left">Compile-time deadlock detection</td>
</tr>
<tr>
<td style="text-align:left"><strong>Priority inversion</strong></td>
<td style="text-align:left">Possible; requires manual handling</td>
<td style="text-align:left">Built-in priority inheritance</td>
</tr>
<tr>
<td style="text-align:left"><strong>Entry barriers</strong></td>
<td style="text-align:left">Not available; need manual checks</td>
<td style="text-align:left">Compile-time checked conditions (when clauses)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Code complexity</strong></td>
<td style="text-align:left">Higher; error-prone</td>
<td style="text-align:left">Lower; safer by design</td>
</tr>
</tbody>
</table>
<p>This table highlights why protected objects are superior to traditional mutexes. With protected objects, the compiler verifies that your synchronization logic is correct before your program even runs. You don’t have to remember to unlock mutexes or worry about deadlocks—the language handles it for you.</p>
<h2>6.4 Advanced Concurrency Patterns</h2>
<h3>6.4.1 . Priority-Based Scheduling</h3>
<p>Assign priorities to tasks for deterministic execution:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">High_Priority_Task </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span>);
   <span class="hljs-comment">-- Task definition</span>
<span class="hljs-keyword">end</span> High_Priority_Task;
</code></pre>
<p>Ada supports priority inheritance to prevent priority inversion:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (FIFO_Within_Priorities);
</code></pre>
<h4>6.4.1.1 Real-World Example: Home Automation System</h4>
<p>In a home automation system, you might have:</p>
<ul>
<li>A high-priority task for emergency shutdowns</li>
<li>Medium-priority tasks for temperature control</li>
<li>Low-priority tasks for background logging</li>
</ul>
<p>This ensures that critical operations always get executed first, even when the system is busy.</p>
<h3>6.4.2 . Real-Time Deadline Monitoring</h3>
<p>Ensure tasks meet timing requirements:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Climate_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (EDF_Within_Priorities);
   <span class="hljs-keyword">pragma</span> Deadline (Seconds =&gt; <span class="hljs-number">0.01</span>); <span class="hljs-comment">-- 10ms deadline</span>
<span class="hljs-keyword">end</span> Climate_Control;
</code></pre>
<p>The runtime monitors deadlines and raises exceptions if missed. This is crucial for responsive applications like video games or web servers where slow responses frustrate users.</p>
<h3>6.4.3 . Rendezvous with Parameters</h3>
<p>Safe data transfer between tasks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Controller <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Receive_Sensor_Data (Value : <span class="hljs-type">Float</span>; Timestamp : <span class="hljs-type">Time</span>);
<span class="hljs-keyword">end</span> Controller;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Controller <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">accept</span> Receive_Sensor_Data (Value : <span class="hljs-type">Float</span>; Timestamp : <span class="hljs-type">Time</span>) <span class="hljs-keyword">do</span>
         Process(Value, Timestamp);
      <span class="hljs-keyword">end</span> Receive_Sensor_Data;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Controller;
</code></pre>
<p>Parameters are safely copied during the rendezvous—no risk of data corruption from concurrent access.</p>
<h3>6.4.4 . Dynamic Task Creation</h3>
<p>Create tasks at runtime with controlled scope:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Definition</span>
<span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">type</span> <span class="hljs-type">Worker_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Worker;

<span class="hljs-comment">-- Create dynamically:</span>
W : <span class="hljs-type">Worker_Access</span> := <span class="hljs-keyword">new</span> Worker;
</code></pre>
<p>Use with caution in safety-critical systems; often better to use task pools for predictable behavior.</p>
<h4>6.4.4.1 Priority Inversion: The Mars Pathfinder Story</h4>
<p>In 1997, the Mars Pathfinder lander experienced repeated system resets due to priority inversion. A low-priority meteorological task held a mutex needed by a high-priority communications task, but was preempted by medium-priority tasks. This caused the communications task to miss deadlines.</p>
<p>Ada’s priority inheritance protocol would have automatically elevated the low-priority task’s priority while it held the mutex, preventing the inversion. The problem was eventually fixed with a software patch that implemented priority inheritance—a feature built into Ada’s protected objects from the start.</p>
<h2>6.5 Combining Contracts with Concurrency</h2>
<p>One of Ada’s most powerful capabilities is applying Design by Contract principles to concurrent systems. This creates verifiable guarantees about concurrent behavior.</p>
<h3>6.5.1 Contract Patterns for Tasks</h3>
<h4>6.5.1.1 Task Interface Contracts</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Sensor_Reader <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start <span class="hljs-keyword">with</span>
      Pre =&gt; <span class="hljs-keyword">not</span> Is_Running;

   <span class="hljs-keyword">entry</span> Stop <span class="hljs-keyword">with</span>
      Pre  =&gt; Is_Running,
      Post =&gt; <span class="hljs-keyword">not</span> Is_Running;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Running</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">end</span> Sensor_Reader;
</code></pre>
<p>These contracts ensure valid state transitions for the task interface. For example, you can’t stop a sensor that’s not running, and after stopping, it must not be running.</p>
<h4>6.5.1.2 Protected Object Contracts</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Temperature_Monitor <span class="hljs-keyword">with</span>
   Initial_Condition =&gt; <span class="hljs-keyword">not</span> Alarm_Active <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Check_Temperature (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; System_Ready,
      Post =&gt; (<span class="hljs-keyword">if</span> Temp &gt; Threshold <span class="hljs-keyword">then</span> Alarm_Active);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Alarm_Status</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">private</span>
   Alarm_Active : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">end</span> Temperature_Monitor;
</code></pre>
<p>Contracts on protected objects ensure data integrity across concurrent accesses. In this example, the <code>Check_Temperature</code> entry will only trigger an alarm if the temperature exceeds the threshold, and the contract guarantees this behavior.</p>
<h3>6.5.2 Verification of Concurrent Properties</h3>
<p>Use SPARK to prove critical concurrent properties:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Flight_Control <span class="hljs-keyword">with</span>
   Initializes =&gt; (Pitch, Roll, Yaw),
   Initializes =&gt; Control_Locked <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Set_Pitch (Angle : <span class="hljs-type">Pitch_Angle</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-keyword">not</span> Control_Locked,
      Post =&gt; Pitch = Angle;

   <span class="hljs-keyword">entry</span> Lock_Controls (Code : <span class="hljs-type">Authorization_Code</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-keyword">not</span> Control_Locked,
      Post =&gt; Control_Locked;

<span class="hljs-keyword">private</span>
   Pitch         : <span class="hljs-type">Pitch_Angle</span> := <span class="hljs-number">0.0</span>;
   Control_Locked : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">end</span> Flight_Control;
</code></pre>
<p>With these contracts, SPARK can prove that controls cannot be modified when locked. This verification happens at compile time, so you know your system is correct before it ever runs.</p>
<h3>6.5.3 Common Concurrency Pitfalls and Solutions</h3>
<h4>6.5.3.1 Pitfall: Deadlock from Circular Dependencies</h4>
<pre><code class="hljs language-ada" data-highlighted="yes"><span class="hljs-comment">-- Task A</span>
<span class="hljs-keyword">accept</span> Resource_B;
<span class="hljs-keyword">accept</span> Resource_A;

<span class="hljs-comment">-- Task B</span>
<span class="hljs-keyword">accept</span> Resource_A;
<span class="hljs-keyword">accept</span> Resource_B;
</code></pre>
<h4>6.5.3.2 Solution: Resource Ordering Protocol</h4>
<pre><code class="hljs language-ada" data-highlighted="yes"><span class="hljs-comment">-- Always acquire in same order</span>
<span class="hljs-comment">-- Task A and B both:</span>
<span class="hljs-keyword">accept</span> Resource_A;
<span class="hljs-keyword">accept</span> Resource_B;
</code></pre>
<p>Ada’s compile-time checks can detect potential deadlocks when resource ordering is violated. By enforcing a consistent order for acquiring resources, you eliminate the possibility of circular dependencies.</p>
<h2>6.6 Real-World Concurrency Applications</h2>
<h3>6.6.1 Home Automation System</h3>
<p>A home automation system for temperature and humidity control:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Home_Environment <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Set_Temperature (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">with</span>
      Pre =&gt; Temp <span class="hljs-keyword">in</span> -<span class="hljs-number">20.0</span>..<span class="hljs-number">50.0</span>;

   <span class="hljs-keyword">entry</span> Set_Humidity (Humidity : <span class="hljs-type">Percent</span>) <span class="hljs-keyword">with</span>
      Pre =&gt; Humidity <span class="hljs-keyword">in</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Humidity</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Percent</span>;

<span class="hljs-keyword">private</span>
   Current_Temp : <span class="hljs-type">Celsius</span> := <span class="hljs-number">22.0</span>;
   Current_Hum  : <span class="hljs-type">Percent</span> := <span class="hljs-number">45.0</span>;
<span class="hljs-keyword">end</span> Home_Environment;

<span class="hljs-keyword">task</span> Temperature_Sensor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (Medium_Priority);
<span class="hljs-keyword">end</span> Temperature_Sensor;

<span class="hljs-keyword">task</span> Humidity_Sensor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (Medium_Priority);
<span class="hljs-keyword">end</span> Humidity_Sensor;

<span class="hljs-keyword">task</span> Climate_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (High_Priority);
   <span class="hljs-comment">-- Processing logic</span>
<span class="hljs-keyword">end</span> Climate_Control;
</code></pre>
<p>This structure ensures safe data sharing between sensors and control systems while maintaining valid temperature and humidity ranges. The protected object automatically handles synchronization, so you don’t have to worry about race conditions.</p>
<h3>6.6.2 Web Server Example</h3>
<p>A simple web server handling multiple client connections:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Request_Handler <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Handle_Request (Request : <span class="hljs-type">String</span>; Response : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">with</span>
      Pre =&gt; Request<span class="hljs-symbol">'Length</span> &lt;= MAX_REQUEST_SIZE;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Request_Count</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">private</span>
   Requests : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> String(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Request_Handler;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Client_Task </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Task definition</span>
<span class="hljs-keyword">end</span> Client_Task;
</code></pre>
<p>This server can handle up to 100 simultaneous requests with proper synchronization. The protected object ensures that multiple clients can access the request queue without corrupting data. The contract guarantees that requests won’t exceed the maximum size, preventing buffer overflows.</p>
<h4>6.6.2.1 Real-World Benefits</h4>
<ul>
<li><strong>No data corruption</strong>: The protected object ensures that multiple clients can access shared data safely</li>
<li><strong>Deadlock prevention</strong>: The compiler checks for potential deadlocks at compile time</li>
<li><strong>Priority management</strong>: Critical operations like emergency shutdowns get processed first</li>
<li><strong>Timeout handling</strong>: Clients won’t wait indefinitely for responses</li>
<li><strong>Correctness verification</strong>: Contracts prove that the system behaves as expected</li>
</ul>
<h2>6.7 Exercises: Building Safe Concurrent Systems</h2>
<h3>6.7.1 Exercise 1: Home Automation System</h3>
<p>Design a concurrent home automation system:</p>
<ul>
<li>Create tasks for temperature and humidity sensors with different update rates</li>
<li>Implement protected objects for shared environment data</li>
<li>Add contracts to ensure valid temperature and humidity ranges</li>
<li>Set appropriate priorities for critical operations (e.g., emergency shutdown)</li>
<li>Verify absence of deadlocks with SPARK</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that the system never allows invalid temperature readings.</p>
</blockquote>
<h4>6.7.1.1 Solution Guidance</h4>
<p>Start by defining your protected object with contracts:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Home_Environment <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Set_Temperature (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">with</span>
      Pre =&gt; Temp <span class="hljs-keyword">in</span> -<span class="hljs-number">20.0</span>..<span class="hljs-number">50.0</span>,
      Post =&gt; Get_Temperature = Temp;

   <span class="hljs-keyword">entry</span> Set_Humidity (Humidity : <span class="hljs-type">Percent</span>) <span class="hljs-keyword">with</span>
      Pre =&gt; Humidity <span class="hljs-keyword">in</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>,
      Post =&gt; Get_Humidity = Humidity;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Humidity</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Percent</span>;

<span class="hljs-keyword">private</span>
   Current_Temp : <span class="hljs-type">Celsius</span> := <span class="hljs-number">22.0</span>;
   Current_Hum  : <span class="hljs-type">Percent</span> := <span class="hljs-number">45.0</span>;
<span class="hljs-keyword">end</span> Home_Environment;
</code></pre>
<p>Then create sensor tasks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Temperature_Sensor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (Medium_Priority);
<span class="hljs-keyword">end</span> Temperature_Sensor;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Temperature_Sensor <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Read hardware sensor</span>
      <span class="hljs-keyword">declare</span>
         Value : <span class="hljs-type">Celsius</span> := Read_Hardware_Temperature;
      <span class="hljs-keyword">begin</span>
         Home_Environment.Set_Temperature(Value);
      <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">delay</span> <span class="hljs-number">5.0</span>; <span class="hljs-comment">-- 5 seconds between readings</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Temperature_Sensor;
</code></pre>
<p>Finally, add a climate control task that processes data:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Climate_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (High_Priority);
<span class="hljs-keyword">end</span> Climate_Control;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Climate_Control <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">select</span>
         <span class="hljs-keyword">accept</span> Adjust_Temperature (Target : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">do</span>
            Home_Environment.Set_Temperature(Target);
         <span class="hljs-keyword">end</span> Adjust_Temperature;
      <span class="hljs-keyword">or</span>
         <span class="hljs-keyword">delay</span> <span class="hljs-number">1.0</span>; <span class="hljs-comment">-- Check every second</span>
         <span class="hljs-keyword">if</span> Home_Environment.Get_Temperature &gt; <span class="hljs-number">30.0</span> <span class="hljs-keyword">then</span>
            <span class="hljs-comment">-- Activate cooling</span>
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">select</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Climate_Control;
</code></pre>
<p>This system ensures that temperature readings are always valid and that critical operations get processed first. The contracts prevent invalid temperatures from being set, and the priority settings ensure that emergency actions take precedence.</p>
<h3>6.7.2 Exercise 2: Web Server Example</h3>
<p>Build a web server with:</p>
<ul>
<li>Multiple client connection tasks</li>
<li>Protected objects for shared request queue</li>
<li>Contracts ensuring valid request processing</li>
<li>Deadline monitoring for response times</li>
<li>Formal verification of safety properties</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that the server can handle concurrent requests without data corruption.</p>
</blockquote>
<h4>6.7.2.1 Solution Guidance</h4>
<p>Start by defining the protected request handler:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Request_Handler <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Handle_Request (Request : <span class="hljs-type">String</span>; Response : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">with</span>
      Pre =&gt; Request<span class="hljs-symbol">'Length</span> &lt;= MAX_REQUEST_SIZE,
      Post =&gt; (<span class="hljs-keyword">if</span> Handle_Request<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">then</span>
               Response<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Request_Count</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">private</span>
   Requests : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> String(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Request_Handler;
</code></pre>
<p>Then create a client task:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Client_Task </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (Medium_Priority);
<span class="hljs-keyword">end</span> Client_Task;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Client_Task <span class="hljs-keyword">is</span>
   Request : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
   Response : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Get request from client</span>
      Request := Get_Client_Request;
      
      <span class="hljs-keyword">select</span>
         Request_Handler.Handle_Request(Request, Response);
      <span class="hljs-keyword">or</span>
         <span class="hljs-keyword">delay</span> <span class="hljs-number">0.5</span>; <span class="hljs-comment">-- 500ms timeout</span>
         Response := <span class="hljs-string">"Timeout: Server busy"</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">select</span>;
      
      <span class="hljs-comment">-- Send response to client</span>
      Send_Response(Response);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Client_Task;
</code></pre>
<p>Finally, create a task pool for handling requests:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Request_Handler_Task </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (High_Priority);
<span class="hljs-keyword">end</span> Request_Handler_Task;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Request_Handler_Task <span class="hljs-keyword">is</span>
   Request : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
   Response : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">select</span>
         <span class="hljs-keyword">accept</span> Handle_Request (Req : <span class="hljs-type">String</span>; Res : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">do</span>
            Request := Req;
            <span class="hljs-comment">-- Process request</span>
            Response := Process_Request(Req);
         <span class="hljs-keyword">end</span> Handle_Request;
      <span class="hljs-keyword">else</span>
         <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>; <span class="hljs-comment">-- Yield to other tasks</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">select</span>;
      
      <span class="hljs-comment">-- Send response back to client</span>
      Send_Response(Response);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Request_Handler_Task;
</code></pre>
<p>This server handles up to 100 requests simultaneously with proper synchronization. The contracts ensure that requests won’t exceed the maximum size, and the timeout handling prevents clients from waiting indefinitely. The priority settings ensure that critical operations get processed first.</p>
<h2>6.8 Verification Strategy for Concurrent Systems</h2>
<ol>
<li><strong>Start with runtime checking</strong> (<code>-gnata</code>) to catch basic errors</li>
<li><strong>Add contracts to all task interfaces and protected objects</strong></li>
<li><strong>Use <code>gnatprove --level=1</code> for basic verification</strong></li>
<li><strong>For critical systems, transition to SPARK subset</strong></li>
<li><strong>Focus verification efforts on shared data and state transitions</strong></li>
<li><strong>Test timing properties with real hardware</strong></li>
</ol>
<p>This multi-layered approach ensures comprehensive verification of concurrent systems. By starting with simple runtime checks and gradually adding more rigorous verification, you can build confidence in your system’s correctness.</p>
<h2>6.9 Next Steps: Real-Time Systems Programming</h2>
<p>Now that you’ve mastered Ada’s concurrency model, you’re ready to apply these techniques to real-time systems where timing guarantees are as critical as functional correctness. In the next tutorial, we’ll explore how to:</p>
<h3>6.9.1 Upcoming: Real-Time Systems in Ada</h3>
<ul>
<li>Implement precise timing constraints</li>
<li>Use Ada’s real-time dispatching policies</li>
<li>Verify worst-case execution times</li>
<li>Combine contracts with timing requirements</li>
<li>Build systems that meet DO-178C and IEC 62304 requirements</li>
</ul>
<h3>6.9.2 Practice Challenge</h3>
<p>Enhance your home automation system with real-time features:</p>
<ul>
<li>Add deadlines to all critical operations</li>
<li>Implement rate-monotonic scheduling</li>
<li>Verify timing properties with SPARK</li>
<li>Add temporal contracts to your specifications</li>
<li>Test under simulated high-load conditions</li>
</ul>
<h4>6.9.2.1 The Power of Integrated Concurrency</h4>
<p>Ada’s approach to concurrency represents a fundamental shift from how most languages handle parallelism. Rather than exposing low-level mechanisms that are easy to misuse, Ada provides high-level abstractions with built-in safety. This transforms concurrency from a source of bugs into a reliable engineering tool.</p>
<p>When combined with strong typing and Design by Contract, Ada’s concurrency model enables the development of systems that are not just concurrent, but <em>provably correct</em> in their parallel behavior. This is why Ada remains the language of choice for systems where timing errors can have catastrophic consequences.</p>
<p>For everyday applications, this means your home automation system will never crash when multiple sensors update simultaneously, your web server will handle peak traffic without data corruption, and your applications will respond predictably even under heavy load. The discipline Ada enforces today prevents problems tomorrow—whether you’re building a simple calculator or a complex data processing pipeline.</p>
<h1>7. Real-Time Systems Programming in Ada</h1>
<p>In today’s interconnected world, many applications require precise timing behavior. Whether you’re building a home automation system that needs to respond to sensor data within milliseconds, a web server that must handle requests consistently under load, or a video game that needs smooth frame rates, timing correctness is just as important as functional correctness. Ada provides unique language-level support for real-time programming, allowing developers to specify, verify, and guarantee timing behavior with mathematical precision. This tutorial explores how to leverage Ada’s real-time features to build systems that not only do the right thing, but do it at the right time, every time. You’ll learn to transform timing requirements from vague aspirations into verifiable system properties.</p>
<h4>7.0.0.1 The Real-Time Challenge</h4>
<p><strong>Hard real-time:</strong> Missing a deadline is a system failure<br>
<strong>Firm real-time:</strong> Late results are useless<br>
<strong>Soft real-time:</strong> Performance degrades gracefully</p>
<p>Ada provides the tools to meet hard real-time requirements through language features designed specifically for timing-critical applications. These features aren’t just for aerospace or medical devices—they’re equally valuable for everyday applications where timing matters. A home automation system that misses its temperature adjustment deadline might cause discomfort, but it won’t crash. A video game that misses its frame deadline might stutter, but it won’t crash. Ada helps you build systems that behave predictably under all conditions, whether you’re creating a simple calculator or a complex industrial control system.</p>
<h2>7.1 Why Most Languages Fail at Real-Time Programming</h2>
<p>General-purpose languages lack the mechanisms to provide timing guarantees, forcing developers to rely on external libraries and platform-specific extensions. This creates fragile systems where timing behavior is unpredictable and difficult to verify.</p>
<h3>7.1.1 Common Timing Failures</h3>
<ul>
<li><strong>Unpredictable garbage collection pauses</strong>: Languages like Java or C# can pause execution unexpectedly for garbage collection, causing missed deadlines</li>
<li><strong>Non-deterministic memory allocation</strong>: Dynamic memory allocation can have variable execution times, making worst-case timing impossible to guarantee</li>
<li><strong>Hidden priority inversions</strong>: When high-priority tasks are blocked by lower-priority ones, causing delays</li>
<li><strong>Unbounded execution times</strong>: Code that might take an unpredictable amount of time to execute</li>
</ul>
<h3>7.1.2 Real-World Consequences</h3>
<ul>
<li><strong>Video game stuttering</strong>: A game that misses frame deadlines causes noticeable stuttering, ruining the player experience</li>
<li><strong>Web server slowdowns</strong>: A web server that can’t handle peak traffic consistently results in slow response times and frustrated users</li>
<li><strong>Home automation issues</strong>: A smart thermostat that doesn’t respond quickly enough to temperature changes causes uncomfortable environments</li>
<li><strong>Industrial control problems</strong>: A factory robot that misses timing constraints might cause production delays or quality issues</li>
</ul>
<h3>7.1.3 The Importance of Timing in Everyday Applications</h3>
<p>Consider a home automation system that controls your lights based on motion sensors. If the system takes too long to respond, you might walk into a dark room. If it responds too quickly, you might get false triggers. Ada’s real-time features help you precisely control these timing behaviors to create a reliable system.</p>
<h2>7.2 Core Real-Time Features in Ada</h2>
<p>Ada’s real-time capabilities are built into the language itself, providing predictable behavior across all platforms. Unlike other languages where you need to rely on platform-specific extensions, Ada’s real-time features are part of the standard.</p>
<h3>7.2.1 . Precise Time Representation</h3>
<p>Ada provides a robust time model with nanosecond precision:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Real_Time; <span class="hljs-keyword">use</span> Ada.Real_Time;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Time_Demo</span> <span class="hljs-keyword">is</span>
   Now        : <span class="hljs-type">Time</span> := Clock;
   One_Second : <span class="hljs-type">Time_Span</span> := Seconds(<span class="hljs-number">1</span>);
   Ten_Ms     : <span class="hljs-type">Time_Span</span> := Milliseconds(<span class="hljs-number">10</span>);
   Five_Us    : <span class="hljs-type">Time_Span</span> := Microseconds(<span class="hljs-number">5</span>);
   Next_Time  : <span class="hljs-type">Time</span>;
   Total_Delay: Time_Span;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Absolute time operations</span>
   Next_Time := Now + One_Second;

   <span class="hljs-comment">-- Relative time operations</span>
   <span class="hljs-keyword">if</span> Next_Time - Clock &gt;= Ten_Ms <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- Handle timing violation</span>
      null; <span class="hljs-comment">-- Placeholder</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

   <span class="hljs-comment">-- Time span arithmetic</span>
   Total_Delay := Ten_Ms + Five_Us;
<span class="hljs-keyword">end</span> Time_Demo;
</code></pre>
<h3>7.2.2 Key Time Types</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Type</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Time</strong></td>
<td style="text-align:left">Absolute point in time (since epoch)</td>
<td style="text-align:left">Scheduling events at specific moments</td>
</tr>
<tr>
<td style="text-align:left"><strong>Time_Span</strong></td>
<td style="text-align:left">Duration between two time points</td>
<td style="text-align:left">Measuring intervals and delays</td>
</tr>
<tr>
<td style="text-align:left"><strong>Clock</strong></td>
<td style="text-align:left">Function returning current time</td>
<td style="text-align:left">Getting the current time for comparisons</td>
</tr>
<tr>
<td style="text-align:left"><strong>Seconds, Milliseconds, etc.</strong></td>
<td style="text-align:left">Duration constructors</td>
<td style="text-align:left">Creating time spans with human-readable values</td>
</tr>
</tbody>
</table>
<p>Unlike other languages, Ada’s time model is part of the language standard, ensuring consistent behavior across platforms. You don’t need to worry about different implementations on different operating systems or hardware.</p>
<h3>7.2.3 . Deadline Monitoring</h3>
<p>Specify and verify timing constraints directly in code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Climate_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (EDF_Within_Priorities);
   <span class="hljs-keyword">pragma</span> Deadline (Seconds =&gt; <span class="hljs-number">0.010</span>); <span class="hljs-comment">-- 10ms deadline</span>
<span class="hljs-keyword">end</span> Climate_Control;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Climate_Control <span class="hljs-keyword">is</span>
   Start_Time : <span class="hljs-type">Time</span> := Clock;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Work that must complete within deadline</span>
      Read_Sensors;
      Calculate_Control;
      Apply_Control;

      <span class="hljs-comment">-- Reset start time for next iteration</span>
      Start_Time := Clock;
      
      <span class="hljs-comment">-- Optional deadline check</span>
      <span class="hljs-keyword">if</span> Clock - Start_Time &gt; Milliseconds(<span class="hljs-number">10</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Deadline_Error;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Wait until next cycle</span>
      <span class="hljs-keyword">delay</span> until Start_Time + Milliseconds(<span class="hljs-number">10</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Deadline_Error =&gt;
      Log_Error(<span class="hljs-string">"Deadline missed"</span>);
<span class="hljs-keyword">end</span> Climate_Control;
</code></pre>
<h3>7.2.4 Deadline Best Practices</h3>
<ul>
<li><strong>Specify deadlines at task declaration for static analysis</strong>: This helps tools verify timing behavior before runtime</li>
<li><strong>Use runtime checks for critical operations within tasks</strong>: Catch missed deadlines even if static analysis can’t prove them</li>
<li><strong>Combine with contracts for complete verification</strong>: Ensure both functional and timing correctness</li>
<li><strong>Verify worst-case execution time (WCET) through analysis</strong>: Know exactly how long operations will take</li>
</ul>
<h3>7.2.5 . Dispatching Policies</h3>
<p>Control how the runtime schedules tasks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- At the program unit level</span>
<span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (FIFO_Within_Priorities);
<span class="hljs-comment">-- or</span>
<span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (EDF_Within_Priorities); <span class="hljs-comment">-- Earliest Deadline First</span>

<span class="hljs-comment">-- Task-specific priority</span>
<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Reader </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">10</span>);
   <span class="hljs-comment">-- Definition</span>
<span class="hljs-keyword">end</span> Sensor_Reader;
</code></pre>
<h4>7.2.5.1 Policy Selection Guide</h4>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Policy</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
<th style="text-align:left"><strong>When to Use</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>EDF_Within_Priorities</strong></td>
<td style="text-align:left">Systems with strict deadlines</td>
<td style="text-align:left">When tasks have different deadlines and need to meet them consistently</td>
</tr>
<tr>
<td style="text-align:left"><strong>FIFO_Within_Priorities</strong></td>
<td style="text-align:left">Traditional priority-based systems</td>
<td style="text-align:left">When tasks have fixed priorities and need predictable execution order</td>
</tr>
<tr>
<td style="text-align:left"><strong>Round_Robin_Within_Priorities</strong></td>
<td style="text-align:left">Non-critical background tasks</td>
<td style="text-align:left">When multiple tasks of the same priority need fair sharing of CPU time</td>
</tr>
</tbody>
</table>
<p>Let’s see how this works in a home automation system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- System-level dispatching policy</span>
<span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (EDF_Within_Priorities);

<span class="hljs-comment">-- High-priority task for emergency shutdowns</span>
<span class="hljs-keyword">task</span> Emergency_Shutdown <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span>);
<span class="hljs-keyword">end</span> Emergency_Shutdown;

<span class="hljs-comment">-- Medium-priority task for temperature control</span>
<span class="hljs-keyword">task</span> Temperature_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">5</span>);
<span class="hljs-keyword">end</span> Temperature_Control;

<span class="hljs-comment">-- Low-priority task for logging</span>
<span class="hljs-keyword">task</span> System_Logger <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">10</span>);
<span class="hljs-keyword">end</span> System_Logger;
</code></pre>
<p>In this example, the EDF policy ensures that tasks with the closest deadlines get executed first. The emergency shutdown task will always run before temperature control, which will run before logging.</p>
<h2>7.3 Real-Time Scheduling Analysis</h2>
<p>One of Ada’s most powerful capabilities is enabling schedulability analysis at compile time, rather than through error-prone runtime testing. This means you can prove your system will meet its timing requirements before you even run it.</p>
<h3>7.3.1 Rate Monotonic Analysis (RMA)</h3>
<p>A mathematical approach to verify that all deadlines will be met:</p>
<h4>7.3.1.1 The Math Behind RMA</h4>
<p>For n periodic tasks, the sufficient condition for schedulability is:</p>
<pre><code class="hljs language-scss" data-highlighted="yes">U ≤ <span class="hljs-built_in">n</span>(<span class="hljs-number">2</span>^(<span class="hljs-number">1</span>/n) - <span class="hljs-number">1</span>)
</code></pre>
<p>Where U is the total CPU utilization:</p>
<pre><code class="hljs language-ini" data-highlighted="yes"><span class="hljs-attr">U</span> = Σ (C_i / T_i)

<span class="hljs-attr">C_i</span> = worst-case execution time  
<span class="hljs-attr">T_i</span> = task period
</code></pre>
<h4>7.3.1.2 Ada Implementation</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Task </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">5</span>);
   <span class="hljs-keyword">pragma</span> Task_Info (Storage_Size =&gt; <span class="hljs-number">4096</span>);
   <span class="hljs-keyword">pragma</span> Time_Handler (Period =&gt; Milliseconds(<span class="hljs-number">10</span>),
                        WCET    =&gt; Microseconds(<span class="hljs-number">2000</span>));
<span class="hljs-keyword">end</span> Sensor_Task;
</code></pre>
<p>These annotations allow tools like GNATprove to perform formal schedulability analysis.</p>
<h3>7.3.2 WCET Analysis Tools</h3>
<p>Ada integrates with industry-standard WCET analysis tools:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Tool</strong></th>
<th style="text-align:left"><strong>Function</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>aiT</strong></td>
<td style="text-align:left">AbsInt’s WCET analyzer</td>
<td style="text-align:left">Complex systems with detailed timing analysis</td>
</tr>
<tr>
<td style="text-align:left"><strong>Bound-T</strong></td>
<td style="text-align:left">Tidorum’s timing analyzer</td>
<td style="text-align:left">Embedded systems with precise timing requirements</td>
</tr>
<tr>
<td style="text-align:left"><strong>GNATprove</strong></td>
<td style="text-align:left">SPARK-based verification</td>
<td style="text-align:left">Formal verification of timing properties</td>
</tr>
<tr>
<td style="text-align:left"><strong>TimeWiz</strong></td>
<td style="text-align:left">Ada-specific timing analysis</td>
<td style="text-align:left">General-purpose timing analysis for Ada applications</td>
</tr>
</tbody>
</table>
<p>These tools work with Ada’s predictable execution model to calculate precise worst-case execution times.</p>
<h3>7.3.3 Schedulability Verification</h3>
<p>Using SPARK for formal timing verification:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Control_Loop </span><span class="hljs-keyword">with</span>
   Initializes =&gt; (State),
   WCET         =&gt; Microseconds(<span class="hljs-number">500</span>),
   Period       =&gt; Milliseconds(<span class="hljs-number">1</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
   <span class="hljs-keyword">entry</span> Stop;
<span class="hljs-keyword">end</span> Control_Loop <span class="hljs-keyword">with</span>
   Priority =&gt; High_Priority,
   Deadline =&gt; Milliseconds(<span class="hljs-number">1</span>);

<span class="hljs-comment">-- SPARK can prove:</span>
<span class="hljs-comment">-- 1. WCET is never exceeded</span>
<span class="hljs-comment">-- 2. All deadlines are met</span>
<span class="hljs-comment">-- 3. No priority inversion occurs</span>
</code></pre>
<h4>7.3.3.1 Practical Schedulability Example: Home Automation System</h4>
<p>Consider a home automation system with these tasks:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Task</strong></th>
<th style="text-align:left"><strong>Period (ms)</strong></th>
<th style="text-align:left"><strong>WCET (ms)</strong></th>
<th style="text-align:left"><strong>Utilization</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Temperature Sensor</strong></td>
<td style="text-align:left">100</td>
<td style="text-align:left">0.2</td>
<td style="text-align:left">0.2%</td>
</tr>
<tr>
<td style="text-align:left"><strong>Motion Sensor</strong></td>
<td style="text-align:left">50</td>
<td style="text-align:left">0.1</td>
<td style="text-align:left">0.2%</td>
</tr>
<tr>
<td style="text-align:left"><strong>Climate Control</strong></td>
<td style="text-align:left">10</td>
<td style="text-align:left">1.5</td>
<td style="text-align:left">15%</td>
</tr>
<tr>
<td style="text-align:left"><strong>Lighting Control</strong></td>
<td style="text-align:left">10</td>
<td style="text-align:left">0.5</td>
<td style="text-align:left">5%</td>
</tr>
</tbody>
</table>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Total Utilization:</span> <span class="hljs-number">15.6</span><span class="hljs-string">%</span>
</code></pre>
<p>With 15.6% utilization, this system easily meets the RMA bound (69.3% for 4 tasks), guaranteeing all deadlines will be met. Ada’s annotations make this analysis automatic.</p>
<h2>7.4 Temporal Contracts: Specifying Timing Behavior</h2>
<p>Building on Design by Contract, Ada allows specification of temporal properties directly in code—creating what we call “temporal contracts.” These contracts define not just what a function does, but when it must do it.</p>
<h3>7.4.1 Basic Temporal Contracts</h3>
<h4>7.4.1.1 Deadline Specifications</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust_Thermostat</span> (
   Target_Temp : <span class="hljs-type">Celsius</span>;
   Response    : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Target_Temp <span class="hljs-keyword">in</span> -<span class="hljs-number">20.0</span>..<span class="hljs-number">50.0</span>,
   Post =&gt; Response = (Target_Temp = Current_Temp),
   <span class="hljs-comment">-- Temporal contract:</span>
   Time_Dependency =&gt; Clock &lt;= Request_Time + Milliseconds(<span class="hljs-number">50</span>);
</code></pre>
<p>Specifies that the thermostat adjustment must complete within 50ms of the request.</p>
<h4>7.4.1.2 WCET Specifications</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Temperature</span> (
   Sensor_Data : <span class="hljs-type">Sensor_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Sensor_Data<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>,
   Post =&gt; Calculate_Temperature<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">in</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span>,
   <span class="hljs-comment">-- Temporal contract:</span>
   WCET =&gt; Microseconds(<span class="hljs-number">2500</span>);
</code></pre>
<p>Specifies a worst-case execution time of 2.5ms for verification.</p>
<h3>7.4.2 Advanced Temporal Patterns</h3>
<h4>7.4.2.1 . Phase-Based Timing Constraints</h4>
<p>Different timing requirements for different system phases:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Home_Phase</span> (
   Phase : <span class="hljs-type">Home_Phase</span>;
   Data  : <span class="hljs-type">Sensor_Data</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_Phase(Phase),
   Time_Dependency =&gt;
      (<span class="hljs-keyword">case</span> Phase <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> Morning   =&gt; Clock &lt;= T0 + Minutes(<span class="hljs-number">15</span>),
         <span class="hljs-keyword">when</span> Daytime   =&gt; Clock &lt;= T0 + Minutes(<span class="hljs-number">60</span>),
         <span class="hljs-keyword">when</span> Evening   =&gt; Clock &lt;= T0 + Minutes(<span class="hljs-number">30</span>),
         <span class="hljs-keyword">when</span> Night     =&gt; Clock &lt;= T0 + Minutes(<span class="hljs-number">10</span>));
</code></pre>
<h4>7.4.2.2 . Jitter Constraints</h4>
<p>Limit variation in execution timing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Sample_Sensor</span> (
   Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Sensor_Value</span>) <span class="hljs-keyword">with</span>
   Post =&gt; Valid_Sensor_Value(Value),
   <span class="hljs-comment">-- Temporal contract:</span>
   Jitter =&gt; Microseconds(<span class="hljs-number">50</span>),
   Period =&gt; Milliseconds(<span class="hljs-number">100</span>);
</code></pre>
<p>Ensures samples occur within 50μs of their nominal 100ms interval.</p>
<h4>7.4.2.3 . Deadline Chaining</h4>
<p>Specify timing relationships between operations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Smart_Home_Command</span> (
   Cmd : <span class="hljs-type">Command</span>;
   Response : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Response</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Valid_Command(Cmd),
   Post =&gt; Valid_Response(Response),
   Time_Dependency =&gt;
      (<span class="hljs-keyword">if</span> Cmd.<span class="hljs-keyword">Type</span> <span class="hljs-type">= </span><span class="hljs-string">"Light"</span> <span class="hljs-keyword">then</span>
         Response.Timestamp &lt;= Cmd.Timestamp + Milliseconds(<span class="hljs-number">10</span>))
      <span class="hljs-keyword">and</span>
      (<span class="hljs-keyword">if</span> Cmd.<span class="hljs-keyword">Type</span> <span class="hljs-type">= </span><span class="hljs-string">"Thermostat"</span> <span class="hljs-keyword">then</span>
         Response.Timestamp &lt;= Cmd.Timestamp + Milliseconds(<span class="hljs-number">50</span>));
</code></pre>
<h3>7.4.3 Temporal Contract Verification</h3>
<p>Temporal contracts can be verified at multiple levels:</p>
<h4>7.4.3.1 Runtime Verification</h4>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -gnata -D your_program.adb
</code></pre>
<p>Checks timing contracts during execution</p>
<h4>7.4.3.2 Static Verification</h4>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatprove --level=2 --report=all your_program.adb
</code></pre>
<p>Proves timing properties without execution</p>
<p>For the highest reliability, both approaches are typically required.</p>
<h2>7.5 Real-World Real-Time Applications</h2>
<h3>7.5.1 Smart Home Climate Control System</h3>
<p>A practical home automation example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Real_Time; <span class="hljs-keyword">use</span> Ada.Real_Time;

<span class="hljs-keyword">task</span> Climate_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (EDF_Within_Priorities);
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">5</span>);
   <span class="hljs-keyword">pragma</span> Deadline (Milliseconds(<span class="hljs-number">50</span>)); <span class="hljs-comment">-- 20Hz control loop</span>
<span class="hljs-keyword">end</span> Climate_Control;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Climate_Control <span class="hljs-keyword">is</span>
   Next_Time : <span class="hljs-type">Time</span> := Clock;
   Period    : <span class="hljs-type">Time_Span</span> := Milliseconds(<span class="hljs-number">50</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Read sensors (with timing contracts)</span>
      Read_Temperature;
      Read_Humidity;
      
      <span class="hljs-comment">-- Calculate control (with WCET specification)</span>
      Calculate_Control;
      
      <span class="hljs-comment">-- Apply control (with deadline constraint)</span>
      Adjust_Heater;
      Adjust_Air_Conditioner;
      
      <span class="hljs-comment">-- Maintain precise timing</span>
      Next_Time := Next_Time + Period;
      <span class="hljs-keyword">delay</span> until Next_Time;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Deadline_Error =&gt;
      Log_Error(<span class="hljs-string">"Climate control deadline missed"</span>);
<span class="hljs-keyword">end</span> Climate_Control;
</code></pre>
<p>This structure guarantees a precisely timed 20Hz control loop for your home heating and cooling system.</p>
<h3>7.5.2 Home Health Monitor System</h3>
<p>A practical health monitoring example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Heart_Rate_Monitor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span>);
   <span class="hljs-keyword">pragma</span> Deadline (Milliseconds(<span class="hljs-number">100</span>)); <span class="hljs-comment">-- 10Hz minimum</span>
<span class="hljs-keyword">end</span> Heart_Rate_Monitor;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Heart_Rate_Monitor <span class="hljs-keyword">is</span>
   Beat_Interval : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Milliseconds(<span class="hljs-number">1000</span>);
   Next_Beat     : <span class="hljs-type">Time</span> := Clock;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Check heart activity</span>
      <span class="hljs-keyword">if</span> Heartbeat_Detected <span class="hljs-keyword">then</span>
         <span class="hljs-comment">-- Reset timer if natural beat detected</span>
         Next_Beat := Clock + Beat_Interval;
      <span class="hljs-keyword">elsif</span> Clock &gt;= Next_Beat <span class="hljs-keyword">then</span>
         <span class="hljs-comment">-- Generate alert if no heartbeat</span>
         Trigger_Alert;
         Next_Beat := Next_Beat + Beat_Interval;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Sleep until next check</span>
      <span class="hljs-keyword">delay</span> until Clock + Milliseconds(<span class="hljs-number">10</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Heart_Rate_Monitor;
</code></pre>
<p>This implementation ensures heart rate monitoring within 100ms of required intervals, providing timely alerts for potential issues.</p>
<h2>7.6 Advanced Real-Time Patterns</h2>
<h3>7.6.1 Pattern 1: Time-Triggered Architecture</h3>
<p>Implement a predictable time-triggered system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Real_Time; <span class="hljs-keyword">use</span> Ada.Real_Time;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Time_Triggered_System</span> <span class="hljs-keyword">is</span>
   Frame_Duration : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Milliseconds(<span class="hljs-number">10</span>);
   Start_Time     : <span class="hljs-type">Time</span> := Clock;
   Current_Frame  : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Synchronize to frame boundary</span>
      <span class="hljs-keyword">delay</span> until Start_Time + Frame_Duration * Current_Frame;
      
      <span class="hljs-comment">-- Frame 0: Sensor reading</span>
      <span class="hljs-keyword">if</span> Current_Frame <span class="hljs-keyword">mod</span> <span class="hljs-number">4</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Read_Sensors;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Frame 1: Control calculation</span>
      <span class="hljs-keyword">if</span> Current_Frame <span class="hljs-keyword">mod</span> <span class="hljs-number">4</span> = <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
         Calculate_Control;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Frame 2: Output update</span>
      <span class="hljs-keyword">if</span> Current_Frame <span class="hljs-keyword">mod</span> <span class="hljs-number">4</span> = <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
         Update_Outputs;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Frame 3: System check</span>
      <span class="hljs-keyword">if</span> Current_Frame <span class="hljs-keyword">mod</span> <span class="hljs-number">4</span> = <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
         Check_System;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      Current_Frame := (Current_Frame + <span class="hljs-number">1</span>) <span class="hljs-keyword">mod</span> <span class="hljs-number">4</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Time_Triggered_System;
</code></pre>
<h3>7.6.2 Why Time-Triggered Architectures Matter</h3>
<p>Time-triggered systems provide deterministic behavior that’s easier to verify than event-triggered systems. They’re valuable for many applications because:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Benefit</strong></th>
<th style="text-align:left"><strong>Real-World Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Predictable timing behavior</strong></td>
<td style="text-align:left">A smart home system that reliably responds to commands within fixed time intervals</td>
</tr>
<tr>
<td style="text-align:left"><strong>Simpler schedulability analysis</strong></td>
<td style="text-align:left">A video game that maintains consistent frame rates by scheduling updates at fixed intervals</td>
</tr>
<tr>
<td style="text-align:left"><strong>Easier fault containment</strong></td>
<td style="text-align:left">A home automation system where a failure in one component doesn’t affect others</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reduced testing burden</strong></td>
<td style="text-align:left">A web server that handles peak traffic consistently without extensive testing</td>
</tr>
</tbody>
</table>
<h3>7.6.3 Pattern 2: Adaptive Deadline Management</h3>
<p>Handle varying workloads while maintaining critical deadlines:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Smart_Thermostat <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Deadline (Milliseconds(<span class="hljs-number">100</span>));
<span class="hljs-keyword">end</span> Smart_Thermostat;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Smart_Thermostat <span class="hljs-keyword">is</span>
   Base_Deadline : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Milliseconds(<span class="hljs-number">100</span>);
   Current_Deadline : <span class="hljs-type">Time_Span</span> := Base_Deadline;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Monitor system load</span>
      Current_Load := Measure_Load;
      
      <span class="hljs-comment">-- Adjust deadline based on load</span>
      <span class="hljs-keyword">if</span> Current_Load &gt; <span class="hljs-number">0.8</span> <span class="hljs-keyword">then</span>
         <span class="hljs-comment">-- Under heavy load, relax less critical deadlines</span>
         Current_Deadline := Base_Deadline * <span class="hljs-number">1.5</span>;
      <span class="hljs-keyword">else</span>
         Current_Deadline := Base_Deadline;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Process with current deadline constraint</span>
      Process_Thermostat (Deadline =&gt; Current_Deadline);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Smart_Thermostat;
</code></pre>
<h3>7.6.4 WCET-Aware Programming</h3>
<p>Structure code for predictable worst-case execution:</p>
<h4>7.6.4.1 Avoid:</h4>
<ul>
<li>Unbounded loops</li>
<li>Dynamic memory allocation</li>
<li>Recursion</li>
<li>Exceptions in critical paths</li>
</ul>
<h4>7.6.4.2 Prefer:</h4>
<ul>
<li>Bounded loops with loop invariants</li>
<li>Static memory allocation</li>
<li>Iteration over recursion</li>
<li>Error codes over exceptions</li>
</ul>
<p>For example, instead of:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Avoid this pattern</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-type">Data_Array</span>) <span class="hljs-keyword">is</span>
   Temp : <span class="hljs-type">Data_Array</span> := Data;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">while</span> Temp<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Process data</span>
      Temp := Temp(<span class="hljs-number">2</span>..Temp<span class="hljs-symbol">'Last</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>Use:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Prefer this pattern</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-type">Data_Array</span>) <span class="hljs-keyword">is</span>
   Index : <span class="hljs-type">Natural</span> := Data<span class="hljs-symbol">'First</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">while</span> Index &lt;= Data<span class="hljs-symbol">'Last</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Process data</span>
      Index := Index + <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>This bounded loop with a fixed iteration count is easier to analyze for worst-case execution time.</p>
<h2>7.7 Exercises: Building Verified Real-Time Systems</h2>
<h3>7.7.1 Exercise 1: Smart Home Lighting System</h3>
<p>Design a real-time lighting controller:</p>
<ul>
<li>Implement a 100Hz control loop with WCET constraints</li>
<li>Use temporal contracts for all timing requirements</li>
<li>Verify schedulability using RMA</li>
<li>Implement fault handling with timing guarantees</li>
<li>Prove worst-case timing properties with SPARK</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove the system can always respond to light commands within 10ms of receiving them.</p>
</blockquote>
<h4>7.7.1.1 Solution Guidance</h4>
<p>Start by defining your task with timing constraints:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> Lighting_Controller <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Task_Dispatching_Policy (EDF_Within_Priorities);
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">5</span>);
   <span class="hljs-keyword">pragma</span> Deadline (Milliseconds(<span class="hljs-number">10</span>)); <span class="hljs-comment">-- 100Hz control loop</span>
<span class="hljs-keyword">end</span> Lighting_Controller;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Lighting_Controller <span class="hljs-keyword">is</span>
   Next_Time : <span class="hljs-type">Time</span> := Clock;
   Period    : <span class="hljs-type">Time_Span</span> := Milliseconds(<span class="hljs-number">10</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Read sensor data</span>
      Read_Sensors;
      
      <span class="hljs-comment">-- Calculate lighting adjustments</span>
      Calculate_Lighting;
      
      <span class="hljs-comment">-- Apply adjustments</span>
      Update_Lights;
      
      <span class="hljs-comment">-- Maintain precise timing</span>
      Next_Time := Next_Time + Period;
      <span class="hljs-keyword">delay</span> until Next_Time;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Deadline_Error =&gt;
      Log_Error(<span class="hljs-string">"Lighting control deadline missed"</span>);
<span class="hljs-keyword">end</span> Lighting_Controller;
</code></pre>
<p>Add temporal contracts to your procedures:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_Lights</span> <span class="hljs-keyword">with</span>
   WCET =&gt; Microseconds(<span class="hljs-number">500</span>),
   Time_Dependency =&gt; Clock &lt;= Request_Time + Milliseconds(<span class="hljs-number">10</span>);
</code></pre>
<p>Use SPARK to verify timing properties:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- SPARK can prove:</span>
<span class="hljs-comment">-- 1. WCET is never exceeded</span>
<span class="hljs-comment">-- 2. All deadlines are met</span>
<span class="hljs-comment">-- 3. No priority inversion occurs</span>
</code></pre>
<h3>7.7.2 Exercise 2: Video Game Physics Engine</h3>
<p>Build a physics engine with:</p>
<ul>
<li>Multiple synchronized control loops</li>
<li>Phase-based timing requirements</li>
<li>Jitter constraints for smooth motion</li>
<li>Deadline chaining for coordinated movement</li>
<li>Formal timing verification</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that all objects move in precise synchronization within 1ms tolerance.</p>
</blockquote>
<h4>7.7.2.1 Solution Guidance</h4>
<p>Start by defining your physics tasks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- High-priority task for physics calculations</span>
<span class="hljs-keyword">task</span> Physics_Calculation <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">2</span>);
   <span class="hljs-keyword">pragma</span> Deadline (Milliseconds(<span class="hljs-number">16</span>)); <span class="hljs-comment">-- 60Hz frame rate</span>
<span class="hljs-keyword">end</span> Physics_Calculation;

<span class="hljs-comment">-- Medium-priority task for rendering</span>
<span class="hljs-keyword">task</span> Rendering <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">5</span>);
   <span class="hljs-keyword">pragma</span> Deadline (Milliseconds(<span class="hljs-number">16</span>)); <span class="hljs-comment">-- 60Hz frame rate</span>
<span class="hljs-keyword">end</span> Rendering;
</code></pre>
<p>Add temporal contracts for smooth motion:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_Position</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">GameObject</span>) <span class="hljs-keyword">with</span>
   Jitter =&gt; Microseconds(<span class="hljs-number">50</span>),
   Period =&gt; Milliseconds(<span class="hljs-number">16</span>);
</code></pre>
<p>For deadline chaining:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Frame</span> <span class="hljs-keyword">with</span>
   Time_Dependency =&gt;
      (<span class="hljs-keyword">if</span> Frame_Number <span class="hljs-keyword">mod</span> <span class="hljs-number">2</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Clock &lt;= Request_Time + Milliseconds(<span class="hljs-number">8</span>))
      <span class="hljs-keyword">and</span>
      (<span class="hljs-keyword">if</span> Frame_Number <span class="hljs-keyword">mod</span> <span class="hljs-number">2</span> = <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
         Clock &lt;= Request_Time + Milliseconds(<span class="hljs-number">16</span>));
</code></pre>
<h2>7.8 Verification Strategy for Real-Time Systems</h2>
<ol>
<li><strong>Design phase</strong>: Specify all timing requirements as temporal contracts</li>
<li><strong>Implementation</strong>: Structure code for predictable execution</li>
<li><strong>Static analysis</strong>: Use GNATprove for schedulability analysis</li>
<li><strong>WCET analysis</strong>: Apply tools like aiT to determine worst-case times</li>
<li><strong>Runtime verification</strong>: Test with <code>-gnata -D</code> flags</li>
<li><strong>Hardware validation</strong>: Perform hardware-in-the-loop testing</li>
</ol>
<p>For the highest reliability levels, all six steps are required to demonstrate timing correctness.</p>
<p>Let’s see how this works for our smart home lighting system:</p>
<ol>
<li><strong>Design phase</strong>: We defined temporal contracts for all timing requirements</li>
<li><strong>Implementation</strong>: We structured the code with bounded loops and static memory</li>
<li><strong>Static analysis</strong>: We used GNATprove to verify schedulability</li>
<li><strong>WCET analysis</strong>: We applied Bound-T to determine worst-case execution times</li>
<li><strong>Runtime verification</strong>: We tested with <code>-gnata -D</code> to catch timing violations</li>
<li><strong>Hardware validation</strong>: We tested on actual hardware to ensure real-world timing</li>
</ol>
<h2>7.9 Next Steps: Integration and Certification</h2>
<p>Now that you’ve mastered Ada’s real-time capabilities, you’re ready to apply these techniques to full system integration and certification. In the next tutorial, we’ll explore how to:</p>
<h3>7.9.1 Upcoming: Integration and Certification</h3>
<ul>
<li>Integrate Ada components with other languages</li>
<li>Meet certification requirements for various industries</li>
<li>Combine all Ada features for complete system verification</li>
<li>Transition from development to certified deployment</li>
<li>Build traceability from requirements to code</li>
</ul>
<h3>7.9.2 Practice Challenge</h3>
<p>Enhance your smart home lighting system with integration features:</p>
<ul>
<li>Add complete requirements traceability</li>
<li>Implement certification artifacts</li>
<li>Verify against industry standards</li>
<li>Create a verification matrix</li>
<li>Prepare for tool qualification</li>
</ul>
<h4>7.9.2.1 The Path to Reliable Systems</h4>
<p>Real-time programming in Ada represents the culmination of the language’s design philosophy: transforming critical system properties from runtime concerns into verifiable design-time guarantees. When combined with strong typing, Design by Contract, and safe concurrency, Ada provides a complete framework for building systems where timing errors are as impossible as type errors.</p>
<p>This integrated approach is why Ada remains the language of choice for systems where timing matters. As you complete this tutorial series, you’ll see how these techniques combine to create software that’s not just functionally correct, but <strong>temporally guaranteed</strong> within its specified domain—whether you’re building a home automation system, a web server, or a video game.</p>
<p>For everyday developers, this means your applications will behave predictably under all conditions. Your home automation system will respond reliably to commands. Your web server will handle peak traffic without slowdowns. Your video game will maintain smooth frame rates. Ada gives you the tools to build systems that work as intended, every time.</p>
<h1>8. Object-Oriented Programming in Ada</h1>
<blockquote>
<p><strong>OOP Safety Paradox</strong></p>
<p><strong>Traditional view:</strong> “OOP introduces hidden control flow that’s impossible to verify”</p>
<p><strong>Ada approach:</strong> “OOP can be made predictable and verifiable through careful language design”</p>
<p>Ada demonstrates that polymorphism isn’t the problem—it’s how most languages implement it that creates risks. Ada’s object-oriented features are designed to be simple, explicit, and verifiable, making them accessible to beginners while still powerful enough for complex applications.</p>
</blockquote>
<p>Object-oriented programming (OOP) is a powerful way to organize code by grouping related data and behavior together. Many programming languages have OOP features, but Ada takes a unique approach that makes OOP safer and easier to understand. Unlike other languages where polymorphism happens automatically behind the scenes, Ada makes everything explicit and verifiable. This means you get the benefits of OOP without the hidden complexity that can lead to bugs.</p>
<p>In this chapter, you’ll learn how to use Ada’s object-oriented features for everyday programming tasks. You’ll see how to create reusable components, model real-world objects, and build flexible systems—all with clear, predictable behavior. Whether you’re building a simple game, a home automation system, or a data processing tool, Ada’s OOP features will help you write better code.</p>
<h2>8.1 Why Ada’s OOP Is Different</h2>
<p>Most programming languages treat object-oriented programming as an all-or-nothing feature. In Java or C++, classes are the default way to structure code, and polymorphism happens automatically. This can be convenient, but it also makes it hard to understand exactly what’s happening when your code runs.</p>
<p>Ada takes a different approach. Instead of forcing OOP on you, Ada gives you precise control over when and how you use it. You only get polymorphism when you explicitly ask for it. This makes your code more predictable and easier to understand—perfect for beginners who are just learning about OOP.</p>
<h3>8.1.1 Key Differences Between Ada and Other Languages</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Feature</th>
<th style="text-align:left">Traditional OOP (Java/C++)</th>
<th style="text-align:left">Ada’s OOP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Default behavior</strong></td>
<td style="text-align:left">Polymorphism is implicit</td>
<td style="text-align:left">Polymorphism is explicit (requires <code>tagged</code>)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Class syntax</strong></td>
<td style="text-align:left">Separate class definition</td>
<td style="text-align:left">Record-based with <code>tagged</code> keyword</td>
</tr>
<tr>
<td style="text-align:left"><strong>Inheritance</strong></td>
<td style="text-align:left">Single inheritance only</td>
<td style="text-align:left">Multiple inheritance through interfaces</td>
</tr>
<tr>
<td style="text-align:left"><strong>Type safety</strong></td>
<td style="text-align:left">Runtime checks only</td>
<td style="text-align:left">Compile-time and runtime checks</td>
</tr>
<tr>
<td style="text-align:left"><strong>Verification</strong></td>
<td style="text-align:left">Difficult to verify</td>
<td style="text-align:left">Built-in support for formal verification</td>
</tr>
<tr>
<td style="text-align:left"><strong>Learning curve</strong></td>
<td style="text-align:left">Hidden complexity</td>
<td style="text-align:left">Explicit, understandable behavior</td>
</tr>
</tbody>
</table>
<p>Let’s look at a simple example to see how Ada’s approach works in practice.</p>
<h3>8.1.2 A Simple Example: Animals in a Zoo</h3>
<p>Imagine you’re building a zoo management system. In many languages, you might create a base class <code>Animal</code> and then derive specific types like <code>Lion</code> and <code>Elephant</code>:</p>
<pre><code class="language-java hljs" data-highlighted="yes"><span class="hljs-comment">// Java example</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Generic animal sound"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Lion</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Roar!"</span>);
    }
}
</code></pre>
<p>In Ada, you would do something similar but with explicit polymorphism:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Animal </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Make_Sound</span> (A : <span class="hljs-type">Animal</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Generic animal sound"</span>);
<span class="hljs-keyword">end</span> Make_Sound;

<span class="hljs-keyword">type</span> <span class="hljs-type">Lion </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Animal <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Make_Sound</span> (L : <span class="hljs-type">Lion</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Roar!"</span>);
<span class="hljs-keyword">end</span> Make_Sound;
</code></pre>
<p>Notice the differences:</p>
<ul>
<li>In Java, the <code>@Override</code> annotation makes it clear that the method is being overridden, but the polymorphism itself is implicit</li>
<li>In Ada, you must explicitly define the <code>Make_Sound</code> procedure for each type</li>
<li>Ada uses the <code>tagged</code> keyword to indicate that a type can be used polymorphically</li>
</ul>
<p>This explicitness makes it easier to understand exactly how your code will behave. There are no hidden virtual calls or surprise behavior—everything is visible in the code.</p>
<h2>8.2 Tagged Types: The Foundation of Ada OOP</h2>
<p>In Ada, all object-oriented features are built around <strong>tagged types</strong>. A tagged type is simply a record that has been marked with the <code>tagged</code> keyword. This tells Ada that this type can participate in polymorphic behavior.</p>
<h3>8.2.1 Basic Tagged Type Declaration</h3>
<p>Let’s create a simple tagged type for a sensor:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   ID      : <span class="hljs-type">Natural</span>;
   Status  : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
   Value   : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
</code></pre>
<p>This creates a type called <code>Sensor</code> that has three fields: an ID, a status string, and a value. The <code>tagged</code> keyword is what makes this type polymorphic.</p>
<h3>8.2.2 Derived Types: Extending Existing Types</h3>
<p>You can create new types based on existing tagged types using the <code>new</code> keyword:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Units   : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
   Min_Val : <span class="hljs-type">Float</span>;
   Max_Val : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Pressure_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Min_Pressure : <span class="hljs-type">Float</span>;
   Max_Pressure : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
</code></pre>
<p>Here, <code>Temperature_Sensor</code> and <code>Pressure_Sensor</code> are both derived from <code>Sensor</code>. They inherit all the fields from <code>Sensor</code> and add their own specific fields.</p>
<h3>8.2.3 Dispatching Operations: How Polymorphism Works</h3>
<p>To make a procedure or function polymorphic, you need to define it for the base type. This is called a <strong>dispatching operation</strong>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (S : <span class="hljs-type">Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> S.Value;
<span class="hljs-keyword">end</span> Get_Value;

<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (T : <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Convert to Celsius if needed</span>
   <span class="hljs-keyword">if</span> T.Units = <span class="hljs-string">"Fahrenheit"</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">return</span> (T.Value - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
   <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> T.Value;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Get_Value;
</code></pre>
<p>When you call <code>Get_Value</code> with a <code>Sensor'Class</code> parameter, Ada automatically chooses the right implementation based on the actual type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor</span> (S : <span class="hljs-type">Sensor</span>'Class) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Value: "</span> &amp; Get_Value(S)<span class="hljs-symbol">'Image</span>);
<span class="hljs-keyword">end</span> Process_Sensor;
</code></pre>
<p>The <code>Sensor'Class</code> type is special—it means “any type derived from <code>Sensor</code>.” This is how Ada achieves polymorphism: by allowing you to work with objects through their base type while still using the correct implementation for each specific type.</p>
<h3>8.2.4 Why This Matters for Beginners</h3>
<p>This explicit approach has several advantages for beginners:</p>
<ul>
<li><strong>No hidden behavior</strong>: You can see exactly which implementation will be called</li>
<li><strong>No surprises</strong>: There are no virtual tables or hidden dispatch mechanisms</li>
<li><strong>Clearer code</strong>: The polymorphism is visible in the code, not hidden in compiler magic</li>
<li><strong>Easier debugging</strong>: When something goes wrong, you can see exactly where it’s happening</li>
</ul>
<p>Let’s see a complete example with a simple zoo management system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">type</span> <span class="hljs-type">Animal </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Make_Sound</span> (A : <span class="hljs-type">Animal</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Generic animal sound"</span>);
<span class="hljs-keyword">end</span> Make_Sound;

<span class="hljs-keyword">type</span> <span class="hljs-type">Lion </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Animal <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Make_Sound</span> (L : <span class="hljs-type">Lion</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Roar!"</span>);
<span class="hljs-keyword">end</span> Make_Sound;

<span class="hljs-keyword">type</span> <span class="hljs-type">Elephant </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Animal <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Make_Sound</span> (E : <span class="hljs-type">Elephant</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Trumpet!"</span>);
<span class="hljs-keyword">end</span> Make_Sound;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Animal</span> (A : <span class="hljs-type">Animal</span>'Class) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Processing "</span> &amp; A.Name);
   Make_Sound(A);
<span class="hljs-keyword">end</span> Process_Animal;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Zoo_Manager</span> <span class="hljs-keyword">is</span>
   My_Lion    : <span class="hljs-type">Lion</span>    := (Name =&gt; <span class="hljs-string">"Simba"</span>, <span class="hljs-keyword">others</span> =&gt; &lt;&gt;);
   My_Elephant : <span class="hljs-type">Elephant</span> := (Name =&gt; <span class="hljs-string">"Dumbo"</span>, <span class="hljs-keyword">others</span> =&gt; &lt;&gt;);
<span class="hljs-keyword">begin</span>
   Process_Animal(My_Lion);
   Process_Animal(My_Elephant);
<span class="hljs-keyword">end</span> Zoo_Manager;
</code></pre>
<p>When you run this program, it will output:</p>
<pre><code class="hljs language-undefined" data-highlighted="yes">Processing Simba
Roar!
Processing Dumbo
Trumpet!
</code></pre>
<p>Notice how the <code>Process_Animal</code> procedure works with any animal type, but calls the correct <code>Make_Sound</code> implementation for each one. This is polymorphism in action—without any hidden complexity.</p>
<h2>8.3 Advanced Dispatching Operations</h2>
<p>Ada provides several advanced features for controlling how polymorphic behavior works. These features are designed to make your code more predictable and verifiable.</p>
<h3>8.3.1 Dispatching on Multiple Parameters</h3>
<p>In most languages, polymorphism only happens based on the type of the object (the <code>this</code> parameter). In Ada, you can have polymorphism based on multiple parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Process_Command</span> (
   S : <span class="hljs-type">Sensor</span>'Class;
   C : <span class="hljs-type">Command</span>'Class) <span class="hljs-keyword">return</span> <span class="hljs-type">Response</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Dispatching_Policy (Prefer_Highest);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Implementation</span>
   <span class="hljs-keyword">return</span> Response;
<span class="hljs-keyword">end</span> Process_Command;
</code></pre>
<p>This function will dispatch based on both the sensor type and the command type. This is useful when you need to handle different combinations of inputs in different ways.</p>
<h3>8.3.2 Dispatching Policy Control</h3>
<p>Ada lets you control how dispatching happens:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- At program unit level</span>
<span class="hljs-keyword">pragma</span> Dispatching_Policy (EDF); <span class="hljs-comment">-- Earliest Deadline First</span>

<span class="hljs-comment">-- For specific operations</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Process_Alarm</span> (
   A : <span class="hljs-type">Alarm</span>'Class;
   H : <span class="hljs-type">Handler</span>'Class) <span class="hljs-keyword">return</span> <span class="hljs-type">Response</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Dispatching_Policy (FIFO_Within_Priorities);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Implementation</span>
<span class="hljs-keyword">end</span> Process_Alarm;
</code></pre>
<p>These policies make dispatching behavior predictable and verifiable—essential for safety-critical systems, but also helpful for understanding how your code works.</p>
<h3>8.3.3 Dispatching with Contracts</h3>
<p>One of Ada’s most powerful features is combining polymorphism with Design by Contract:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Validate</span> (S : <span class="hljs-type">Sensor</span>; Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Value<span class="hljs-symbol">'Valid</span>,
   Post =&gt; Validate<span class="hljs-symbol">'Result</span> = (Value <span class="hljs-keyword">in</span> S.Min_Value..S.Max_Value);

<span class="hljs-keyword">function</span> <span class="hljs-title">Validate</span> (
   T : <span class="hljs-type">Temperature_Sensor</span>;
   Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Value<span class="hljs-symbol">'Valid</span> <span class="hljs-keyword">and</span> T.Units = Celsius,
   Post =&gt; Validate<span class="hljs-symbol">'Result</span> = (Value <span class="hljs-keyword">in</span> T.Min_Val..T.Max_Val);
</code></pre>
<p>Here, the <code>Validate</code> function for <code>Temperature_Sensor</code> refines the contract of the base version. Ada ensures that derived types follow the Liskov substitution principle—meaning a derived type can always be used where the base type is expected.</p>
<h2>8.4 Interface Types and Controlled Inheritance</h2>
<p>Ada provides sophisticated mechanisms for interface-based programming and controlled inheritance—avoiding many traditional OOP pitfalls.</p>
<h3>8.4.1 Abstract Types and Interface Types</h3>
<h4>8.4.1.1 Abstract Tagged Types</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   ID     : <span class="hljs-type">Natural</span>;
   Status : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (S : <span class="hljs-type">Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Units : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (T : <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> T.Value;
<span class="hljs-keyword">end</span> Get_Value;
</code></pre>
<p>This ensures that all derived types implement required operations. If you forget to implement <code>Get_Value</code> for <code>Temperature_Sensor</code>, the compiler will give you an error.</p>
<h4>8.4.1.2 Interface Types (Multiple Inheritance)</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Measurable </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">interface</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (M : <span class="hljs-type">Measurable</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Calibratable </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">interface</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calibrate</span> (C : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Calibratable</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">new</span> Measurable <span class="hljs-keyword">and</span> Calibratable <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Units : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (T : <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> T.Value;
<span class="hljs-keyword">end</span> Get_Value;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calibrate</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Calibration code</span>
<span class="hljs-keyword">end</span> Calibrate;
</code></pre>
<p>This enables safe multiple inheritance through interface types. You can have a type that implements multiple interfaces without the complications of traditional multiple inheritance.</p>
<h3>8.4.2 Interface-Based Design Benefits</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Benefit</th>
<th style="text-align:left">Real-World Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Decouples specification from implementation</td>
<td style="text-align:left">A game where different character types all implement the same interface</td>
</tr>
<tr>
<td style="text-align:left">Enables true polymorphism without inheritance</td>
<td style="text-align:left">A home automation system where different sensors all provide the same interface</td>
</tr>
<tr>
<td style="text-align:left">Supports multiple inheritance safely</td>
<td style="text-align:left">A medical device where sensors need to implement both measurement and calibration interfaces</td>
</tr>
<tr>
<td style="text-align:left">Reduces coupling between components</td>
<td style="text-align:left">A web application where different data sources all implement the same interface</td>
</tr>
<tr>
<td style="text-align:left">Improves testability through interface mocking</td>
<td style="text-align:left">A unit test that uses a mock sensor instead of a real one</td>
</tr>
</tbody>
</table>
<h2>8.5 Controlled Inheritance Patterns</h2>
<p>Ada provides mechanisms to control inheritance for safety and simplicity.</p>
<h3>8.5.1 Sealed Types</h3>
<p>Prevent further derivation of a type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Final_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">pragma</span> Final_Type(Final_Sensor);

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Final_Sensor </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation</span>
   <span class="hljs-comment">-- Cannot be further derived</span>
<span class="hljs-keyword">end</span> Final_Sensor;
</code></pre>
<p>This is useful for types where additional derivation could compromise safety or simplicity.</p>
<h3>8.5.2 Limited Private Types</h3>
<p>Control access to type internals:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensors </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_ID</span> (S : <span class="hljs-type">Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Status</span> (S : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Sensor</span>; Status : <span class="hljs-type">String</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
      ID     : <span class="hljs-type">Natural</span>;
      Status : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Sensors;
</code></pre>
<p>This prevents unsafe modifications from outside the package.</p>
<h3>8.5.3 Controlled Extension</h3>
<p>Limit what can be added in derived types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Base_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Extension_Point </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">private</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Derived_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Base_Type <span class="hljs-keyword">and</span> Extension_Point <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   <span class="hljs-comment">-- Additional components</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">private</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Extension_Point </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   Safety_Flags : <span class="hljs-type">Safety_Masks</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
</code></pre>
<p>This ensures derived types maintain safety properties.</p>
<h2>8.6 Safety-Critical OOP Patterns</h2>
<p>Let’s look at some common OOP patterns that work well in Ada.</p>
<h3>8.6.1 State Pattern for State Machines</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">System_State </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Event</span> (
   S : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">System_State</span>;
   E : <span class="hljs-type">Event_Type</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Idle_State </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_State <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Event</span> (
   S : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Idle_State</span>;
   E : <span class="hljs-type">Event_Type</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">case</span> E <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> Start =&gt;
         Set_State(Running_State);
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         null;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
<span class="hljs-keyword">end</span> Handle_Event;

<span class="hljs-keyword">type</span> <span class="hljs-type">Running_State </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> System_State <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Event</span> (
   S : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Running_State</span>;
   E : <span class="hljs-type">Event_Type</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">case</span> E <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> Stop =&gt;
         Set_State(Idle_State);
      <span class="hljs-keyword">when</span> Emergency =&gt;
         Set_State(Emergency_State);
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         null;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
<span class="hljs-keyword">end</span> Handle_Event;
</code></pre>
<p>This pattern ensures only valid state transitions can occur. It’s perfect for modeling things like game characters, home automation systems, or simple robots.</p>
<h3>8.6.2 Strategy Pattern for Algorithm Selection</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Control_Strategy </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Output</span> (
   S : <span class="hljs-type">Control_Strategy</span>;
   Input : <span class="hljs-type">Control_Input</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Control_Output</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">PID_Strategy </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Control_Strategy <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Kp, Ki, Kd : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Output</span> (
   S : <span class="hljs-type">PID_Strategy</span>;
   Input : <span class="hljs-type">Control_Input</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Control_Output</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- PID calculation</span>
   <span class="hljs-keyword">return</span> Result;
<span class="hljs-keyword">end</span> Calculate_Output;

<span class="hljs-keyword">type</span> <span class="hljs-type">Fuzzy_Strategy </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Control_Strategy <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Rules : <span class="hljs-type">Fuzzy_Rule_Set</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Output</span> (
   S : <span class="hljs-type">Fuzzy_Strategy</span>;
   Input : <span class="hljs-type">Control_Input</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Control_Output</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Fuzzy logic calculation</span>
   <span class="hljs-keyword">return</span> Result;
<span class="hljs-keyword">end</span> Calculate_Output;
</code></pre>
<p>This pattern enables safe runtime algorithm selection. It’s great for applications where you might want to switch between different calculation methods based on conditions.</p>
<h3>8.6.3 Visitor Pattern for Data Processing</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Accept</span> (
   E : <span class="hljs-type">Sensor_Element</span>;
   V : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Sensor_Visitor</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor_Element <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Value : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Accept</span> (
   E : <span class="hljs-type">Temperature_Sensor</span>;
   V : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Sensor_Visitor</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   V.Visit_Temperature(E);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">Accept</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Safety_Check_Visitor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor_Visitor <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Visit_Temperature</span> (
   V : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Safety_Check_Visitor</span>;
   S : <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> S.Value &gt; MAX_TEMP <span class="hljs-keyword">then</span>
      Trigger_Alarm;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Visit_Temperature;
</code></pre>
<p>This pattern ensures exhaustive processing of heterogeneous data. It’s perfect for applications where you need to process different types of data in the same way.</p>
<h3>8.6.4 OOP Pattern Selection Guide</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Pattern</th>
<th style="text-align:left">When to Use</th>
<th style="text-align:left">Benefits</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>State Pattern</strong></td>
<td style="text-align:left">Complex state machines with many states</td>
<td style="text-align:left">Prevents invalid state transitions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Strategy Pattern</strong></td>
<td style="text-align:left">Multiple algorithms for same task</td>
<td style="text-align:left">Ensures algorithm safety properties</td>
</tr>
<tr>
<td style="text-align:left"><strong>Visitor Pattern</strong></td>
<td style="text-align:left">Processing heterogeneous data collections</td>
<td style="text-align:left">Guarantees exhaustive processing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Template Method</strong></td>
<td style="text-align:left">Fixed algorithm with variable steps</td>
<td style="text-align:left">Maintains algorithm invariants</td>
</tr>
</tbody>
</table>
<h2>8.7 Exercises: Building Verified Polymorphic Systems</h2>
<h3>8.7.1 Exercise 1: Zoo Management System</h3>
<p>Design a polymorphic zoo management system:</p>
<ul>
<li>Create an abstract base type for animals</li>
<li>Implement concrete types for different animals (lion, elephant, bird)</li>
<li>Add contracts to ensure safe behavior</li>
<li>Use the state pattern for animal states (awake, sleeping, feeding)</li>
<li>Verify that impossible state transitions are contractually prohibited</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that the zoo system cannot put animals in impossible states.</p>
</blockquote>
<h4>8.7.1.1 Solution Guidance</h4>
<p>Start by defining your animal base type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Animal </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   State : <span class="hljs-type">Animal_State</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Feed</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Animal</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Sleep</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Animal</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Wake</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Animal</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;
</code></pre>
<p>Then create concrete animal types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Lion </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Animal <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Feed</span> (L : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Lion</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Lion-specific feeding</span>
<span class="hljs-keyword">end</span> Feed;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Sleep</span> (L : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Lion</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Lion-specific sleeping</span>
<span class="hljs-keyword">end</span> Sleep;
</code></pre>
<p>Add state transitions with contracts:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Wake</span> (L : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Lion</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; L.State = Sleeping,
   Post =&gt; L.State = Awake;
</code></pre>
<p>This contract ensures that a lion can only wake up if it’s currently sleeping.</p>
<h3>8.7.2 Exercise 2: Home Automation System</h3>
<p>Build a polymorphic home automation system:</p>
<ul>
<li>Design an interface for different types of sensors</li>
<li>Implement concrete sensors for temperature, humidity, and motion</li>
<li>Add contracts to ensure data validity</li>
<li>Use the strategy pattern for different processing algorithms</li>
<li>Create a verification plan for polymorphic behavior</li>
</ul>
<blockquote>
<p><strong>Challenge:</strong> Prove that sensor data cannot be misinterpreted due to polymorphism.</p>
</blockquote>
<h4>8.7.2.1 Solution Guidance</h4>
<p>Start by defining your sensor interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">interface</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (S : <span class="hljs-type">Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calibrate</span> (S : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Sensor</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;
</code></pre>
<p>Then implement concrete sensors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sensor <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Units : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
   Value : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (T : <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> T.Value;
<span class="hljs-keyword">end</span> Get_Value;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calibrate</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Calibration code</span>
<span class="hljs-keyword">end</span> Calibrate;
</code></pre>
<p>Add contracts to ensure data validity:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (T : <span class="hljs-type">Temperature_Sensor</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Post =&gt; Get_Value<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">in</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">50.0</span>;
</code></pre>
<p>This contract ensures that temperature values are always within a reasonable range.</p>
<h2>8.8 Verification Strategy for Polymorphic Systems</h2>
<ol>
<li><strong>Static verification</strong>: Use <code>gnatprove</code> to verify contract refinement</li>
<li><strong>Type safety</strong>: Verify all downcasts with tag checks</li>
<li><strong>Dispatching verification</strong>: Prove correct dispatching behavior</li>
<li><strong>State preservation</strong>: Verify invariants across dispatching</li>
<li><strong>Path coverage</strong>: Ensure all polymorphic paths are tested</li>
<li><strong>Formal proof</strong>: For critical components, use SPARK for mathematical verification</li>
</ol>
<p>For highest reliability, all six verification steps are required to demonstrate safe polymorphic behavior.</p>
<h2>8.9 Common OOP Mistakes and How to Avoid Them</h2>
<h3>8.9.1 Mistake: Overusing Inheritance</h3>
<p>Many beginners think inheritance is always the best solution. But sometimes composition is better:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: Inheriting from a large base class</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Smart_Thermostat </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Thermostat <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   <span class="hljs-comment">-- Additional components</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-comment">-- Good: Using composition</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Smart_Thermostat </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Base_Thermostat : <span class="hljs-type">Thermostat</span>;
   <span class="hljs-comment">-- Additional components</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
</code></pre>
<h3>8.9.2 Mistake: Forgetting to Use 'Class</h3>
<p>When working with polymorphism, you need to use <code>Type'Class</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: Using the base type directly</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (S : <span class="hljs-type">Sensor</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- This won't dispatch properly</span>
<span class="hljs-keyword">end</span> Process;

<span class="hljs-comment">-- Good: Using the class type</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (S : <span class="hljs-type">Sensor</span>'Class) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- This will dispatch properly</span>
<span class="hljs-keyword">end</span> Process;
</code></pre>
<h3>8.9.3 Mistake: Unsafe Downcasting</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: No tag check</span>
T : <span class="hljs-type">Temperature_Sensor</span> := Temperature_Sensor(S);

<span class="hljs-comment">-- Good: With tag check</span>
<span class="hljs-keyword">if</span> S <span class="hljs-keyword">in</span> Temperature_Sensor <span class="hljs-keyword">then</span>
   T : <span class="hljs-type">Temperature_Sensor</span> := Temperature_Sensor(S);
   <span class="hljs-comment">-- Work with T</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
</code></pre>
<h2>8.10 Why Ada’s OOP Is Great for Beginners</h2>
<p>Ada’s object-oriented features are designed to be simple and explicit. Unlike other languages where polymorphism happens behind the scenes, Ada makes everything visible in the code. This means:</p>
<ul>
<li><strong>No hidden behavior</strong>: You can see exactly which implementation will be called</li>
<li><strong>No surprises</strong>: There are no virtual tables or hidden dispatch mechanisms</li>
<li><strong>Clearer code</strong>: The polymorphism is visible in the code, not hidden in compiler magic</li>
<li><strong>Easier debugging</strong>: When something goes wrong, you can see exactly where it’s happening</li>
</ul>
<p>Let’s look at a simple example of Ada’s OOP in action. Imagine you’re building a simple game where different characters have different abilities:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">type</span> <span class="hljs-type">Character </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">tagged</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   Health : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Attack</span> (C : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Character</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (C.Name &amp; <span class="hljs-string">" attacks!"</span>);
<span class="hljs-keyword">end</span> Attack;

<span class="hljs-keyword">type</span> <span class="hljs-type">Warrior </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Character <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Attack</span> (W : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Warrior</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (W.Name &amp; <span class="hljs-string">" swings sword!"</span>);
<span class="hljs-keyword">end</span> Attack;

<span class="hljs-keyword">type</span> <span class="hljs-type">Mage </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Character <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Attack</span> (M : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Mage</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (M.Name &amp; <span class="hljs-string">" casts fireball!"</span>);
<span class="hljs-keyword">end</span> Attack;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Character</span> (C : <span class="hljs-type">Character</span>'Class) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line (<span class="hljs-string">"Processing "</span> &amp; C.Name);
   Attack(C);
<span class="hljs-keyword">end</span> Process_Character;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Game_Main</span> <span class="hljs-keyword">is</span>
   My_Warrior : <span class="hljs-type">Warrior</span> := (Name =&gt; <span class="hljs-string">"Aragorn"</span>, Health =&gt; <span class="hljs-number">100</span>, <span class="hljs-keyword">others</span> =&gt; &lt;&gt;);
   My_Mage : <span class="hljs-type">Mage</span> := (Name =&gt; <span class="hljs-string">"Gandalf"</span>, Health =&gt; <span class="hljs-number">80</span>, <span class="hljs-keyword">others</span> =&gt; &lt;&gt;);
<span class="hljs-keyword">begin</span>
   Process_Character(My_Warrior);
   Process_Character(My_Mage);
<span class="hljs-keyword">end</span> Game_Main;
</code></pre>
<p>When you run this program, it will output:</p>
<pre><code class="hljs language-undefined" data-highlighted="yes">Processing Aragorn
Aragorn swings sword!
Processing Gandalf
Gandalf casts fireball!
</code></pre>
<p>Notice how the <code>Process_Character</code> procedure works with any character type, but calls the correct <code>Attack</code> implementation for each one. This is polymorphism in action—without any hidden complexity.</p>
<h2>8.11 Next Steps: Generics and Template Programming</h2>
<p>Now that you’ve mastered Ada’s object-oriented programming features, you’re ready to explore how to create reusable, type-safe components through generics. In the next tutorial, we’ll dive into Ada’s powerful generic programming system, showing how to:</p>
<h3>8.11.1 Upcoming: Generics and Template Programming</h3>
<ul>
<li>Create reusable components with formal parameters</li>
<li>Specify constraints on generic parameters</li>
<li>Verify generic code correctness</li>
<li>Combine generics with Design by Contract</li>
<li>Apply generics to safety-critical patterns</li>
</ul>
<h3>8.11.2 Practice Challenge</h3>
<p>Enhance your zoo management system with generics:</p>
<ul>
<li>Create generic animal interface packages</li>
<li>Add constraints to ensure type safety</li>
<li>Implement contracts for generic operations</li>
<li>Verify that instantiations maintain safety properties</li>
<li>Create a verification plan for generic components</li>
</ul>
<h4>8.11.2.1 The Path to Verified Reusability</h4>
<p>Object-oriented programming provides the foundation for building flexible systems, but generics enable building flexible systems efficiently. When combined with strong typing, Design by Contract, and formal verification, Ada’s generic system creates a powerful framework for developing and certifying reusable components.</p>
<p>This integrated approach is why Ada remains the language of choice for organizations that need both flexibility and reliability. As you progress through this tutorial series, you’ll see how these techniques combine to create software that’s not just functionally correct, but economically sustainable throughout its lifecycle.</p>
<p>For beginners, this means you’ll be able to write code that’s both flexible and reliable. You’ll be able to create components that work for many different situations without sacrificing safety or predictability. And most importantly, you’ll understand exactly how your code works—no hidden surprises, no unexpected behavior. That’s the power of Ada’s object-oriented programming.</p>
<h1>9. Generics and Template Programming in Ada</h1>
<blockquote>
<p><strong>Why Generics Matter</strong></p>
<p>“Generics are like templates for code - they let you write a single piece of code that works with many different types, without sacrificing type safety.”</p>
<p>In Ada, generics are not just a convenience feature—they’re a fundamental part of the language that enables you to build reusable, type-safe components that work with any data type. Unlike some languages where generics are an afterthought, Ada’s generics are deeply integrated into the language, providing strong guarantees that your code will work correctly with whatever types you choose.</p>
</blockquote>
<p>When you’re starting out in programming, you might write code like this:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Integers</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Result := A + B;
<span class="hljs-keyword">end</span> Add_Integers;
</code></pre>
<p>This works great for integers, but what if you want to add floats? You’d need to write another procedure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Floats</span> (A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Result := A + B;
<span class="hljs-keyword">end</span> Add_Floats;
</code></pre>
<p>And if you need to add doubles, or custom types? You’d end up with many nearly identical procedures. This is where generics come in—they let you write a single procedure that works with any numeric type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Number </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Number</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Number</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Result := A + B;
<span class="hljs-keyword">end</span> Add;
</code></pre>
<p>Now you can use this same procedure for integers, floats, or any other numeric type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Add;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Add</span> <span class="hljs-keyword">is</span>
   Int_Result : <span class="hljs-type">Integer</span>;
   Float_Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Add (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, Int_Result);    <span class="hljs-comment">-- Works for integers</span>
   Add (<span class="hljs-number">1.5</span>, <span class="hljs-number">2.5</span>, Float_Result); <span class="hljs-comment">-- Works for floats</span>
<span class="hljs-keyword">end</span> Test_Add;
</code></pre>
<p>This is just the beginning of what Ada’s generics can do. In this chapter, you’ll learn how to create reusable components that work with any data type while maintaining strong type safety. You’ll see how generics can simplify your code, reduce duplication, and make your programs more reliable.</p>
<h2>9.1 Why Generics Are Important for Every Programmer</h2>
<p>Generics are not just for experts—they’re a fundamental tool that every programmer should know. Think about it: when you’re building a program, how often do you find yourself writing nearly identical code for different data types? Maybe you have a sorting algorithm that works for integers, and another for strings, and another for custom objects. With generics, you write it once and use it for everything.</p>
<p>Here’s why generics matter for everyday programming:</p>
<ul>
<li><strong>Less code duplication</strong>: Write one implementation that works for many types</li>
<li><strong>Type safety</strong>: The compiler ensures your code works correctly with whatever types you choose</li>
<li><strong>Easier maintenance</strong>: Fix a bug in one place, and it’s fixed for all types</li>
<li><strong>More flexibility</strong>: Your code can work with types you didn’t even know about when you wrote it</li>
</ul>
<p>Let’s look at a real-world example. Imagine you’re building a simple shopping list app. You might need to sort items by name, by price, or by date added. Without generics, you’d write separate sorting functions for each type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Sort shopping items by name</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort_By_Name</span> (Items : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation</span>
<span class="hljs-keyword">end</span> Sort_By_Name;

<span class="hljs-comment">-- Sort shopping items by price</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort_By_Price</span> (Items : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation</span>
<span class="hljs-keyword">end</span> Sort_By_Price;
</code></pre>
<p>With generics, you can write a single sorting function that works with any comparison function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Item </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"&lt;"</span> (Left, Right : <span class="hljs-type">Item</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (Items : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item_Array</span>);
</code></pre>
<p>Now you can sort by name, price, or any other property without duplicating code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Sort by name</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Name_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sort (Item =&gt; Shopping_Item, <span class="hljs-string">"&lt;"</span> =&gt; Compare_By_Name);

<span class="hljs-comment">-- Sort by price</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Price_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Sort (Item =&gt; Shopping_Item, <span class="hljs-string">"&lt;"</span> =&gt; Compare_By_Price);
</code></pre>
<p>This is the power of generics—they let you write code once and use it in many different ways.</p>
<h2>9.2 Basic Syntax of Ada Generics</h2>
<p>Ada’s generics use a simple but powerful syntax that makes it easy to create reusable components. Let’s break down the basic structure.</p>
<h3>9.2.1 Generic Package Declaration</h3>
<p>A generic package starts with the <code>generic</code> keyword, followed by formal parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-comment">-- Formal parameters go here</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Package_Name </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Public declarations</span>
<span class="hljs-keyword">end</span> Package_Name;
</code></pre>
<p>For example, a simple generic stack:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Empty</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">end</span> Generic_Stack;
</code></pre>
<h3>9.2.2 Generic Subprogram Declaration</h3>
<p>A generic subprogram works similarly:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-comment">-- Formal parameters go here</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Procedure_Name;</span>
</code></pre>
<p>For example, a generic swap procedure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Swap</span> (A, B : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">T</span>);
</code></pre>
<h3>9.2.3 Instantiation</h3>
<p>To use a generic component, you instantiate it with actual parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Instance_Name </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Name (Actual_Parameters);
</code></pre>
<p>For example, instantiating the stack for integers:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
</code></pre>
<p>Or for strings:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">String_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; String);
</code></pre>
<h3>9.2.4 Key Syntax Notes</h3>
<ul>
<li><strong><code>generic</code> keyword</strong>: Marks the beginning of generic specifications</li>
<li><strong>Formal parameters</strong>: Placeholders for types, subprograms, or values</li>
<li><strong>Actual parameters</strong>: The real types or values used when instantiating</li>
<li><strong><code>is new</code></strong>: Used when creating an instance of a generic component</li>
<li><strong><code>with</code> clause</strong>: Required for generic subprograms to specify dependencies</li>
</ul>
<h3>9.2.5 Complete Example: Generic Calculator</h3>
<p>Let’s create a complete example of a generic calculator:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Number </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
<span class="hljs-keyword">end</span> Generic_Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Generic_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A + B;
   <span class="hljs-keyword">end</span> Add;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A - B;
   <span class="hljs-keyword">end</span> Subtract;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A * B;
   <span class="hljs-keyword">end</span> Multiply;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A / B;
   <span class="hljs-keyword">end</span> Divide;
<span class="hljs-keyword">end</span> Generic_Calculator;
</code></pre>
<p>Now we can use this calculator for different numeric types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Calculator;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Calculator</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Float_Calc </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Calculator (Float);
   <span class="hljs-keyword">package</span> <span class="hljs-title">Integer_Calc </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Calculator (Integer);
   
   F1, F2, F3 : <span class="hljs-type">Float</span>;
   I1, I2, I3 : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   F1 := <span class="hljs-number">1.5</span>;
   F2 := <span class="hljs-number">2.5</span>;
   F3 := Float_Calc.Add(F1, F2);
   Put_Line(<span class="hljs-string">"Float result: "</span> &amp; F3<span class="hljs-symbol">'Image</span>);
   
   I1 := <span class="hljs-number">3</span>;
   I2 := <span class="hljs-number">4</span>;
   I3 := Integer_Calc.Add(I1, I2);
   Put_Line(<span class="hljs-string">"Integer result: "</span> &amp; I3<span class="hljs-symbol">'Image</span>);
<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
<p>This program will output:</p>
<pre><code class="hljs language-sql" data-highlighted="yes"><span class="hljs-type">Float</span> <span class="hljs-keyword">result</span>:  <span class="hljs-number">4.00000E+00</span>
<span class="hljs-type">Integer</span> <span class="hljs-keyword">result</span>: <span class="hljs-number">7</span>
</code></pre>
<p>Notice how the same generic calculator works for both floating-point and integer types without any changes to the implementation.</p>
<h2>9.3 Formal Parameters: The Building Blocks of Generics</h2>
<p>Ada’s generics support several types of formal parameters, each serving a specific purpose.</p>
<h3>9.3.1 Type Parameters</h3>
<p>Type parameters are the most common type of formal parameter. They let you specify a placeholder for a type that will be provided when the generic is instantiated.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
</code></pre>
<p>This declares a formal type parameter <code>T</code> that can be any private type (a type with no visible implementation details).</p>
<p>You can also specify more constraints on type parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;  <span class="hljs-comment">-- Any floating-point type</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">U </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;   <span class="hljs-comment">-- Any integer type</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">V </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Integer <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Character;  <span class="hljs-comment">-- Any string type</span>
</code></pre>
<p>For example, a generic array sorting procedure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"&lt;"</span> (Left, Right : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Index </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Array_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Index <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
</code></pre>
<p>This procedure can sort arrays of any type that supports comparison.</p>
<h3>9.3.2 Subprogram Parameters</h3>
<p>Subprogram parameters let you pass functions or procedures as parameters to your generic component.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Compare</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
</code></pre>
<p>For example, in a generic search function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Find_Match</span> (Item : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Search</span> (Items : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
</code></pre>
<p>This allows you to search for items that match a specific condition.</p>
<h3>9.3.3 Object Parameters</h3>
<p>Object parameters let you pass values as parameters to your generic component.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   Default_Value : <span class="hljs-type">Integer</span>;
</code></pre>
<p>For example, a generic counter with a default starting value:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   Default_Value : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Counter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Reset;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment;</span>
end Counter;
</code></pre>
<h3>9.3.4 Package Parameters</h3>
<p>Package parameters let you pass entire packages as parameters.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Math_Package </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Math (&lt;&gt;);
</code></pre>
<p>For example, a generic trigonometry calculator that works with different numeric types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Float_Package </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float_Trigonometry (&lt;&gt;);
<span class="hljs-keyword">package</span> <span class="hljs-title">Trig_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Sin</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Trig_Calculator;
</code></pre>
<h3>9.3.5 Formal Parameters Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Parameter Type</th>
<th style="text-align:left">Syntax</th>
<th style="text-align:left">Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Type Parameter</strong></td>
<td style="text-align:left"><code>type T is private</code></td>
<td style="text-align:left">When you need to work with any data type</td>
</tr>
<tr>
<td style="text-align:left"><strong>Subprogram Parameter</strong></td>
<td style="text-align:left"><code>with function Compare (A, B : T) return Boolean</code></td>
<td style="text-align:left">When you need custom behavior for different types</td>
</tr>
<tr>
<td style="text-align:left"><strong>Object Parameter</strong></td>
<td style="text-align:left"><code>Default_Value : Integer</code></td>
<td style="text-align:left">When you need to configure behavior with a value</td>
</tr>
<tr>
<td style="text-align:left"><strong>Package Parameter</strong></td>
<td style="text-align:left"><code>package Math_Package is new Math (&lt;&gt;);</code></td>
<td style="text-align:left">When you need to use an entire package’s functionality</td>
</tr>
</tbody>
</table>
<h2>9.4 Instantiation: Using Your Generic Components</h2>
<p>Once you’ve created a generic component, you need to instantiate it with actual parameters to use it in your program.</p>
<h3>9.4.1 Basic Instantiation</h3>
<p>The simplest way to instantiate a generic is with positional parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Integer);
</code></pre>
<p>Or with named parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
</code></pre>
<p>Named parameters are often clearer, especially when there are multiple parameters.</p>
<h3>9.4.2 Instantiation with Constraints</h3>
<p>When you need to specify constraints on types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Range </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Min</span> <span class="hljs-keyword">return</span> <span class="hljs-type">T</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Max</span> <span class="hljs-keyword">return</span> <span class="hljs-type">T</span>;
<span class="hljs-keyword">end</span> Generic_Range;

<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Range </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Range (T =&gt; Integer);
<span class="hljs-keyword">package</span> <span class="hljs-title">Byte_Range </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Range (T =&gt; Natural <span class="hljs-keyword">range</span> <span class="hljs-number">0</span>..<span class="hljs-number">255</span>);
</code></pre>
<h3>9.4.3 Instantiation with Subprograms</h3>
<p>When you need to provide a subprogram parameter:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"&lt;"</span> (Left, Right : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Sort </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
<span class="hljs-keyword">end</span> Generic_Sort;

<span class="hljs-comment">-- Define comparison function</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Compare_By_Name</span> (A, B : <span class="hljs-type">Shopping_Item</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> A.Name &lt; B.Name;
<span class="hljs-keyword">end</span> Compare_By_Name;

<span class="hljs-comment">-- Instantiate with named parameters</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Name_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (Element =&gt; Shopping_Item, <span class="hljs-string">"&lt;"</span> =&gt; Compare_By_Name);
</code></pre>
<h3>9.4.4 Instantiation with Packages</h3>
<p>When you need to pass a package as a parameter:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Math_Package </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Math (&lt;&gt;);
<span class="hljs-keyword">package</span> <span class="hljs-title">Trig_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Sin</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Trig_Calculator;

<span class="hljs-comment">-- Create a math package for Float</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Math </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Math (Float);

<span class="hljs-comment">-- Instantiate with named parameters</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Trig </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Trig_Calculator (Math_Package =&gt; Float_Math);
</code></pre>
<h3>9.4.5 Instantiation Best Practices</h3>
<ul>
<li><strong>Use named parameters</strong>: They make your code more readable and less error-prone</li>
<li><strong>Group related instantiations</strong>: Put related generic instantiations in the same package</li>
<li><strong>Avoid unnecessary complexity</strong>: Only specify what you need</li>
<li><strong>Document your instantiations</strong>: Explain why you chose specific parameters</li>
</ul>
<h2>9.5 Constraints on Generic Parameters</h2>
<p>One of Ada’s most powerful features is the ability to constrain generic parameters, ensuring that only types that meet specific requirements can be used.</p>
<h3>9.5.1 Numeric Constraints</h3>
<p>For numeric types, you can specify different constraints:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;  <span class="hljs-comment">-- Floating-point types</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">U </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;   <span class="hljs-comment">-- Integer types</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">V </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">delta</span> &lt;&gt;;   <span class="hljs-comment">-- Fixed-point types</span>
</code></pre>
<p>For example, a generic calculator that only works with floating-point types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Number </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Floating_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
<span class="hljs-keyword">end</span> Generic_Floating_Calculator;
</code></pre>
<p>This can only be instantiated with floating-point types like <code>Float</code>, <code>Long_Float</code>, or <code>Decimal</code>.</p>
<h3>9.5.2 Array Constraints</h3>
<p>For array types, you can specify constraints on the index and element types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Index </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Array_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Index <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
</code></pre>
<p>For example, a generic array processing procedure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Index </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Array_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Index <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (E : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Array</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
</code></pre>
<p>This procedure can process arrays of any index type and element type, as long as they support the <code>Process</code> procedure.</p>
<h3>9.5.3 Subprogram Constraints</h3>
<p>For subprogram parameters, you can specify the exact signature:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Compare</span> (Left, Right : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
</code></pre>
<p>For example, a generic search function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Find_Match</span> (Item : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Search</span> (Items : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
</code></pre>
<p>This ensures that the <code>Find_Match</code> function has the correct signature for the element type.</p>
<h3>9.5.4 Constraint Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Constraint Type</th>
<th style="text-align:left">Syntax</th>
<th style="text-align:left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Numeric</strong></td>
<td style="text-align:left"><code>type T is digits &lt;&gt;</code></td>
<td style="text-align:left"><code>Float</code>, <code>Long_Float</code>, <code>Decimal</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Range</strong></td>
<td style="text-align:left"><code>type T is range &lt;&gt;</code></td>
<td style="text-align:left"><code>Integer</code>, <code>Natural</code>, <code>Positive</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Array</strong></td>
<td style="text-align:left"><code>type Array_Type is array (Index range &lt;&gt;) of Element</code></td>
<td style="text-align:left"><code>String</code>, <code>Integer_Array</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Subprogram</strong></td>
<td style="text-align:left"><code>with function Compare (Left, Right : T) return Boolean</code></td>
<td style="text-align:left"><code>"&lt;"</code>, <code>"&gt;="</code>, custom comparison</td>
</tr>
</tbody>
</table>
<h2>9.6 Private Types in Generics</h2>
<p>Ada’s generics work seamlessly with private types, allowing you to create reusable components that hide implementation details.</p>
<h3>9.6.1 Generic Package with Private Types</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Empty</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Implementation details hidden from clients</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Stack_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Stack_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Data : <span class="hljs-type">Stack_Array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
      Top  : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
   Stack : <span class="hljs-type">Stack_Type</span>;
<span class="hljs-keyword">end</span> Generic_Stack;
</code></pre>
<p>The client only sees the public interface, not the implementation details:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Stack;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Stack</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
   Value : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   Int_Stack.Push(<span class="hljs-number">42</span>);
   Int_Stack.Pop(Value);
   Put_Line(<span class="hljs-string">"Popped: "</span> &amp; Value<span class="hljs-symbol">'Image</span>);
<span class="hljs-keyword">end</span> Test_Stack;
</code></pre>
<p>The client doesn’t need to know that the stack is implemented as an array—it only needs to know how to use the interface.</p>
<h3>9.6.2 Generic Package with Limited Private Types</h3>
<p>For types that shouldn’t be copied:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Resource </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Acquire</span> (Resource : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Release</span> (Resource : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
<span class="hljs-keyword">private</span>
   <span class="hljs-comment">-- Implementation details</span>
<span class="hljs-keyword">end</span> Generic_Resource;
</code></pre>
<p>This ensures that the resource type can’t be copied, which is important for things like file handles or hardware devices.</p>
<h3>9.6.3 Private Type Constraints</h3>
<p>You can also constrain private types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">with</span> Default_Value =&gt; <span class="hljs-number">0</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Counter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Reset;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> <span class="hljs-keyword">return</span> <span class="hljs-type">T</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment;</span>
end Generic_Counter;
</code></pre>
<p>This ensures that the type has a default value of 0, which is useful for counters.</p>
<h2>9.7 Generic Inheritance and Composition</h2>
<p>Ada’s generics support both inheritance and composition patterns, allowing you to build complex systems from reusable components.</p>
<h3>9.7.1 Generic Inheritance</h3>
<p>You can create generic types that inherit from other generic types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Base_Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Base </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Base functionality</span>
<span class="hljs-keyword">end</span> Generic_Base;

<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Derived_Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">package</span> <span class="hljs-title">Base_Package </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Base (Base_Element);
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Derived </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Derived functionality</span>
<span class="hljs-keyword">end</span> Generic_Derived;
</code></pre>
<p>This allows you to build a hierarchy of generic types.</p>
<h3>9.7.2 Generic Composition</h3>
<p>You can also compose generic components together:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Stack implementation</span>
<span class="hljs-keyword">end</span> Generic_Stack;

<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Counter </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Counter implementation</span>
<span class="hljs-keyword">end</span> Generic_Counter;

<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Counter_Stack </span><span class="hljs-keyword">is</span>
   Stack : <span class="hljs-type">Generic_Stack</span> (Element);
   Counter : <span class="hljs-type">Generic_Counter</span> (Element);
   <span class="hljs-comment">-- Combined functionality</span>
<span class="hljs-keyword">end</span> Generic_Counter_Stack;
</code></pre>
<p>This allows you to build complex components by combining simpler ones.</p>
<h3>9.7.3 Generic Inheritance vs Composition</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Pattern</th>
<th style="text-align:left">When to Use</th>
<th style="text-align:left">Benefits</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Generic Inheritance</strong></td>
<td style="text-align:left">When you need to extend existing generic functionality</td>
<td style="text-align:left">Creates a clear hierarchy of related types</td>
</tr>
<tr>
<td style="text-align:left"><strong>Generic Composition</strong></td>
<td style="text-align:left">When you need to combine multiple generic components</td>
<td style="text-align:left">Creates flexible, reusable components from smaller parts</td>
</tr>
</tbody>
</table>
<h2>9.8 Practical Examples: Building Reusable Components</h2>
<p>Let’s look at some practical examples of generics that you can use in everyday programming.</p>
<h3>9.8.1 Generic Stack Implementation</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Empty</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Full</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Clear;</span>
private
   type Stack_Array <span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Stack_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Data : <span class="hljs-type">Stack_Array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
      Top  : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
   Stack : <span class="hljs-type">Stack_Type</span>;
<span class="hljs-keyword">end</span> Generic_Stack;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Element</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Is_Full <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Stack_Overflow;
      <span class="hljs-keyword">else</span>
         Stack.Top := Stack.Top + <span class="hljs-number">1</span>;
         Stack.Data(Stack.Top) := X;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Push;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Is_Empty <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Stack_Underflow;
      <span class="hljs-keyword">else</span>
         X := Stack.Data(Stack.Top);
         Stack.Top := Stack.Top - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Pop;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Empty</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Stack.Top = <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Is_Empty;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Full</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Stack.Top = Stack.Data<span class="hljs-symbol">'Length</span>;
   <span class="hljs-keyword">end</span> Is_Full;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Clear</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Stack.Top := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Clear;
<span class="hljs-keyword">end</span> Generic_Stack;
</code></pre>
<p>Now you can use this stack for any type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Stack;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Stack</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
   <span class="hljs-keyword">package</span> <span class="hljs-title">String_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; String);
   Value : <span class="hljs-type">Integer</span>;
   Text : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   Int_Stack.Push(<span class="hljs-number">42</span>);
   Int_Stack.Push(<span class="hljs-number">100</span>);
   Int_Stack.Pop(Value);
   Put_Line(<span class="hljs-string">"Popped: "</span> &amp; Value<span class="hljs-symbol">'Image</span>);
   
   String_Stack.Push(<span class="hljs-string">"Hello"</span>);
   String_Stack.Push(<span class="hljs-string">"World"</span>);
   String_Stack.Pop(Text);
   Put_Line(<span class="hljs-string">"Popped: "</span> &amp; Text);
<span class="hljs-keyword">end</span> Test_Stack;
</code></pre>
<h3>9.8.2 Generic Sorting Algorithm</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"&lt;"</span> (Left, Right : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Index </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Array_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Index <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Generic_Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Generic_Sort </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>) <span class="hljs-keyword">is</span>
      Temp : <span class="hljs-type">Element</span>;
      I, J : <span class="hljs-type">Index</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First</span> .. A<span class="hljs-symbol">'Last</span> - <span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> I + <span class="hljs-number">1</span> .. A<span class="hljs-symbol">'Last</span> <span class="hljs-keyword">loop</span>
            <span class="hljs-keyword">if</span> A(J) &lt; A(I) <span class="hljs-keyword">then</span>
               Temp := A(I);
               A(I) := A(J);
               A(J) := Temp;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Sort;
<span class="hljs-keyword">end</span> Generic_Sort;
</code></pre>
<p>Now you can sort arrays of any type that supports comparison:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Sort;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Sort</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Integer;
   <span class="hljs-keyword">type</span> <span class="hljs-type">String_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">5</span>) <span class="hljs-keyword">of</span> String (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (Integer, <span class="hljs-string">"&lt;"</span>, Positive, Int_Array);
   <span class="hljs-keyword">package</span> <span class="hljs-title">String_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (String, <span class="hljs-string">"&lt;"</span>, Positive, String_Array);
   
   I_Array : <span class="hljs-type">Int_Array</span> := (<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>);
   S_Array : <span class="hljs-type">String_Array</span> := (<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Cherry"</span>, <span class="hljs-string">"Date"</span>, <span class="hljs-string">"Elderberry"</span>);
<span class="hljs-keyword">begin</span>
   Int_Sort.Sort(I_Array);
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> I_Array<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Put(I_Array(I)<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">" "</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   New_Line;
   
   String_Sort.Sort(S_Array);
   <span class="hljs-keyword">for</span> S <span class="hljs-keyword">in</span> S_Array<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Put(S_Array(S) &amp; <span class="hljs-string">" "</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   New_Line;
<span class="hljs-keyword">end</span> Test_Sort;
</code></pre>
<p>This will output:</p>
<pre><code class="hljs language-javascript" data-highlighted="yes"><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span> <span class="hljs-number">10</span> 
<span class="hljs-title class_">Apple</span> <span class="hljs-title class_">Banana</span> <span class="hljs-title class_">Cherry</span> <span class="hljs-title class_">Date</span> <span class="hljs-title class_">Elderberry</span> 
</code></pre>
<h3>9.8.3 Generic Calculator with Constraints</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Number </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Power</span> (A : <span class="hljs-type">Number</span>; B : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
<span class="hljs-keyword">end</span> Generic_Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Generic_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A + B;
   <span class="hljs-keyword">end</span> Add;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A - B;
   <span class="hljs-keyword">end</span> Subtract;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A * B;
   <span class="hljs-keyword">end</span> Multiply;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A / B;
   <span class="hljs-keyword">end</span> Divide;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Power</span> (A : <span class="hljs-type">Number</span>; B : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span> <span class="hljs-keyword">is</span>
      Result : <span class="hljs-type">Number</span> := <span class="hljs-number">1.0</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..B <span class="hljs-keyword">loop</span>
         Result := Result * A;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">return</span> Result;
   <span class="hljs-keyword">end</span> Power;
<span class="hljs-keyword">end</span> Generic_Calculator;
</code></pre>
<p>Now you can use this calculator for different numeric types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Calculator;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Calculator</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Float_Calc </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Calculator (Float);
   <span class="hljs-keyword">package</span> <span class="hljs-title">Integer_Calc </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Calculator (Integer);
   Float_Result : <span class="hljs-type">Float</span>;
   Integer_Result : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   Float_Result := Float_Calc.Power(<span class="hljs-number">2.0</span>, <span class="hljs-number">3</span>);
   Put_Line(<span class="hljs-string">"2^3 = "</span> &amp; Float_Result<span class="hljs-symbol">'Image</span>);
   
   Integer_Result := Integer_Calc.Power(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>);
   Put_Line(<span class="hljs-string">"2^5 = "</span> &amp; Integer_Result<span class="hljs-symbol">'Image</span>);
<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
<p>This will output:</p>
<pre><code class="hljs language-undefined" data-highlighted="yes">2^3 =  8.00000E+00
2^5 = 32
</code></pre>
<h2>9.9 Ada Generics vs C++ Templates: A Comparison</h2>
<p>Many programmers are familiar with C++ templates, so it’s helpful to understand how Ada generics compare.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Feature</th>
<th style="text-align:left">Ada Generics</th>
<th style="text-align:left">C++ Templates</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Syntax</strong></td>
<td style="text-align:left"><code>generic</code> keyword followed by formal parameters</td>
<td style="text-align:left"><code>template &lt;...&gt;</code> syntax</td>
</tr>
<tr>
<td style="text-align:left"><strong>Type Safety</strong></td>
<td style="text-align:left">Strong, enforced at compile time</td>
<td style="text-align:left">Weaker, depends on usage</td>
</tr>
<tr>
<td style="text-align:left"><strong>Instantiation</strong></td>
<td style="text-align:left">Explicit with <code>is new</code></td>
<td style="text-align:left">Implicit based on usage</td>
</tr>
<tr>
<td style="text-align:left"><strong>Error Messages</strong></td>
<td style="text-align:left">Clear, specific errors</td>
<td style="text-align:left">Often cryptic and hard to understand</td>
</tr>
<tr>
<td style="text-align:left"><strong>Code Generation</strong></td>
<td style="text-align:left">One instance per actual type</td>
<td style="text-align:left">One instance per actual type</td>
</tr>
<tr>
<td style="text-align:left"><strong>Constraints</strong></td>
<td style="text-align:left">Explicit constraints on formal parameters</td>
<td style="text-align:left">Constraints via SFINAE or concepts (C++20)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Private Types</strong></td>
<td style="text-align:left">Fully supported with hidden implementation</td>
<td style="text-align:left">Supported but more complex</td>
</tr>
<tr>
<td style="text-align:left"><strong>Default Parameters</strong></td>
<td style="text-align:left">Supported</td>
<td style="text-align:left">Supported</td>
</tr>
<tr>
<td style="text-align:left"><strong>Compile Time</strong></td>
<td style="text-align:left">Faster due to simpler model</td>
<td style="text-align:left">Slower due to complex template system</td>
</tr>
</tbody>
</table>
<h3>9.9.1 Key Differences</h3>
<ul>
<li><strong>Explicit vs Implicit Instantiation</strong>: In Ada, you explicitly instantiate generics with <code>is new</code>. In C++, templates are instantiated implicitly based on usage. This makes Ada’s generics easier to understand and debug.</li>
<li><strong>Stronger Type Safety</strong>: Ada’s generics have stronger type safety guarantees. If you try to use a type that doesn’t meet the requirements, the compiler will give you a clear error message.</li>
<li><strong>Better Error Messages</strong>: Ada’s error messages for generics are usually much clearer than C++'s, which can be notoriously cryptic.</li>
<li><strong>Simpler Model</strong>: Ada’s generics are simpler and more predictable than C++ templates, making them easier to learn and use correctly.</li>
</ul>
<p>Let’s look at a simple example to see the difference:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada generic</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Swap</span> (A, B : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">T</span>);

<span class="hljs-comment">-- Instantiation</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Swap </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Swap (Integer);
</code></pre>
<p>In C++, the equivalent would be:</p>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-comment">// C++ template</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(T&amp; a, T&amp; b)</span> </span>{
   T temp = a;
   a = b;
   b = temp;
}

<span class="hljs-comment">// Instantiation (implicit)</span>
<span class="hljs-type">int</span> a = <span class="hljs-number">1</span>, b = <span class="hljs-number">2</span>;
<span class="hljs-built_in">swap</span>(a, b);
</code></pre>
<p>In Ada, the instantiation is explicit, which makes it clear what’s happening. In C++, the template is instantiated implicitly based on usage, which can make it harder to understand exactly what’s happening behind the scenes.</p>
<h2>9.10 Best Practices for Using Generics</h2>
<p>Here are some best practices to help you use generics effectively:</p>
<h3>9.10.1 . Use Named Parameters</h3>
<p>Named parameters make your code more readable and less error-prone:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);

<span class="hljs-comment">-- Bad</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Integer);
</code></pre>
<h3>9.10.2 . Keep Generics Simple</h3>
<p>Start with simple generics and build up complexity gradually:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Simple</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Simple_Generic </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Do_Something</span> (X : <span class="hljs-type">T</span>);
<span class="hljs-keyword">end</span> Simple_Generic;

<span class="hljs-comment">-- Complex</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Compare</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (X : <span class="hljs-type">T</span>);
<span class="hljs-keyword">package</span> <span class="hljs-title">Complex_Generic </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Complex_Generic;
</code></pre>
<h3>9.10.3 . Document Your Generics</h3>
<p>Add comments to explain what your generic does and what constraints it has:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-comment">-- Must support equality comparison</span>
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"="</span> (Left, Right : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Equality_Checker </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Checks if two values are equal</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Equal</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">end</span> Equality_Checker;
</code></pre>
<h3>9.10.4 . Use Constraints to Ensure Correct Usage</h3>
<p>Add constraints to make sure only appropriate types are used:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
   <span class="hljs-comment">-- Only floating-point types allowed</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square_Root</span> (X : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">T</span>;
<span class="hljs-keyword">end</span> Float_Calculator;
</code></pre>
<h3>9.10.5 . Test Your Generics</h3>
<p>Test your generic components with different types to ensure they work correctly:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Stack;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Generic_Stack</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
   <span class="hljs-keyword">package</span> <span class="hljs-title">String_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; String);
   <span class="hljs-comment">-- Test both instantiations</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Test integer stack</span>
   Int_Stack.Push(<span class="hljs-number">42</span>);
   Int_Stack.Push(<span class="hljs-number">100</span>);
   <span class="hljs-comment">-- ...</span>
   
   <span class="hljs-comment">-- Test string stack</span>
   String_Stack.Push(<span class="hljs-string">"Hello"</span>);
   String_Stack.Push(<span class="hljs-string">"World"</span>);
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Test_Generic_Stack;
</code></pre>
<h3>9.10.6 . Avoid Over-Engineering</h3>
<p>Don’t make your generics more complex than they need to be:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Simple and effective</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Simple_Generic </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Do_Something</span> (X : <span class="hljs-type">T</span>);
<span class="hljs-keyword">end</span> Simple_Generic;

<span class="hljs-comment">-- Overly complex</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Compare</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (X : <span class="hljs-type">T</span>);
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (X : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Value</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">T</span>; Value : <span class="hljs-type">Integer</span>);
<span class="hljs-keyword">package</span> <span class="hljs-title">Overly_Complex_Generic </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Overly_Complex_Generic;
</code></pre>
<h2>9.11 Real-World Applications of Generics</h2>
<p>Let’s look at some real-world applications of generics that you might encounter in everyday programming.</p>
<h3>9.11.1 Data Structures</h3>
<p>Generics are perfect for creating reusable data structures like stacks, queues, and linked lists:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Queue </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Enqueue</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Dequeue</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Empty</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">end</span> Generic_Queue;
</code></pre>
<p>Now you can create queues for any type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Queue;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Queue</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Queue </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Queue (Element =&gt; Integer);
   <span class="hljs-keyword">package</span> <span class="hljs-title">String_Queue </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Queue (Element =&gt; String);
   Value : <span class="hljs-type">Integer</span>;
   Text : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   Int_Queue.Enqueue(<span class="hljs-number">42</span>);
   Int_Queue.Dequeue(Value);
   
   String_Queue.Enqueue(<span class="hljs-string">"Hello"</span>);
   String_Queue.Dequeue(Text);
<span class="hljs-keyword">end</span> Test_Queue;
</code></pre>
<h3>9.11.2 Algorithms</h3>
<p>Generics are perfect for creating reusable algorithms like sorting, searching, and filtering:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">"&lt;"</span> (Left, Right : <span class="hljs-type">Element</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Index </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Array_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Index <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Element;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Generic_Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
</code></pre>
<p>Now you can sort arrays of any type that supports comparison:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Sort;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Sort</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Integer;
   <span class="hljs-keyword">type</span> <span class="hljs-type">String_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">5</span>) <span class="hljs-keyword">of</span> String (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (Integer, <span class="hljs-string">"&lt;"</span>, Positive, Int_Array);
   <span class="hljs-keyword">package</span> <span class="hljs-title">String_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (String, <span class="hljs-string">"&lt;"</span>, Positive, String_Array);
   
   I_Array : <span class="hljs-type">Int_Array</span> := (<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>);
   S_Array : <span class="hljs-type">String_Array</span> := (<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Cherry"</span>, <span class="hljs-string">"Date"</span>, <span class="hljs-string">"Elderberry"</span>);
<span class="hljs-keyword">begin</span>
   Int_Sort.Sort(I_Array);
   String_Sort.Sort(S_Array);
<span class="hljs-keyword">end</span> Test_Sort;
</code></pre>
<h3>9.11.3 Utility Functions</h3>
<p>Generics are perfect for creating reusable utility functions like math operations or string processing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Number </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Math </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Cube</span> (X : <span class="hljs-type">Number</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Power</span> (X : <span class="hljs-type">Number</span>; Y : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Number</span>;
<span class="hljs-keyword">end</span> Generic_Math;
</code></pre>
<p>Now you can use these math functions for any numeric type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Generic_Math;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Math</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Float_Math </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Math (Float);
   <span class="hljs-keyword">package</span> <span class="hljs-title">Integer_Math </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Math (Integer);
   Float_Result : <span class="hljs-type">Float</span>;
   Integer_Result : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   Float_Result := Float_Math.Square(<span class="hljs-number">2.5</span>);
   Integer_Result := Integer_Math.Cube(<span class="hljs-number">3</span>);
<span class="hljs-keyword">end</span> Test_Math;
</code></pre>
<h3>9.11.4 Real-World Example: Shopping List App</h3>
<p>Let’s build a complete shopping list app using generics:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Item type</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Shopping_Item </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   Price : <span class="hljs-type">Float</span>;
   Quantity : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-comment">-- Generic sorting for shopping items</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Item </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Compare</span> (A, B : <span class="hljs-type">Item</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Index </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">range</span> &lt;&gt;;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Array_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Index <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Item;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Generic_Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);

<span class="hljs-comment">-- Generic stack for shopping items</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Item </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Item</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Is_Empty</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">end</span> Generic_Stack;

<span class="hljs-comment">-- Main program</span>
<span class="hljs-keyword">with</span> Generic_Sort;
<span class="hljs-keyword">with</span> Generic_Stack;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Shopping_List</span> <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Define comparison functions</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Compare_By_Name</span> (A, B : <span class="hljs-type">Shopping_Item</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A.Name &lt; B.Name;
   <span class="hljs-keyword">end</span> Compare_By_Name;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Compare_By_Price</span> (A, B : <span class="hljs-type">Shopping_Item</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A.Price &lt; B.Price;
   <span class="hljs-keyword">end</span> Compare_By_Price;
   
   <span class="hljs-comment">-- Instantiate generics</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Name_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (Shopping_Item, Compare_By_Name, Positive, Shopping_Item_Array);
   <span class="hljs-keyword">package</span> <span class="hljs-title">Price_Sort </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sort (Shopping_Item, Compare_By_Price, Positive, Shopping_Item_Array);
   <span class="hljs-keyword">package</span> <span class="hljs-title">Item_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Shopping_Item);
   
   <span class="hljs-comment">-- Shopping list</span>
   Items : <span class="hljs-type">Shopping_Item_Array</span> := (/* items */);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Sort by name</span>
   Name_Sort.Sort(Items);
   
   <span class="hljs-comment">-- Sort by price</span>
   Price_Sort.Sort(Items);
   
   <span class="hljs-comment">-- Use stack for undo functionality</span>
   Item_Stack.Push(Current_Item);
   Item_Stack.Pop(Previous_Item);
<span class="hljs-keyword">end</span> Shopping_List;
</code></pre>
<p>This example shows how generics can simplify complex applications by providing reusable components for sorting, stacking, and other common tasks.</p>
<h2>9.12 Common Mistakes and How to Avoid Them</h2>
<h3>9.12.1 Mistake: Forgetting to Specify Constraints</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">T</span>;
<span class="hljs-keyword">end</span> Generic_Calculator;

<span class="hljs-comment">-- This will fail if T doesn't support addition</span>
</code></pre>
<h4>9.12.1.1 Solution: Add Constraints</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">digits</span> &lt;&gt;;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">T</span>;
<span class="hljs-keyword">end</span> Generic_Calculator;
</code></pre>
<h3>9.12.2 Mistake: Using Too Many Parameters</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Compare</span> (A, B : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (X : <span class="hljs-type">T</span>);
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Value</span> (X : <span class="hljs-type">T</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">with</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Value</span> (X : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">T</span>; Value : <span class="hljs-type">Integer</span>);
<span class="hljs-keyword">package</span> <span class="hljs-title">Overly_Complex_Generic </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Overly_Complex_Generic;
</code></pre>
<h4>9.12.2.1 Solution: Keep It Simple</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good</span>
<span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">T </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Simple_Generic </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Do_Something</span> (X : <span class="hljs-type">T</span>);
<span class="hljs-keyword">end</span> Simple_Generic;
</code></pre>
<h3>9.12.3 Mistake: Not Testing with Multiple Types</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad</span>
<span class="hljs-keyword">with</span> Generic_Stack;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Stack</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
   <span class="hljs-comment">-- Only test with integers</span>
<span class="hljs-keyword">begin</span>
   Int_Stack.Push(<span class="hljs-number">42</span>);
<span class="hljs-keyword">end</span> Test_Stack;
</code></pre>
<h4>9.12.3.1 Solution: Test with Multiple Types</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good</span>
<span class="hljs-keyword">with</span> Generic_Stack;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Stack</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; Integer);
   <span class="hljs-keyword">package</span> <span class="hljs-title">String_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Element =&gt; String);
   Value : <span class="hljs-type">Integer</span>;
   Text : <span class="hljs-type">String</span>;
<span class="hljs-keyword">begin</span>
   Int_Stack.Push(<span class="hljs-number">42</span>);
   String_Stack.Push(<span class="hljs-string">"Hello"</span>);
   <span class="hljs-comment">-- Test both instantiations</span>
<span class="hljs-keyword">end</span> Test_Stack;
</code></pre>
<h2>9.13 Next Steps: Putting It All Together</h2>
<p>Now that you’ve learned the basics of Ada generics, it’s time to put it all together. Here are some ideas for what to try next:</p>
<h3>9.13.1 . Build Your Own Generic Data Structures</h3>
<p>Create a generic linked list, binary tree, or hash table. Test it with different types to make sure it works correctly.</p>
<h3>9.13.2 . Create a Generic Math Library</h3>
<p>Build a library of math functions that work with different numeric types. Include functions for square roots, powers, trigonometry, and more.</p>
<h3>9.13.3 . Develop a Generic Sorting Library</h3>
<p>Create a library of sorting algorithms (bubble sort, quicksort, mergesort) that work with any comparable type.</p>
<h3>9.13.4 . Build a Generic File Processing System</h3>
<p>Create a system that can read and write files of different types, using generics to handle the specific data types.</p>
<h3>9.13.5 . Create a Generic Game Component</h3>
<p>Build a game component (like a character or item) that can work with different types of data, using generics to make it reusable.</p>
<p>Remember, the key to mastering generics is practice. Start with simple examples and gradually build up to more complex ones. Don’t be afraid to experiment and try new things—generics are a powerful tool that can make your code simpler, cleaner, and more reusable.</p>
<h2>9.14 Conclusion: The Power of Reusable Code</h2>
<blockquote>
<p><strong>The Power of Generics</strong></p>
<p>“Generics are like building blocks for code—they let you create components that work with many different types, without sacrificing type safety or clarity.”</p>
<p>In this chapter, you’ve learned how to use Ada’s generics to create reusable, type-safe components. You’ve seen how generics can simplify your code, reduce duplication, and make your programs more reliable. Whether you’re building a simple calculator, a shopping list app, or a complex data structure, generics give you the tools to write code that works with any type while maintaining strong type safety.</p>
</blockquote>
<p>Ada’s generics are not just for experts—they’re a fundamental tool that every programmer should know. By using generics, you can write code once and use it in many different ways, saving time and reducing errors. You’ve learned how to create generic packages and subprograms, how to constrain generic parameters, and how to use generics with private types. You’ve seen how Ada’s generics compare to C++ templates, and you’ve learned best practices for using generics effectively.</p>
<p>As you continue your programming journey, remember that generics are a powerful tool that can make your code simpler, cleaner, and more reusable. Whether you’re building a home automation system, a game, or a data processing tool, generics will help you write better code. So go forth and create—your reusable components are waiting to be built!</p>
<h1>10. Memory Management and Controlled Types in Ada</h1>
<blockquote>
<p><strong>Why Memory Management Matters</strong></p>
<p>“Memory management isn’t just for experts—it’s a fundamental part of writing reliable code. Ada makes it simple and safe, even for beginners.”</p>
</blockquote>
<p>When you’re writing a program that reads a file, connects to a database, or manages game assets, you’re dealing with resources that need careful handling. In many programming languages, this means manually allocating and freeing memory—a process that’s easy to get wrong. For example, in C, you might forget to close a file or free memory, leading to crashes or security vulnerabilities. In Java, you might forget to close a database connection, causing resource leaks that slow down your application.</p>
<p>Ada solves these problems with a powerful combination of automatic memory management and controlled types. With Ada, you don’t have to worry about manual cleanup—when an object goes out of scope, Ada automatically releases its resources. This means your code is simpler, safer, and less prone to errors. Whether you’re building a home automation system, a simple game, or a web application, Ada’s memory management features help you focus on what your program does rather than how it manages resources.</p>
<h2>10.1 Stack vs. Heap: How Ada Handles Memory</h2>
<p>All programs use two main types of memory: the stack and the heap. Understanding the difference between them is key to writing efficient and reliable code.</p>
<h3>10.1.1 The Stack</h3>
<p>The stack is like a stack of plates in a cafeteria—new items are added to the top, and items are removed from the top. In programming terms, the stack is used for local variables that have a fixed size and a known lifetime. When you enter a function, space is allocated on the stack for its local variables. When you leave the function, that space is automatically reclaimed.</p>
<p>Ada uses the stack for most local variables. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculate_Sum</span> <span class="hljs-keyword">is</span>
   A : <span class="hljs-type">Integer</span> := <span class="hljs-number">5</span>;
   B : <span class="hljs-type">Integer</span> := <span class="hljs-number">10</span>;
   Sum : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   Sum := A + B;
   <span class="hljs-comment">-- A, B, and Sum are on the stack</span>
   <span class="hljs-comment">-- They are automatically cleaned up when Calculate_Sum exits</span>
<span class="hljs-keyword">end</span> Calculate_Sum;
</code></pre>
<p>The stack is fast and efficient because memory allocation and deallocation happen automatically. You don’t need to worry about freeing memory—you just use variables, and Ada handles the rest.</p>
<h3>10.1.2 The Heap</h3>
<p>The heap is like a big storage room where you can store items of varying sizes. In programming terms, the heap is used for dynamic memory allocation—when you need to create objects whose size or lifetime isn’t known at compile time.</p>
<p>In Ada, you use access types (similar to pointers in other languages) to allocate memory on the heap. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Integer;
Data : <span class="hljs-type">Integer_Access</span> := <span class="hljs-keyword">new</span> Integer'(<span class="hljs-number">10</span>);
</code></pre>
<p>Here, <code>Data</code> is an access type that points to an integer allocated on the heap. The key difference from the stack is that memory allocated on the heap doesn’t automatically get freed when you leave a function—you need to explicitly free it with <code>Data := null;</code> (though Ada’s controlled types make this unnecessary in many cases).</p>
<h3>10.1.3 Stack vs. Heap: When to Use Which</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Memory Type</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
<th style="text-align:left"><strong>Lifetime</strong></th>
<th style="text-align:left"><strong>Allocation Speed</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Stack</strong></td>
<td style="text-align:left">Local variables, fixed-size data</td>
<td style="text-align:left">Function scope</td>
<td style="text-align:left">Very fast</td>
</tr>
<tr>
<td style="text-align:left"><strong>Heap</strong></td>
<td style="text-align:left">Dynamic data, large structures</td>
<td style="text-align:left">Program scope or controlled lifetime</td>
<td style="text-align:left">Slower than stack</td>
</tr>
</tbody>
</table>
<p>For most everyday programming tasks, the stack is sufficient. But when you need to create data structures whose size depends on user input or runtime conditions, the heap becomes necessary. The important thing to remember is that with Ada’s controlled types, you rarely need to manually manage heap memory—Ada handles it for you.</p>
<h2>10.2 Access Types: Safe Pointers in Ada</h2>
<p>In many languages, pointers are powerful but dangerous. In C, for example, you can create dangling pointers (pointers to freed memory) or null pointers that cause crashes. Ada solves these problems with safe access types that are designed to be both powerful and reliable.</p>
<h3>10.2.1 Basic Access Types</h3>
<p>An access type in Ada is like a pointer in other languages, but with strong type safety. Here’s how you declare and use one:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Integer;
Data : <span class="hljs-type">Integer_Access</span> := <span class="hljs-keyword">new</span> Integer'(<span class="hljs-number">10</span>);
</code></pre>
<p>This creates an access type <code>Integer_Access</code> that points to an integer. <code>Data</code> is then initialized to point to a new integer with value 10 on the heap.</p>
<p>You can also create access types for records:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Person </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   Age  : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Person_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Person;
Person_Data : <span class="hljs-type">Person_Access</span> := <span class="hljs-keyword">new</span> Person'(Name =&gt; <span class="hljs-string">"Alice"</span>, Age =&gt; <span class="hljs-number">30</span>);
</code></pre>
<h3>10.2.2 Access Type Safety Features</h3>
<p>Ada’s access types include several safety features that prevent common pointer errors:</p>
<ul>
<li><strong>Null checking</strong>: Access types are automatically initialized to <code>null</code> unless explicitly assigned</li>
<li><strong>Type safety</strong>: You can’t accidentally assign an access type to a different type</li>
<li><strong>No pointer arithmetic</strong>: Ada doesn’t allow pointer arithmetic like in C, preventing many common errors</li>
<li><strong>Controlled cleanup</strong>: When combined with controlled types, access types automatically clean up resources</li>
</ul>
<p>For example, in C you might write:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-type">int</span> *data = <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));
*data = <span class="hljs-number">10</span>;
<span class="hljs-built_in">free</span>(data);
<span class="hljs-comment">// Now data is a dangling pointer</span>
</code></pre>
<p>In Ada, you’d use:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Integer;
Data : <span class="hljs-type">Integer_Access</span> := <span class="hljs-keyword">new</span> Integer'(<span class="hljs-number">10</span>);
<span class="hljs-comment">-- No need to free explicitly—controlled types handle it</span>
</code></pre>
<h3>10.2.3 Controlled Access Types</h3>
<p>The real power of Ada’s access types comes when combined with controlled types. This lets you automatically manage resources without manual cleanup:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">File_Handle </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">File_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">record</span>
      File : <span class="hljs-type">Ada.Text_IO.File_Type</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Open</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Name : <span class="hljs-type">String</span>; Mode : <span class="hljs-type">Ada.Text_IO.File_Mode</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Close</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Line</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Line : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>; Last : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Natural</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
<span class="hljs-keyword">end</span> File_Handle;
</code></pre>
<p>In this example, <code>File_Handle</code> is a controlled type that automatically closes the file when it goes out of scope. You don’t need to call <code>Close</code> explicitly—Ada handles it for you.</p>
<h2>10.3 Controlled Types: The Heart of Ada’s Memory Management</h2>
<p>Controlled types are Ada’s secret weapon for safe resource management. They let you define exactly what happens when an object is created, copied, or destroyed—ensuring that resources are always properly managed.</p>
<h3>10.3.1 What Are Controlled Types?</h3>
<p>A controlled type is a type that extends <code>Ada.Finalization.Controlled</code> and defines specific procedures to control its lifecycle. These procedures are:</p>
<ul>
<li><strong>Initialize</strong>: Called when the object is created</li>
<li><strong>Finalize</strong>: Called when the object goes out of scope</li>
<li><strong>Adjust</strong>: Called when the object is copied (if not limited)</li>
</ul>
<p>This gives you complete control over how resources are allocated and released.</p>
<h3>10.3.2 Creating a Controlled Type: The File Handle Example</h3>
<p>Let’s create a complete example of a controlled type for file handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;
<span class="hljs-keyword">with</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">File_Handle </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">File_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">record</span>
      File : <span class="hljs-type">Ada.Text_IO.File_Type</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Open</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Name : <span class="hljs-type">String</span>; Mode : <span class="hljs-type">Ada.Text_IO.File_Mode</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Close</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Line</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Line : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>; Last : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Natural</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
<span class="hljs-keyword">end</span> File_Handle;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">File_Handle </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.File := Ada.Text_IO.Closed_File;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Object.File /= Ada.Text_IO.Closed_File <span class="hljs-keyword">then</span>
         Ada.Text_IO.Close (Object.File);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Finalize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Open</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Name : <span class="hljs-type">String</span>; Mode : <span class="hljs-type">Ada.Text_IO.File_Mode</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Ada.Text_IO.Open (File =&gt; Object.File, Mode =&gt; Mode, Name =&gt; Name);
   <span class="hljs-keyword">end</span> Open;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Close</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Object.File /= Ada.Text_IO.Closed_File <span class="hljs-keyword">then</span>
         Ada.Text_IO.Close (Object.File);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Close;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Line</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Line : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>; Last : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Natural</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Ada.Text_IO.Get_Line (Object.File, Line, Last);
   <span class="hljs-keyword">end</span> Read_Line;

<span class="hljs-keyword">end</span> File_Handle;
</code></pre>
<p>Now let’s use this controlled type in a program:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> File_Handle;
<span class="hljs-keyword">with</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_File</span> <span class="hljs-keyword">is</span>
   F : <span class="hljs-type">File_Handle</span>;
<span class="hljs-keyword">begin</span>
   F.Open(<span class="hljs-string">"data.txt"</span>, Ada.Text_IO.In_File);
   <span class="hljs-keyword">declare</span>
      Line : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
      Last : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">begin</span>
      F.Read_Line(Line, Last);
      Ada.Text_IO.Put_Line(Line(<span class="hljs-number">1</span>..Last));
   <span class="hljs-keyword">end</span>;
   <span class="hljs-comment">-- No need to call Close; Finalize will do it when F goes out of scope</span>
<span class="hljs-keyword">end</span> Test_File;
</code></pre>
<p>When <code>F</code> goes out of scope at the end of <code>Test_File</code>, Ada automatically calls <code>Finalize</code>, which closes the file. You don’t need to remember to close it—Ada handles it for you.</p>
<h3>10.3.3 Why Controlled Types Matter</h3>
<p>Controlled types solve the most common memory management problems:</p>
<ul>
<li><strong>Resource leaks</strong>: Resources are automatically released when they’re no longer needed</li>
<li><strong>Dangling pointers</strong>: Objects are properly cleaned up, preventing invalid references</li>
<li><strong>Manual cleanup errors</strong>: You don’t have to remember to close files or free memory</li>
</ul>
<p>This is especially important for everyday programming tasks. Imagine a home automation system that reads sensor data from files—if you forget to close a file, the system might run out of file handles and crash. With controlled types, this simply can’t happen.</p>
<h2>10.4 How Controlled Types Work Under the Hood</h2>
<p>Let’s dive deeper into how controlled types work. When you create a controlled type, Ada automatically calls the <code>Initialize</code> procedure. When the object goes out of scope, Ada calls <code>Finalize</code>. If the object is copied, Ada calls <code>Adjust</code>.</p>
<h3>10.4.1 The Lifecycle of a Controlled Type</h3>
<ol>
<li><strong>Creation</strong>: When you declare a controlled type variable, <code>Initialize</code> is called</li>
<li><strong>Usage</strong>: You can use the object normally</li>
<li><strong>Copying</strong>: If the object is copied, <code>Adjust</code> is called</li>
<li><strong>Destruction</strong>: When the object goes out of scope, <code>Finalize</code> is called</li>
</ol>
<p>Here’s a simple example to demonstrate:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;
<span class="hljs-keyword">with</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Example </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Example_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Value : <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>);
<span class="hljs-keyword">end</span> Example;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Example </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Ada.Text_IO.Put_Line(<span class="hljs-string">"Initialize called"</span>);
      Object.Value := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Ada.Text_IO.Put_Line(<span class="hljs-string">"Finalize called"</span>);
   <span class="hljs-keyword">end</span> Finalize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Example_Type</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Ada.Text_IO.Put_Line(<span class="hljs-string">"Adjust called"</span>);
   <span class="hljs-keyword">end</span> Adjust;

<span class="hljs-keyword">end</span> Example;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Example;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test</span> <span class="hljs-keyword">is</span>
   A : <span class="hljs-type">Example.Example_Type</span>;
   B : <span class="hljs-type">Example.Example_Type</span>;
<span class="hljs-keyword">begin</span>
   A.Value := <span class="hljs-number">10</span>;
   B := A;  <span class="hljs-comment">-- Adjust is called here</span>
<span class="hljs-keyword">end</span> Test;
</code></pre>
<p>When you run this program, you’ll see:</p>
<pre><code class="hljs language-sql" data-highlighted="yes">Initialize <span class="hljs-keyword">called</span>
Initialize <span class="hljs-keyword">called</span>
Adjust <span class="hljs-keyword">called</span>
Finalize <span class="hljs-keyword">called</span>
Finalize <span class="hljs-keyword">called</span>
</code></pre>
<p>This shows the lifecycle of the controlled types. <code>Initialize</code> is called when each variable is created. <code>Adjust</code> is called when <code>B</code> is assigned from <code>A</code>. <code>Finalize</code> is called when each variable goes out of scope.</p>
<h3>10.4.2 When to Use Limited Controlled Types</h3>
<p>By default, controlled types can be copied. But for some resources (like file handles), copying doesn’t make sense—you don’t want two objects to manage the same file. That’s where limited controlled types come in.</p>
<p>A limited controlled type can’t be copied. You declare it like this:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">File_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">record</span>
   File : <span class="hljs-type">Ada.Text_IO.File_Type</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
</code></pre>
<p>The <code>limited</code> keyword means you can’t assign one <code>File_Handle</code> to another. This prevents accidental copying of resources that shouldn’t be shared.</p>
<h2>10.5 Memory Leaks: How Ada Prevents Them</h2>
<p>Memory leaks are one of the most common problems in programming. They occur when you allocate memory but never free it, causing your program to use more and more memory over time. In C, this is a frequent issue—you might forget to call <code>free</code>, or you might have complex code paths where freeing is easy to miss.</p>
<p>Ada prevents memory leaks through several mechanisms:</p>
<ul>
<li><strong>Controlled types</strong>: Resources are automatically cleaned up when objects go out of scope</li>
<li><strong>No manual memory management</strong>: You don’t need to call <code>malloc</code> or <code>free</code></li>
<li><strong>Automatic cleanup</strong>: Ada handles resource management for you</li>
</ul>
<p>Let’s compare how memory leaks happen in C versus how Ada prevents them.</p>
<h3>10.5.1 C Memory Leak Example</h3>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">Process_Data</span><span class="hljs-params">()</span> {
   <span class="hljs-type">int</span> *data = (<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));
   *data = <span class="hljs-number">10</span>;
   <span class="hljs-comment">// Forgot to free memory!</span>
}
</code></pre>
<p>This function allocates memory but never frees it, causing a memory leak.</p>
<h3>10.5.2 Ada Memory Leak Prevention</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">Data_Manager </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Data : <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Handle</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Handle</span>);
<span class="hljs-keyword">end</span> Data_Manager;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Data_Manager </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Handle</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Data := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Handle</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- No need to free—Ada handles it automatically</span>
   <span class="hljs-keyword">end</span> Finalize;

<span class="hljs-keyword">end</span> Data_Manager;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Data_Manager;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test</span> <span class="hljs-keyword">is</span>
   D : <span class="hljs-type">Data_Manager.Data_Handle</span>;
<span class="hljs-keyword">begin</span>
   D.Data := <span class="hljs-number">10</span>;
   <span class="hljs-comment">-- When D goes out of scope, Finalize is called automatically</span>
<span class="hljs-keyword">end</span> Test;
</code></pre>
<p>In Ada, there’s no manual memory management to forget. The <code>Data_Handle</code> object is automatically cleaned up when it goes out of scope, preventing any memory leaks.</p>
<h2>10.6 Memory Management in Ada vs. Other Languages</h2>
<p>Let’s compare how Ada handles memory management compared to other popular languages. This table shows the key differences:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Language</strong></th>
<th style="text-align:left"><strong>Memory Management Approach</strong></th>
<th style="text-align:left"><strong>Key Features</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>C</strong></td>
<td style="text-align:left">Manual allocation/deallocation</td>
<td style="text-align:left">Requires explicit <code>malloc</code>/<code>free</code>; prone to leaks and dangling pointers</td>
</tr>
<tr>
<td style="text-align:left"><strong>C++</strong></td>
<td style="text-align:left">RAII (Resource Acquisition Is Initialization)</td>
<td style="text-align:left">Automatic cleanup via destructors; requires careful design</td>
</tr>
<tr>
<td style="text-align:left"><strong>Java</strong></td>
<td style="text-align:left">Garbage collection</td>
<td style="text-align:left">Automatic memory management; no manual deallocation; but resources like files still need manual closing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Python</strong></td>
<td style="text-align:left">Garbage collection + context managers</td>
<td style="text-align:left">Automatic memory; context managers handle resources like files</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ada</strong></td>
<td style="text-align:left">Controlled types + automatic storage</td>
<td style="text-align:left">Automatic cleanup via Finalize; strong type safety; no dangling pointers</td>
</tr>
</tbody>
</table>
<p>Let’s explore each language in more detail.</p>
<h3>10.6.1 C: Manual Memory Management</h3>
<p>In C, you’re responsible for all memory management. You allocate memory with <code>malloc</code> and free it with <code>free</code>. This is powerful but error-prone—you might forget to free memory, or you might free it too early.</p>
<p>For example:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-type">int</span> *data = <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));
*data = <span class="hljs-number">10</span>;
<span class="hljs-comment">// Forgot to free!</span>
</code></pre>
<p>This code leaks memory. To fix it, you’d need to add <code>free(data);</code> at the end.</p>
<h3>10.6.2 C++: RAII</h3>
<p>C++ uses RAII (Resource Acquisition Is Initialization), where resources are tied to object lifetimes. When an object is created, it acquires resources; when it’s destroyed, it releases them.</p>
<p>For example:</p>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-keyword">class</span> <span class="hljs-title class_">File</span> {
<span class="hljs-keyword">public</span>:
   <span class="hljs-built_in">File</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name) { <span class="hljs-built_in">fopen</span>(name); }
   ~<span class="hljs-built_in">File</span>() { <span class="hljs-built_in">fclose</span>(); }
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Process</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-function">File <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-string">"data.txt"</span>)</span></span>;
   <span class="hljs-comment">// No need to close—destructor handles it</span>
}
</code></pre>
<p>This is similar to Ada’s controlled types, but C++ requires careful design to avoid issues like shallow copies.</p>
<h3>10.6.3 Java: Garbage Collection</h3>
<p>Java uses garbage collection to automatically reclaim memory. You don’t need to free memory manually, but you still need to close resources like files.</p>
<p>For example:</p>
<pre><code class="language-java hljs" data-highlighted="yes"><span class="hljs-type">FileReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">"data.txt"</span>);
<span class="hljs-keyword">try</span> {
   <span class="hljs-comment">// Process file</span>
} <span class="hljs-keyword">finally</span> {
   reader.close(); <span class="hljs-comment">// Must manually close</span>
}
</code></pre>
<p>Java’s garbage collector handles memory, but resources like files still need manual cleanup.</p>
<h3>10.6.4 Python: Context Managers</h3>
<p>Python uses context managers (the <code>with</code> statement) to handle resource cleanup.</p>
<p>For example:</p>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"data.txt"</span>) <span class="hljs-keyword">as</span> f:
   <span class="hljs-comment"># Process file</span>
<span class="hljs-comment"># 2 File is automatically closed</span>
</code></pre>
<p>This is similar to Ada’s controlled types, but Python’s approach is more limited—it only works for specific resource types.</p>
<h3>10.0.1 Ada: Controlled Types</h3>
<p>Ada’s controlled types combine the best of both worlds. They provide automatic resource cleanup without manual effort, while maintaining strong type safety.</p>
<p>For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> File_Handle;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test</span> <span class="hljs-keyword">is</span>
   F : <span class="hljs-type">File_Handle</span>;
<span class="hljs-keyword">begin</span>
   F.Open(<span class="hljs-string">"data.txt"</span>, Ada.Text_IO.In_File);
   <span class="hljs-comment">-- No need to close—Finalize handles it</span>
<span class="hljs-keyword">end</span> Test;
</code></pre>
<p>This is simpler and safer than C++, Java, or Python approaches. You don’t need to remember to close files, and there’s no risk of forgetting to free memory.</p>
<h2>10.1 Best Practices for Memory Management in Ada</h2>
<p>Now that you understand how Ada handles memory, let’s look at best practices for using it effectively.</p>
<h3>10.1.1 . Use Controlled Types for Any Resource That Needs Cleanup</h3>
<p>Whenever you have a resource that needs to be cleaned up (files, database connections, network sockets), use a controlled type. This ensures the resource is always properly released.</p>
<p>For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">Database_Connection </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Connection </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">record</span>
      Handle : <span class="hljs-type">Database_Handle</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Connect</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>; Name : <span class="hljs-type">String</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Disconnect</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Query</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>; SQL : <span class="hljs-type">String</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
<span class="hljs-keyword">end</span> Database_Connection;
</code></pre>
<p>This ensures the database connection is always properly closed, even if an exception occurs.</p>
<h3>10.1.2 . Avoid Manual Memory Management When Possible</h3>
<p>In Ada, you rarely need to manually manage memory. Let Ada handle it for you. For example, instead of:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Integer;
Data : <span class="hljs-type">Integer_Access</span> := <span class="hljs-keyword">new</span> Integer'(<span class="hljs-number">10</span>);
<span class="hljs-comment">-- ...</span>
Data := null; <span class="hljs-comment">-- Manual cleanup</span>
</code></pre>
<p>Use a controlled type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Value : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer_Handle</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Object.Value := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Initialize;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer_Handle</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- No cleanup needed—Ada handles it</span>
<span class="hljs-keyword">end</span> Finalize;
</code></pre>
<h3>10.1.3 . Understand the Difference Between Stack and Heap Allocation</h3>
<p>For small, fixed-size data, use stack allocation (local variables). For larger or dynamically-sized data, use heap allocation with controlled types.</p>
<p>For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Stack allocation for small data</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculate_Sum</span> <span class="hljs-keyword">is</span>
   A : <span class="hljs-type">Integer</span> := <span class="hljs-number">5</span>;
   B : <span class="hljs-type">Integer</span> := <span class="hljs-number">10</span>;
   Sum : <span class="hljs-type">Integer</span> := A + B;
<span class="hljs-keyword">end</span> Calculate_Sum;

<span class="hljs-comment">-- Heap allocation with controlled types for larger data</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Data_Manager </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Data : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Data_Manager;
</code></pre>
<h3>10.1.4 . Test for Memory Leaks</h3>
<p>Even with Ada’s automatic memory management, it’s good practice to test for memory leaks. Use tools like GNATcheck or GNATprove to verify your code.</p>
<p>For example, run:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatcheck your_program.adb
</code></pre>
<p>This will check for potential memory issues.</p>
<h3>10.1.5 . Use Ada’s Standard Containers</h3>
<p>Ada provides standard containers like <code>Ada.Containers.Vectors</code> and <code>Ada.Containers.Doubly_Linked_Lists</code> that use controlled types under the hood. These containers automatically manage memory for you.</p>
<p>For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Containers.Vectors;

<span class="hljs-keyword">package</span> <span class="hljs-title">Integer_Vectors </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Containers.Vectors (Index_Type =&gt; Natural, Element_Type =&gt; Integer);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test</span> <span class="hljs-keyword">is</span>
   V : <span class="hljs-type">Integer_Vectors.Vector</span>;
<span class="hljs-keyword">begin</span>
   V.Append(<span class="hljs-number">10</span>);
   V.Append(<span class="hljs-number">20</span>);
   <span class="hljs-comment">-- No need to free—container handles it</span>
<span class="hljs-keyword">end</span> Test;
</code></pre>
<h2>10.2 Real-World Example: A Simple Game with Memory Management</h2>
<p>Let’s build a simple game to see how Ada’s memory management works in practice.</p>
<h3>10.2.1 Game Overview</h3>
<p>We’ll create a simple game where the player collects items. Each item has a name and value. We’ll use controlled types to manage item memory automatically.</p>
<h3>10.2.2 Item Type with Controlled Memory</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">Item_Manager </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Item </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Name : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
      Value : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Name</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>; Name : <span class="hljs-type">String</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Value</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>; Value : <span class="hljs-type">Natural</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>);
<span class="hljs-keyword">end</span> Item_Manager;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Item_Manager </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Name := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-string">' '</span>);
      Object.Value := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- No cleanup needed—Ada handles it</span>
   <span class="hljs-keyword">end</span> Finalize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Name</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>; Name : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Name<span class="hljs-symbol">'Length</span> &gt; Object.Name<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Constraint_Error <span class="hljs-keyword">with</span> <span class="hljs-string">"Name too long"</span>;
      <span class="hljs-keyword">else</span>
         Object.Name(<span class="hljs-number">1</span>..Name<span class="hljs-symbol">'Length</span>) := Name;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Set_Name;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Value</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Item</span>; Value : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Value := Value;
   <span class="hljs-keyword">end</span> Set_Value;

<span class="hljs-keyword">end</span> Item_Manager;
</code></pre>
<h3>10.2.3 Game with Item Collection</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Item_Manager;
<span class="hljs-keyword">with</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Game</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">use</span> Ada.Text_IO;
   <span class="hljs-keyword">use</span> Item_Manager;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Item_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Item_Manager.Item;
   Items : <span class="hljs-type">Item_Array</span>;
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Add some items</span>
   Items(<span class="hljs-number">1</span>).Set_Name(<span class="hljs-string">"Sword"</span>);
   Items(<span class="hljs-number">1</span>).Set_Value(<span class="hljs-number">100</span>);

   Items(<span class="hljs-number">2</span>).Set_Name(<span class="hljs-string">"Shield"</span>);
   Items(<span class="hljs-number">2</span>).Set_Value(<span class="hljs-number">50</span>);

   <span class="hljs-comment">-- Display items</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Count <span class="hljs-keyword">loop</span>
      Put_Line(Items(I).Name &amp; <span class="hljs-string">" - "</span> &amp; Items(I).Value<span class="hljs-symbol">'Image</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-comment">-- No need to free items—controlled types handle it</span>
<span class="hljs-keyword">end</span> Game;
</code></pre>
<p>This game automatically manages memory for items. When the <code>Items</code> array goes out of scope, Ada automatically cleans up all the items—no manual cleanup needed.</p>
<h2>10.3 Exercises: Building Your Own Memory-Managed Systems</h2>
<p>Now that you’ve learned about Ada’s memory management, let’s put it into practice with some exercises.</p>
<h3>10.3.1 Exercise 1: Database Connection Manager</h3>
<p>Create a controlled type for a database connection that automatically closes the connection when it goes out of scope.</p>
<blockquote>
<p><strong>Challenge</strong>: Prove that your database connection is always properly closed, even if an exception occurs.</p>
</blockquote>
<h4>10.3.1.1 Solution Guidance</h4>
<p>Start by defining your controlled type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">Database_Connection </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Connection </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">record</span>
      Handle : <span class="hljs-type">Database_Handle</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Connect</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>; Name : <span class="hljs-type">String</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Query</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>; SQL : <span class="hljs-type">String</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>);
<span class="hljs-keyword">end</span> Database_Connection;
</code></pre>
<p>Then implement the package body:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Database_Connection </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Handle := Null_Handle;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Object.Handle /= Null_Handle <span class="hljs-keyword">then</span>
         Close_Connection(Object.Handle);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Finalize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Connect</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>; Name : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Handle := Open_Connection(Name);
   <span class="hljs-keyword">end</span> Connect;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Query</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Connection</span>; SQL : <span class="hljs-type">String</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := Execute_Query(Object.Handle, SQL);
   <span class="hljs-keyword">end</span> Query;

<span class="hljs-keyword">end</span> Database_Connection;
</code></pre>
<p>Now test it with a program that uses the connection:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Database_Connection;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Database</span> <span class="hljs-keyword">is</span>
   C : <span class="hljs-type">Database_Connection.Connection</span>;
<span class="hljs-keyword">begin</span>
   C.Connect(<span class="hljs-string">"mydb"</span>);
   <span class="hljs-keyword">declare</span>
      Result : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>);
   <span class="hljs-keyword">begin</span>
      C.Query(<span class="hljs-string">"SELECT * FROM users"</span>, Result);
      Put_Line(Result);
   <span class="hljs-keyword">end</span>;
   <span class="hljs-comment">-- Connection is automatically closed when C goes out of scope</span>
<span class="hljs-keyword">end</span> Test_Database;
</code></pre>
<p>This ensures your database connection is always properly closed, even if an exception occurs during the query.</p>
<h3>10.3.2 Exercise 2: Dynamic Array with Automatic Memory Management</h3>
<p>Create a controlled type for a dynamic array that automatically allocates and frees memory as needed.</p>
<blockquote>
<p><strong>Challenge</strong>: Implement a dynamic array that can grow and shrink as needed, with automatic memory management.</p>
</blockquote>
<h4>10.3.2.1 Solution Guidance</h4>
<p>Start by defining your controlled type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">Dynamic_Array </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Dynamic_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      Data : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Integer_Array</span>;
      Size : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Append</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>; Value : <span class="hljs-type">Integer</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> (Object : <span class="hljs-type">Dynamic_Array</span>; Index : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Natural <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Integer;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>);
<span class="hljs-keyword">end</span> Dynamic_Array;
</code></pre>
<p>Then implement the package body:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Dynamic_Array </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Data := <span class="hljs-keyword">new</span> Integer_Array(<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
      Object.Size := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Object.Data /= null <span class="hljs-keyword">then</span>
         free(Object.Data);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Finalize;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Adjust</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Object.Data := <span class="hljs-keyword">new</span> Integer_Array(Object.Data.<span class="hljs-keyword">all</span>);
   <span class="hljs-keyword">end</span> Adjust;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Append</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Dynamic_Array</span>; Value : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Object.Size = Object.Data<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">then</span>
         <span class="hljs-comment">-- Grow the array</span>
         <span class="hljs-keyword">declare</span>
            New_Data : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Integer_Array</span> := <span class="hljs-keyword">new</span> Integer_Array(<span class="hljs-number">1</span>..Object.Data<span class="hljs-symbol">'Length</span> * <span class="hljs-number">2</span>);
         <span class="hljs-keyword">begin</span>
            New_Data(<span class="hljs-number">1</span>..Object.Data<span class="hljs-symbol">'Length</span>) := Object.Data.<span class="hljs-keyword">all</span>;
            New_Data(Object.Data<span class="hljs-symbol">'Length</span> + <span class="hljs-number">1</span>) := Value;
            free(Object.Data);
            Object.Data := New_Data;
            Object.Size := Object.Size + <span class="hljs-number">1</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">else</span>
         Object.Data(Object.Size + <span class="hljs-number">1</span>) := Value;
         Object.Size := Object.Size + <span class="hljs-number">1</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Append;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> (Object : <span class="hljs-type">Dynamic_Array</span>; Index : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Object.Data(Index);
   <span class="hljs-keyword">end</span> Get;

<span class="hljs-keyword">end</span> Dynamic_Array;
</code></pre>
<p>Now test it with a program:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Dynamic_Array;
<span class="hljs-keyword">with</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Dynamic_Array</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">use</span> Ada.Text_IO;
   A : <span class="hljs-type">Dynamic_Array.Dynamic_Array</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">15</span> <span class="hljs-keyword">loop</span>
      A.Append(I);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;

   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..A.Size <span class="hljs-keyword">loop</span>
      Put_Line(A.Get(I)<span class="hljs-symbol">'Image</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-comment">-- Memory is automatically freed when A goes out of scope</span>
<span class="hljs-keyword">end</span> Test_Dynamic_Array;
</code></pre>
<p>This dynamic array automatically allocates and frees memory as needed, with no manual cleanup required.</p>
<h2>10.4 Next Steps: Mastering Ada’s Memory Management</h2>
<p>Now that you’ve learned the basics of Ada’s memory management, you’re ready to take your skills to the next level. Here are some next steps:</p>
<ol>
<li>
<p><strong>Explore Ada’s standard containers</strong>: Ada provides powerful containers like vectors, lists, and maps that use controlled types under the hood. These containers automatically manage memory for you, so you can focus on your application logic.</p>
</li>
<li>
<p><strong>Learn about controlled types with access types</strong>: You can combine controlled types with access types to create more complex resource management systems. For example, you could create a controlled type that manages a pool of resources.</p>
</li>
<li>
<p><strong>Try formal verification</strong>: Ada’s SPARK toolset allows you to formally verify your memory management code. This ensures that your code is free of memory leaks and other issues.</p>
</li>
<li>
<p><strong>Build a larger project</strong>: Apply what you’ve learned to build a larger project, like a home automation system or a simple game. Use controlled types to manage resources like files, sensors, and game assets.</p>
</li>
</ol>
<blockquote>
<p><strong>The Power of Controlled Types</strong></p>
<p>“Ada’s controlled types transform memory management from a source of bugs into a reliable engineering tool. With controlled types, you don’t have to worry about manual cleanup—you can focus on what your program does rather than how it manages resources.”</p>
</blockquote>
<p>Memory management is a fundamental part of programming, but with Ada, it’s simple and safe. Whether you’re building a simple calculator or a complex home automation system, Ada’s controlled types ensure that your resources are always properly managed. This means your code is simpler, safer, and less prone to errors.</p>
<h1>11. Aspect Specifications and Pragmas in Ada</h1>
<blockquote>
<p><strong>What Aspects and Pragmas Are</strong></p>
<p>“Aspects and pragmas are like special notes you write for the compiler - they don’t change what your program does, but they tell the compiler how to handle your code better.”</p>
</blockquote>
<p>When you’re learning to program, you might wonder: “How do I tell the compiler special things about my code?” Maybe you want to tell it to check certain conditions, optimize a function, or disable specific warnings. In Ada, you do this with <strong>aspect specifications</strong> and <strong>pragmas</strong>. These are special annotations that give the compiler additional information about your code without changing its logic.</p>
<p>For example, imagine you’re writing a function to calculate the area of a rectangle:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>This works fine, but what if you want to make sure the width and height are positive? You could add a comment:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Width and Height must be positive</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>But comments aren’t checked by the compiler. With aspects, you can make the compiler actually enforce this:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Width &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Height &gt; <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>Now the compiler will check that <code>Width</code> and <code>Height</code> are positive before calling this function. If you try to call it with negative values, it will raise an error.</p>
<p>This is the power of aspects and pragmas - they let you tell the compiler exactly what you want it to do with your code, making your programs more reliable and efficient.</p>
<h2>11.1 Understanding Aspect Specifications</h2>
<p>Aspect specifications are a modern feature introduced in Ada 2012 that allow you to attach properties directly to declarations. They’re more flexible and readable than older pragmas for many common tasks.</p>
<h3>11.1.1 Basic Syntax of Aspect Specifications</h3>
<p>Aspect specifications use the <code>with</code> keyword followed by the aspect name and value:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">My_Procedure</span> <span class="hljs-keyword">with</span>
   Aspect_Name =&gt; Value;
</code></pre>
<p>You can specify multiple aspects:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">My_Procedure</span> <span class="hljs-keyword">with</span>
   Aspect1 =&gt; Value1,
   Aspect2 =&gt; Value2;
</code></pre>
<p>For example, here’s how to specify preconditions and postconditions for a function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; X &gt;= <span class="hljs-number">0</span>,
   Post =&gt; Square<span class="hljs-symbol">'Result</span> = X * X;
</code></pre>
<h3>11.1.2 Where Aspects Can Be Used</h3>
<p>Aspects can be used on many different kinds of declarations:</p>
<ul>
<li><strong>Subprograms</strong> (functions, procedures)</li>
<li><strong>Types</strong> (records, arrays, etc.)</li>
<li><strong>Packages</strong></li>
<li><strong>Variables</strong></li>
<li><strong>Constants</strong></li>
<li><strong>Exceptions</strong></li>
</ul>
<p>Let’s look at examples of aspects on different entities.</p>
<h3>11.1.3 Aspects on Subprograms</h3>
<p>Subprograms are where aspects are most commonly used. Here’s how to specify preconditions, postconditions, and other properties:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Divide<span class="hljs-symbol">'Result</span> * B = A;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Temp &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">50.0</span>,
   Post =&gt; Current_Temperature = Temp;
</code></pre>
<p>These aspects tell the compiler to check that the input values meet certain conditions before the function is called, and that the output meets certain conditions after it returns.</p>
<h3>11.1.4 Aspects on Types</h3>
<p>You can use aspects to specify properties that must always be true for a type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Temperature &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temperature &lt;= <span class="hljs-number">50.0</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Valid_String </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> String (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>) <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Valid_String<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
</code></pre>
<p>For records, you can specify invariants that apply to the entire record:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Person </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Name  : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   Age   : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Person.Age &lt;= <span class="hljs-number">120</span>;
</code></pre>
<h3>11.1.5 Aspects on Packages</h3>
<p>You can specify aspects on packages too:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Math_Utils with</span>
   SPARK_Mode =&gt; On
<span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Cube</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<p>This tells the compiler to use SPARK mode for this package, which enables formal verification.</p>
<h2>11.2 Common Aspect Specifications</h2>
<p>Ada has many built-in aspects that you can use to enhance your code. Let’s look at the most common ones.</p>
<h3>11.2.1 Pre and Post Conditions</h3>
<p>Preconditions (<code>Pre</code>) and postconditions (<code>Post</code>) are used to specify what a subprogram expects and guarantees.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Discount</span> (Price : <span class="hljs-type">Float</span>; <span class="hljs-keyword">Is</span>_Premium : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">with</span>
   Pre  =&gt; Price &gt; <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Discount<span class="hljs-symbol">'Result</span> &lt;= Price;
</code></pre>
<p>This specifies that the price must be positive before calling the function, and the result must not exceed the original price.</p>
<h3>11.2.2 Type Invariants</h3>
<p>Type invariants specify properties that must always be true for a type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Bank_Account </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Balance : <span class="hljs-type">Float</span>;
   Owner   : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Bank_Account.Balance &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span>
                     Bank_Account.Owner<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
</code></pre>
<p>This ensures that bank accounts always have non-negative balances and non-empty owner names.</p>
<h3>11.2.3 SPARK Mode</h3>
<p>SPARK mode enables formal verification for your code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Safety_Critical with</span>
   SPARK_Mode =&gt; On
<span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor</span> (Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Value &gt;= <span class="hljs-number">0.0</span>,
      Post =&gt; Process_Sensor<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>;
<span class="hljs-keyword">end</span> Safety_Critical;
</code></pre>
<p>This tells the compiler to check your code for correctness using formal methods.</p>
<h3>11.2.4 Other Common Aspects</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Aspect</strong></th>
<th style="text-align:left"><strong>Purpose</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Inline</strong></td>
<td style="text-align:left">Suggests the compiler inline the subprogram</td>
<td style="text-align:left"><code>procedure Add (A, B : Integer) with Inline;</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Suppress</strong></td>
<td style="text-align:left">Disables specific compiler checks</td>
<td style="text-align:left"><code>pragma Suppress (Range_Check);</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Convention</strong></td>
<td style="text-align:left">Specifies calling convention for interfacing</td>
<td style="text-align:left"><code>procedure C_Function with Convention =&gt; C;</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Import</strong></td>
<td style="text-align:left">Imports an external function</td>
<td style="text-align:left"><code>procedure External_Function with Import, Convention =&gt; C;</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Default_Initial_Condition</strong></td>
<td style="text-align:left">Specifies initial state for objects</td>
<td style="text-align:left"><code>type Counter with Default_Initial_Condition =&gt; 0;</code></td>
</tr>
</tbody>
</table>
<h2>11.3 Understanding Pragmas</h2>
<p>Pragmas are compiler directives that have been part of Ada since the beginning. They’re used for a wide variety of purposes, from optimizing code to controlling compiler behavior.</p>
<h3>11.3.1 Basic Syntax of Pragmas</h3>
<p>Pragmas use the <code>pragma</code> keyword followed by the pragma name and parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Pragma_Name (Parameter);
</code></pre>
<p>For example, to inline a function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Add);
</code></pre>
<p>You can also use pragmas with multiple parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Suppress (Range_Check, Divide_Check);
</code></pre>
<h3>11.3.2 Where Pragmas Can Be Used</h3>
<p>Pragmas can be used in various places in your code:</p>
<ul>
<li>At the beginning of a declaration</li>
<li>Inside a package or subprogram body</li>
<li>In a separate compilation unit</li>
</ul>
<p>For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Calculate_Area);

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<h3>11.3.3 Common Pragmas</h3>
<p>Ada has many built-in pragmas. Let’s look at the most common ones.</p>
<h4>11.3.3.1 Inline</h4>
<p>Tells the compiler to replace a function call with the function’s code directly:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Calculate_Area);

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>This can improve performance for small, frequently called functions.</p>
<h4>11.3.3.2 Suppress</h4>
<p>Disables specific compiler checks to improve performance:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Suppress (Range_Check);

<span class="hljs-keyword">function</span> <span class="hljs-title">Safe_Get</span> (A : <span class="hljs-type">Integer_Array</span>; Index : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> A(Index);
<span class="hljs-keyword">end</span> Safe_Get;
</code></pre>
<p>This disables range checking for this function, but you should only do this when you’re sure the index is always valid.</p>
<h4>11.3.3.3 Convention</h4>
<p>Specifies the calling convention for interfacing with other languages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Convention (C, C_Function);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">C_Function</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   external;
</code></pre>
<p>This tells the compiler to use the C calling convention for this function.</p>
<h4>11.3.3.4 Import</h4>
<p>Imports an external function from another language:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Import (C, External_Function);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">External_Function</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   external;
</code></pre>
<p>This allows you to call C functions from your Ada code.</p>
<h4>11.3.3.5 Assert</h4>
<p>Checks a condition at runtime:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">pragma</span> Assert (X &gt; <span class="hljs-number">0</span>);
   <span class="hljs-comment">-- Process X</span>
<span class="hljs-keyword">end</span> Process;
</code></pre>
<p>This checks that <code>X</code> is positive at runtime and raises an error if not.</p>
<h3>11.3.4 Pragmas vs. Aspects</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>Aspects</strong></th>
<th style="text-align:left"><strong>Pragmas</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Introduction</strong></td>
<td style="text-align:left">Ada 2012</td>
<td style="text-align:left">Ada 83 and earlier</td>
</tr>
<tr>
<td style="text-align:left"><strong>Syntax</strong></td>
<td style="text-align:left"><code>with Aspect =&gt; Value</code></td>
<td style="text-align:left"><code>pragma Pragma_Name (Parameters)</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Readability</strong></td>
<td style="text-align:left">More readable, integrated with declarations</td>
<td style="text-align:left">Less readable, separate from declarations</td>
</tr>
<tr>
<td style="text-align:left"><strong>Use Cases</strong></td>
<td style="text-align:left">Specifications, contracts, type properties</td>
<td style="text-align:left">Compiler directives, optimization, interfacing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Flexibility</strong></td>
<td style="text-align:left">More flexible for specifications</td>
<td style="text-align:left">More flexible for compiler control</td>
</tr>
</tbody>
</table>
<p>As a general rule:</p>
<ul>
<li>Use <strong>aspects</strong> for specifications (preconditions, postconditions, type invariants)</li>
<li>Use <strong>pragmas</strong> for compiler directives (inlining, suppressing checks, interfacing)</li>
</ul>
<h2>11.4 Practical Examples: Aspects and Pragmas in Everyday Programming</h2>
<p>Let’s look at some practical examples of how aspects and pragmas can improve your everyday programming.</p>
<h3>11.4.1 Example 1: File Handling with Aspect Specifications</h3>
<p>Imagine you’re writing a program that reads data from a file. You can use aspects to specify what the file must contain:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_File</span> (Filename : <span class="hljs-type">String</span>; Data : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Ada.Text_IO.Exists (Filename),
   Post =&gt; Data<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_File</span> (Filename : <span class="hljs-type">String</span>; Data : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
   File : <span class="hljs-type">Ada.Text_IO.File_Type</span>;
<span class="hljs-keyword">begin</span>
   Ada.Text_IO.Open (File, Ada.Text_IO.In_File, Filename);
   Ada.Text_IO.Get_Line (File, Data);
   Ada.Text_IO.Close (File);
<span class="hljs-keyword">end</span> Read_File;
</code></pre>
<p>This ensures that the file exists before reading and that data is actually read.</p>
<h3>11.4.2 Example 2: Optimizing a Small Function with Pragmas</h3>
<p>For small, frequently called functions, you can use pragmas to improve performance:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Calculate_Area);

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>This tells the compiler to replace calls to <code>Calculate_Area</code> with the actual code, eliminating the function call overhead.</p>
<h3>11.4.3 Example 3: Type Safety with Type Invariants</h3>
<p>You can use type invariants to ensure your data structures always stay valid:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Bank_Account </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Balance : <span class="hljs-type">Float</span>;
   Owner   : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Bank_Account.Balance &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span>
                     Bank_Account.Owner<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
</code></pre>
<p>Now, any time you create or modify a <code>Bank_Account</code>, Ada will check that the balance is non-negative and the owner name is not empty.</p>
<h3>11.4.4 Example 4: Interfacing with C Libraries</h3>
<p>When working with C libraries, you can use pragmas to properly interface with them:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Import (C, C_Sqrt);

<span class="hljs-keyword">function</span> <span class="hljs-title">C_Sqrt</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
</code></pre>
<p>This tells the compiler that <code>C_Sqrt</code> is implemented in C and should be called using the C calling convention.</p>
<h2>11.5 Common Pitfalls and How to Avoid Them</h2>
<p>Even with aspects and pragmas, beginners can make mistakes. Let’s look at common pitfalls and how to avoid them.</p>
<h3>11.5.1 Pitfall 1: Using Pragmas for Specifications</h3>
<p>Many beginners try to use pragmas for things that should be aspects. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad practice: Using pragma for preconditions</span>
<span class="hljs-keyword">pragma</span> Pre (Width &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Height &gt; <span class="hljs-number">0</span>);
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>This is incorrect because <code>Pre</code> is an aspect, not a pragma. The correct way is:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Width &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Height &gt; <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<h3>11.5.2 Pitfall 2: Suppressing Checks Without Understanding</h3>
<p>It’s tempting to suppress checks to improve performance, but this can lead to subtle bugs:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad practice: Suppressing all checks without understanding</span>
<span class="hljs-keyword">pragma</span> Suppress (All_Checks);

<span class="hljs-keyword">function</span> <span class="hljs-title">Safe_Get</span> (A : <span class="hljs-type">Integer_Array</span>; Index : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> A(Index);
<span class="hljs-keyword">end</span> Safe_Get;
</code></pre>
<p>This disables all runtime checks, including range checks and divide-by-zero checks. A better approach is to only suppress the specific checks you need:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Better practice: Suppress only necessary checks</span>
<span class="hljs-keyword">pragma</span> Suppress (Range_Check);

<span class="hljs-keyword">function</span> <span class="hljs-title">Safe_Get</span> (A : <span class="hljs-type">Integer_Array</span>; Index : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Ensure index is valid through other means</span>
   <span class="hljs-keyword">return</span> A(Index);
<span class="hljs-keyword">end</span> Safe_Get;
</code></pre>
<h3>11.5.3 Pitfall 3: Using Aspects on the Wrong Entity</h3>
<p>Aspects must be used on the correct entity. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad practice: Using Type_Invariant on a variable</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Integer <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Integer;
Data : <span class="hljs-type">Integer_Array</span> <span class="hljs-keyword">with</span> Type_Invariant =&gt; Data<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
</code></pre>
<p>This is incorrect because <code>Type_Invariant</code> applies to types, not variables. The correct way is:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Safe_Integer_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Integer <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Integer <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Safe_Integer_Array<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;

Data : <span class="hljs-type">Safe_Integer_Array</span>;
</code></pre>
<h3>11.5.4 Pitfall 4: Misunderstanding When Aspects Are Checked</h3>
<p>Not all aspects are checked at runtime by default. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; B /= <span class="hljs-number">0.0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> A / B;
<span class="hljs-keyword">end</span> Divide;
</code></pre>
<p>This <code>Pre</code> aspect will only be checked if you compile with <code>-gnata</code> (or similar) compiler flag. Without it, the precondition is ignored.</p>
<h3>11.5.5 Pitfall 5: Using Pragmas for Things That Should Be Aspects</h3>
<p>Many pragmas have aspect equivalents that are more readable:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad practice: Using pragma for inlining</span>
<span class="hljs-keyword">pragma</span> Inline (Calculate_Area);

<span class="hljs-comment">-- Better practice: Using aspect for inlining</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Inline;
</code></pre>
<p>The aspect syntax is more readable and integrates better with the declaration.</p>
<h2>11.6 Best Practices for Using Aspects and Pragmas</h2>
<p>To get the most out of aspects and pragmas, follow these best practices:</p>
<h3>11.6.1 . Use Aspects for Specifications</h3>
<p>For preconditions, postconditions, type invariants, and other specifications, use aspects rather than pragmas:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good practice: Using aspects for specifications</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; X &gt;= <span class="hljs-number">0</span>,
   Post =&gt; Square<span class="hljs-symbol">'Result</span> = X * X;
</code></pre>
<h3>11.6.2 . Use Pragmas for Compiler Directives</h3>
<p>For compiler-specific directives like inlining, suppressing checks, or interfacing, use pragmas:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good practice: Using pragmas for compiler directives</span>
<span class="hljs-keyword">pragma</span> Inline (Calculate_Area);
<span class="hljs-keyword">pragma</span> Suppress (Range_Check);
</code></pre>
<h3>11.6.3 . Be Specific with Suppression</h3>
<p>When suppressing checks, be specific about which checks you’re suppressing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good practice: Being specific with suppression</span>
<span class="hljs-keyword">pragma</span> Suppress (Range_Check);
<span class="hljs-keyword">pragma</span> Suppress (Divide_Check);
</code></pre>
<p>Rather than suppressing all checks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad practice: Suppressing all checks</span>
<span class="hljs-keyword">pragma</span> Suppress (All_Checks);
</code></pre>
<h3>11.6.4 . Document Your Aspects and Pragmas</h3>
<p>Add comments to explain why you’re using a particular aspect or pragma:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Using aspect for preconditions to ensure valid input</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Width &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Height &gt; <span class="hljs-number">0</span>;

<span class="hljs-comment">-- Using pragma for inlining because this function is called frequently</span>
<span class="hljs-keyword">pragma</span> Inline (Calculate_Area);
</code></pre>
<h3>11.6.5 . Test Your Code with Aspects Enabled</h3>
<p>When using aspects like preconditions, make sure to test with compiler flags that enable aspect checking:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -gnata your_program.adb
</code></pre>
<p>This ensures that your aspects are actually checked during testing.</p>
<h2>11.7 Practical Exercise: Building a Safe Temperature Controller</h2>
<p>Let’s put what we’ve learned into practice with a complete example of a temperature controller that uses aspects and pragmas.</p>
<h3>11.7.1 Step 1: Define the Temperature Type with Type Invariant</h3>
<p>First, we’ll define a temperature type that ensures values are within a reasonable range:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Celsius &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Celsius &lt;= <span class="hljs-number">100.0</span>;
</code></pre>
<p>This ensures that any temperature value is between -50°C and 100°C.</p>
<h3>11.7.2 Step 2: Create a Safe Temperature Setting Function</h3>
<p>Next, we’ll create a function to set the temperature with preconditions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Temp &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">100.0</span>,
   Post =&gt; Current_Temperature = Temp;
</code></pre>
<h3>11.7.3 Step 3: Add a Function to Calculate Heat Output</h3>
<p>Now, let’s create a function to calculate heat output with aspects:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Heat_Output</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Temp &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">100.0</span>,
   Post =&gt; Calculate_Heat_Output<span class="hljs-symbol">'Result</span> &gt;= <span class="hljs-number">0.0</span>;
</code></pre>
<h3>11.7.4 Step 4: Optimize a Small Function with Pragmas</h3>
<p>For small, frequently called functions, we can use pragmas for optimization:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Calculate_Heat_Output);

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Heat_Output</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> (Temp + <span class="hljs-number">50.0</span>) * <span class="hljs-number">0.5</span>; <span class="hljs-comment">-- Simple calculation</span>
<span class="hljs-keyword">end</span> Calculate_Heat_Output;
</code></pre>
<h3>11.7.5 Step 5: Create a Complete Temperature Controller</h3>
<p>Let’s put it all together in a complete temperature controller:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Controller </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">with</span>
      Type_Invariant =&gt; Celsius &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Celsius &lt;= <span class="hljs-number">100.0</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Temp &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">100.0</span>,
      Post =&gt; Current_Temperature = Temp;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span>;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Heat_Output</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; Temp &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">100.0</span>,
      Post =&gt; Calculate_Heat_Output<span class="hljs-symbol">'Result</span> &gt;= <span class="hljs-number">0.0</span>;

<span class="hljs-keyword">private</span>
   Current_Temperature : <span class="hljs-type">Celsius</span> := <span class="hljs-number">22.0</span>;

<span class="hljs-keyword">end</span> Temperature_Controller;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Controller </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">pragma</span> Inline (Calculate_Heat_Output);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Heat_Output</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Temp + <span class="hljs-number">50.0</span>) * <span class="hljs-number">0.5</span>;
   <span class="hljs-keyword">end</span> Calculate_Heat_Output;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Current_Temperature := Temp;
   <span class="hljs-keyword">end</span> Set_Temperature;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Current_Temperature;
   <span class="hljs-keyword">end</span> Get_Temperature;

<span class="hljs-keyword">end</span> Temperature_Controller;
</code></pre>
<h3>11.7.6 Step 6: Test the Temperature Controller</h3>
<p>Now let’s test our temperature controller:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Temperature_Controller; <span class="hljs-keyword">use</span> Temperature_Controller;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Temperature</span> <span class="hljs-keyword">is</span>
   Temp : <span class="hljs-type">Celsius</span>;
<span class="hljs-keyword">begin</span>
   Set_Temperature(<span class="hljs-number">25.0</span>);
   Temp := Get_Temperature;
   Put_Line (<span class="hljs-string">"Current temperature: "</span> &amp; Temp<span class="hljs-symbol">'Image</span>);
   
   Put_Line (<span class="hljs-string">"Heat output: "</span> &amp; Calculate_Heat_Output(Temp)<span class="hljs-symbol">'Image</span>);
   
   <span class="hljs-comment">-- This would fail at runtime with -gnata:</span>
   <span class="hljs-comment">-- Set_Temperature(-60.0);</span>
<span class="hljs-keyword">end</span> Test_Temperature;
</code></pre>
<p>When compiled with <code>-gnata</code>, the program will check that temperatures stay within the valid range. If you try to set a temperature outside the range, it will raise an error.</p>
<h2>11.8 Aspects and Pragmas in Real-World Applications</h2>
<p>Let’s look at how aspects and pragmas are used in real-world applications.</p>
<h3>11.8.1 Example 1: Web Server with Aspect Specifications</h3>
<p>A web server might use aspects to ensure proper handling of requests:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Request</span> (Request : <span class="hljs-type">String</span>; Response : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; Request<span class="hljs-symbol">'Length</span> &lt;= MAX_REQUEST_SIZE,
   Post =&gt; Response<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
</code></pre>
<p>This ensures that requests aren’t too large and that responses are always generated.</p>
<h3>11.8.2 Example 2: Data Processing with Type Invariants</h3>
<p>A data processing application might use type invariants to ensure data consistency:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Valid_Data </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Value : <span class="hljs-type">Float</span>;
   Quality : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Valid_Data.Value &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span>
                     Valid_Data.Quality &lt;= <span class="hljs-number">100</span>;
</code></pre>
<p>This ensures that data values are non-negative and quality scores are between 0 and 100.</p>
<h3>11.8.3 Example 3: Performance Optimization with Pragmas</h3>
<p>For performance-critical code, pragmas can make a big difference:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Calculate_Distance);

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Distance</span> (X1, Y1, X2, Y2 : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> sqrt((X2 - X1)**<span class="hljs-number">2</span> + (Y2 - Y1)**<span class="hljs-number">2</span>);
<span class="hljs-keyword">end</span> Calculate_Distance;
</code></pre>
<p>This tells the compiler to inline the distance calculation, eliminating function call overhead.</p>
<h2>11.9 Next Steps: Taking Your Skills Further</h2>
<p>Now that you’ve learned about aspects and pragmas, here are some next steps to continue your Ada journey:</p>
<h3>11.9.1 . Explore Advanced Aspects</h3>
<p>Ada has many more aspects you can explore:</p>
<ul>
<li><code>SPARK_Mode</code> for formal verification</li>
<li><code>Default_Initial_Condition</code> for type initialization</li>
<li><code>Nonblocking</code> for tasking</li>
<li><code>Atomic</code> for concurrent programming</li>
</ul>
<h3>11.9.2 . Learn About Compiler Flags</h3>
<p>Learn how to use compiler flags to enable different levels of aspect checking:</p>
<ul>
<li><code>-gnata</code> enables contract checking</li>
<li><code>-gnatp</code> enables all checks</li>
<li><code>-gnatwa</code> enables all warnings</li>
</ul>
<h3>11.9.3 . Try Formal Verification</h3>
<p>With SPARK, you can use aspects to formally verify your code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Safety_Critical with</span>
   SPARK_Mode =&gt; On
<span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor</span> (Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Value &gt;= <span class="hljs-number">0.0</span>,
      Post =&gt; Process_Sensor<span class="hljs-symbol">'Result</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">100.0</span>;
<span class="hljs-keyword">end</span> Safety_Critical;
</code></pre>
<h3>11.9.4 . Build Larger Projects</h3>
<p>Apply what you’ve learned to build larger projects:</p>
<ul>
<li>A home automation system with temperature control</li>
<li>A simple game with performance-critical code</li>
<li>A data processing application with strict data validation</li>
</ul>
<blockquote>
<p><strong>The Power of Aspects and Pragmas</strong></p>
<p>“Aspects and pragmas are like tools in your programming toolbox - they don’t change what your program does, but they help you build better, more reliable programs.”</p>
</blockquote>
<p>Aspects and pragmas might seem like small features, but they’re incredibly powerful. They let you tell the compiler exactly what you want it to do with your code, making your programs more reliable and efficient.</p>
<p>For beginners, aspects and pragmas might seem like advanced topics, but they’re actually quite simple to use. By using aspects for specifications and pragmas for compiler directives, you can write code that’s more reliable and easier to maintain.</p>
<p>As you continue your Ada journey, remember that aspects and pragmas are just tools to help you build better programs. Use them wisely, and you’ll find that your code becomes more reliable, more efficient, and easier to understand.</p>
<h2>11.10 Exercises: Putting Your Knowledge to Work</h2>
<p>Now it’s time to practice what you’ve learned with some exercises.</p>
<h3>11.10.1 Exercise 1: Safe File Handling</h3>
<p>Create a file handling package that uses aspects to ensure proper file operations.</p>
<blockquote>
<p><strong>Challenge</strong>: Make sure files are properly closed even when exceptions occur.</p>
</blockquote>
<h4>11.10.1.1 Solution Guidance</h4>
<p>Start by defining a controlled type for file handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Finalization;

<span class="hljs-keyword">package</span> <span class="hljs-title">File_Handler </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">File_Handle </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Finalization.Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
      File : <span class="hljs-type">Ada.Text_IO.File_Type</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Open</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Name : <span class="hljs-type">String</span>; Mode : <span class="hljs-type">Ada.Text_IO.File_Mode</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Line</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Line : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">String</span>; Last : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Natural</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>);
<span class="hljs-keyword">end</span> File_Handler;
</code></pre>
<p>Then add aspects to the procedures:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Open</span> (Object : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">File_Handle</span>; Name : <span class="hljs-type">String</span>; Mode : <span class="hljs-type">Ada.Text_IO.File_Mode</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; <span class="hljs-keyword">not</span> Ada.Text_IO.Is_Open (Object.File);
</code></pre>
<p>This ensures the file isn’t already open before opening it again.</p>
<h3>11.10.2 Exercise 2: Performance Optimization</h3>
<p>Create a package with a small function that calculates the area of a circle, and optimize it with pragmas.</p>
<blockquote>
<p><strong>Challenge</strong>: Make sure the function is inlined for performance.</p>
</blockquote>
<h4>11.10.2.1 Solution Guidance</h4>
<p>First, define the function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Circle_Calculations </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Radius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;

<span class="hljs-keyword">end</span> Circle_Calculations;
</code></pre>
<p>Then implement it with an inline pragma:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Circle_Calculations </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">pragma</span> Inline (Calculate_Area);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Radius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * Radius * Radius;
   <span class="hljs-keyword">end</span> Calculate_Area;

<span class="hljs-keyword">end</span> Circle_Calculations;
</code></pre>
<p>This tells the compiler to replace calls to <code>Calculate_Area</code> with the actual code, eliminating function call overhead.</p>
<h3>11.10.3 Exercise 3: Data Validation with Type Invariants</h3>
<p>Create a package for handling temperature data with type invariants.</p>
<blockquote>
<p><strong>Challenge</strong>: Ensure all temperature values stay within valid ranges.</p>
</blockquote>
<h4>11.10.3.1 Solution Guidance</h4>
<p>Define a temperature type with a type invariant:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Data </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">with</span>
      Type_Invariant =&gt; Celsius &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Celsius &lt;= <span class="hljs-number">100.0</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">with</span>
      Post =&gt; Current_Temperature = Temp;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span>;

<span class="hljs-keyword">private</span>
   Current_Temperature : <span class="hljs-type">Celsius</span> := <span class="hljs-number">22.0</span>;

<span class="hljs-keyword">end</span> Temperature_Data;
</code></pre>
<p>Implement the package body:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Data </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Current_Temperature := Temp;
   <span class="hljs-keyword">end</span> Set_Temperature;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Celsius</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Current_Temperature;
   <span class="hljs-keyword">end</span> Get_Temperature;

<span class="hljs-keyword">end</span> Temperature_Data;
</code></pre>
<p>This ensures that any temperature value is between -50°C and 100°C, and that the current temperature is always set correctly.</p>
<h2>11.11 Conclusion: The Power of Compiler Directives</h2>
<p>Aspects and pragmas might seem like small features, but they’re incredibly powerful. They let you tell the compiler exactly what you want it to do with your code, making your programs more reliable and efficient.</p>
<p>For beginners, aspects and pragmas might seem like advanced topics, but they’re actually quite simple to use. By using aspects for specifications and pragmas for compiler directives, you can write code that’s more reliable, more efficient, and easier to understand.</p>
<p>Remember that aspects and pragmas are tools to help you build better programs. Use them wisely, and you’ll find that your code becomes more reliable, more efficient, and easier to understand.</p>
<p>As you continue your Ada journey, remember that aspects and pragmas are just tools to help you build better programs. Use them wisely, and you’ll find that your code becomes more reliable, more efficient, and easier to understand.</p>
<blockquote>
<p><strong>The Power of Aspects and Pragmas</strong></p>
<p>“Aspects and pragmas are like special notes you write for the compiler - they don’t change what your program does, but they help the compiler understand your intentions better.”</p>
</blockquote>
<p>By learning to use aspects and pragmas effectively, you’re taking an important step toward becoming a more skilled and reliable programmer. These features are part of what makes Ada such a powerful language for building robust, reliable software.</p>
<p>As you continue your Ada journey, remember that aspects and pragmas are just tools to help you build better programs. Use them wisely, and you’ll find that your code becomes more reliable, more efficient, and easier to understand.</p>
<h1>12. SPARK Subset for Formal Verification in Ada</h1>
<blockquote>
<p>“SPARK transforms code from ‘likely correct’ to ‘provably correct’—not just for safety-critical systems, but for any application where reliability matters.”</p>
</blockquote>
<p>Formal verification is a mathematical technique for proving that software behaves exactly as intended. Unlike traditional testing, which examines specific inputs and outputs, formal verification provides mathematical guarantees about all possible executions of your code. SPARK is a formally verifiable subset of Ada that makes this powerful technique accessible to everyday programmers. This chapter explores how SPARK can help you write more reliable code for common programming tasks, from simple calculators to data processing algorithms, without requiring specialized domain knowledge.</p>
<h2>12.1 What is SPARK?</h2>
<p>SPARK is a subset of Ada designed specifically for formal verification. It was developed to address a fundamental challenge in software engineering: how to prove that code is correct rather than just testing it for specific cases. While Ada provides strong type safety and contract-based programming, SPARK takes this further by restricting the language to a subset where mathematical proofs of correctness are possible.</p>
<p>SPARK isn’t just for aerospace or medical devices—it’s a practical tool for any programmer who wants to build more reliable software. Whether you’re writing a home automation system, a game, or a data processing tool, SPARK can help you catch errors before they occur and prove that your code works correctly for all possible inputs.</p>
<h3>12.1.1 SPARK vs. Traditional Ada</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Feature</th>
<th style="text-align:left">Traditional Ada</th>
<th style="text-align:left">SPARK Subset</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Memory Management</strong></td>
<td style="text-align:left">Supports dynamic allocation</td>
<td style="text-align:left">No heap allocation; all memory is static</td>
</tr>
<tr>
<td style="text-align:left"><strong>Pointers</strong></td>
<td style="text-align:left">Allowed with access types</td>
<td style="text-align:left">Prohibited entirely</td>
</tr>
<tr>
<td style="text-align:left"><strong>Recursion</strong></td>
<td style="text-align:left">Fully supported</td>
<td style="text-align:left">Supported but harder to verify</td>
</tr>
<tr>
<td style="text-align:left"><strong>Contracts</strong></td>
<td style="text-align:left">Optional (<code>Pre</code>, <code>Post</code>, etc.)</td>
<td style="text-align:left">Required for verification</td>
</tr>
<tr>
<td style="text-align:left"><strong>Verification</strong></td>
<td style="text-align:left">Manual testing</td>
<td style="text-align:left">Automated formal proof</td>
</tr>
<tr>
<td style="text-align:left"><strong>Error Detection</strong></td>
<td style="text-align:left">Finds bugs in tested cases</td>
<td style="text-align:left">Proves absence of certain errors</td>
</tr>
</tbody>
</table>
<p>The key difference is that SPARK removes language features that make formal verification difficult or impossible. By restricting dynamic memory allocation and pointers, SPARK creates a predictable execution environment where mathematical proofs can be generated automatically. This might seem restrictive at first, but it’s precisely these restrictions that make SPARK so powerful for proving correctness.</p>
<h2>12.2 Why Formal Verification Matters for Everyday Programming</h2>
<p>Most programmers rely on testing to find bugs in their code. Testing is valuable, but it has limitations: you can only test a finite number of cases, and you might miss edge cases that cause problems in production. Formal verification addresses this by mathematically proving that your code works correctly for all possible inputs.</p>
<h3>12.2.1 Traditional Testing vs. Formal Verification</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Aspect</strong></th>
<th style="text-align:left"><strong>Traditional Testing</strong></th>
<th style="text-align:left"><strong>SPARK Formal Verification</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Coverage</strong></td>
<td style="text-align:left">Limited to tested cases</td>
<td style="text-align:left">Proves correctness for all possible inputs</td>
</tr>
<tr>
<td style="text-align:left"><strong>Error Detection</strong></td>
<td style="text-align:left">Finds bugs in specific scenarios</td>
<td style="text-align:left">Proves absence of certain errors</td>
</tr>
<tr>
<td style="text-align:left"><strong>Effort</strong></td>
<td style="text-align:left">Requires manual test case creation</td>
<td style="text-align:left">Automated proof generation</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reliability</strong></td>
<td style="text-align:left">Dependent on test quality</td>
<td style="text-align:left">Mathematically guaranteed</td>
</tr>
<tr>
<td style="text-align:left"><strong>Best For</strong></td>
<td style="text-align:left">General debugging</td>
<td style="text-align:left">Critical logic, complex algorithms</td>
</tr>
</tbody>
</table>
<p>Let’s consider a practical example. Imagine you’re writing a function to calculate the area of a rectangle:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Width * Height;
<span class="hljs-keyword">end</span> Calculate_Area;
</code></pre>
<p>With traditional testing, you might write tests for common cases:</p>
<ul>
<li>Width=2, Height=3 → Area=6</li>
<li>Width=0, Height=5 → Area=0</li>
<li>Width=10, Height=10 → Area=100</li>
</ul>
<p>But what about integer overflow? If your system uses 32-bit integers, <code>Width=100000</code> and <code>Height=100000</code> would cause overflow, resulting in an incorrect value. Traditional testing might miss this edge case unless you specifically test for it.</p>
<p>With SPARK, you can formally prove that your function handles all possible inputs correctly—or that it’s impossible for overflow to occur. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Width &lt;= <span class="hljs-number">32767</span> <span class="hljs-keyword">and</span> Height &lt;= <span class="hljs-number">32767</span>,
   Post =&gt; Calculate_Area<span class="hljs-symbol">'Result</span> = Width * Height;
</code></pre>
<p>SPARK can verify that this function works correctly for all inputs that meet the precondition, and that it will never overflow when the precondition is satisfied.</p>
<h3>12.2.2 Real-World Benefits for Everyday Applications</h3>
<p>SPARK isn’t just for “safety-critical” systems—it provides tangible benefits for everyday programming tasks:</p>
<ul>
<li><strong>Calculator applications</strong>: Prove that arithmetic operations always return correct results</li>
<li><strong>Data processing</strong>: Verify that sorting algorithms correctly sort all possible inputs</li>
<li><strong>Game development</strong>: Ensure game logic behaves consistently under all conditions</li>
<li><strong>Web applications</strong>: Prove that input validation handles all possible edge cases</li>
</ul>
<p>For example, consider a simple game that tracks player scores. With SPARK, you can prove that the score never goes negative or exceeds a maximum value, even when multiple players interact with the system simultaneously. This gives you confidence that your game will behave correctly in all situations, not just the ones you tested.</p>
<h2>12.3 Setting Up SPARK for Beginners</h2>
<p>SPARK is part of the GNAT Community Edition, which is free and available for all major platforms. Setting it up is straightforward:</p>
<h3>12.3.1 Installation Steps</h3>
<ol>
<li>
<p><strong>Download GNAT Community Edition</strong> from <a href="https://www.adacore.com/download">AdaCore’s website</a></p>
</li>
<li>
<p><strong>Run the installer</strong> (select default options for all platforms)</p>
</li>
<li>
<p><strong>Verify installation</strong> by opening a terminal and running:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnat --version
</code></pre>
<p>You should see output indicating GNAT Community Edition is installed.</p>
</li>
<li>
<p><strong>Install SPARK tools</strong> (included by default in recent versions)</p>
</li>
<li>
<p><strong>Verify SPARK installation</strong> by running:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatprove --version
</code></pre>
</li>
</ol>
<h3>12.3.2 Creating Your First SPARK Project</h3>
<ol>
<li>
<p>Create a directory for your project:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> spark_example
<span class="hljs-built_in">cd</span> spark_example
</code></pre>
</li>
<li>
<p>Create a project file <code>spark_example.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Spark_Example <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-gnata"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnatwa"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Spark_Example;
</code></pre>
</li>
<li>
<p>Create a source directory and a simple SPARK file:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> src
<span class="hljs-built_in">touch</span> src/calculator.ads
</code></pre>
</li>
<li>
<p>Add a basic SPARK package to <code>src/calculator.ads</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Calculator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-literal">True</span>,
      Post =&gt; Result = A + B;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
</li>
<li>
<p>Create the package body in <code>src/calculator.adb</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Calculator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := A + B;
   <span class="hljs-keyword">end</span> Add;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
</li>
<li>
<p>Run SPARK verification:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatprove -P spark_example.gpr --level=1 --report=all
</code></pre>
</li>
</ol>
<p>This command will analyze your code and confirm that the <code>Add</code> procedure meets its specification. If everything is correct, you’ll see output like:</p>
<pre><code class="hljs language-csharp" data-highlighted="yes">[<span class="hljs-meta">gnatprove</span>] [info] running GNATprove <span class="hljs-keyword">on</span> spark_example.gpr
[<span class="hljs-meta">gnatprove</span>] [info] processing project <span class="hljs-keyword">for</span> SPARK
[<span class="hljs-meta">gnatprove</span>] [info] generating graph <span class="hljs-keyword">for</span> project spark_example
[<span class="hljs-meta">gnatprove</span>] [info] proving subprogram Calculator.Add
[<span class="hljs-meta">gnatprove</span>] [info] proof of <span class="hljs-string">"Result = A + B"</span> <span class="hljs-keyword">is</span> valid
[<span class="hljs-meta">gnatprove</span>] [info] proof of <span class="hljs-string">"Precondition"</span> <span class="hljs-keyword">is</span> valid
[<span class="hljs-meta">gnatprove</span>] [info] analysis complete
</code></pre>
<h2>12.4 Basic SPARK Concepts</h2>
<p>SPARK builds on Ada’s existing features but adds strict rules for formal verification. Let’s explore the key concepts you’ll need to know.</p>
<h3>12.4.1 Contracts: Pre and Post Conditions</h3>
<p>Contracts are the foundation of SPARK verification. They specify what a subprogram expects (preconditions) and guarantees (postconditions).</p>
<h4>12.4.1.1 Precondition (<code>Pre</code>)</h4>
<p>Specifies requirements that must be true before the subprogram is called:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
   Pre  =&gt; B /= <span class="hljs-number">0</span>,
   Post =&gt; Result = A / B;
</code></pre>
<p>This contract ensures that the divisor is never zero, preventing division-by-zero errors.</p>
<h4>12.4.1.2 Postcondition (<code>Post</code>)</h4>
<p>Specifies guarantees that must be true after the subprogram executes:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Max</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Post =&gt; (Max<span class="hljs-symbol">'Result</span> &gt;= A <span class="hljs-keyword">and</span> Max<span class="hljs-symbol">'Result</span> &gt;= B) <span class="hljs-keyword">and</span>
           (Max<span class="hljs-symbol">'Result</span> = A <span class="hljs-keyword">or</span> Max<span class="hljs-symbol">'Result</span> = B);
</code></pre>
<p>This contract ensures the result is always greater than or equal to both inputs and equals one of them.</p>
<h3>12.4.2 Loop Invariants</h3>
<p>When working with loops, SPARK requires loop invariants to prove correctness. A loop invariant is a condition that must be true at the beginning of each iteration.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Sum_Array</span> (A : <span class="hljs-type">Integer_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Integer</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Result := Result + A(I);
      <span class="hljs-keyword">pragma</span> Loop_Invariant (Result = (<span class="hljs-keyword">for</span> Sum <span class="hljs-keyword">of</span> A(J) <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..I</span>));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">return</span> Result;
<span class="hljs-keyword">end</span> Sum_Array;
</code></pre>
<p>The loop invariant ensures that after each iteration, <code>Result</code> contains the sum of all elements processed so far. SPARK uses this to prove the final result is correct.</p>
<h3>12.4.3 Type Invariants</h3>
<p>Type invariants specify properties that must always be true for a type:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Valid_Integer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer <span class="hljs-keyword">with</span>
   Type_Invariant =&gt; Valid_Integer &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Valid_Integer &lt;= <span class="hljs-number">100</span>;
</code></pre>
<p>This type ensures that any value of <code>Valid_Integer</code> is between 0 and 100. SPARK verifies that all operations on this type maintain this invariant.</p>
<h3>12.4.4 Proof Obligations</h3>
<p>When you write SPARK code, the compiler generates “proof obligations”—mathematical conditions that must be proven true for your code to be verified. These obligations are automatically checked by the SPARK toolchain.</p>
<p>For example, the <code>Add</code> procedure from earlier generates these proof obligations:</p>
<ol>
<li>The precondition is always true (since it’s <code>True</code>)</li>
<li>The postcondition <code>Result = A + B</code> holds after execution</li>
</ol>
<p>SPARK automatically proves these obligations, giving you confidence that your code works correctly.</p>
<h2>12.5 Simple SPARK Examples</h2>
<p>Let’s explore practical SPARK examples that demonstrate how formal verification works for everyday programming tasks.</p>
<h3>12.5.1 Example 1: Basic Calculator</h3>
<p>Here’s a complete calculator that verifies all arithmetic operations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Calculator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-literal">True</span>,
      Post =&gt; Result = A + B;
      
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-literal">True</span>,
      Post =&gt; Result = A - B;
      
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-literal">True</span>,
      Post =&gt; Result = A * B;
      
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; B /= <span class="hljs-number">0</span>,
      Post =&gt; Result = A / B;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Calculator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := A + B;
   <span class="hljs-keyword">end</span> Add;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := A - B;
   <span class="hljs-keyword">end</span> Subtract;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := A * B;
   <span class="hljs-keyword">end</span> Multiply;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := A / B;
   <span class="hljs-keyword">end</span> Divide;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>When you run <code>gnatprove</code>, it will verify that:</p>
<ul>
<li><code>Add</code>, <code>Subtract</code>, and <code>Multiply</code> always produce correct results</li>
<li><code>Divide</code> only executes when the divisor is non-zero</li>
<li>All operations maintain correct arithmetic properties</li>
</ul>
<p>This is a simple but powerful example—SPARK proves that your calculator will never produce incorrect results for valid inputs.</p>
<h3>12.5.2 Example 2: Sorting Algorithm</h3>
<p>Here’s a SPARK-verified bubble sort implementation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sort with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Integer;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Int_Array</span>) <span class="hljs-keyword">with</span>
      Post =&gt; (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..A</span><span class="hljs-symbol">'Last</span>-<span class="hljs-number">1</span> =&gt; A(I) &lt;= A(I+<span class="hljs-number">1</span>));
<span class="hljs-keyword">end</span> Sort;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Sort with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Int_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..A</span><span class="hljs-symbol">'Last</span>-<span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..A</span><span class="hljs-symbol">'Last</span>-I <span class="hljs-keyword">loop</span>
            <span class="hljs-keyword">if</span> A(J) &gt; A(J+<span class="hljs-number">1</span>) <span class="hljs-keyword">then</span>
               <span class="hljs-keyword">declare</span>
                  Temp : <span class="hljs-type">Integer</span> := A(J);
               <span class="hljs-keyword">begin</span>
                  A(J) := A(J+<span class="hljs-number">1</span>);
                  A(J+<span class="hljs-number">1</span>) := Temp;
               <span class="hljs-keyword">end</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">pragma</span> Loop_Invariant
              (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> K <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..J</span> =&gt; A(K) &lt;= A(J+<span class="hljs-number">1</span>));
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
         <span class="hljs-keyword">pragma</span> Loop_Invariant
           (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> K <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Last</span>-I+<span class="hljs-number">1</span>..A<span class="hljs-symbol">'Last</span> =&gt; A(K-<span class="hljs-number">1</span>) &lt;= A(K));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Sort;
<span class="hljs-keyword">end</span> Sort;
</code></pre>
<p>This implementation includes loop invariants that prove the array is sorted correctly after each iteration. When verified with SPARK, it guarantees that:</p>
<ul>
<li>The sorted array is in non-decreasing order</li>
<li>All elements are preserved (no elements lost or duplicated)</li>
<li>The sorting algorithm works for all possible input sizes</li>
</ul>
<p>This is a practical example of how SPARK can help you write reliable sorting code—without needing to test every possible input.</p>
<h3>12.5.3 Example 3: Data Validation</h3>
<p>Here’s a SPARK-verified function for validating user input:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Input_Validator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Valid_String </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> String (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>) <span class="hljs-keyword">with</span>
      Type_Invariant =&gt; Valid_String<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>;
      
   <span class="hljs-keyword">function</span> <span class="hljs-title">Validate_Name</span> (Name : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Valid_String</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; Name<span class="hljs-symbol">'Length</span> &lt;= <span class="hljs-number">100</span> <span class="hljs-keyword">and</span> Name<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>,
      Post =&gt; Validate_Name<span class="hljs-symbol">'Result</span> = Name;
<span class="hljs-keyword">end</span> Input_Validator;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Input_Validator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Validate_Name</span> (Name : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Valid_String</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Valid_String(Name);
   <span class="hljs-keyword">end</span> Validate_Name;
<span class="hljs-keyword">end</span> Input_Validator;
</code></pre>
<p>This example demonstrates how SPARK can enforce data validation rules at compile time. The type invariant ensures that <code>Valid_String</code> always has a length between 1 and 100 characters, and the contract verifies that the function preserves the input value.</p>
<h2>12.6 Common Pitfalls and How to Avoid Them</h2>
<p>Even with SPARK’s powerful verification capabilities, beginners can encounter common pitfalls. Let’s explore these challenges and how to overcome them.</p>
<h3>12.6.1 Pitfall 1: Incorrect Loop Invariants</h3>
<p>Loop invariants are crucial for SPARK verification, but they’re easy to get wrong. Here’s a common mistake:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Incorrect loop invariant</span>
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
   Result := Result + A(I);
   <span class="hljs-keyword">pragma</span> Loop_Invariant (Result = A(I));  <span class="hljs-comment">-- Wrong!</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<p>This invariant is incorrect because <code>Result</code> should be the sum of all elements processed so far, not just the current element.</p>
<h4>12.6.1.1 Solution: Correct Loop Invariant</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Correct loop invariant</span>
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
   Result := Result + A(I);
   <span class="hljs-keyword">pragma</span> Loop_Invariant (Result = (<span class="hljs-keyword">for</span> Sum <span class="hljs-keyword">of</span> A(J) <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..I</span>));
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<p>The correct invariant expresses the relationship between <code>Result</code> and all elements processed so far. SPARK uses this to verify the final result is correct.</p>
<h3>12.6.2 Pitfall 2: Overly Restrictive Contracts</h3>
<p>It’s tempting to write very specific contracts, but this can make verification difficult:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Overly restrictive contract</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; X &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> X &lt;= <span class="hljs-number">100</span>,
   Post =&gt; Square<span class="hljs-symbol">'Result</span> = X * X;
</code></pre>
<p>This contract restricts the input to a small range, which might not be necessary for the algorithm to work correctly.</p>
<h4>12.6.2.1 Solution: Generalized Contracts</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Generalized contract</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; X &gt;= Integer<span class="hljs-symbol">'First</span> <span class="hljs-keyword">and</span> X &lt;= Integer<span class="hljs-symbol">'Last</span>,
   Post =&gt; Square<span class="hljs-symbol">'Result</span> = X * X;
</code></pre>
<p>This contract allows the full range of possible inputs while still verifying correctness. SPARK can prove the function works for all possible integer values.</p>
<h3>12.6.3 Pitfall 3: Using Unsupported Features</h3>
<p>SPARK has restrictions on certain Ada features. For example, dynamic memory allocation is not allowed:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Invalid SPARK code</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Allocate_Memory</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Integer_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Integer;
   Data : <span class="hljs-type">Integer_Access</span> := <span class="hljs-keyword">new</span> Integer'(<span class="hljs-number">10</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Allocate_Memory;
</code></pre>
<p>SPARK prohibits heap allocation because it makes formal verification impossible.</p>
<h4>12.6.3.1 Solution: Static Allocation</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Valid SPARK code</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
   Data : <span class="hljs-type">Integer</span> := <span class="hljs-number">10</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- ...</span>
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>By using static allocation instead of dynamic memory, you maintain SPARK compatibility while achieving the same functionality.</p>
<h3>12.6.4 Pitfall 4: Ignoring Proof Obligations</h3>
<p>SPARK generates proof obligations that must be satisfied for verification to succeed. Ignoring these can lead to failed verification:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Missing loop invariant</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Sum_Array</span> (A : <span class="hljs-type">Integer_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Integer</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Result := Result + A(I);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">return</span> Result;
<span class="hljs-keyword">end</span> Sum_Array;
</code></pre>
<p>This code will fail verification because it’s missing loop invariants.</p>
<h4>12.6.4.1 Solution: Add Loop Invariants</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Corrected with loop invariants</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Sum_Array</span> (A : <span class="hljs-type">Integer_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Integer</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Result := Result + A(I);
      <span class="hljs-keyword">pragma</span> Loop_Invariant (Result = (<span class="hljs-keyword">for</span> Sum <span class="hljs-keyword">of</span> A(J) <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..I</span>));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">return</span> Result;
<span class="hljs-keyword">end</span> Sum_Array;
</code></pre>
<p>Adding the loop invariant provides SPARK with the information it needs to prove correctness.</p>
<h2>12.7 Real-World Applications for Everyday Programming</h2>
<p>SPARK isn’t just for theoretical exercises—it has practical applications for common programming tasks.</p>
<h3>12.7.1 Example 1: Game Development</h3>
<p>Consider a simple game that tracks player scores. With SPARK, you can prove that scores never go negative or exceed a maximum value:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Game_Scores with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Score_Type </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Integer <span class="hljs-keyword">with</span>
      Type_Invariant =&gt; Score_Type &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Score_Type &lt;= <span class="hljs-number">1000</span>;
      
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Score</span> (Current : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Score_Type</span>; Points : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Current + Points &lt;= <span class="hljs-number">1000</span>,
      Post =&gt; Current = Current<span class="hljs-symbol">'Old</span> + Points;
<span class="hljs-keyword">end</span> Game_Scores;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Game_Scores with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Score</span> (Current : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Score_Type</span>; Points : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Current := Current + Points;
   <span class="hljs-keyword">end</span> Add_Score;
<span class="hljs-keyword">end</span> Game_Scores;
</code></pre>
<p>This code ensures that scores always stay within valid ranges, preventing bugs where players might have negative scores or scores exceeding the maximum possible value.</p>
<h3>12.7.2 Example 2: Data Processing</h3>
<p>SPARK is excellent for verifying data processing algorithms. Here’s a verified function for calculating averages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Data_Processing with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Float;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Average</span> (Data : <span class="hljs-type">Data_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; Data<span class="hljs-symbol">'Length</span> &gt; <span class="hljs-number">0</span>,
      Post =&gt; Average<span class="hljs-symbol">'Result</span> = (<span class="hljs-keyword">for</span> Sum <span class="hljs-keyword">of</span> Data(I) <span class="hljs-keyword">in</span> Data<span class="hljs-symbol">'Range</span>) / Float(Data<span class="hljs-symbol">'Length</span>);
<span class="hljs-keyword">end</span> Data_Processing;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Data_Processing with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Average</span> (Data : <span class="hljs-type">Data_Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
      Sum : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Data<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
         Sum := Sum + Data(I);
         <span class="hljs-keyword">pragma</span> Loop_Invariant (Sum = (<span class="hljs-keyword">for</span> Sum <span class="hljs-keyword">of</span> Data(J) <span class="hljs-keyword">in</span> Data<span class="hljs-symbol">'First..I</span>));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">return</span> Sum / Float(Data<span class="hljs-symbol">'Length</span>);
   <span class="hljs-keyword">end</span> Average;
<span class="hljs-keyword">end</span> Data_Processing;
</code></pre>
<p>This code proves that the average calculation is correct for all possible inputs, ensuring reliable data processing for applications like home automation systems or personal finance tools.</p>
<h3>12.7.3 Example 3: Text Processing</h3>
<p>SPARK can verify text processing algorithms. Here’s a function to count word occurrences:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Word_Count with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Word_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> String (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Count_Occurrences</span> (Words : <span class="hljs-type">Word_Array</span>; Target : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span> <span class="hljs-keyword">with</span>
      Post =&gt; Count_Occurrences<span class="hljs-symbol">'Result</span> = (<span class="hljs-keyword">for</span> Count <span class="hljs-keyword">of</span> <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> Words(I) <span class="hljs-keyword">when</span> Words(I) = Target);
<span class="hljs-keyword">end</span> Word_Count;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Word_Count with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Count_Occurrences</span> (Words : <span class="hljs-type">Word_Array</span>; Target : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span> <span class="hljs-keyword">is</span>
      Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Words<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">if</span> Words(I) = Target <span class="hljs-keyword">then</span>
            Count := Count + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">pragma</span> Loop_Invariant (Count = (<span class="hljs-keyword">for</span> Count <span class="hljs-keyword">of</span> <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> Words<span class="hljs-symbol">'First..I</span> <span class="hljs-keyword">when</span> Words(J) = Target));
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">return</span> Count;
   <span class="hljs-keyword">end</span> Count_Occurrences;
<span class="hljs-keyword">end</span> Word_Count;
</code></pre>
<p>This code verifies that the word counting function works correctly for all possible inputs, which is useful for applications like text editors or search tools.</p>
<h2>12.8 Exercises for Readers</h2>
<p>Now it’s time to put your knowledge into practice with some exercises.</p>
<h3>12.8.1 Exercise 1: Validating User Input</h3>
<p>Create a SPARK-verified function that validates email addresses. The function should:</p>
<ul>
<li>Ensure the email contains exactly one ‘@’ symbol</li>
<li>Ensure there’s at least one character before and after the ‘@’</li>
<li>Ensure the domain has at least one period</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Prove that your function correctly identifies valid and invalid email addresses.</p>
</blockquote>
<h4>12.8.1.1 Solution Guidance</h4>
<p>Start by defining the contract:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Email_Validator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Validate_Email</span> (Email : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">with</span>
      Post =&gt; Validate_Email<span class="hljs-symbol">'Result</span> = 
         (Has_At_Symbol(Email) <span class="hljs-keyword">and</span>
          Has_Before_At(Email) <span class="hljs-keyword">and</span>
          Has_After_At(Email) <span class="hljs-keyword">and</span>
          Has_Domain_Period(Email));
<span class="hljs-keyword">end</span> Email_Validator;
</code></pre>
<p>Then implement the function with loop invariants to prove correctness:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Email_Validator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Validate_Email</span> (Email : <span class="hljs-type">String</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
      At_Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
      Has_At   : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
      Has_Before : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
      Has_After : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
      Has_Period : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Email<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">if</span> Email(I) = <span class="hljs-string">'@'</span> <span class="hljs-keyword">then</span>
            At_Count := At_Count + <span class="hljs-number">1</span>;
            Has_At := <span class="hljs-literal">True</span>;
            <span class="hljs-keyword">if</span> I &gt; Email<span class="hljs-symbol">'First</span> <span class="hljs-keyword">then</span>
               Has_Before := <span class="hljs-literal">True</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
         <span class="hljs-keyword">elsif</span> Has_At <span class="hljs-keyword">and</span> Email(I) = <span class="hljs-string">'.'</span> <span class="hljs-keyword">then</span>
            Has_Period := <span class="hljs-literal">True</span>;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
         <span class="hljs-comment">-- Loop invariants to track state</span>
         <span class="hljs-keyword">pragma</span> Loop_Invariant (At_Count = (<span class="hljs-keyword">for</span> Count <span class="hljs-keyword">of</span> <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> Email<span class="hljs-symbol">'First..I</span> <span class="hljs-keyword">when</span> Email(J) = <span class="hljs-string">'@'</span>));
         <span class="hljs-keyword">pragma</span> Loop_Invariant (Has_Before = (I &gt; Email<span class="hljs-symbol">'First</span> <span class="hljs-keyword">and</span> Has_At));
         <span class="hljs-keyword">pragma</span> Loop_Invariant (Has_Period = (Has_At <span class="hljs-keyword">and</span> (<span class="hljs-keyword">for</span> <span class="hljs-keyword">Some</span> J <span class="hljs-keyword">in</span> Email<span class="hljs-symbol">'First..I</span> <span class="hljs-keyword">when</span> Email(J) = <span class="hljs-string">'.'</span>)));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      
      <span class="hljs-keyword">if</span> Has_At <span class="hljs-keyword">and</span> At_Count = <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> Has_Before <span class="hljs-keyword">and</span> Has_After <span class="hljs-keyword">and</span> Has_Period <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>;
      <span class="hljs-keyword">else</span>
         <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Validate_Email;
<span class="hljs-keyword">end</span> Email_Validator;
</code></pre>
<p>This implementation proves that the email validation works correctly for all possible inputs.</p>
<h3>12.8.2 Exercise 2: Sorting with SPARK</h3>
<p>Create a SPARK-verified implementation of a selection sort algorithm that works for arrays of any size.</p>
<blockquote>
<p><strong>Challenge</strong>: Prove that your sorting algorithm correctly sorts all possible input arrays.</p>
</blockquote>
<h4>12.8.2.1 Solution Guidance</h4>
<p>Start with the package specification:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Selection_Sort with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Integer;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Int_Array</span>) <span class="hljs-keyword">with</span>
      Post =&gt; (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..A</span><span class="hljs-symbol">'Last</span>-<span class="hljs-number">1</span> =&gt; A(I) &lt;= A(I+<span class="hljs-number">1</span>));
<span class="hljs-keyword">end</span> Selection_Sort;
</code></pre>
<p>Then implement the sorting algorithm with loop invariants:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Selection_Sort with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (A : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Int_Array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..A</span><span class="hljs-symbol">'Last</span>-<span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">declare</span>
            Min_Index : <span class="hljs-type">Positive</span> := I;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> I+<span class="hljs-number">1</span>..A<span class="hljs-symbol">'Last</span> <span class="hljs-keyword">loop</span>
               <span class="hljs-keyword">if</span> A(J) &lt; A(Min_Index) <span class="hljs-keyword">then</span>
                  Min_Index := J;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">pragma</span> Loop_Invariant (A(Min_Index) = (<span class="hljs-keyword">for</span> Min <span class="hljs-keyword">of</span> A(K) <span class="hljs-keyword">in</span> I+<span class="hljs-number">1</span>..J));
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            
            <span class="hljs-keyword">if</span> Min_Index /= I <span class="hljs-keyword">then</span>
               <span class="hljs-keyword">declare</span>
                  Temp : <span class="hljs-type">Integer</span> := A(I);
               <span class="hljs-keyword">begin</span>
                  A(I) := A(Min_Index);
                  A(Min_Index) := Temp;
               <span class="hljs-keyword">end</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">pragma</span> Loop_Invariant (<span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> K <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'First..I</span> =&gt; A(K) &lt;= A(I+<span class="hljs-number">1</span>));
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Sort;
<span class="hljs-keyword">end</span> Selection_Sort;
</code></pre>
<p>This implementation proves that the selection sort algorithm works correctly for all possible inputs.</p>
<h3>12.8.3 Exercise 3: Data Validation with SPARK</h3>
<p>Create a SPARK-verified function that validates temperature readings for a home automation system. The function should:</p>
<ul>
<li>Ensure temperatures are between -50°C and 100°C</li>
<li>Ensure readings are stored in a valid data structure</li>
<li>Prove that invalid temperatures cannot be stored</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Prove that your system maintains valid temperature readings under all conditions.</p>
</blockquote>
<h4>12.8.3.1 Solution Guidance</h4>
<p>Start by defining the type with invariants:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_System with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">with</span>
      Type_Invariant =&gt; Celsius &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Celsius &lt;= <span class="hljs-number">100.0</span>;
      
   <span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Record </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Value : <span class="hljs-type">Celsius</span>;
      Timestamp : <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Store_Temperature</span> (Record : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Temperature_Record</span>; Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Value &gt;= -<span class="hljs-number">50.0</span> <span class="hljs-keyword">and</span> Value &lt;= <span class="hljs-number">100.0</span>,
      Post =&gt; <span class="hljs-keyword">Record</span>.Value = Value;
<span class="hljs-keyword">end</span> Temperature_System;
</code></pre>
<p>Then implement the procedure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_System with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Store_Temperature</span> (Record : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Temperature_Record</span>; Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">Record</span>.Value := Celsius(Value);
      <span class="hljs-keyword">Record</span>.Timestamp := Current_Time;
   <span class="hljs-keyword">end</span> Store_Temperature;
<span class="hljs-keyword">end</span> Temperature_System;
</code></pre>
<p>This implementation proves that temperature readings always stay within valid ranges, preventing bugs that could cause home automation systems to malfunction.</p>
<h2>12.9 Next Steps for Learning SPARK</h2>
<p>Now that you’ve learned the basics of SPARK, here are some next steps to continue your journey:</p>
<h3>12.9.1 . Explore More Complex Examples</h3>
<p>Try verifying more complex algorithms, such as:</p>
<ul>
<li>Binary search</li>
<li>Tree traversal</li>
<li>Graph algorithms</li>
<li>Mathematical functions</li>
</ul>
<p>These examples will help you understand how SPARK handles more sophisticated code.</p>
<h3>12.9.2 . Learn About SPARK Proving Tools</h3>
<p>SPARK includes several tools for formal verification:</p>
<ul>
<li><strong>GNATprove</strong>: The main verification tool</li>
<li><strong>SPARK Examiner</strong>: For examining proof results</li>
<li><strong>SPARK IDE</strong>: Integrated development environment for SPARK</li>
</ul>
<p>Learn how to use these tools to analyze verification results and debug proof failures.</p>
<h3>12.9.3 . Practice with Real-World Projects</h3>
<p>Apply SPARK to real-world projects you’re working on:</p>
<ul>
<li>Home automation systems</li>
<li>Personal finance applications</li>
<li>Game development</li>
<li>Data processing tools</li>
</ul>
<p>This will help you see how SPARK fits into practical programming scenarios.</p>
<h3>12.9.4 . Join the SPARK Community</h3>
<p>The SPARK community is active and supportive. Join:</p>
<ul>
<li><strong>SPARK mailing list</strong>: For discussions and questions</li>
<li><strong>AdaCore forums</strong>: For technical support</li>
<li><strong>GitHub repositories</strong>: For SPARK examples and projects</li>
</ul>
<p>The community can provide valuable guidance as you learn more about formal verification.</p>
<h2>12.10 Conclusion: The Power of Proven Correctness</h2>
<blockquote>
<p>“SPARK transforms code from ‘likely correct’ to ‘provably correct’—not just for safety-critical systems, but for any application where reliability matters.”</p>
</blockquote>
<p>SPARK is a powerful tool that brings mathematical rigor to everyday programming. By using SPARK, you can prove that your code works correctly for all possible inputs, not just the ones you tested. This gives you confidence that your applications will behave reliably in all situations, from home automation systems to personal finance tools.</p>
<p>The key to SPARK’s power is its simplicity. By restricting Ada to a subset where formal verification is possible, SPARK makes mathematical proof accessible to everyday programmers. You don’t need advanced mathematics knowledge—just a basic understanding of contracts, invariants, and proof obligations.</p>
<p>As you continue your SPARK journey, remember that formal verification isn’t about perfection—it’s about building reliable software that you can trust. Whether you’re writing a simple calculator or a complex data processing algorithm, SPARK gives you the tools to prove your code works correctly.</p>
<p>SPARK is more than just a programming tool—it’s a mindset. It encourages you to think carefully about what your code should do, and then prove that it does it. This mindset will make you a better programmer, regardless of what language or platform you use.</p>
<h1>13. Certification and Integration in Ada</h1>
<blockquote>
<p>“Certification and integration aren’t just for aerospace engineers—they’re essential skills for any developer who wants to build reliable, interoperable software that works seamlessly with other systems.”</p>
</blockquote>
<p>In modern software development, few applications exist in isolation. Whether you’re building a home automation system, a personal finance tool, or a data processing pipeline, your code will likely need to integrate with other components, libraries, or languages. Similarly, ensuring your code meets quality standards through certification processes is crucial for reliability, even in everyday applications. This chapter explores how Ada’s unique features make certification and integration more manageable and reliable—without requiring specialized domain knowledge.</p>
<h2>13.1 Understanding Software Certification</h2>
<p>Software certification is the process of verifying that code meets specific quality standards and behaves as intended. While often associated with safety-critical systems, certification principles apply to all software development. For everyday applications, certification ensures:</p>
<ul>
<li>Code is free from common errors</li>
<li>Behavior is predictable and consistent</li>
<li>Quality standards are met</li>
<li>Maintenance is easier over time</li>
</ul>
<p>Unlike traditional testing, which examines specific inputs and outputs, certification involves systematic verification of code quality across multiple dimensions. Ada’s language features make this verification process more straightforward and reliable.</p>
<h3>13.1.1 Why Certification Matters for Everyday Applications</h3>
<p>Consider a simple home automation system that controls lighting based on motion sensors. Without proper certification:</p>
<ul>
<li>Sensors might trigger lights incorrectly</li>
<li>System might crash when handling unexpected inputs</li>
<li>Code might become difficult to maintain over time</li>
</ul>
<p>With certification practices:</p>
<ul>
<li>Code is systematically checked for errors</li>
<li>Inputs are validated to prevent unexpected behavior</li>
<li>Quality standards are enforced consistently</li>
</ul>
<p>These practices aren’t just for aerospace engineers—they’re essential for any developer who wants to build reliable software that users can trust.</p>
<h3>13.1.2 Common Certification Processes</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Certification Practice</strong></th>
<th style="text-align:left"><strong>How Ada Supports It</strong></th>
<th style="text-align:left"><strong>Benefit</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Static Analysis</strong></td>
<td style="text-align:left">GNATcheck tool checks for coding standards</td>
<td style="text-align:left">Catches errors early, before runtime</td>
</tr>
<tr>
<td style="text-align:left"><strong>Code Reviews</strong></td>
<td style="text-align:left">Clear contracts and strong typing make code easier to review</td>
<td style="text-align:left">Reduces misunderstandings and errors</td>
</tr>
<tr>
<td style="text-align:left"><strong>Automated Testing</strong></td>
<td style="text-align:left">Contracts provide test cases automatically</td>
<td style="text-align:left">Reduces manual test creation effort</td>
</tr>
<tr>
<td style="text-align:left"><strong>Formal Verification</strong></td>
<td style="text-align:left">SPARK subset allows mathematical proof of correctness</td>
<td style="text-align:left">Guarantees absence of certain errors</td>
</tr>
</tbody>
</table>
<h2>13.2 Ada’s Certification-Friendly Features</h2>
<p>Ada provides several features specifically designed to support certification processes. These aren’t just for safety-critical systems—they’re equally valuable for everyday applications.</p>
<h3>13.2.1 Strong Typing and Type Safety</h3>
<p>Ada’s strong typing system prevents entire categories of errors before code ever runs. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Celsius </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">100.0</span>;
<span class="hljs-keyword">type</span> <span class="hljs-type">Fahrenheit </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">58.0</span>..<span class="hljs-number">212.0</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Celsius</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Implementation</span>
<span class="hljs-keyword">end</span> Set_Temperature;
</code></pre>
<p>This code prevents accidental assignment of Fahrenheit values to Celsius parameters. The compiler catches type mismatches immediately, making code review and certification more straightforward.</p>
<h3>13.2.2 Design by Contract</h3>
<p>Ada’s contract-based programming allows you to specify exactly what your code expects and guarantees:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Discount</span> (Price : <span class="hljs-type">Float</span>; <span class="hljs-keyword">Is</span>_Premium : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">with</span>
   Pre  =&gt; Price &gt; <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Discount<span class="hljs-symbol">'Result</span> &lt;= Price;
</code></pre>
<p>These contracts serve as living documentation that’s always up-to-date with the code. They also provide automatic test cases for certification processes.</p>
<h3>13.2.3 SPARK Subset for Formal Verification</h3>
<p>SPARK is a formally verifiable subset of Ada that allows mathematical proof of correctness. While often associated with safety-critical systems, SPARK is equally valuable for everyday applications:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Calculator with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; <span class="hljs-literal">True</span>,
      Post =&gt; Result = A + B;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>When you run <code>gnatprove</code> on this code, it verifies that the addition operation works correctly for all possible inputs. This provides a level of certainty that traditional testing cannot match.</p>
<h3>13.2.4 Static Analysis Tools</h3>
<p>Ada includes several static analysis tools that automatically check code quality:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 2 Run GNATcheck to enforce coding standards</span>
gnatcheck -r -s -p project.gpr

<span class="hljs-comment"># 3 Run GNATprove for formal verification</span>
gnatprove -P project.gpr --level=1 --report=all
</code></pre>
<p>These tools help enforce coding standards, catch potential errors, and verify correctness—without requiring manual inspection of every line of code.</p>
<h2>13.1 Certification Standards for Everyday Development</h2>
<p>While there are no universal certification standards for all software, several widely applicable practices can improve code quality and reliability.</p>
<h3>13.1.1 Coding Standards</h3>
<p>Adopting coding standards ensures consistency and readability. For example, the Ada community has developed standards like:</p>
<ul>
<li><strong>MISRA Ada</strong>: Guidelines for safe and reliable code</li>
<li><strong>SPARK Style Guide</strong>: Best practices for formal verification</li>
<li><strong>Ada Core Guidelines</strong>: General coding best practices</li>
</ul>
<p>These standards cover aspects like naming conventions, code structure, and error handling.</p>
<h3>13.1.2 Code Review Practices</h3>
<p>Effective code reviews are a cornerstone of certification. Ada’s clear syntax and strong typing make code reviews more productive:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good example: clear contract and type safety</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Area</span> (Width, Height : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
   Pre  =&gt; Width &gt; <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> Height &gt; <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Area<span class="hljs-symbol">'Result</span> &gt; <span class="hljs-number">0.0</span>;
</code></pre>
<p>This code is easier to review because:</p>
<ul>
<li>Contracts clearly specify expectations</li>
<li>Types prevent common errors</li>
<li>The implementation is straightforward</li>
</ul>
<h3>13.1.3 Testing Strategies</h3>
<p>Ada’s features make testing more efficient:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Contract-based testing</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Calculate_Area</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Calculate_Area (<span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, Result);
   <span class="hljs-keyword">pragma</span> Assert (Result = <span class="hljs-number">6.0</span>);
<span class="hljs-keyword">end</span> Test_Calculate_Area;
</code></pre>
<p>The contract in the <code>Calculate_Area</code> function provides automatic test cases that verify the function’s behavior for all valid inputs.</p>
<h2>13.2 Integration with Other Languages</h2>
<p>In modern software development, few applications use a single language. Integration with other languages is essential for leveraging existing libraries, improving performance, or building complex systems.</p>
<h3>13.2.1 Why Integration Matters</h3>
<p>Consider a home automation system where:</p>
<ul>
<li>Ada handles sensor data processing</li>
<li>Python manages the user interface</li>
<li>C handles low-level hardware interactions</li>
</ul>
<p>This combination leverages each language’s strengths while overcoming its weaknesses. Ada’s strong typing and reliability make it ideal for critical processing tasks, while Python provides an easy-to-use interface.</p>
<h3>13.2.2 Common Integration Scenarios</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Scenario</strong></th>
<th style="text-align:left"><strong>Use Case</strong></th>
<th style="text-align:left"><strong>Tools</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Ada + Python</strong></td>
<td style="text-align:left">Data processing with Python UI</td>
<td style="text-align:left">ctypes, SWIG</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ada + C</strong></td>
<td style="text-align:left">System-level programming</td>
<td style="text-align:left">Ada-C bindings, GNAT’s foreign language interface</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ada + Java</strong></td>
<td style="text-align:left">Enterprise applications</td>
<td style="text-align:left">JNA, JNI</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ada + Web</strong></td>
<td style="text-align:left">Web services with Ada backend</td>
<td style="text-align:left">RESTful APIs, CGI</td>
</tr>
</tbody>
</table>
<h3>13.2.3 Ada-C Integration: A Practical Example</h3>
<p>Let’s create a simple example of integrating Ada with C. First, we’ll create an Ada library for basic math operations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- math_utils.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Math_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Cube</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>);
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- math_utils.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Math_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> X * X;
   <span class="hljs-keyword">end</span> Square;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Cube</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> X * X * X;
   <span class="hljs-keyword">end</span> Cube;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := A + B;
   <span class="hljs-keyword">end</span> Add;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<p>Now, we’ll create a C program that calls these Ada functions:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// main.c</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">// Declare Ada functions</span>
<span class="hljs-type">float</span> <span class="hljs-title function_">square</span><span class="hljs-params">(<span class="hljs-type">float</span> x)</span>;
<span class="hljs-type">float</span> <span class="hljs-title function_">cube</span><span class="hljs-params">(<span class="hljs-type">float</span> x)</span>;
<span class="hljs-type">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">float</span> a, <span class="hljs-type">float</span> b, <span class="hljs-type">float</span> *result)</span>;

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">float</span> result;
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Square of 5.0: %.2f\n"</span>, square(<span class="hljs-number">5.0</span>));
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Cube of 3.0: %.2f\n"</span>, cube(<span class="hljs-number">3.0</span>));
    
    add(<span class="hljs-number">2.5</span>, <span class="hljs-number">3.7</span>, &amp;result);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"2.5 + 3.7 = %.2f\n"</span>, result);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>To compile and link these together, we need to:</p>
<ol>
<li>Compile the Ada code into a shared library:</li>
</ol>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -c -fPIC math_utils.adb
gnatbind math_utils
gnatlink math_utils -shared -o libmath_utils.so
</code></pre>
<ol start="2">
<li>Compile and link the C code:</li>
</ol>
<pre><code class="language-bash hljs" data-highlighted="yes">gcc main.c -L. -lmath_utils -o main
</code></pre>
<ol start="3">
<li>Run the program:</li>
</ol>
<pre><code class="language-bash hljs" data-highlighted="yes">./main
</code></pre>
<p>This will output:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Square of 5.0:</span> <span class="hljs-number">25.00</span>
<span class="hljs-attr">Cube of 3.0:</span> <span class="hljs-number">27.00</span>
<span class="hljs-number">2.5</span> <span class="hljs-string">+</span> <span class="hljs-number">3.7</span> <span class="hljs-string">=</span> <span class="hljs-number">6.20</span>
</code></pre>
<p>This example demonstrates how Ada’s strong typing and reliability can be leveraged in a C application. The Ada functions provide verified math operations that the C code can safely use.</p>
<h3>13.2.4 Ada-Python Integration: Another Practical Example</h3>
<p>Let’s create an example of integrating Ada with Python using <code>ctypes</code>:</p>
<p>First, create the Ada library as before (math_utils.ads and math_utils.adb).</p>
<p>Then, compile it as a shared library:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -c -fPIC math_utils.adb
gnatbind math_utils
gnatlink math_utils -shared -o libmath_utils.so
</code></pre>
<p>Now, create a Python script that calls the Ada functions:</p>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-keyword">import</span> ctypes

<span class="hljs-comment"># 4 Load the Ada library</span>
lib = ctypes.CDLL(<span class="hljs-string">'./libmath_utils.so'</span>)

<span class="hljs-comment"># 5 Define function signatures</span>
lib.Square.argtypes = [ctypes.c_float]
lib.Square.restype = ctypes.c_float

lib.Cube.argtypes = [ctypes.c_float]
lib.Cube.restype = ctypes.c_float

lib.Add.argtypes = [ctypes.c_float, ctypes.c_float, ctypes.POINTER(ctypes.c_float)]
lib.Add.restype = <span class="hljs-literal">None</span>

<span class="hljs-comment"># 6 Call Ada functions</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Square of 5.0: <span class="hljs-subst">{lib.Square(<span class="hljs-number">5.0</span>):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Cube of 3.0: <span class="hljs-subst">{lib.Cube(<span class="hljs-number">3.0</span>):<span class="hljs-number">.2</span>f}</span>"</span>)

result = ctypes.c_float()
lib.Add(<span class="hljs-number">2.5</span>, <span class="hljs-number">3.7</span>, ctypes.byref(result))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"2.5 + 3.7 = <span class="hljs-subst">{result.value:<span class="hljs-number">.2</span>f}</span>"</span>)
</code></pre>
<p>This Python script calls the Ada math functions directly, leveraging Ada’s reliability for critical calculations while using Python’s ease of use for the overall application.</p>
<h2>13.1 Common Integration Challenges and Solutions</h2>
<p>When integrating Ada with other languages, several challenges can arise. Let’s explore these challenges and how to address them.</p>
<h3>13.1.1 Data Type Mismatches</h3>
<p>Different languages have different data types. For example, C’s <code>int</code> might be 32 bits, while Ada’s <code>Integer</code> might be 64 bits.</p>
<p><strong>Solution</strong>: Explicitly specify data types in interface definitions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada interface</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Math_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Interfaces.C.Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Interfaces.C.Float</span>;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// C interface</span>
<span class="hljs-type">float</span> <span class="hljs-title function_">square</span><span class="hljs-params">(<span class="hljs-type">float</span> x)</span>;
</code></pre>
<p>This ensures consistent data representation across language boundaries.</p>
<h3>13.1.2 Memory Management</h3>
<p>Different languages have different memory management approaches. Ada uses controlled types for automatic cleanup, while C requires manual memory management.</p>
<p><strong>Solution</strong>: Use clear ownership rules and avoid sharing memory between languages when possible. When sharing is necessary, use well-defined interfaces:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada interface for memory management</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Memory_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Allocate</span> (Size : <span class="hljs-type">Natural</span>; Buffer : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Buffer</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Free</span> (Buffer : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Buffer</span>);
<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Float;
<span class="hljs-keyword">end</span> Memory_Utils;
</code></pre>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// C interface</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span>* Buffer;
<span class="hljs-type">void</span> <span class="hljs-title function_">allocate_buffer</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size, Buffer* buffer)</span>;
<span class="hljs-type">void</span> <span class="hljs-title function_">free_buffer</span><span class="hljs-params">(Buffer buffer)</span>;
</code></pre>
<p>This approach ensures proper memory management while maintaining clear ownership rules.</p>
<h3>13.1.3 Error Handling</h3>
<p>Different languages have different error handling mechanisms. Ada uses exceptions, while C typically uses return codes.</p>
<p><strong>Solution</strong>: Convert between error handling mechanisms at the interface boundary:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada interface with error conversion</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Error_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-type">String</span>; Success : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>);
<span class="hljs-keyword">end</span> Error_Utils;
</code></pre>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// C interface</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">process_data</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* data)</span>;
</code></pre>
<p>In the Ada implementation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-type">String</span>; Success : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Process data</span>
   Success := <span class="hljs-literal">True</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
      Success := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>This converts Ada exceptions to C-style success/failure codes.</p>
<h2>13.2 Best Practices for Certification and Integration</h2>
<p>To ensure reliable and maintainable integrated systems, follow these best practices:</p>
<h3>13.2.1 . Keep Interfaces Simple and Well-Documented</h3>
<p>Simple interfaces are easier to certify and integrate. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good interface: clear and simple</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Math_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad interface: complex and unclear</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Complex_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Some_Complex_Type</span>; 
                          Options : <span class="hljs-type">Option_Set</span>;
                          Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Result_Type</span>);
<span class="hljs-keyword">end</span> Complex_Utils;
</code></pre>
<h3>13.2.2 . Use Ada’s Features to Simplify Integration</h3>
<p>Ada’s strong typing and contracts make it easier to integrate with other languages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Using contracts for clear expectations</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Discount</span> (Price : <span class="hljs-type">Float</span>; <span class="hljs-keyword">Is</span>_Premium : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">with</span>
   Pre  =&gt; Price &gt; <span class="hljs-number">0.0</span>,
   Post =&gt; Calculate_Discount<span class="hljs-symbol">'Result</span> &lt;= Price;
</code></pre>
<p>These contracts provide clear expectations for integration points.</p>
<h3>13.2.3 . Test Integrated Systems Thoroughly</h3>
<p>When integrating different languages, test the entire system:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada test for integrated system</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Integration</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Call C function through Ada interface</span>
   Result := Call_C_Function(<span class="hljs-number">5.0</span>);
   <span class="hljs-keyword">pragma</span> Assert (Result = <span class="hljs-number">25.0</span>);
<span class="hljs-keyword">end</span> Test_Integration;
</code></pre>
<p>This ensures that the integrated system behaves correctly as a whole.</p>
<h3>13.2.4 . Use Static Analysis Tools for Certification</h3>
<p>Run static analysis tools on integrated systems:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 7 Check for issues in integrated code</span>
gnatcheck -r -s -p project.gpr
</code></pre>
<p>These tools help catch integration-specific issues before they become problems.</p>
<h2>13.1 Practical Exercise: Building an Integrated System</h2>
<p>Let’s build a complete example of an integrated system that demonstrates certification and integration concepts.</p>
<h3>13.1.1 Exercise 1: Home Automation System with Ada and Python</h3>
<p>Create a home automation system where:</p>
<ul>
<li>Ada handles sensor data processing</li>
<li>Python provides the user interface</li>
<li>Certification practices ensure reliability</li>
</ul>
<h4>13.1.1.1 Step 1: Create Ada Sensor Processing Library</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- sensor_processing.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Sensor_Processing with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float <span class="hljs-keyword">range</span> -<span class="hljs-number">50.0</span>..<span class="hljs-number">100.0</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Temperature</span> (Sensor_ID : <span class="hljs-type">Natural</span>; 
                              Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Temperature</span>) <span class="hljs-keyword">with</span>
      Pre  =&gt; Sensor_ID &lt;= <span class="hljs-number">10</span>,
      Post =&gt; Value <span class="hljs-keyword">in</span> Temperature;
      
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temperature</span> (Value : <span class="hljs-type">Temperature</span>; 
                                Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">with</span>
      Post =&gt; (<span class="hljs-keyword">if</span> Result <span class="hljs-keyword">then</span> Value &lt; <span class="hljs-number">30.0</span>);
      
<span class="hljs-keyword">end</span> Sensor_Processing;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- sensor_processing.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Sensor_Processing with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Temperature</span> (Sensor_ID : <span class="hljs-type">Natural</span>; 
                              Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Temperature</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Simulate sensor reading</span>
      Value := Temperature(Sensor_ID * <span class="hljs-number">10.0</span>);
   <span class="hljs-keyword">end</span> Read_Temperature;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temperature</span> (Value : <span class="hljs-type">Temperature</span>; 
                                Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Result := (Value &lt; <span class="hljs-number">30.0</span>);
   <span class="hljs-keyword">end</span> Process_Temperature;
<span class="hljs-keyword">end</span> Sensor_Processing;
</code></pre>
<h4>13.1.1.2 Step 2: Compile Ada Library as Shared Object</h4>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -c -fPIC sensor_processing.adb
gnatbind sensor_processing
gnatlink sensor_processing -shared -o libsensor_processing.so
</code></pre>
<h4>13.1.1.3 Step 3: Create Python Interface</h4>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># 8 sensor_interface.py</span>
<span class="hljs-keyword">import</span> ctypes

<span class="hljs-comment"># 9 Load Ada library</span>
lib = ctypes.CDLL(<span class="hljs-string">'./libsensor_processing.so'</span>)

<span class="hljs-comment"># 10 Define Ada function signatures</span>
lib.Read_Temperature.argtypes = [ctypes.c_int, ctypes.POINTER(ctypes.c_float)]
lib.Read_Temperature.restype = <span class="hljs-literal">None</span>

lib.Process_Temperature.argtypes = [ctypes.c_float, ctypes.POINTER(ctypes.c_bool)]
lib.Process_Temperature.restype = <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_temperature</span>(<span class="hljs-params">sensor_id</span>):
    value = ctypes.c_float()
    lib.Read_Temperature(sensor_id, ctypes.byref(value))
    <span class="hljs-keyword">return</span> value.value

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_temperature</span>(<span class="hljs-params">value</span>):
    result = ctypes.c_bool()
    lib.Process_Temperature(value, ctypes.byref(result))
    <span class="hljs-keyword">return</span> result.value
</code></pre>
<h4>10.0.0.1 Step 4: Create Python User Interface</h4>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># 11 main.py</span>
<span class="hljs-keyword">from</span> sensor_interface <span class="hljs-keyword">import</span> read_temperature, process_temperature

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        sensor_id = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"Enter sensor ID (1-10): "</span>))
        temp = read_temperature(sensor_id)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Temperature: <span class="hljs-subst">{temp:<span class="hljs-number">.1</span>f}</span>°C"</span>)
        
        <span class="hljs-keyword">if</span> process_temperature(temp):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Temperature is safe"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"WARNING: Temperature too high!"</span>)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">input</span>(<span class="hljs-string">"Continue? (y/n): "</span>).lower() != <span class="hljs-string">'y'</span>:
            <span class="hljs-keyword">break</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h4>11.0.0.1 Step 5: Certification Verification</h4>
<p>Run SPARK verification on the Ada code:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatprove -P project.gpr --level=1 --report=all
</code></pre>
<p>This will verify that:</p>
<ul>
<li>Sensor IDs are within valid range</li>
<li>Temperature values stay within expected range</li>
<li>Process_Temperature correctly identifies safe temperatures</li>
</ul>
<h4>11.0.0.2 Step 6: Integration Testing</h4>
<p>Test the integrated system:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">python main.py
</code></pre>
<p>This exercise demonstrates how Ada’s reliability features can be leveraged in an integrated system with Python. The Ada code handles critical sensor processing with verified correctness, while Python provides an easy-to-use interface.</p>
<h2>11.1 Common Pitfalls and How to Avoid Them</h2>
<h3>11.1.1 Pitfall 1: Ignoring Data Type Mismatches</h3>
<p>When integrating different languages, data type mismatches can cause subtle bugs.</p>
<p><strong>Example</strong>: C’s <code>int</code> is typically 32 bits, while Ada’s <code>Integer</code> might be 64 bits.</p>
<p><strong>Solution</strong>: Explicitly specify data types at interface boundaries:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Correct interface with explicit types</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Math_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Square</span> (X : <span class="hljs-type">Interfaces.C.Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Interfaces.C.Float</span>;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<h3>11.1.2 Pitfall 2: Inconsistent Error Handling</h3>
<p>Different languages have different error handling mechanisms, leading to inconsistent behavior.</p>
<p><strong>Example</strong>: Ada uses exceptions, while C uses return codes.</p>
<p><strong>Solution</strong>: Convert between error handling mechanisms at interface boundaries:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada interface with error conversion</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Error_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Data : <span class="hljs-type">String</span>; Success : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Boolean</span>);
<span class="hljs-keyword">end</span> Error_Utils;
</code></pre>
<h3>11.1.3 Pitfall 3: Poor Memory Management</h3>
<p>Different languages have different memory management approaches, leading to leaks or crashes.</p>
<p><strong>Example</strong>: C requires manual memory management, while Ada uses controlled types.</p>
<p><strong>Solution</strong>: Use clear ownership rules and avoid sharing memory between languages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada interface for memory management</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Memory_Utils </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Allocate</span> (Size : <span class="hljs-type">Natural</span>; Buffer : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Buffer</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Free</span> (Buffer : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Buffer</span>);
<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Float;
<span class="hljs-keyword">end</span> Memory_Utils;
</code></pre>
<h3>11.1.4 Pitfall 4: Insufficient Testing</h3>
<p>Integrated systems often have unique failure modes that aren’t caught by testing individual components.</p>
<p><strong>Example</strong>: A Python frontend might call an Ada backend with unexpected parameters.</p>
<p><strong>Solution</strong>: Test the entire integrated system, not just individual components:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Ada test for integrated system</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Integration</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Call C function through Ada interface</span>
   Result := Call_C_Function(<span class="hljs-number">5.0</span>);
   <span class="hljs-keyword">pragma</span> Assert (Result = <span class="hljs-number">25.0</span>);
<span class="hljs-keyword">end</span> Test_Integration;
</code></pre>
<h2>11.2 Certification and Integration in Real-World Applications</h2>
<p>Let’s look at how certification and integration principles apply to a real-world application: a personal finance tool.</p>
<h3>11.2.1 Personal Finance Tool Architecture</h3>
<ul>
<li><strong>Ada</strong>: Handles financial calculations (interest rates, compound interest)</li>
<li><strong>Python</strong>: Provides user interface and data visualization</li>
<li><strong>SQLite</strong>: Stores financial data</li>
</ul>
<h4>11.2.1.1 Ada Financial Calculations</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- finance_calculations.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Finance_Calculations with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Interest</span> (Principal : <span class="hljs-type">Float</span>; Rate : <span class="hljs-type">Float</span>; Years : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; Principal &gt; <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> Rate &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> Years &gt; <span class="hljs-number">0</span>,
      Post =&gt; Calculate_Interest<span class="hljs-symbol">'Result</span> &gt;= Principal;
      
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Compound_Interest</span> (Principal : <span class="hljs-type">Float</span>; Rate : <span class="hljs-type">Float</span>; Years : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">with</span>
      Pre  =&gt; Principal &gt; <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> Rate &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> Years &gt; <span class="hljs-number">0</span>,
      Post =&gt; Calculate_Compound_Interest<span class="hljs-symbol">'Result</span> &gt;= Principal;
<span class="hljs-keyword">end</span> Finance_Calculations;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- finance_calculations.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Finance_Calculations with SPARK_Mode </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Interest</span> (Principal : <span class="hljs-type">Float</span>; Rate : <span class="hljs-type">Float</span>; Years : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Principal * Rate * Float(Years);
   <span class="hljs-keyword">end</span> Calculate_Interest;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Compound_Interest</span> (Principal : <span class="hljs-type">Float</span>; Rate : <span class="hljs-type">Float</span>; Years : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
      Factor : <span class="hljs-type">Float</span> := <span class="hljs-number">1.0</span> + Rate;
      Result : <span class="hljs-type">Float</span> := Principal;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Years <span class="hljs-keyword">loop</span>
         Result := Result * Factor;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">return</span> Result - Principal;
   <span class="hljs-keyword">end</span> Calculate_Compound_Interest;
<span class="hljs-keyword">end</span> Finance_Calculations;
</code></pre>
<h4>11.2.1.2 Python User Interface</h4>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># 12 finance_app.py</span>
<span class="hljs-keyword">import</span> ctypes
<span class="hljs-keyword">import</span> sqlite3

<span class="hljs-comment"># 13 Load Ada library</span>
lib = ctypes.CDLL(<span class="hljs-string">'./libfinance_calculations.so'</span>)

<span class="hljs-comment"># 14 Define Ada function signatures</span>
lib.Calculate_Interest.argtypes = [ctypes.c_float, ctypes.c_float, ctypes.c_int]
lib.Calculate_Interest.restype = ctypes.c_float

lib.Calculate_Compound_Interest.argtypes = [ctypes.c_float, ctypes.c_float, ctypes.c_int]
lib.Calculate_Compound_Interest.restype = ctypes.c_float

<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_simple_interest</span>(<span class="hljs-params">principal, rate, years</span>):
    <span class="hljs-keyword">return</span> lib.Calculate_Interest(principal, rate, years)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_compound_interest</span>(<span class="hljs-params">principal, rate, years</span>):
    <span class="hljs-keyword">return</span> lib.Calculate_Compound_Interest(principal, rate, years)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">save_to_db</span>(<span class="hljs-params">principal, rate, years, interest</span>):
    conn = sqlite3.connect(<span class="hljs-string">'finance.db'</span>)
    c = conn.cursor()
    c.execute(<span class="hljs-string">"INSERT INTO calculations VALUES (?, ?, ?, ?)"</span>, 
              (principal, rate, years, interest))
    conn.commit()
    conn.close()

<span class="hljs-comment"># 15 User interface</span>
principal = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"Enter principal amount: "</span>))
rate = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"Enter interest rate: "</span>))
years = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"Enter number of years: "</span>))

simple_interest = calculate_simple_interest(principal, rate, years)
compound_interest = calculate_compound_interest(principal, rate, years)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Simple interest: $<span class="hljs-subst">{simple_interest:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Compound interest: $<span class="hljs-subst">{compound_interest:<span class="hljs-number">.2</span>f}</span>"</span>)

save_to_db(principal, rate, years, compound_interest)
</code></pre>
<p>This application demonstrates how certification and integration principles apply to a real-world personal finance tool. The Ada code handles critical financial calculations with verified correctness, while Python provides an easy-to-use interface and SQLite handles data storage.</p>
<h2>15.1 Next Steps for Certification and Integration</h2>
<p>Now that you’ve learned the basics of certification and integration in Ada, here are some next steps to continue your journey:</p>
<h3>15.1.1 . Explore More Complex Integration Scenarios</h3>
<p>Try integrating Ada with other languages for more complex applications:</p>
<ul>
<li><strong>Ada + Java</strong>: For enterprise applications</li>
<li><strong>Ada + Web</strong>: For web services with Ada backend</li>
<li><strong>Ada + C++</strong>: For performance-critical applications</li>
</ul>
<h3>15.1.2 . Learn About Advanced Certification Tools</h3>
<p>Explore more advanced certification tools:</p>
<ul>
<li><strong>GNATprove</strong>: For formal verification</li>
<li><strong>SPARK Examiner</strong>: For examining proof results</li>
<li><strong>AdaCore’s CodePeer</strong>: For static analysis</li>
</ul>
<h3>15.1.3 . Practice with Real-World Projects</h3>
<p>Apply certification and integration concepts to real-world projects:</p>
<ul>
<li>Build a home automation system with Ada and Python</li>
<li>Create a data processing pipeline with Ada and C</li>
<li>Develop a personal finance tool with Ada and SQLite</li>
</ul>
<h3>15.1.4 . Join the Ada Community</h3>
<p>The Ada community is active and supportive. Join:</p>
<ul>
<li><strong>AdaCore forums</strong>: For technical support</li>
<li><strong>GitHub repositories</strong>: For Ada projects and examples</li>
<li><strong>Ada mailing lists</strong>: For discussions and questions</li>
</ul>
<h2>15.2 Conclusion: The Power of Reliable, Interoperable Systems</h2>
<blockquote>
<p>“Certification and integration aren’t just for aerospace engineers—they’re essential skills for any developer who wants to build reliable, interoperable software that works seamlessly with other systems.”</p>
</blockquote>
<p>Ada’s unique combination of strong typing, contracts, and formal verification makes it an excellent choice for building reliable software that integrates seamlessly with other systems. Whether you’re building a home automation system, a personal finance tool, or a data processing pipeline, Ada’s features help ensure your code is correct, reliable, and maintainable.</p>
<p>The key to successful certification and integration is simplicity. By keeping interfaces clean, using Ada’s features to simplify integration, and thoroughly testing integrated systems, you can build software that works reliably across language boundaries.</p>
<h1>14. Build Systems and Project Files in Ada</h1>
<blockquote>
<p>“Project files transform build management from a manual chore into a systematic process—making it easy to build, maintain, and share your code.”</p>
</blockquote>
<p>When you’re first learning to program, you might compile your code with simple commands like <code>gnatmake main.adb</code>. This works fine for tiny programs, but as your projects grow, managing compilation becomes tedious and error-prone. Imagine building a home automation system with dozens of source files—manually compiling each one and keeping track of dependencies would be a nightmare. This is where Ada’s project files come in: they’re your secret weapon for building reliable software without the headache.</p>
<p>Project files are configuration files that tell the compiler exactly how to build your project. They’re written in Ada syntax, which means you already know the basics of how to read and write them. With project files, you can:</p>
<ul>
<li>Build entire projects with a single command</li>
<li>Organize source files into logical directories</li>
<li>Define different build configurations (debug vs. release)</li>
<li>Manage dependencies between projects</li>
<li>Automate repetitive build tasks</li>
</ul>
<p>This chapter will show you how to use project files effectively, with practical examples for everyday programming tasks. You’ll learn to build systems that scale with your projects, from simple calculators to home automation tools, without needing specialized knowledge of build systems.</p>
<h2>14.1 Why Project Files Matter for Everyday Programming</h2>
<p>Most programming languages have build systems, but Ada’s project files stand out for their simplicity and integration with the language. Unlike complex build tools like Make or CMake that require separate syntax, Ada project files use Ada’s familiar syntax—meaning you can learn them quickly without adding another language to your repertoire.</p>
<p>Consider a simple home automation system with these components:</p>
<ul>
<li>Sensor reading module</li>
<li>Data processing module</li>
<li>User interface module</li>
<li>Database storage module</li>
</ul>
<p>Without project files, you’d need to compile each file separately and link them together:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake sensor_reader.adb
gnatmake data_processor.adb
gnatmake user_interface.adb
gnatmake database_storage.adb
gnatbind -n main
gnatlink main
</code></pre>
<p>This is error-prone—forgetting a file or specifying the wrong compiler options can cause issues. With a project file, you define everything once and build the entire system with a single command:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P home_automation.gpr
</code></pre>
<h3>14.1.1 Project Files vs. Manual Compilation</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Aspect</strong></th>
<th style="text-align:left"><strong>Manual Compilation</strong></th>
<th style="text-align:left"><strong>Project Files</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Command Complexity</strong></td>
<td style="text-align:left">Requires typing long commands each time</td>
<td style="text-align:left">Single command builds entire project</td>
</tr>
<tr>
<td style="text-align:left"><strong>Error Handling</strong></td>
<td style="text-align:left">Easy to miss files or options</td>
<td style="text-align:left">Automatically tracks all files</td>
</tr>
<tr>
<td style="text-align:left"><strong>Build Configuration</strong></td>
<td style="text-align:left">Hard to switch between debug/release</td>
<td style="text-align:left">Easily defined configurations</td>
</tr>
<tr>
<td style="text-align:left"><strong>Maintenance</strong></td>
<td style="text-align:left">Tedious for large projects</td>
<td style="text-align:left">Centralized configuration</td>
</tr>
<tr>
<td style="text-align:left"><strong>Collaboration</strong></td>
<td style="text-align:left">Difficult to share build instructions</td>
<td style="text-align:left">Simple project file to share</td>
</tr>
</tbody>
</table>
<p>Project files also make collaboration easier. When you share your project with others, they can build it immediately without needing to know your specific build process. This is especially valuable for beginners—no more “it works on my machine” issues because everyone uses the same build instructions.</p>
<h2>14.2 Basic Project File Structure</h2>
<p>Ada project files use a simple but powerful syntax that’s easy to learn. Let’s break down the basic structure with a practical example.</p>
<h3>14.2.1 Simple Project File Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes">project Simple_Calculator <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
<span class="hljs-keyword">end</span> Simple_Calculator;
</code></pre>
<p>This project file defines a simple calculator application. Let’s examine each part:</p>
<ul>
<li>
<p><strong><code>project Simple_Calculator is</code></strong>: Declares the project name. This name is used when building with <code>gnatmake -P Simple_Calculator.gpr</code>.</p>
</li>
<li>
<p><strong><code>for Source_Dirs use ("src");</code></strong>: Specifies where source files are located. The compiler will look for all <code>.ads</code> and <code>.adb</code> files in the <code>src</code> directory.</p>
</li>
<li>
<p><strong><code>for Object_Dir use "obj";</code></strong>: Specifies where compiled object files should be stored. This keeps your source directory clean.</p>
</li>
<li>
<p><strong><code>for Main use ("src/main.adb");</code></strong>: Specifies the main program file. This is the entry point of your application.</p>
</li>
<li>
<p><strong><code>end Simple_Calculator;</code></strong>: Ends the project declaration.</p>
</li>
</ul>
<h3>14.2.2 Creating and Using a Project File</h3>
<p>To create this project file:</p>
<ol>
<li>Create a file named <code>simple_calculator.gpr</code> in your project directory</li>
<li>Add the content shown above</li>
<li>Create the necessary directories:<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> src obj
</code></pre>
</li>
<li>Create a simple main program in <code>src/main.adb</code>:<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Welcome to Simple Calculator!"</span>);
   <span class="hljs-comment">-- Add your calculator code here</span>
<span class="hljs-keyword">end</span> Main;
</code></pre>
</li>
<li>Build the project:<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P simple_calculator.gpr
</code></pre>
</li>
</ol>
<p>The compiler will automatically find all source files in the <code>src</code> directory, compile them, and link them into an executable. This is much simpler than manually compiling each file!</p>
<h3>14.2.3 Project File Naming Conventions</h3>
<p>Ada project files typically use the <code>.gpr</code> extension (GNAT Project file). While you can name them anything, using descriptive names helps:</p>
<ul>
<li><code>home_automation.gpr</code> for a home automation project</li>
<li><code>personal_finance.gpr</code> for a finance application</li>
<li><code>simple_game.gpr</code> for a small game</li>
</ul>
<p>Avoid generic names like <code>project.gpr</code>—this makes it harder to distinguish between projects when you have multiple projects open.</p>
<h2>14.3 Common Project File Elements Explained</h2>
<p>Project files have several key elements that control how your project is built. Let’s explore these in detail with practical examples.</p>
<h3>14.3.1 Source Directories</h3>
<p>The <code>Source_Dirs</code> attribute tells the compiler where to find source files. You can specify multiple directories:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Multi_Module_App <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"src/sensors"</span>, <span class="hljs-string">"src/ui"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
<span class="hljs-keyword">end</span> Multi_Module_App;
</code></pre>
<p>This project has source files in three different directories:</p>
<ul>
<li><code>src</code>: Main application code</li>
<li><code>src/sensors</code>: Sensor-related code</li>
<li><code>src/ui</code>: User interface code</li>
</ul>
<p>You can also use relative paths:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"../common"</span>, <span class="hljs-string">"src"</span>);
</code></pre>
<p>This includes source files from a parent directory’s <code>common</code> folder.</p>
<h3>14.3.2 Object Directory</h3>
<p>The <code>Object_Dir</code> attribute specifies where compiled object files go. It’s good practice to keep object files separate from source files:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Calculator <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>You can use different object directories for different build configurations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>This creates separate object directories for debug and release builds.</p>
<h3>14.3.3 Main Program Specification</h3>
<p>The <code>Main</code> attribute specifies the entry point of your application. This is required for executables:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
</code></pre>
<p>For library projects (not executables), you don’t specify a main program.</p>
<p>You can also specify multiple main programs for different configurations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
      <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/debug_main.adb"</span>);
   <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
      <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/release_main.adb"</span>);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
</code></pre>
<p>This allows you to have different entry points for different build types.</p>
<h3>14.3.4 Compiler and Linker Options</h3>
<p>You can control compiler and linker behavior with the <code>Compiler</code> and <code>Linker</code> packages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>);
   <span class="hljs-keyword">end</span> Compiler;

   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-Wl,-Map=obj/mapfile"</span>);
   <span class="hljs-keyword">end</span> Linker;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>The <code>Compiler</code> package controls compilation options:</p>
<ul>
<li><code>-g</code>: Include debugging information</li>
<li><code>-O0</code>: No optimization (good for debugging)</li>
</ul>
<p>The <code>Linker</code> package controls linking options:</p>
<ul>
<li><code>-Wl,-Map=obj/mapfile</code>: Generate a map file showing memory layout</li>
</ul>
<h3>14.3.5 Configuration-Specific Settings</h3>
<p>You can define different settings for different build configurations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>This project has two configurations:</p>
<ul>
<li><strong>Debug</strong>: Includes debugging information, no optimization, and contract checking</li>
<li><strong>Release</strong>: Optimized for performance, with contract checking enabled</li>
</ul>
<p>You can build with:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P my_project.gpr -XBuild=release
</code></pre>
<h2>14.4 Advanced Project File Features</h2>
<p>Once you’ve mastered the basics, you can explore more advanced project file features for complex projects.</p>
<h3>14.4.1 Project Dependencies</h3>
<p>You can reference other projects as dependencies:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Main_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Dependencies </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> External_Use <span class="hljs-keyword">use</span> (<span class="hljs-string">"math_utils.gpr"</span>);
   <span class="hljs-keyword">end</span> Dependencies;
<span class="hljs-keyword">end</span> Main_Project;
</code></pre>
<p>This project depends on another project called <code>math_utils.gpr</code>. The compiler will automatically build the dependency before building the main project.</p>
<p>You can also specify library dependencies:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Main_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-Llib"</span>, <span class="hljs-string">"-lmath_utils"</span>);
   <span class="hljs-keyword">end</span> Linker;
<span class="hljs-keyword">end</span> Main_Project;
</code></pre>
<p>This tells the linker to look for libraries in the <code>lib</code> directory and link with <code>math_utils</code>.</p>
<h3>14.4.2 Library Projects</h3>
<p>Ada supports creating libraries that can be used by other projects:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Math_Utils <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Library_Name <span class="hljs-keyword">use</span> <span class="hljs-string">"math_utils"</span>;
   <span class="hljs-keyword">for</span> Library_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"lib"</span>;
   <span class="hljs-keyword">for</span> Library_Kind <span class="hljs-keyword">use</span> <span class="hljs-string">"static"</span>;
<span class="hljs-keyword">end</span> Math_Utils;
</code></pre>
<p>This creates a static library named <code>libmath_utils.a</code> in the <code>lib</code> directory.</p>
<p>To use this library in another project:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Main_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-Llib"</span>, <span class="hljs-string">"-lmath_utils"</span>);
   <span class="hljs-keyword">end</span> Linker;
<span class="hljs-keyword">end</span> Main_Project;
</code></pre>
<h3>14.4.3 Conditional Compilation</h3>
<p>You can use conditional statements in project files:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span>
        (<span class="hljs-keyword">if</span> Target = <span class="hljs-string">"x86_64"</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"-m64"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"-m32"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>This sets different compiler flags based on the target architecture.</p>
<p>You can also define custom variables:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>This defines a build type variable that controls compiler options.</p>
<h2>14.5 Best Practices for Project Organization</h2>
<p>Well-organized projects are easier to maintain and collaborate on. Here are some best practices for organizing your Ada projects.</p>
<h3>14.5.1 Directory Structure</h3>
<p>A good directory structure separates concerns:</p>
<pre><code class="hljs language-bash" data-highlighted="yes">project_root/
├── src/           <span class="hljs-comment"># Source files</span>
│   ├── main/      <span class="hljs-comment"># Main application code</span>
│   ├── sensors/   <span class="hljs-comment"># Sensor-related code</span>
│   └── ui/        <span class="hljs-comment"># User interface code</span>
├── obj/           <span class="hljs-comment"># Object files (separate by build type)</span>
│   ├── debug/
│   └── release/
├── lib/           <span class="hljs-comment"># Libraries</span>
├── doc/           <span class="hljs-comment"># Documentation</span>
└── project.gpr    <span class="hljs-comment"># Project file</span>
</code></pre>
<p>This structure:</p>
<ul>
<li>Keeps source files organized by function</li>
<li>Separates object files by build type</li>
<li>Provides clear locations for documentation and libraries</li>
</ul>
<h3>14.5.2 Naming Conventions</h3>
<p>Consistent naming makes projects easier to understand:</p>
<ul>
<li>Project files: <code>home_automation.gpr</code>, <code>personal_finance.gpr</code></li>
<li>Source directories: <code>src/sensors</code>, <code>src/ui</code></li>
<li>Object directories: <code>obj/debug</code>, <code>obj/release</code></li>
<li>Library names: <code>math_utils</code>, <code>sensor_processing</code></li>
</ul>
<p>Avoid generic names like <code>common</code> or <code>utils</code>—be specific about what the directory contains.</p>
<h3>14.5.3 Version Control</h3>
<p>Project files should be included in version control:</p>
<ul>
<li>Add <code>.gpr</code> files to your repository</li>
<li>Include all source files in the project</li>
<li>Exclude object directories from version control (they’re generated)</li>
</ul>
<p>This ensures everyone on your team can build the project consistently.</p>
<h3>14.5.4 Project File Comments</h3>
<p>Add comments to explain your project structure:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Home Automation System Project</span>
<span class="hljs-comment">-- This project manages temperature sensors and user interface</span>
<span class="hljs-comment">-- Build configurations: debug (for development) and release (for deployment)</span>

project Home_Automation <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-comment">-- Source directories organized by functionality</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main"</span>, <span class="hljs-string">"src/sensors"</span>, <span class="hljs-string">"src/ui"</span>);
   
   <span class="hljs-comment">-- Separate object directories for each build type</span>
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   
   <span class="hljs-comment">-- Main program is in src/main directory</span>
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main/main.adb"</span>);

   <span class="hljs-comment">-- Compiler settings for different build types</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Home_Automation;
</code></pre>
<p>Comments help others (and your future self) understand why the project is structured a certain way.</p>
<h2>14.6 Practical Exercises: Building Your First Project</h2>
<p>Let’s put what you’ve learned into practice with some hands-on exercises.</p>
<h3>14.6.1 Exercise 1: Simple Calculator Application</h3>
<p>Create a calculator application with separate modules for different operations.</p>
<h4>14.6.1.1 Step 1: Create the Project Structure</h4>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> calculator
<span class="hljs-built_in">cd</span> calculator
<span class="hljs-built_in">mkdir</span> src src/add src/subtract src/multiply src/divide obj obj/debug obj/release
</code></pre>
<h4>14.6.1.2 Step 2: Create Source Files</h4>
<p><code>src/add/add.adb</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Add </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A + B;
   <span class="hljs-keyword">end</span> Calculate;
<span class="hljs-keyword">end</span> Add;
</code></pre>
<p><code>src/subtract/subtract.adb</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Subtract </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A - B;
   <span class="hljs-keyword">end</span> Calculate;
<span class="hljs-keyword">end</span> Subtract;
</code></pre>
<p>(Repeat similar files for multiply and divide)</p>
<p><code>src/main/main.adb</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Add; <span class="hljs-keyword">with</span> Subtract; <span class="hljs-keyword">with</span> Multiply; <span class="hljs-keyword">with</span> Divide;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   A, B : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Welcome to Calculator!"</span>);
   Put(<span class="hljs-string">"Enter first number: "</span>); Get(A);
   Put(<span class="hljs-string">"Enter second number: "</span>); Get(B);
   
   Put_Line(<span class="hljs-string">"Add: "</span> &amp; (Add.Calculate(A, B))<span class="hljs-symbol">'Image</span>);
   Put_Line(<span class="hljs-string">"Subtract: "</span> &amp; (Subtract.Calculate(A, B))<span class="hljs-symbol">'Image</span>);
   Put_Line(<span class="hljs-string">"Multiply: "</span> &amp; (Multiply.Calculate(A, B))<span class="hljs-symbol">'Image</span>);
   Put_Line(<span class="hljs-string">"Divide: "</span> &amp; (Divide.Calculate(A, B))<span class="hljs-symbol">'Image</span>);
<span class="hljs-keyword">end</span> Main;
</code></pre>
<h4>14.6.1.3 Step 3: Create the Project File</h4>
<p><code>project.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Calculator <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/add"</span>, <span class="hljs-string">"src/subtract"</span>, <span class="hljs-string">"src/multiply"</span>, <span class="hljs-string">"src/divide"</span>, <span class="hljs-string">"src/main"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/debug"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<h4>14.6.1.4 Step 4: Build and Run</h4>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P project.gpr
./calculator
</code></pre>
<p>This creates a simple calculator application with separate modules for each operation. You can easily extend it by adding new modules to the project.</p>
<h3>14.6.2 Exercise 2: Debug and Release Configurations</h3>
<p>Modify the calculator project to support different build configurations.</p>
<h4>14.6.2.1 Step 1: Update the Project File</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">project Calculator <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/add"</span>, <span class="hljs-string">"src/subtract"</span>, <span class="hljs-string">"src/multiply"</span>, <span class="hljs-string">"src/divide"</span>, <span class="hljs-string">"src/main"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<h4>14.6.2.2 Step 2: Build Different Configurations</h4>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 2 Build debug version</span>
gnatmake -P project.gpr

<span class="hljs-comment"># 3 Build release version</span>
gnatmake -P project.gpr -XBuild=release
</code></pre>
<h4>14.0.0.1 Step 3: Test Both Configurations</h4>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 4 Run debug version</span>
./calculator

<span class="hljs-comment"># 5 Run release version (from obj/release directory)</span>
obj/release/calculator
</code></pre>
<p>This demonstrates how to create different build configurations for development and deployment.</p>
<h2>14.1 Common Pitfalls and How to Avoid Them</h2>
<p>Even with project files, beginners can encounter common issues. Let’s explore these pitfalls and how to solve them.</p>
<h3>14.1.1 Pitfall 1: Incorrect Source Directory Paths</h3>
<p><strong>Problem</strong>: The compiler can’t find source files because of incorrect paths.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Incorrect: using absolute path</span>
<span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"/home/user/projects/calculator/src"</span>);
</code></pre>
<p><strong>Solution</strong>: Use relative paths from the project file location:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Correct: relative path</span>
<span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
</code></pre>
<p>If your project file is in the root directory, and source files are in a <code>src</code> directory, use <code>"src"</code>. If your project file is in a subdirectory, adjust the path accordingly.</p>
<h3>14.1.2 Pitfall 2: Forgetting to Specify the Main Program</h3>
<p><strong>Problem</strong>: The compiler doesn’t know which file is the entry point.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Missing Main specification</span>
project Calculator <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p><strong>Solution</strong>: Always specify the main program:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Correct: specify Main</span>
project Calculator <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>The <code>Main</code> attribute is required for executable projects.</p>
<h3>14.1.3 Pitfall 3: Using Incompatible Compiler Switches</h3>
<p><strong>Problem</strong>: Some compiler switches don’t work together.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Problematic: mixing incompatible switches</span>
<span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-g"</span>);
</code></pre>
<p><strong>Solution</strong>: Understand which switches are compatible:</p>
<ul>
<li><code>-O2</code> (optimization) and <code>-g</code> (debugging) work together</li>
<li><code>-gnatp</code> (suppress checks) and <code>-gnata</code> (contract checks) conflict—use one or the other</li>
</ul>
<p>For release builds, use:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>);
</code></pre>
<p>For debug builds, use:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
</code></pre>
<h3>14.1.4 Pitfall 4: Not Cleaning Object Files After Changes</h3>
<p><strong>Problem</strong>: Changes to source files aren’t reflected in the build because old object files are used.</p>
<p><strong>Solution</strong>: Clean object files before rebuilding:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 6 Clean object files</span>
gnatclean -P project.gpr

<span class="hljs-comment"># 7 Rebuild</span>
gnatmake -P project.gpr
</code></pre>
<p>Or better yet, use separate object directories for different build configurations so they don’t interfere with each other.</p>
<h3>14.0.1 Pitfall 5: Incorrect Project File Location</h3>
<p><strong>Problem</strong>: The project file isn’t in the right location.</p>
<p><strong>Example</strong>: Project file in <code>src/</code> but source files in <code>../src/</code>.</p>
<p><strong>Solution</strong>: Keep the project file in the project root directory, and use relative paths from there:</p>
<pre><code class="hljs language-bash" data-highlighted="yes">project_root/
├── project.gpr      <span class="hljs-comment"># Project file here</span>
├── src/             <span class="hljs-comment"># Source files here</span>
└── obj/             <span class="hljs-comment"># Object files here</span>
</code></pre>
<p>This makes paths consistent and easy to understand.</p>
<h2>14.1 Integrating Project Files with IDEs</h2>
<p>Most Ada IDEs integrate seamlessly with project files, making development even easier.</p>
<h3>14.1.1 GNAT Programming Studio (GPS)</h3>
<p>GPS is the official Ada IDE and works perfectly with project files:</p>
<ol>
<li>Open GPS</li>
<li>Select “File” → “Open Project”</li>
<li>Navigate to your <code>.gpr</code> file and open it</li>
<li>GPS will automatically load all source files and build settings</li>
</ol>
<p>With GPS:</p>
<ul>
<li>You can build with a single click</li>
<li>You get syntax highlighting and code completion</li>
<li>You can debug directly within the IDE</li>
<li>Project files are automatically updated when you add files</li>
</ul>
<h3>14.1.2 Visual Studio Code with Ada Extension</h3>
<p>If you prefer VS Code:</p>
<ol>
<li>Install the Ada extension</li>
<li>Open your project directory</li>
<li>Create a <code>tasks.json</code> file:<pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0.0"</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"tasks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
         <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Build"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"shell"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gnatmake"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-P"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"${workspaceFolder}/project.gpr"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"group"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"build"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"isDefault"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
         <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
   <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>Use the “Run Build Task” command to build your project</li>
</ol>
<p>VS Code with the Ada extension provides:</p>
<ul>
<li>Syntax highlighting</li>
<li>Code navigation</li>
<li>Build automation</li>
<li>Debugging capabilities</li>
</ul>
<h3>14.1.3 Project File Integration Benefits</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>IDE Feature</strong></th>
<th style="text-align:left"><strong>Manual Compilation</strong></th>
<th style="text-align:left"><strong>Project File Integration</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Build Automation</strong></td>
<td style="text-align:left">Manual command typing</td>
<td style="text-align:left">Single click build</td>
</tr>
<tr>
<td style="text-align:left"><strong>Error Highlighting</strong></td>
<td style="text-align:left">Limited to command line</td>
<td style="text-align:left">Visual error indicators</td>
</tr>
<tr>
<td style="text-align:left"><strong>Debugging</strong></td>
<td style="text-align:left">Command line only</td>
<td style="text-align:left">Integrated debugger</td>
</tr>
<tr>
<td style="text-align:left"><strong>Code Navigation</strong></td>
<td style="text-align:left">Manual file searching</td>
<td style="text-align:left">Jump to definition</td>
</tr>
<tr>
<td style="text-align:left"><strong>Project Management</strong></td>
<td style="text-align:left">Manual file tracking</td>
<td style="text-align:left">Automatic source tracking</td>
</tr>
</tbody>
</table>
<p>Using an IDE with project files saves time and reduces errors. You can focus on writing code instead of managing build commands.</p>
<h2>14.2 Real-World Project Examples</h2>
<p>Let’s look at practical examples of project files for common applications.</p>
<h3>14.2.1 Home Automation System</h3>
<pre><code class="language-ada hljs" data-highlighted="yes">project Home_Automation <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main"</span>, <span class="hljs-string">"src/sensors"</span>, <span class="hljs-string">"src/ui"</span>, <span class="hljs-string">"src/database"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;

   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-Llib"</span>, <span class="hljs-string">"-lsqlite3"</span>);
   <span class="hljs-keyword">end</span> Linker;
<span class="hljs-keyword">end</span> Home_Automation;
</code></pre>
<p>This project:</p>
<ul>
<li>Has separate directories for different components</li>
<li>Supports debug and release builds</li>
<li>Links with SQLite for database storage</li>
<li>Uses consistent naming conventions</li>
</ul>
<h3>14.2.2 Personal Finance Tool</h3>
<pre><code class="language-ada hljs" data-highlighted="yes">project Personal_Finance <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main"</span>, <span class="hljs-string">"src/calculations"</span>, <span class="hljs-string">"src/ui"</span>, <span class="hljs-string">"src/data"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;

   <span class="hljs-keyword">package</span> <span class="hljs-title">Dependencies </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> External_Use <span class="hljs-keyword">use</span> (<span class="hljs-string">"math_utils.gpr"</span>);
   <span class="hljs-keyword">end</span> Dependencies;
<span class="hljs-keyword">end</span> Personal_Finance;
</code></pre>
<p>This project:</p>
<ul>
<li>Depends on a math utility library</li>
<li>Uses clear directory structure</li>
<li>Includes debugging information</li>
<li>Has a simple, maintainable configuration</li>
</ul>
<h3>14.2.3 Simple Game Project</h3>
<pre><code class="language-ada hljs" data-highlighted="yes">project Simple_Game <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/engine"</span>, <span class="hljs-string">"src/graphics"</span>, <span class="hljs-string">"src/sound"</span>, <span class="hljs-string">"src/main"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Simple_Game;
</code></pre>
<p>This project:</p>
<ul>
<li>Organizes game components into separate directories</li>
<li>Supports different build configurations</li>
<li>Uses consistent naming conventions</li>
<li>Is easy to extend with new features</li>
</ul>
<h2>14.3 Next Steps for Mastering Project Files</h2>
<p>Now that you’ve learned the basics, here are some next steps to continue your journey:</p>
<h3>14.3.1 . Explore Advanced Project Features</h3>
<p>Try these more advanced project file features:</p>
<ul>
<li><strong>Conditional compilation</strong>: Build different code for different platforms</li>
<li><strong>Library dependencies</strong>: Create and use your own libraries</li>
<li><strong>Custom variables</strong>: Define project-specific variables</li>
<li><strong>Build scripts</strong>: Automate complex build processes</li>
</ul>
<h3>14.3.2 . Practice with Real-World Projects</h3>
<p>Apply project files to your own projects:</p>
<ul>
<li>Build a home automation system with temperature sensors</li>
<li>Create a personal finance tool with data visualization</li>
<li>Develop a simple game with graphics and sound</li>
</ul>
<h3>14.3.3 . Learn About Project Hierarchies</h3>
<p>For larger projects, use multiple project files:</p>
<ul>
<li>A main project that depends on library projects</li>
<li>Separate projects for different components</li>
<li>Hierarchical project structures for complex systems</li>
</ul>
<h3>14.3.4 . Join the Ada Community</h3>
<p>The Ada community is active and supportive. Join:</p>
<ul>
<li><strong>AdaCore forums</strong>: For technical support</li>
<li><strong>GitHub repositories</strong>: For Ada projects and examples</li>
<li><strong>Ada mailing lists</strong>: For discussions and questions</li>
</ul>
<h2>14.4 Conclusion: The Power of Streamlined Builds</h2>
<blockquote>
<p>“Project files transform build management from a manual chore into a systematic process—making it easy to build, maintain, and share your code.”</p>
</blockquote>
<p>Project files are one of Ada’s most powerful yet underappreciated features. They solve a fundamental problem in programming: how to build complex systems without getting lost in the details. With project files, you can:</p>
<ul>
<li>Build entire projects with a single command</li>
<li>Organize source files into logical directories</li>
<li>Define different build configurations for development and deployment</li>
<li>Manage dependencies between projects</li>
<li>Automate repetitive build tasks</li>
</ul>
<p>For beginners, project files might seem like an advanced topic, but they’re actually quite simple to use. The syntax is familiar because it’s based on Ada itself. You don’t need to learn a new language—just understand how to configure your project.</p>
<p>As you continue your Ada journey, remember that project files aren’t just for large projects. They’re valuable for any size of project, from simple calculators to complex home automation systems. By using project files from the beginning, you’ll develop good habits that will serve you well as your projects grow.</p>
<p>Project files are more than just build tools—they’re a mindset. They encourage you to think about your project structure and build process from the beginning, rather than as an afterthought. This mindset will make you a better programmer, regardless of what language or platform you use.</p>
<h1>15. Testing Frameworks in Ada</h1>
<blockquote>
<p>“Testing isn’t just for safety-critical systems—it’s essential for any application where reliability matters. With Ada’s AUnit framework, you can build robust, maintainable code for home automation, personal finance tools, and more—without specialized knowledge.”</p>
</blockquote>
<p>When you’re first learning to program, it’s easy to think testing is just for “big projects” or “professional developers.” But even simple applications like a home automation system or personal finance tool can benefit from structured testing. Imagine a smart thermostat that turns off your heater when it’s already cold, or a budgeting app that miscalculates your savings. These aren’t theoretical problems—they happen every day to developers who skip testing. Ada’s AUnit framework gives you the tools to catch these issues early, build confidence in your code, and create software that works reliably for real users.</p>
<p>This chapter explores AUnit, Ada’s standard unit testing framework. You’ll learn how to write tests for everyday applications, organize them effectively, and integrate them into your development workflow—all without needing specialized knowledge of testing methodologies. Whether you’re building a calculator, a data processing tool, or a home automation system, AUnit provides a simple, reliable way to verify your code works as intended.</p>
<h2>15.1 Why Testing Matters for Everyday Applications</h2>
<p>Testing is often seen as a chore for large teams working on complex systems, but it’s equally valuable for small projects and personal applications. Consider these common scenarios:</p>
<ul>
<li>A home automation system that turns off lights at the wrong time because of an off-by-one error in time calculations</li>
<li>A personal finance app that miscalculates interest due to floating-point rounding issues</li>
<li>A data processing tool that silently corrupts data when handling edge cases</li>
</ul>
<p>Without testing, these problems might only surface when users encounter them—often after the software has been deployed. With testing, you can catch these issues during development, when fixing them is easy and cheap.</p>
<h3>15.1.1 Manual Testing vs. Automated Testing</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Aspect</strong></th>
<th style="text-align:left"><strong>Manual Testing</strong></th>
<th style="text-align:left"><strong>AUnit Framework</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Test Organization</strong></td>
<td style="text-align:left">Ad-hoc, hard to maintain</td>
<td style="text-align:left">Structured test suites</td>
</tr>
<tr>
<td style="text-align:left"><strong>Test Execution</strong></td>
<td style="text-align:left">Manual command line</td>
<td style="text-align:left">Automated test runner</td>
</tr>
<tr>
<td style="text-align:left"><strong>Result Reporting</strong></td>
<td style="text-align:left">Manual check</td>
<td style="text-align:left">Detailed test reports</td>
</tr>
<tr>
<td style="text-align:left"><strong>Setup/Teardown</strong></td>
<td style="text-align:left">Manual setup each test</td>
<td style="text-align:left">Built-in setup/teardown</td>
</tr>
<tr>
<td style="text-align:left"><strong>Edge Case Testing</strong></td>
<td style="text-align:left">Easy to miss</td>
<td style="text-align:left">Systematic edge case testing</td>
</tr>
</tbody>
</table>
<p>Let’s look at a practical example. Suppose you’re building a simple calculator application:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> A + B;
<span class="hljs-keyword">end</span> Add;
</code></pre>
<p>With manual testing, you might run the program and enter values:</p>
<pre><code class="hljs language-sql" data-highlighted="yes">Enter <span class="hljs-keyword">first</span> number: <span class="hljs-number">2</span>
Enter <span class="hljs-keyword">second</span> number: <span class="hljs-number">2</span>
<span class="hljs-keyword">Result</span>: <span class="hljs-number">4</span>
</code></pre>
<p>This works for one case, but what about negative numbers? Zero? Large numbers? You’d need to manually test each scenario, which is time-consuming and error-prone.</p>
<p>With AUnit, you can write automated tests that check all these cases:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   AUnit.Assertions.Assert (Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"-1 + 1 should equal 0"</span>);
   AUnit.Assertions.Assert (Add(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 + 0 should equal 0"</span>);
   AUnit.Assertions.Assert (Add(Integer<span class="hljs-symbol">'Last</span>, <span class="hljs-number">1</span>) = Integer<span class="hljs-symbol">'Last</span> + <span class="hljs-number">1</span>, <span class="hljs-string">"Integer'Last + 1 should work"</span>);
<span class="hljs-keyword">end</span> Test_Addition;
</code></pre>
<p>When you run the tests, AUnit automatically checks all these cases and reports which ones pass or fail. This is more efficient, more thorough, and less error-prone than manual testing.</p>
<h3>15.1.2 Real-World Benefits of Testing</h3>
<ul>
<li><strong>Faster development</strong>: Catch bugs early when they’re easier to fix</li>
<li><strong>More confidence</strong>: Know your code works correctly before deploying</li>
<li><strong>Easier maintenance</strong>: Test existing functionality when making changes</li>
<li><strong>Better documentation</strong>: Tests serve as living documentation of expected behavior</li>
<li><strong>Improved collaboration</strong>: Clear tests help others understand your code</li>
</ul>
<p>For everyday applications, these benefits translate directly to better user experiences. A home automation system that works reliably builds trust with users. A personal finance app that calculates correctly prevents financial mistakes. Testing isn’t just for professionals—it’s a practical tool for any developer who wants to build reliable software.</p>
<h2>15.2 Introduction to AUnit</h2>
<p>AUnit is Ada’s standard unit testing framework. It’s part of the GNAT distribution, so no extra installation is needed for most users. AUnit provides a simple, reliable way to write and run tests for Ada code.</p>
<h3>15.2.1 Key Features of AUnit</h3>
<ul>
<li><strong>Simple syntax</strong>: Uses familiar Ada concepts</li>
<li><strong>Automated test runner</strong>: Executes all tests and reports results</li>
<li><strong>Test suites</strong>: Organize tests into logical groups</li>
<li><strong>Setup/teardown</strong>: Prepare and clean up test environments</li>
<li><strong>Detailed reporting</strong>: Clear output showing which tests passed or failed</li>
<li><strong>Integration with GNAT</strong>: Works seamlessly with Ada projects</li>
</ul>
<p>AUnit is designed to be accessible to beginners while providing powerful features for more advanced users. You don’t need to learn a new language—just understand how to use AUnit’s simple procedures and packages.</p>
<h3>15.2.2 Why AUnit Over Other Testing Frameworks?</h3>
<p>Many languages have multiple testing frameworks, but Ada’s ecosystem is simpler. AUnit is the standard, supported by GNAT, and works with all Ada projects. While other testing tools exist, AUnit is the most straightforward option for beginners.</p>
<p>Let’s compare AUnit to manual testing for a simple application:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Manual testing approach</span>
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Testing Add(2, 2): "</span> &amp; (<span class="hljs-keyword">if</span> Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"PASS"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"FAIL"</span>));
   Put_Line(<span class="hljs-string">"Testing Add(-1, 1): "</span> &amp; (<span class="hljs-keyword">if</span> Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-string">"PASS"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"FAIL"</span>));
   <span class="hljs-comment">-- ... more tests</span>
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p>This works but has drawbacks:</p>
<ul>
<li>No built-in reporting system</li>
<li>Hard to organize many tests</li>
<li>No setup/teardown for common test conditions</li>
<li>Manual interpretation of results</li>
</ul>
<p>With AUnit, the same tests become:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   AUnit.Assertions.Assert (Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"-1 + 1 should equal 0"</span>);
   <span class="hljs-comment">-- ... more tests</span>
<span class="hljs-keyword">end</span> Test_Addition;
</code></pre>
<p>And you get:</p>
<ul>
<li>Automated test runner</li>
<li>Clear pass/fail reporting</li>
<li>Organized test suites</li>
<li>Setup/teardown capabilities</li>
<li>Detailed error messages</li>
</ul>
<p>This is more efficient and reliable for any application, big or small.</p>
<h2>15.3 Setting Up AUnit for Your Projects</h2>
<p>AUnit is included with GNAT, so setting it up is straightforward. Let’s walk through the steps.</p>
<h3>15.3.1 Basic Setup</h3>
<ol>
<li>
<p><strong>Create a project directory</strong>:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> my_project
<span class="hljs-built_in">cd</span> my_project
<span class="hljs-built_in">mkdir</span> src tests
</code></pre>
</li>
<li>
<p><strong>Create a project file</strong> (<code>my_project.gpr</code>):</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"tests"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
</li>
<li>
<p><strong>Create a test file</strong> (<code>tests/test_calculator.adb</code>):</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> AUnit.Test_Cases;
<span class="hljs-keyword">with</span> AUnit.Assertions;
<span class="hljs-keyword">with</span> Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Test_Calculator </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   <span class="hljs-keyword">end</span> Test_Addition;

<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
</li>
<li>
<p><strong>Create a test runner</strong> (<code>tests/test_runner.adb</code>):</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> AUnit.Runner;
<span class="hljs-keyword">with</span> AUnit.Test_Suites;
<span class="hljs-keyword">with</span> Test_Calculator;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Runner</span> <span class="hljs-keyword">is</span>
   Test_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
<span class="hljs-keyword">begin</span>
   Test_Suite.Add_Test (Test_Calculator.Test_Addition<span class="hljs-symbol">'Access</span>);
   AUnit.Runner.Run_Tests (Test_Suite);
<span class="hljs-keyword">end</span> Test_Runner;
</code></pre>
</li>
<li>
<p><strong>Build and run tests</strong>:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P my_project.gpr tests/test_runner.adb
./test_runner
</code></pre>
</li>
</ol>
<p>This will execute your test and show the results. For a simple calculator, you should see:</p>
<pre><code class="hljs language-bash" data-highlighted="yes">Running <span class="hljs-built_in">test</span> suite...
  Test_Calculator.Test_Addition: PASS
Total: 1 <span class="hljs-built_in">test</span>, 1 passed, 0 failed
</code></pre>
<h3>15.3.2 Understanding the Setup</h3>
<ul>
<li><strong><code>AUnit.Test_Cases</code></strong>: Provides the base test case class</li>
<li><strong><code>AUnit.Assertions</code></strong>: Contains assertion procedures for testing</li>
<li><strong><code>AUnit.Runner</code></strong>: Executes tests and reports results</li>
<li><strong><code>AUnit.Test_Suites</code></strong>: Organizes tests into logical groups</li>
</ul>
<p>You don’t need to install anything extra—just include these packages in your code. AUnit is part of GNAT, so it’s always available when you install Ada.</p>
<h3>15.3.3 Project File Best Practices</h3>
<p>For larger projects, organize your project file to separate source and test code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Build_Type </span><span class="hljs-keyword">is</span> (<span class="hljs-string">"debug"</span>, <span class="hljs-string">"release"</span>);
   Build : <span class="hljs-type">Build_Type</span> := <span class="hljs-string">"debug"</span>;

   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"tests"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj/"</span> &amp; Build;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);

   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-O2"</span>, <span class="hljs-string">"-gnatp"</span>, <span class="hljs-string">"-gnata"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>This structure:</p>
<ul>
<li>Separates source and test directories</li>
<li>Uses different object directories for debug and release builds</li>
<li>Includes debugging information for tests</li>
<li>Optimizes release builds for performance</li>
</ul>
<p>You can build tests separately from your main application by creating a separate main program for tests.</p>
<h2>15.4 Writing Your First Tests</h2>
<p>Let’s create a complete example of testing a simple calculator application. This will show you the basics of writing tests with AUnit.</p>
<h3>15.4.1 Step 1: Create the Calculator Package</h3>
<p>First, create the calculator package to test:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A + B;
   <span class="hljs-keyword">end</span> Add;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A - B;
   <span class="hljs-keyword">end</span> Subtract;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A * B;
   <span class="hljs-keyword">end</span> Multiply;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Float(A) / Float(B);
   <span class="hljs-keyword">end</span> Divide;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<h3>15.4.2 Step 2: Create Test Cases</h3>
<p>Now create the test cases:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_calculator.adb</span>
<span class="hljs-keyword">with</span> AUnit.Test_Cases;
<span class="hljs-keyword">with</span> AUnit.Assertions;
<span class="hljs-keyword">with</span> Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Test_Calculator </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
      AUnit.Assertions.Assert (Calculator.Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"-1 + 1 should equal 0"</span>);
      AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 + 0 should equal 0"</span>);
      AUnit.Assertions.Assert (Calculator.Add(Integer<span class="hljs-symbol">'Last</span>, <span class="hljs-number">1</span>) = Integer<span class="hljs-symbol">'Last</span> + <span class="hljs-number">1</span>, 
                              <span class="hljs-string">"Integer'Last + 1 should work"</span>);
   <span class="hljs-keyword">end</span> Test_Addition;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Subtraction</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) = <span class="hljs-number">2</span>, <span class="hljs-string">"5 - 3 should equal 2"</span>);
      AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>) = -<span class="hljs-number">2</span>, <span class="hljs-string">"3 - 5 should equal -2"</span>);
      AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 - 0 should equal 0"</span>);
   <span class="hljs-keyword">end</span> Test_Subtraction;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Multiplication</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Multiply(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) = <span class="hljs-number">6</span>, <span class="hljs-string">"2 * 3 should equal 6"</span>);
      AUnit.Assertions.Assert (Calculator.Multiply(-<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) = -<span class="hljs-number">6</span>, <span class="hljs-string">"-2 * 3 should equal -6"</span>);
      AUnit.Assertions.Assert (Calculator.Multiply(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 * 5 should equal 0"</span>);
   <span class="hljs-keyword">end</span> Test_Multiplication;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Division</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">6</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">3.0</span>, <span class="hljs-string">"6 / 2 should equal 3.0"</span>);
      AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">7</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">3.5</span>, <span class="hljs-string">"7 / 2 should equal 3.5"</span>);
      AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) = <span class="hljs-number">0.0</span>, <span class="hljs-string">"0 / 5 should equal 0.0"</span>);
   <span class="hljs-keyword">end</span> Test_Division;

<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
<h3>15.4.3 Step 3: Create a Test Runner</h3>
<p>Now create a test runner to execute all tests:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_runner.adb</span>
<span class="hljs-keyword">with</span> AUnit.Runner;
<span class="hljs-keyword">with</span> AUnit.Test_Suites;
<span class="hljs-keyword">with</span> Test_Calculator;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Runner</span> <span class="hljs-keyword">is</span>
   Test_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
<span class="hljs-keyword">begin</span>
   Test_Suite.Add_Test (Test_Calculator.Test_Addition<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Calculator.Test_Subtraction<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Calculator.Test_Multiplication<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Calculator.Test_Division<span class="hljs-symbol">'Access</span>);
   AUnit.Runner.Run_Tests (Test_Suite);
<span class="hljs-keyword">end</span> Test_Runner;
</code></pre>
<h3>15.4.4 Step 4: Build and Run Tests</h3>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 2 Build the project</span>
gnatmake -P my_project.gpr tests/test_runner.adb

<span class="hljs-comment"># 3 Run the tests</span>
./test_runner
</code></pre>
<p>The output will show:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-string">Running</span> <span class="hljs-string">test</span> <span class="hljs-string">suite...</span>
  <span class="hljs-attr">Test_Calculator.Test_Addition:</span> <span class="hljs-string">PASS</span>
  <span class="hljs-attr">Test_Calculator.Test_Subtraction:</span> <span class="hljs-string">PASS</span>
  <span class="hljs-attr">Test_Calculator.Test_Multiplication:</span> <span class="hljs-string">PASS</span>
  <span class="hljs-attr">Test_Calculator.Test_Division:</span> <span class="hljs-string">PASS</span>
<span class="hljs-attr">Total:</span> <span class="hljs-number">4</span> <span class="hljs-string">tests,</span> <span class="hljs-number">4</span> <span class="hljs-string">passed,</span> <span class="hljs-number">0</span> <span class="hljs-string">failed</span>
</code></pre>
<p>This simple example shows how AUnit makes testing straightforward. You write tests that check specific functionality, and AUnit automatically runs them and reports results.</p>
<h3>15.0.1 Understanding the Test Code</h3>
<p>Let’s break down the test code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   <span class="hljs-comment">-- ... more assertions</span>
<span class="hljs-keyword">end</span> Test_Addition;
</code></pre>
<ul>
<li><strong><code>T : in out AUnit.Test_Cases.Test_Case</code></strong>: The test case parameter</li>
<li><strong><code>AUnit.Assertions.Assert</code></strong>: Checks if a condition is true</li>
<li><strong><code>Calculator.Add(2, 2) = 4</code></strong>: The condition to test</li>
<li><strong><code>"2 + 2 should equal 4"</code></strong>: A descriptive message for failures</li>
</ul>
<p>Each test is a procedure that takes a test case parameter. Inside, you use assertions to check that your code behaves as expected.</p>
<h2>15.1 Advanced Testing Features</h2>
<p>Once you’ve mastered the basics, you can explore more advanced testing features that make your tests more powerful and maintainable.</p>
<h3>15.1.1 Test Suites and Organization</h3>
<p>As your project grows, you’ll want to organize tests into logical groups. AUnit makes this easy with test suites.</p>
<h4>15.1.1.1 Example: Organizing Tests by Functionality</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_suites.adb</span>
<span class="hljs-keyword">with</span> AUnit.Runner;
<span class="hljs-keyword">with</span> AUnit.Test_Suites;
<span class="hljs-keyword">with</span> Test_Calculator;
<span class="hljs-keyword">with</span> Test_Temperature_Sensor;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Suite_Runner</span> <span class="hljs-keyword">is</span>
   Main_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
   Calculator_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
   Sensor_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Create calculator test suite</span>
   Calculator_Suite.Add_Test (Test_Calculator.Test_Addition<span class="hljs-symbol">'Access</span>);
   Calculator_Suite.Add_Test (Test_Calculator.Test_Subtraction<span class="hljs-symbol">'Access</span>);
   
   <span class="hljs-comment">-- Create sensor test suite</span>
   Sensor_Suite.Add_Test (Test_Temperature_Sensor.Test_Read_Temperature<span class="hljs-symbol">'Access</span>);
   
   <span class="hljs-comment">-- Add sub-suites to main suite</span>
   Main_Suite.Add_Suite (Calculator_Suite);
   Main_Suite.Add_Suite (Sensor_Suite);
   
   AUnit.Runner.Run_Tests (Main_Suite);
<span class="hljs-keyword">end</span> Test_Suite_Runner;
</code></pre>
<p>This structure:</p>
<ul>
<li>Groups related tests together</li>
<li>Makes it easy to run specific test groups</li>
<li>Provides clear organization for larger projects</li>
</ul>
<p>When you run this, you’ll see:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-string">Running</span> <span class="hljs-string">test</span> <span class="hljs-string">suite...</span>
  <span class="hljs-attr">Calculator_Suite:</span>
    <span class="hljs-attr">Test_Calculator.Test_Addition:</span> <span class="hljs-string">PASS</span>
    <span class="hljs-attr">Test_Calculator.Test_Subtraction:</span> <span class="hljs-string">PASS</span>
  <span class="hljs-attr">Sensor_Suite:</span>
    <span class="hljs-attr">Test_Temperature_Sensor.Test_Read_Temperature:</span> <span class="hljs-string">PASS</span>
<span class="hljs-attr">Total:</span> <span class="hljs-number">3</span> <span class="hljs-string">tests,</span> <span class="hljs-number">3</span> <span class="hljs-string">passed,</span> <span class="hljs-number">0</span> <span class="hljs-string">failed</span>
</code></pre>
<h3>15.1.2 Setup and Teardown Procedures</h3>
<p>Many tests need common setup and cleanup steps. AUnit provides <code>Setup</code> and <code>Teardown</code> procedures for this purpose.</p>
<h4>15.1.2.1 Example: Testing a Temperature Sensor</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_temperature_sensor.adb</span>
<span class="hljs-keyword">with</span> AUnit.Test_Cases;
<span class="hljs-keyword">with</span> AUnit.Assertions;
<span class="hljs-keyword">with</span> Temperature_Sensor;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Test_Temperature_Sensor </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Setup</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Temperature_Sensor.Initialize;
   <span class="hljs-keyword">end</span> Setup;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Teardown</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Temperature_Sensor.Cleanup;
   <span class="hljs-keyword">end</span> Teardown;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Read_Temperature</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &gt; -<span class="hljs-number">50.0</span>, 
                              <span class="hljs-string">"Temperature should be above -50°C"</span>);
      AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &lt; <span class="hljs-number">100.0</span>, 
                              <span class="hljs-string">"Temperature should be below 100°C"</span>);
   <span class="hljs-keyword">end</span> Test_Read_Temperature;
   
<span class="hljs-keyword">end</span> Test_Temperature_Sensor;
</code></pre>
<h4>15.1.2.2 Registering Setup/Teardown in the Test Runner</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_runner.adb</span>
<span class="hljs-keyword">with</span> AUnit.Runner;
<span class="hljs-keyword">with</span> AUnit.Test_Suites;
<span class="hljs-keyword">with</span> Test_Temperature_Sensor;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Runner</span> <span class="hljs-keyword">is</span>
   Test_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
<span class="hljs-keyword">begin</span>
   Test_Suite.Add_Test (Test_Temperature_Sensor.Test_Read_Temperature<span class="hljs-symbol">'Access</span>,
                        Setup  =&gt; Test_Temperature_Sensor.Setup<span class="hljs-symbol">'Access</span>,
                        Teardown =&gt; Test_Temperature_Sensor.Teardown<span class="hljs-symbol">'Access</span>);
   AUnit.Runner.Run_Tests (Test_Suite);
<span class="hljs-keyword">end</span> Test_Runner;
</code></pre>
<p>This ensures:</p>
<ul>
<li><code>Setup</code> runs before each test</li>
<li><code>Teardown</code> runs after each test</li>
<li>Tests don’t interfere with each other</li>
<li>Resources are properly cleaned up</li>
</ul>
<h3>15.1.3 Test Fixtures for Common Test Data</h3>
<p>For tests that need common data, you can create test fixtures:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_calculator.adb</span>
<span class="hljs-keyword">with</span> AUnit.Test_Cases;
<span class="hljs-keyword">with</span> AUnit.Assertions;
<span class="hljs-keyword">with</span> Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Test_Calculator </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">type</span> <span class="hljs-type">Test_Fixture </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      A : <span class="hljs-type">Integer</span>;
      B : <span class="hljs-type">Integer</span>;
      Expected : <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Setup</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Set up test data</span>
      T.Set_Fixture (Test_Fixture'(A =&gt; <span class="hljs-number">2</span>, B =&gt; <span class="hljs-number">2</span>, Expected =&gt; <span class="hljs-number">4</span>));
   <span class="hljs-keyword">end</span> Setup;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
      Fixture : <span class="hljs-type">Test_Fixture</span> := T.Get_Fixture (Test_Fixture<span class="hljs-symbol">'Access</span>);
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Add(Fixture.A, Fixture.B) = Fixture.Expected,
                              <span class="hljs-string">"Addition failed for "</span> &amp; Fixture.A<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">" + "</span> &amp; Fixture.B<span class="hljs-symbol">'Image</span>);
   <span class="hljs-keyword">end</span> Test_Addition;
   
<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
<p>This pattern:</p>
<ul>
<li>Centralizes test data</li>
<li>Makes tests easier to read</li>
<li>Reduces duplication</li>
<li>Ensures consistent test data across tests</li>
</ul>
<h2>15.2 Common Assertion Types</h2>
<p>AUnit provides several assertion types for different testing needs. Let’s explore the most common ones.</p>
<h3>15.2.1 Basic Assertions</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Assertion</strong></th>
<th style="text-align:left"><strong>Usage</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Assert</strong></td>
<td style="text-align:left">Check a condition is true</td>
<td style="text-align:left"><code>Assert (X = Y, "X should equal Y")</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Assert_Not</strong></td>
<td style="text-align:left">Check a condition is false</td>
<td style="text-align:left"><code>Assert_Not (X = Y, "X should not equal Y")</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Assert_Equal</strong></td>
<td style="text-align:left">Check two values are equal</td>
<td style="text-align:left"><code>Assert_Equal (X, Y, "X should equal Y")</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Assert_Not_Equal</strong></td>
<td style="text-align:left">Check two values are not equal</td>
<td style="text-align:left"><code>Assert_Not_Equal (X, Y, "X should not equal Y")</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Assert_True</strong></td>
<td style="text-align:left">Check a boolean is true</td>
<td style="text-align:left"><code>Assert_True (X &gt; 0, "X should be positive")</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Assert_False</strong></td>
<td style="text-align:left">Check a boolean is false</td>
<td style="text-align:left"><code>Assert_False (X &lt; 0, "X should not be negative")</code></td>
</tr>
</tbody>
</table>
<p>Let’s see these in action:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Assertions</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Basic assertions</span>
   AUnit.Assertions.Assert (<span class="hljs-number">2</span> + <span class="hljs-number">2</span> = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   AUnit.Assertions.Assert_Not (<span class="hljs-number">2</span> + <span class="hljs-number">2</span> = <span class="hljs-number">5</span>, <span class="hljs-string">"2 + 2 should not equal 5"</span>);
   
   <span class="hljs-comment">-- Equality assertions</span>
   AUnit.Assertions.Assert_Equal (<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   AUnit.Assertions.Assert_Not_Equal (<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-string">"2 + 2 should not equal 5"</span>);
   
   <span class="hljs-comment">-- Boolean assertions</span>
   AUnit.Assertions.Assert_True (<span class="hljs-number">5</span> &gt; <span class="hljs-number">0</span>, <span class="hljs-string">"5 should be positive"</span>);
   AUnit.Assertions.Assert_False (<span class="hljs-number">5</span> &lt; <span class="hljs-number">0</span>, <span class="hljs-string">"5 should not be negative"</span>);
<span class="hljs-keyword">end</span> Test_Assertions;
</code></pre>
<h3>15.2.2 String Assertions</h3>
<p>For string comparisons, AUnit provides special assertions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_String_Assertions</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert_Equal (<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Strings should match"</span>);
   AUnit.Assertions.Assert_Not_Equal (<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"World"</span>, <span class="hljs-string">"Strings should not match"</span>);
   
   AUnit.Assertions.Assert_Equal (<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Strings should match"</span>);
   AUnit.Assertions.Assert_Not_Equal (<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Hello "</span>, <span class="hljs-string">"Strings should not match (with space)"</span>);
<span class="hljs-keyword">end</span> Test_String_Assertions;
</code></pre>
<h3>15.2.3 Numeric Assertions</h3>
<p>For numeric comparisons, you can specify precision:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Numeric_Assertions</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert_Equal (<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-string">"Floats should match"</span>);
   AUnit.Assertions.Assert_Equal (<span class="hljs-number">1.0</span>, <span class="hljs-number">1.000001</span>, <span class="hljs-string">"Floats should match within tolerance"</span>, 
                                 Tolerance =&gt; <span class="hljs-number">0.0001</span>);
   
   AUnit.Assertions.Assert_Less (<span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-string">"2 should be less than 3"</span>);
   AUnit.Assertions.Assert_Greater (<span class="hljs-number">3.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-string">"3 should be greater than 2"</span>);
<span class="hljs-keyword">end</span> Test_Numeric_Assertions;
</code></pre>
<h3>15.2.4 Exception Assertions</h3>
<p>For testing error handling, you can check if exceptions are raised:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Exception_Assertions</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert_Exception (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>), 
                                     <span class="hljs-string">"Divide by zero should raise exception"</span>);
                                     
   AUnit.Assertions.Assert_No_Exception (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>), 
                                       <span class="hljs-string">"Divide by non-zero should not raise exception"</span>);
<span class="hljs-keyword">end</span> Test_Exception_Assertions;
</code></pre>
<p>These assertions make it easy to test error conditions without complicating your test code.</p>
<h2>15.3 Best Practices for Effective Testing</h2>
<p>Following best practices makes your tests more effective and maintainable. Here are key practices for writing good tests.</p>
<h3>15.3.1 Write Clear Test Names</h3>
<p>Test names should clearly describe what they’re testing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: clear name</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition_With_Positive_Numbers</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- test code</span>
<span class="hljs-keyword">end</span> Test_Addition_With_Positive_Numbers;

<span class="hljs-comment">-- Bad: unclear name</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test1</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- test code</span>
<span class="hljs-keyword">end</span> Test1;
</code></pre>
<p>Clear names make it easy to understand what each test does, especially when reports show failures.</p>
<h3>15.3.2 Test One Thing Per Test</h3>
<p>Each test should focus on a single behavior:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: one behavior per test</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition_With_Positive_Numbers</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
<span class="hljs-keyword">end</span> Test_Addition_With_Positive_Numbers;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition_With_Negative_Numbers</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"-1 + 1 should equal 0"</span>);
<span class="hljs-keyword">end</span> Test_Addition_With_Negative_Numbers;

<span class="hljs-comment">-- Bad: multiple behaviors in one test</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
   AUnit.Assertions.Assert (Calculator.Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"-1 + 1 should equal 0"</span>);
<span class="hljs-keyword">end</span> Test_Addition;
</code></pre>
<p>This makes it easier to identify which specific behavior failed when a test fails.</p>
<h3>15.3.3 Test Edge Cases</h3>
<p>Always test boundary conditions and edge cases:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Division_Edge_Cases</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">5.0</span>, <span class="hljs-string">"10 / 2 should equal 5.0"</span>);
   AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">0.5</span>, <span class="hljs-string">"1 / 2 should equal 0.5"</span>);
   AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) = <span class="hljs-number">0.0</span>, <span class="hljs-string">"0 / 5 should equal 0.0"</span>);
   
   <span class="hljs-comment">-- Edge cases</span>
   AUnit.Assertions.Assert_Exception (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>), 
                                     <span class="hljs-string">"Divide by zero should raise exception"</span>);
<span class="hljs-keyword">end</span> Test_Division_Edge_Cases;
</code></pre>
<p>Edge cases often reveal bugs that aren’t caught by typical test cases.</p>
<h3>15.3.4 Keep Tests Independent</h3>
<p>Each test should be able to run independently of others:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: independent tests</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
<span class="hljs-keyword">end</span> Test_Addition;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Subtraction</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) = <span class="hljs-number">2</span>, <span class="hljs-string">"5 - 3 should equal 2"</span>);
<span class="hljs-keyword">end</span> Test_Subtraction;

<span class="hljs-comment">-- Bad: dependent tests</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
<span class="hljs-keyword">end</span> Test_Addition;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Subtraction</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Depends on previous test state</span>
   AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) = <span class="hljs-number">2</span>, <span class="hljs-string">"5 - 3 should equal 2"</span>);
<span class="hljs-keyword">end</span> Test_Subtraction;
</code></pre>
<p>Independent tests can be run in any order, making test results more reliable.</p>
<h2>15.4 Common Pitfalls and How to Avoid Them</h2>
<p>Even with AUnit, beginners can encounter common pitfalls. Let’s explore these challenges and how to solve them.</p>
<h3>15.4.1 Pitfall 1: Testing Implementation Instead of Behavior</h3>
<p><strong>Problem</strong>: Testing how code works rather than what it does.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: testing implementation details</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Calculator</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Testing internal state</span>
   AUnit.Assertions.Assert (Calculator.Internal_State = <span class="hljs-number">0</span>, <span class="hljs-string">"Internal state should be 0"</span>);
<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
<p><strong>Solution</strong>: Test the public interface, not internal details.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: testing behavior</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
<span class="hljs-keyword">end</span> Test_Addition;
</code></pre>
<p>This makes your tests more resilient to implementation changes.</p>
<h3>15.4.2 Pitfall 2: Writing Tests That Are Too Complex</h3>
<p><strong>Problem</strong>: Tests that are harder to understand than the code they’re testing.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: complex test logic</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Complicated_Calculation</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   X : <span class="hljs-type">Integer</span> := <span class="hljs-number">5</span>;
   Y : <span class="hljs-type">Integer</span> := <span class="hljs-number">10</span>;
   Z : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> <span class="hljs-keyword">loop</span>
      X := X + I;
      Y := Y * <span class="hljs-number">2</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Z := X + Y;
   AUnit.Assertions.Assert (Z = <span class="hljs-number">100</span>, <span class="hljs-string">"Z should equal 100"</span>);
<span class="hljs-keyword">end</span> Test_Complicated_Calculation;
</code></pre>
<p><strong>Solution</strong>: Simplify tests to focus on behavior.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: simple test</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Complicated_Calculation</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Calculate(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>) = <span class="hljs-number">100</span>, <span class="hljs-string">"Calculate should return 100"</span>);
<span class="hljs-keyword">end</span> Test_Complicated_Calculation;
</code></pre>
<p>This makes tests easier to understand and maintain.</p>
<h3>15.4.3 Pitfall 3: Ignoring Error Handling</h3>
<p><strong>Problem</strong>: Only testing successful cases, not error conditions.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: only testing success</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Division</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">5.0</span>, <span class="hljs-string">"10 / 2 should equal 5.0"</span>);
<span class="hljs-keyword">end</span> Test_Division;
</code></pre>
<p><strong>Solution</strong>: Test both success and error conditions.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: testing both success and error</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Division</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">5.0</span>, <span class="hljs-string">"10 / 2 should equal 5.0"</span>);
   AUnit.Assertions.Assert_Exception (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>), 
                                     <span class="hljs-string">"Divide by zero should raise exception"</span>);
<span class="hljs-keyword">end</span> Test_Division;
</code></pre>
<p>This ensures your code handles errors correctly.</p>
<h3>15.4.4 Pitfall 4: Not Using Setup/Teardown for Common Initialization</h3>
<p><strong>Problem</strong>: Repeating initialization code in multiple tests.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: repeated initialization</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test1</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   Sensor : <span class="hljs-type">Temperature_Sensor_Type</span>;
<span class="hljs-keyword">begin</span>
   Sensor.Initialize;
   AUnit.Assertions.Assert (Sensor.Read_Temperature &gt; -<span class="hljs-number">50.0</span>, <span class="hljs-string">"Temperature should be above -50°C"</span>);
<span class="hljs-keyword">end</span> Test1;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test2</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   Sensor : <span class="hljs-type">Temperature_Sensor_Type</span>;
<span class="hljs-keyword">begin</span>
   Sensor.Initialize;
   AUnit.Assertions.Assert (Sensor.Read_Temperature &lt; <span class="hljs-number">100.0</span>, <span class="hljs-string">"Temperature should be below 100°C"</span>);
<span class="hljs-keyword">end</span> Test2;
</code></pre>
<p><strong>Solution</strong>: Use setup/teardown for common initialization.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: using setup/teardown</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Setup</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Sensor.Initialize;
<span class="hljs-keyword">end</span> Setup;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Teardown</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Sensor.Cleanup;
<span class="hljs-keyword">end</span> Teardown;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test1</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Sensor.Read_Temperature &gt; -<span class="hljs-number">50.0</span>, <span class="hljs-string">"Temperature should be above -50°C"</span>);
<span class="hljs-keyword">end</span> Test1;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test2</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Sensor.Read_Temperature &lt; <span class="hljs-number">100.0</span>, <span class="hljs-string">"Temperature should be below 100°C"</span>);
<span class="hljs-keyword">end</span> Test2;
</code></pre>
<p>This reduces duplication and makes tests more maintainable.</p>
<h2>15.5 Integrating AUnit with Project Files</h2>
<p>AUnit integrates seamlessly with Ada project files, making it easy to manage tests as part of your project.</p>
<h3>15.5.1 Basic Project File Configuration</h3>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"tests"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>This structure:</p>
<ul>
<li>Includes both source and test directories</li>
<li>Uses a single object directory</li>
<li>Includes debugging information for tests</li>
</ul>
<h3>15.5.2 Building Tests Separately</h3>
<p>For larger projects, you might want to build tests separately from your main application:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"tests"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
   
   <span class="hljs-comment">-- Main application</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Application </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   <span class="hljs-keyword">end</span> Application;
   
   <span class="hljs-comment">-- Test runner</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Tests </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"tests/test_runner.adb"</span>);
   <span class="hljs-keyword">end</span> Tests;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>You can build the main application or tests separately:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 4 Build main application</span>
gnatmake -P my_project.gpr -XApplication

<span class="hljs-comment"># 5 Build tests</span>
gnatmake -P my_project.gpr -XTests
</code></pre>
<p>This makes it easy to build just what you need.</p>
<h3>15.0.1 Conditional Compilation for Tests</h3>
<p>You can include test code only in debug builds:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project My_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>, <span class="hljs-string">"tests"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
   
   <span class="hljs-comment">-- Main application</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Application </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   <span class="hljs-keyword">end</span> Application;
   
   <span class="hljs-comment">-- Test runner</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Tests </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"tests/test_runner.adb"</span>);
   <span class="hljs-keyword">end</span> Tests;
   
   <span class="hljs-comment">-- Only include test code in debug builds</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Test_Config </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">case</span> Build <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">when</span> <span class="hljs-string">"debug"</span> =&gt;
            <span class="hljs-keyword">for</span> Sources <span class="hljs-keyword">use</span> (<span class="hljs-string">"tests/test_calculator.adb"</span>);
         <span class="hljs-keyword">when</span> <span class="hljs-string">"release"</span> =&gt;
            <span class="hljs-keyword">for</span> Sources <span class="hljs-keyword">use</span> ();
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
   <span class="hljs-keyword">end</span> Test_Config;
<span class="hljs-keyword">end</span> My_Project;
</code></pre>
<p>This ensures test code isn’t included in release builds, reducing the size of your final application.</p>
<h2>15.1 Practical Exercises: Building Your First Test Suite</h2>
<p>Let’s put what you’ve learned into practice with hands-on exercises.</p>
<h3>15.1.1 Exercise 1: Simple Calculator Tests</h3>
<p>Create a test suite for a simple calculator application.</p>
<h4>15.1.1.1 Step 1: Create the Calculator Package</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A + B;
   <span class="hljs-keyword">end</span> Add;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Subtract</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A - B;
   <span class="hljs-keyword">end</span> Subtract;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> A * B;
   <span class="hljs-keyword">end</span> Multiply;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Divide</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Float(A) / Float(B);
   <span class="hljs-keyword">end</span> Divide;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<h4>15.1.1.2 Step 2: Create Test Cases</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_calculator.adb</span>
<span class="hljs-keyword">with</span> AUnit.Test_Cases;
<span class="hljs-keyword">with</span> AUnit.Assertions;
<span class="hljs-keyword">with</span> Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Test_Calculator </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Addition</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>, <span class="hljs-string">"2 + 2 should equal 4"</span>);
      AUnit.Assertions.Assert (Calculator.Add(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"-1 + 1 should equal 0"</span>);
      AUnit.Assertions.Assert (Calculator.Add(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 + 0 should equal 0"</span>);
   <span class="hljs-keyword">end</span> Test_Addition;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Subtraction</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) = <span class="hljs-number">2</span>, <span class="hljs-string">"5 - 3 should equal 2"</span>);
      AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>) = -<span class="hljs-number">2</span>, <span class="hljs-string">"3 - 5 should equal -2"</span>);
      AUnit.Assertions.Assert (Calculator.Subtract(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 - 0 should equal 0"</span>);
   <span class="hljs-keyword">end</span> Test_Subtraction;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Multiplication</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Multiply(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) = <span class="hljs-number">6</span>, <span class="hljs-string">"2 * 3 should equal 6"</span>);
      AUnit.Assertions.Assert (Calculator.Multiply(-<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) = -<span class="hljs-number">6</span>, <span class="hljs-string">"-2 * 3 should equal -6"</span>);
      AUnit.Assertions.Assert (Calculator.Multiply(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) = <span class="hljs-number">0</span>, <span class="hljs-string">"0 * 5 should equal 0"</span>);
   <span class="hljs-keyword">end</span> Test_Multiplication;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Division</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">6</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">3.0</span>, <span class="hljs-string">"6 / 2 should equal 3.0"</span>);
      AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">7</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">3.5</span>, <span class="hljs-string">"7 / 2 should equal 3.5"</span>);
      AUnit.Assertions.Assert (Calculator.Divide(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) = <span class="hljs-number">0.0</span>, <span class="hljs-string">"0 / 5 should equal 0.0"</span>);
      AUnit.Assertions.Assert_Exception (Calculator.Divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>), 
                                        <span class="hljs-string">"Divide by zero should raise exception"</span>);
   <span class="hljs-keyword">end</span> Test_Division;

<span class="hljs-keyword">end</span> Test_Calculator;
</code></pre>
<h4>15.1.1.3 Step 3: Create a Test Runner</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_runner.adb</span>
<span class="hljs-keyword">with</span> AUnit.Runner;
<span class="hljs-keyword">with</span> AUnit.Test_Suites;
<span class="hljs-keyword">with</span> Test_Calculator;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Runner</span> <span class="hljs-keyword">is</span>
   Test_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
<span class="hljs-keyword">begin</span>
   Test_Suite.Add_Test (Test_Calculator.Test_Addition<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Calculator.Test_Subtraction<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Calculator.Test_Multiplication<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Calculator.Test_Division<span class="hljs-symbol">'Access</span>);
   AUnit.Runner.Run_Tests (Test_Suite);
<span class="hljs-keyword">end</span> Test_Runner;
</code></pre>
<h4>15.1.1.4 Step 4: Build and Run Tests</h4>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 6 Build the project</span>
gnatmake -P project.gpr tests/test_runner.adb

<span class="hljs-comment"># 7 Run the tests</span>
./test_runner
</code></pre>
<p>This exercise gives you hands-on experience with writing tests for a simple application. You’ll see how AUnit makes testing straightforward and reliable.</p>
<h3>15.0.1 Exercise 2: Temperature Sensor Tests</h3>
<p>Create tests for a temperature sensor application.</p>
<h4>15.0.1.1 Step 1: Create the Temperature Sensor Package</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/temperature_sensor.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Sensor </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Cleanup;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Temperature_Sensor;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/temperature_sensor.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Sensor </span><span class="hljs-keyword">is</span>
   Temperature : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Simulate sensor initialization</span>
      Temperature := <span class="hljs-number">22.0</span>;
   <span class="hljs-keyword">end</span> Initialize;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Cleanup</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Simulate cleanup</span>
      Temperature := <span class="hljs-number">0.0</span>;
   <span class="hljs-keyword">end</span> Cleanup;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Temperature;
   <span class="hljs-keyword">end</span> Read_Temperature;
<span class="hljs-keyword">end</span> Temperature_Sensor;
</code></pre>
<h4>15.0.1.2 Step 2: Create Test Cases</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_temperature_sensor.adb</span>
<span class="hljs-keyword">with</span> AUnit.Test_Cases;
<span class="hljs-keyword">with</span> AUnit.Assertions;
<span class="hljs-keyword">with</span> Temperature_Sensor;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Test_Temperature_Sensor </span><span class="hljs-keyword">is</span>

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Setup</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Temperature_Sensor.Initialize;
   <span class="hljs-keyword">end</span> Setup;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Teardown</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Temperature_Sensor.Cleanup;
   <span class="hljs-keyword">end</span> Teardown;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Read_Temperature</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &gt; -<span class="hljs-number">50.0</span>, 
                              <span class="hljs-string">"Temperature should be above -50°C"</span>);
      AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &lt; <span class="hljs-number">100.0</span>, 
                              <span class="hljs-string">"Temperature should be below 100°C"</span>);
   <span class="hljs-keyword">end</span> Test_Read_Temperature;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Initialize_Cleanup</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Temperature_Sensor.Cleanup;
      AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature = <span class="hljs-number">0.0</span>, 
                              <span class="hljs-string">"Temperature should be 0 after cleanup"</span>);
      
      Temperature_Sensor.Initialize;
      AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &gt; <span class="hljs-number">0.0</span>, 
                              <span class="hljs-string">"Temperature should be positive after initialization"</span>);
   <span class="hljs-keyword">end</span> Test_Initialize_Cleanup;

<span class="hljs-keyword">end</span> Test_Temperature_Sensor;
</code></pre>
<h4>15.0.1.3 Step 3: Create a Test Runner</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- tests/test_runner.adb</span>
<span class="hljs-keyword">with</span> AUnit.Runner;
<span class="hljs-keyword">with</span> AUnit.Test_Suites;
<span class="hljs-keyword">with</span> Test_Temperature_Sensor;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Runner</span> <span class="hljs-keyword">is</span>
   Test_Suite : <span class="hljs-type">AUnit.Test_Suites.Test_Suite</span>;
<span class="hljs-keyword">begin</span>
   Test_Suite.Add_Test (Test_Temperature_Sensor.Test_Read_Temperature<span class="hljs-symbol">'Access</span>,
                        Setup  =&gt; Test_Temperature_Sensor.Setup<span class="hljs-symbol">'Access</span>,
                        Teardown =&gt; Test_Temperature_Sensor.Teardown<span class="hljs-symbol">'Access</span>);
   Test_Suite.Add_Test (Test_Temperature_Sensor.Test_Initialize_Cleanup<span class="hljs-symbol">'Access</span>,
                        Setup  =&gt; Test_Temperature_Sensor.Setup<span class="hljs-symbol">'Access</span>,
                        Teardown =&gt; Test_Temperature_Sensor.Teardown<span class="hljs-symbol">'Access</span>);
   AUnit.Runner.Run_Tests (Test_Suite);
<span class="hljs-keyword">end</span> Test_Runner;
</code></pre>
<h4>15.0.1.4 Step 4: Build and Run Tests</h4>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 8 Build the project</span>
gnatmake -P project.gpr tests/test_runner.adb

<span class="hljs-comment"># 9 Run the tests</span>
./test_runner
</code></pre>
<p>This exercise shows how to test hardware-related code with setup/teardown procedures. You’ll see how AUnit makes testing sensor code reliable and maintainable.</p>
<h2>15.1 Real-World Testing Scenarios</h2>
<p>Let’s explore how testing applies to common real-world applications.</p>
<h3>15.1.1 Home Automation System</h3>
<p>A home automation system might include:</p>
<ul>
<li>Temperature sensors</li>
<li>Lighting controls</li>
<li>Security systems</li>
</ul>
<p>Each component can be tested separately:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Test temperature sensor readings</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Temperature_Sensor</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &gt; -<span class="hljs-number">50.0</span>, 
                           <span class="hljs-string">"Temperature should be above -50°C"</span>);
   AUnit.Assertions.Assert (Temperature_Sensor.Read_Temperature &lt; <span class="hljs-number">100.0</span>, 
                           <span class="hljs-string">"Temperature should be below 100°C"</span>);
<span class="hljs-keyword">end</span> Test_Temperature_Sensor;

<span class="hljs-comment">-- Test lighting controls</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Light_Control</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Light_Control.Turn_On;
   AUnit.Assertions.Assert (Light_Control.Is_On, <span class="hljs-string">"Light should be on"</span>);
   
   Light_Control.Turn_Off;
   AUnit.Assertions.Assert (<span class="hljs-keyword">not</span> Light_Control.Is_On, <span class="hljs-string">"Light should be off"</span>);
<span class="hljs-keyword">end</span> Test_Light_Control;
</code></pre>
<p>This modular approach makes it easy to test each component independently.</p>
<h3>15.1.2 Personal Finance Tool</h3>
<p>A personal finance tool might include:</p>
<ul>
<li>Interest calculations</li>
<li>Budget tracking</li>
<li>Transaction processing</li>
</ul>
<p>Each feature can be tested separately:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Test interest calculations</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Interest_Calculation</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   AUnit.Assertions.Assert (Calculate_Interest(<span class="hljs-number">1000.0</span>, <span class="hljs-number">0.05</span>, <span class="hljs-number">1</span>) = <span class="hljs-number">50.0</span>, 
                           <span class="hljs-string">"5% interest on $1000 should be $50"</span>);
   AUnit.Assertions.Assert (Calculate_Interest(<span class="hljs-number">5000.0</span>, <span class="hljs-number">0.02</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">200.0</span>, 
                           <span class="hljs-string">"2% interest on $5000 for 2 years should be $200"</span>);
<span class="hljs-keyword">end</span> Test_Interest_Calculation;

<span class="hljs-comment">-- Test budget tracking</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Budget_Tracking</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">AUnit.Test_Cases.Test_Case</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Budget_Tracking.Add_Transaction(<span class="hljs-number">100.0</span>, <span class="hljs-string">"Groceries"</span>);
   AUnit.Assertions.Assert (Budget_Tracking.Get_Balance = <span class="hljs-number">100.0</span>, 
                           <span class="hljs-string">"Balance should be $100 after transaction"</span>);
   
   Budget_Tracking.Add_Transaction(-<span class="hljs-number">50.0</span>, <span class="hljs-string">"Utilities"</span>);
   AUnit.Assertions.Assert (Budget_Tracking.Get_Balance = <span class="hljs-number">50.0</span>, 
                           <span class="hljs-string">"Balance should be $50 after second transaction"</span>);
<span class="hljs-keyword">end</span> Test_Budget_Tracking;
</code></pre>
<p>This approach ensures each part of your application works correctly before combining them.</p>
<h2>15.2 Next Steps for Mastering AUnit</h2>
<p>Now that you’ve learned the basics, here are some next steps to continue your journey:</p>
<h3>15.2.1 . Explore Advanced Testing Techniques</h3>
<p>Try these more advanced techniques:</p>
<ul>
<li><strong>Mock objects</strong>: Simulate hardware or external dependencies</li>
<li><strong>Parameterized tests</strong>: Run the same test with different inputs</li>
<li><strong>Test-driven development</strong>: Write tests before writing code</li>
<li><strong>Continuous integration</strong>: Automatically run tests on code changes</li>
</ul>
<h3>15.2.2 . Practice with Real-World Projects</h3>
<p>Apply AUnit to your own projects:</p>
<ul>
<li>Build a home automation system with sensor testing</li>
<li>Create a personal finance tool with transaction testing</li>
<li>Develop a data processing pipeline with validation testing</li>
</ul>
<h3>15.2.3 . Learn About Test Coverage</h3>
<p>Measure how much of your code is tested:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatcov run -P project.gpr --level=stmt
gnatcov report -P project.gpr
</code></pre>
<p>This shows which parts of your code are covered by tests and which need more testing.</p>
<h3>15.2.4 . Join the Ada Community</h3>
<p>The Ada community is active and supportive. Join:</p>
<ul>
<li><strong>AdaCore forums</strong>: For technical support</li>
<li><strong>GitHub repositories</strong>: For Ada projects and examples</li>
<li><strong>Ada mailing lists</strong>: For discussions and questions</li>
</ul>
<h2>15.3 Conclusion: The Power of Reliable Testing</h2>
<blockquote>
<p>“Testing isn’t just for safety-critical systems—it’s essential for any application where reliability matters. With AUnit, you can build robust, maintainable code for home automation, personal finance tools, and more—without specialized knowledge.”</p>
</blockquote>
<p>Testing is a fundamental skill for any programmer, regardless of experience level. AUnit makes testing in Ada simple, reliable, and accessible to beginners. With AUnit, you can:</p>
<ul>
<li>Catch bugs early when they’re easier to fix</li>
<li>Build confidence in your code before deploying</li>
<li>Make maintenance easier by verifying existing functionality</li>
<li>Create documentation through test cases</li>
<li>Collaborate more effectively with clear tests</li>
</ul>
<p>For everyday applications, these benefits translate directly to better user experiences. A home automation system that works reliably builds trust with users. A personal finance app that calculates correctly prevents financial mistakes. Testing isn’t just for professionals—it’s a practical tool for any developer who wants to build reliable software.</p>
<p>As you continue your Ada journey, remember that testing isn’t an extra step—it’s an essential part of development. By incorporating testing from the beginning, you’ll develop good habits that will serve you well as your projects grow.</p>
<p>Testing is more than just a technical skill—it’s a mindset. It encourages you to think carefully about what your code should do, how it should behave, and how to verify that it works correctly. This mindset will make you a better programmer, regardless of what language or platform you use.</p>
<h1>16. Embedded Systems Programming in Ada</h1>
<blockquote>
<p>“Embedded systems programming isn’t just for aerospace engineers—it’s about controlling hardware in everyday devices like smart thermostats and wearable tech. Ada provides safe, reliable tools for this task without requiring specialized knowledge.”</p>
</blockquote>
<p>When you think of embedded systems, you might imagine complex aerospace control systems or medical devices. But embedded systems are actually everywhere in daily life—your smart thermostat, fitness tracker, coffee maker, and even your car’s infotainment system all run on embedded software. These systems are specialized computers designed to control specific hardware functions, often with real-time constraints and limited resources. Unlike general-purpose computers that run complex applications, embedded systems focus on dedicated tasks with precise timing requirements.</p>
<p>Ada is uniquely suited for embedded programming because it provides strong type safety, direct hardware access, and built-in real-time support—all while maintaining reliability without requiring specialized safety-critical knowledge. This chapter explores how you can use Ada to build embedded systems for everyday applications, from home automation to IoT devices. You’ll learn the fundamental concepts, practical techniques, and simple examples that let you control hardware directly while avoiding common pitfalls.</p>
<h2>16.1 Why Embedded Systems Matter for Everyday Applications</h2>
<p>Embedded systems are the invisible brains behind countless devices we use every day. Consider these common examples:</p>
<ul>
<li><strong>Smart home devices</strong>: Thermostats, lighting systems, and security cameras</li>
<li><strong>Wearables</strong>: Fitness trackers, smartwatches, and health monitors</li>
<li><strong>Consumer electronics</strong>: Coffee makers, washing machines, and smart TVs</li>
<li><strong>Automotive systems</strong>: Engine control units, infotainment systems, and sensors</li>
</ul>
<p>These systems differ from general-purpose computers in key ways:</p>
<ul>
<li>They’re designed for specific tasks rather than general computing</li>
<li>They often have strict timing requirements (real-time constraints)</li>
<li>They typically run on limited hardware resources (small memory, low-power processors)</li>
<li>They interact directly with physical hardware (sensors, actuators, displays)</li>
</ul>
<p>Ada excels in this environment because it provides:</p>
<ul>
<li><strong>Strong type safety</strong>: Prevents accidental errors when working with hardware registers</li>
<li><strong>Direct hardware access</strong>: Safe memory-mapped I/O without unsafe pointer operations</li>
<li><strong>Built-in real-time support</strong>: Tasking and timing primitives without external libraries</li>
<li><strong>No hidden memory management</strong>: Predictable behavior without garbage collection pauses</li>
</ul>
<p>Unlike C, which is commonly used for embedded systems but lacks built-in safety features, Ada provides compile-time checks that prevent common errors like buffer overflows, type mismatches, and uninitialized variables. This means your embedded code is more reliable from the start, without requiring specialized safety-critical knowledge.</p>
<h2>16.2 Basic Embedded Concepts</h2>
<p>Before diving into code, let’s understand the fundamental concepts of embedded systems programming.</p>
<h3>16.2.1 Memory-Mapped I/O</h3>
<p>In embedded systems, hardware components like sensors, LEDs, and buttons are controlled through memory addresses. This is called <strong>memory-mapped I/O</strong>—the hardware registers appear as memory locations that your program can read and write.</p>
<p>For example, a simple LED might be controlled by writing to a specific memory address. When you write a 1 to that address, the LED turns on; writing 0 turns it off. This is how embedded systems interact with physical hardware.</p>
<h3>16.2.2 Bit Manipulation</h3>
<p>Many hardware registers control multiple features through individual bits. For example, a single 8-bit register might control:</p>
<ul>
<li>Bit 0: LED on/off</li>
<li>Bit 1: Button state</li>
<li>Bit 2-7: Other sensor readings</li>
</ul>
<p>To control individual bits without affecting others, you need <strong>bit manipulation</strong>—techniques for setting, clearing, and checking specific bits in a register.</p>
<h3>16.2.3 Interrupts</h3>
<p>Interrupts are signals from hardware that pause the current program execution to handle urgent events. For example, when a button is pressed, the hardware generates an interrupt to notify the software. The software then handles the event before returning to normal operation.</p>
<h3>16.2.4 Real-Time Constraints</h3>
<p>Embedded systems often have strict timing requirements. For example, a motor controller might need to update its output every 10 milliseconds to maintain smooth operation. Missing these deadlines can cause system failures.</p>
<h2>16.3 Ada Features for Embedded Development</h2>
<p>Ada provides several features specifically designed for embedded programming, making it safer and more reliable than many alternatives.</p>
<h3>16.3.1 Volatile Variables</h3>
<p>Hardware registers can change outside your program’s control (for example, when a sensor updates). To prevent the compiler from optimizing away reads or writes, you must mark these variables as <strong>volatile</strong>.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> System;
<span class="hljs-keyword">with</span> Interfaces;

<span class="hljs-keyword">package</span> <span class="hljs-title">LED_Control </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">LED_Register </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Control : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data    : <span class="hljs-type">Interfaces.Unsigned_8</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>
     <span class="hljs-keyword">with</span> Volatile_Full_Access, Size =&gt; <span class="hljs-number">16</span>,
          Bit_Order =&gt; System.Low_Order_First,
          Address =&gt; <span class="hljs-number">16#4000_0000#</span>;

   LED_Register : <span class="hljs-type">LED_Register</span>
     <span class="hljs-keyword">with</span> Import, Address =&gt; <span class="hljs-number">16#4000_0000#</span>;
<span class="hljs-keyword">end</span> LED_Control;
</code></pre>
<p>The <code>Volatile_Full_Access</code> aspect ensures the compiler doesn’t optimize away reads or writes to the hardware register. Without this, the compiler might remove “unnecessary” operations, causing your hardware to behave incorrectly.</p>
<h3>16.3.2 Address Clauses</h3>
<p>To map hardware registers to memory locations, you use <strong>address clauses</strong>. These tell the compiler exactly where in memory a variable should be placed.</p>
<pre><code class="language-ada hljs" data-highlighted="yes">LED_Register : <span class="hljs-type">LED_Register</span>
  <span class="hljs-keyword">with</span> Import, Address =&gt; <span class="hljs-number">16#4000_0000#</span>;
</code></pre>
<p>This places the <code>LED_Register</code> variable at memory address <code>0x4000_0000</code>. The exact address depends on your hardware—consult your microcontroller’s datasheet for the correct addresses.</p>
<h3>16.3.3 Bit Manipulation Packages</h3>
<p>Ada provides packages for bit manipulation, making it easy to work with individual bits in registers:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces; <span class="hljs-keyword">use</span> Interfaces;
<span class="hljs-keyword">with</span> System.Storage_Elements; <span class="hljs-keyword">use</span> System.Storage_Elements;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_LED</span> <span class="hljs-keyword">is</span>
   LED_Register : <span class="hljs-type">Unsigned_8</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Set bit 0 (turn on LED)</span>
   LED_Register := LED_Register <span class="hljs-keyword">or</span> <span class="hljs-number">2#0000_0001#</span>;
   
   <span class="hljs-comment">-- Clear bit 0 (turn off LED)</span>
   LED_Register := LED_Register <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-number">2#0000_0001#</span>;
   
   <span class="hljs-comment">-- Check if bit 0 is set</span>
   <span class="hljs-keyword">if</span> (LED_Register <span class="hljs-keyword">and</span> <span class="hljs-number">2#0000_0001#</span>) /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- LED is on</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Set_LED;
</code></pre>
<p>These bitwise operations let you control individual bits without affecting other bits in the register.</p>
<h3>16.3.4 Tasking for Concurrency</h3>
<p>Embedded systems often need to handle multiple tasks simultaneously. Ada’s built-in tasking model makes this straightforward:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Reader </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Sensor_Reader;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Sensor_Reader <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">loop</span>
      Read_Sensor;
      <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>; <span class="hljs-comment">-- 100ms sampling interval</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Sensor_Reader;
</code></pre>
<p>This task reads a sensor every 100ms while the main program continues executing other tasks. No external libraries are needed—this is built into the language.</p>
<h3>16.3.5 No Hidden Memory Management</h3>
<p>Unlike languages with garbage collection (like Java or Python), Ada gives you predictable memory behavior. You control exactly when memory is allocated and freed, avoiding unexpected pauses that could miss real-time deadlines.</p>
<h2>16.4 Practical Example: Blinking an LED with Ada</h2>
<p>Let’s create a simple embedded project that blinks an LED on a Raspberry Pi. This example demonstrates the core concepts we’ve covered: memory-mapped I/O, volatile variables, and timing control.</p>
<h3>16.4.1 Setting Up Your Environment</h3>
<p>To run this example, you’ll need:</p>
<ul>
<li>A Raspberry Pi (any model with GPIO pins)</li>
<li>GNAT for ARM (available from AdaCore)</li>
<li>A breadboard and LED</li>
<li>A 220Ω resistor</li>
</ul>
<p>First, install GNAT for ARM:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 2 On Ubuntu</span>
<span class="hljs-built_in">sudo</span> apt install gnat-arm-linux-gnueabihf
</code></pre>
<p>Create a project directory:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> blink_led
<span class="hljs-built_in">cd</span> blink_led
</code></pre>
<p>Create a project file <code>blink_led.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Blink_LED <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/blink_led.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Blink_LED;
</code></pre>
<h3>16.0.1 Creating the Hardware Interface</h3>
<p>Create a package to interface with the Raspberry Pi’s GPIO pins:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/gpio.ads</span>
<span class="hljs-keyword">with</span> System;
<span class="hljs-keyword">with</span> Interfaces;

<span class="hljs-keyword">package</span> <span class="hljs-title">GPIO </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">GPIO_Register </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Output_Enable : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data_Set      : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data_Clear    : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data_Level    : <span class="hljs-type">Interfaces.Unsigned_8</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>
     <span class="hljs-keyword">with</span> Volatile_Full_Access, Size =&gt; <span class="hljs-number">32</span>,
          Bit_Order =&gt; System.Low_Order_First,
          Address =&gt; <span class="hljs-number">16#2020_0000#</span>;

   GPIO_Register : <span class="hljs-type">GPIO_Register</span>
     <span class="hljs-keyword">with</span> Import, Address =&gt; <span class="hljs-number">16#2020_0000#</span>;
   
   <span class="hljs-comment">-- GPIO pin 18 (physical pin 12)</span>
   LED_Pin : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">18</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_On_LED;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_Off_LED;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Toggle_LED;</span>
end GPIO;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/gpio.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">GPIO </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_On_LED</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Set bit 18 in Data_Set register</span>
      GPIO_Register.Data_Set := <span class="hljs-number">16#0004_0000#</span>; <span class="hljs-comment">-- 1 &lt;&lt; 18</span>
   <span class="hljs-keyword">end</span> Turn_On_LED;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_Off_LED</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Set bit 18 in Data_Clear register</span>
      GPIO_Register.Data_Clear := <span class="hljs-number">16#0004_0000#</span>; <span class="hljs-comment">-- 1 &lt;&lt; 18</span>
   <span class="hljs-keyword">end</span> Turn_Off_LED;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Toggle_LED</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Read current state</span>
      <span class="hljs-keyword">declare</span>
         Current : <span class="hljs-type">Interfaces.Unsigned_8</span> := GPIO_Register.Data_Level;
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">if</span> (Current <span class="hljs-keyword">and</span> <span class="hljs-number">16#0004_0000#</span>) /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
            Turn_Off_LED;
         <span class="hljs-keyword">else</span>
            Turn_On_LED;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> Toggle_LED;
<span class="hljs-keyword">end</span> GPIO;
</code></pre>
<h3>16.0.2 Creating the Blink Application</h3>
<p>Now create the main program that blinks the LED:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/blink_led.adb</span>
<span class="hljs-keyword">with</span> Ada.Real_Time; <span class="hljs-keyword">use</span> Ada.Real_Time;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> GPIO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Blink_LED</span> <span class="hljs-keyword">is</span>
   One_Second : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Seconds(<span class="hljs-number">1</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Configure GPIO pin 18 as output</span>
   GPIO.GPIO_Register.Output_Enable := <span class="hljs-number">16#0004_0000#</span>; <span class="hljs-comment">-- 1 &lt;&lt; 18</span>
   
   <span class="hljs-keyword">loop</span>
      GPIO.Toggle_LED;
      <span class="hljs-keyword">delay</span> until Clock + One_Second;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Blink_LED;
</code></pre>
<h3>16.0.3 Building and Running the Code</h3>
<p>Compile and transfer the code to your Raspberry Pi:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 3 On your development machine</span>
gnatmake -P blink_led.gpr -cargs -mlittle-endian -march=armv6 -mtune=arm1176jzf-s
<span class="hljs-comment"># 4 Copy to Raspberry Pi</span>
scp blink_led pi@raspberrypi.local:~/blink_led
</code></pre>
<p>On the Raspberry Pi, run the program:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">sudo</span> ./blink_led
</code></pre>
<p>The LED should blink once per second. Press Ctrl+C to stop the program.</p>
<h3>16.0.1 Understanding the Code</h3>
<p>Let’s break down what’s happening:</p>
<ol>
<li>
<p><strong>Memory-Mapped I/O</strong>: The <code>GPIO_Register</code> is mapped to the physical memory address <code>0x2020_0000</code>, which is where the Raspberry Pi’s GPIO registers are located.</p>
</li>
<li>
<p><strong>Volatile Variables</strong>: The <code>Volatile_Full_Access</code> aspect ensures the compiler doesn’t optimize away reads or writes to the hardware registers.</p>
</li>
<li>
<p><strong>Bit Manipulation</strong>: To control individual pins, we use bitwise operations:</p>
<ul>
<li><code>16#0004_0000#</code> is <code>1 &lt;&lt; 18</code> (bit 18 set)</li>
<li>Setting this in the Data_Set register turns on the LED</li>
<li>Setting this in the Data_Clear register turns off the LED</li>
</ul>
</li>
<li>
<p><strong>Real-Time Timing</strong>: The <code>Ada.Real_Time</code> package provides precise timing control with the <code>Clock</code> and <code>delay until</code> operations.</p>
</li>
<li>
<p><strong>No Hidden Memory Management</strong>: The program uses static memory allocation, avoiding garbage collection pauses that could disrupt timing.</p>
</li>
</ol>
<p>This example demonstrates how Ada provides safe, reliable hardware access without requiring specialized knowledge of low-level programming.</p>
<h2>16.1 Real-Time Aspects in Ada</h2>
<p>Embedded systems often have strict timing requirements. Ada’s built-in real-time features make it easy to meet these requirements.</p>
<h3>16.1.1 Simple Timing with Delays</h3>
<p>For many embedded applications, simple timing with delays is sufficient:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Blink_LED</span> <span class="hljs-keyword">is</span>
   One_Second : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Seconds(<span class="hljs-number">1</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      GPIO.Toggle_LED;
      <span class="hljs-keyword">delay</span> until Clock + One_Second;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Blink_LED;
</code></pre>
<p>The <code>delay until</code> operation ensures the LED toggles precisely every second, with no jitter or timing drift.</p>
<h3>16.1.2 Tasking for Concurrent Tasks</h3>
<p>For more complex systems, Ada’s tasking model lets you handle multiple tasks simultaneously:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Reader </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Sensor_Reader;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Sensor_Reader <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">loop</span>
      Read_Sensor;
      <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>; <span class="hljs-comment">-- 100ms sampling interval</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Sensor_Reader;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">LED_Controller </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> LED_Controller;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> LED_Controller <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">loop</span>
      Toggle_LED;
      <span class="hljs-keyword">delay</span> <span class="hljs-number">1.0</span>; <span class="hljs-comment">-- 1 second interval</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> LED_Controller;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Sensor_Reader.Start;
   LED_Controller.Start;
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Main program continues running</span>
      <span class="hljs-keyword">delay</span> <span class="hljs-number">1.0</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p>This example has two tasks:</p>
<ul>
<li><code>Sensor_Reader</code> reads a sensor every 100ms</li>
<li><code>LED_Controller</code> toggles an LED every second</li>
</ul>
<p>Both tasks run concurrently without interfering with each other.</p>
<h3>16.1.3 Real-Time Constraints</h3>
<p>For applications with strict timing requirements, Ada provides precise control:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Control_Task </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.Priority<span class="hljs-symbol">'Last</span> - <span class="hljs-number">10</span>);
   <span class="hljs-keyword">pragma</span> Deadline (Seconds =&gt; <span class="hljs-number">0.01</span>); <span class="hljs-comment">-- 10ms deadline</span>
<span class="hljs-keyword">end</span> Control_Task;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Control_Task <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      Process_Sensor_Data;
      <span class="hljs-keyword">delay</span> until Clock + Milliseconds(<span class="hljs-number">10</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Deadline_Error =&gt;
      Handle_Missed_Deadline;
<span class="hljs-keyword">end</span> Control_Task;
</code></pre>
<p>This task has:</p>
<ul>
<li>A priority of <code>System.Priority'Last - 10</code> (high priority)</li>
<li>A deadline of 10ms for each iteration</li>
<li>Automatic handling of missed deadlines</li>
</ul>
<h2>16.2 Tools for Embedded Development with Ada</h2>
<p>Several tools make embedded development with Ada easier and more efficient.</p>
<h3>16.2.1 GNAT for ARM</h3>
<p>GNAT for ARM is the standard compiler for embedded Ada development. It supports:</p>
<ul>
<li>Cross-compilation for ARM processors</li>
<li>Optimization for embedded targets</li>
<li>Debugging support with GDB</li>
<li>Integration with common embedded IDEs</li>
</ul>
<p>To install GNAT for ARM:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 5 On Ubuntu</span>
<span class="hljs-built_in">sudo</span> apt install gnat-arm-linux-gnueabihf

<span class="hljs-comment"># 6 On macOS (using Homebrew)</span>
brew install gnat-arm-linux-gnueabihf
</code></pre>
<h3>16.0.1 Simulators for Testing</h3>
<p>Before deploying to hardware, you can test your code with simulators:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 7 Install QEMU for ARM simulation</span>
<span class="hljs-built_in">sudo</span> apt install qemu-system-arm

<span class="hljs-comment"># 8 Run Ada code in simulation</span>
qemu-system-arm -M raspi2 -kernel blink_led
</code></pre>
<p>Simulators let you test your code without physical hardware, making development faster and safer.</p>
<h3>16.0.1 Hardware Abstraction Layers</h3>
<p>For portability across different hardware platforms, use hardware abstraction layers (HALs):</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">HAL </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_On_LED;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_Off_LED;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Toggle_LED;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Delay_Milliseconds</span> (Ms : <span class="hljs-type">Natural</span>);
<span class="hljs-keyword">end</span> HAL;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">HAL </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation specific to hardware</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Configure GPIO pins</span>
   <span class="hljs-keyword">end</span> Initialize;
   
   <span class="hljs-comment">-- Other procedures...</span>
<span class="hljs-keyword">end</span> HAL;
</code></pre>
<p>This abstraction lets you write application code that works across different hardware platforms with minimal changes.</p>
<h2>16.1 Common Pitfalls and Best Practices</h2>
<p>Even with Ada’s safety features, embedded programming has pitfalls. Here’s how to avoid them.</p>
<h3>16.1.1 Pitfall: Incorrect Memory Addresses</h3>
<p><strong>Problem</strong>: Using the wrong memory address for hardware registers.</p>
<p><strong>Solution</strong>: Always consult your hardware’s datasheet for correct addresses. Use constants for addresses:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good practice</span>
GPIO_Register_Address : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">System.Address</span> := <span class="hljs-number">16#2020_0000#</span>;
GPIO_Register : <span class="hljs-type">GPIO_Register</span>
  <span class="hljs-keyword">with</span> Import, Address =&gt; GPIO_Register_Address;
</code></pre>
<h3>16.1.2 Pitfall: Forgetting Volatile</h3>
<p><strong>Problem</strong>: Not marking hardware registers as volatile, causing compiler optimizations to remove necessary operations.</p>
<p><strong>Solution</strong>: Always use <code>Volatile_Full_Access</code> for hardware registers:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Correct</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">GPIO_Register </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span> ... <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>
  <span class="hljs-keyword">with</span> Volatile_Full_Access, Address =&gt; ...;
</code></pre>
<h3>16.1.3 Pitfall: Unhandled Interrupts</h3>
<p><strong>Problem</strong>: Not properly handling interrupts, causing system instability.</p>
<p><strong>Solution</strong>: Use Ada’s interrupt handling features:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Interrupt</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Handle interrupt</span>
<span class="hljs-keyword">end</span> Handle_Interrupt;

<span class="hljs-keyword">pragma</span> Attach_Handler (Handle_Interrupt, Interrupt_Number =&gt; <span class="hljs-number">18</span>);
</code></pre>
<h3>16.1.4 Best Practice: Test on Hardware Early</h3>
<p><strong>Problem</strong>: Waiting too long to test on actual hardware.</p>
<p><strong>Solution</strong>: Test on hardware as early as possible, even for simple functionality. Use a simple LED blink program as your first test.</p>
<h3>16.1.5 Best Practice: Use Static Memory Allocation</h3>
<p><strong>Problem</strong>: Using dynamic memory allocation, which can cause unpredictable behavior.</p>
<p><strong>Solution</strong>: Prefer static memory allocation for embedded systems:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good</span>
Buffer : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> Byte;

<span class="hljs-comment">-- Avoid</span>
Buffer : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Byte</span> := <span class="hljs-keyword">new</span> Byte;
</code></pre>
<h3>16.1.6 Best Practice: Document Hardware Dependencies</h3>
<p><strong>Problem</strong>: Not documenting which hardware features your code depends on.</p>
<p><strong>Solution</strong>: Clearly document hardware dependencies in comments:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- This code requires:</span>
<span class="hljs-comment">-- - Raspberry Pi 3 or later</span>
<span class="hljs-comment">-- - LED connected to GPIO pin 18</span>
<span class="hljs-comment">-- - 220Ω resistor in series with LED</span>
</code></pre>
<h2>16.2 Practical Exercise: Temperature Monitoring System</h2>
<p>Let’s build a complete embedded project: a temperature monitoring system for a home automation application.</p>
<h3>16.2.1 Project Overview</h3>
<p>This system will:</p>
<ul>
<li>Read temperature from a DS18B20 sensor</li>
<li>Display the temperature on an LCD</li>
<li>Log temperature readings to a file</li>
<li>Send alerts if temperature exceeds safe limits</li>
</ul>
<h3>16.2.2 Step 1: Hardware Setup</h3>
<p>You’ll need:</p>
<ul>
<li>Raspberry Pi</li>
<li>DS18B20 temperature sensor</li>
<li>4.7kΩ resistor</li>
<li>16x2 LCD display</li>
<li>Breadboard and jumper wires</li>
</ul>
<p>Connect the hardware:</p>
<ul>
<li>DS18B20 data pin to GPIO 4</li>
<li>LCD data pins to GPIO 17-22</li>
<li>Power and ground connections</li>
</ul>
<h3>16.2.3 Step 2: Create the Project Structure</h3>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> temperature_monitor
<span class="hljs-built_in">cd</span> temperature_monitor
<span class="hljs-built_in">mkdir</span> src
</code></pre>
<p>Create <code>temperature_monitor.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Temperature_Monitor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>, <span class="hljs-string">"-gnata"</span>);
   <span class="hljs-keyword">end</span> Compiler;
<span class="hljs-keyword">end</span> Temperature_Monitor;
</code></pre>
<h3>16.2.4 Step 3: Implement the Hardware Interfaces</h3>
<p>First, create the GPIO interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/gpio.ads</span>
<span class="hljs-keyword">with</span> System;
<span class="hljs-keyword">with</span> Interfaces;

<span class="hljs-keyword">package</span> <span class="hljs-title">GPIO </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">GPIO_Register </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Output_Enable : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data_Set      : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data_Clear    : <span class="hljs-type">Interfaces.Unsigned_8</span>;
      Data_Level    : <span class="hljs-type">Interfaces.Unsigned_8</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>
     <span class="hljs-keyword">with</span> Volatile_Full_Access, Size =&gt; <span class="hljs-number">32</span>,
          Bit_Order =&gt; System.Low_Order_First,
          Address =&gt; <span class="hljs-number">16#2020_0000#</span>;

   GPIO_Register : <span class="hljs-type">GPIO_Register</span>
     <span class="hljs-keyword">with</span> Import, Address =&gt; <span class="hljs-number">16#2020_0000#</span>;
   
   <span class="hljs-comment">-- GPIO pin definitions</span>
   LED_Pin    : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">18</span>;
   Sensor_Pin : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">4</span>;
   LCD_RS     : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">17</span>;
   LCD_E      : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">22</span>;
   LCD_D4     : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">23</span>;
   LCD_D5     : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">24</span>;
   LCD_D6     : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">25</span>;
   LCD_D7     : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">26</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Configure_Pin</span> (Pin : <span class="hljs-type">Natural</span>; Direction : <span class="hljs-type">Boolean</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Pin</span> (Pin : <span class="hljs-type">Natural</span>; Value : <span class="hljs-type">Boolean</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Pin</span> (Pin : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span>;
<span class="hljs-keyword">end</span> GPIO;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/gpio.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">GPIO </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Configure_Pin</span> (Pin : <span class="hljs-type">Natural</span>; Direction : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Configure pin as input or output</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation specific to hardware</span>
      null;
   <span class="hljs-keyword">end</span> Configure_Pin;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Pin</span> (Pin : <span class="hljs-type">Natural</span>; Value : <span class="hljs-type">Boolean</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Set pin high or low</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation specific to hardware</span>
      null;
   <span class="hljs-keyword">end</span> Set_Pin;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Pin</span> (Pin : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Boolean</span> <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Read pin state</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation specific to hardware</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>;
   <span class="hljs-keyword">end</span> Get_Pin;
<span class="hljs-keyword">end</span> GPIO;
</code></pre>
<p>Next, create the DS18B20 sensor interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/ds18b20.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">DS18B20 </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> DS18B20;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/ds18b20.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">DS18B20 </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Read_Temperature</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Implementation of 1-Wire protocol</span>
      <span class="hljs-comment">-- Read temperature from sensor</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> <span class="hljs-number">22.5</span>; <span class="hljs-comment">-- Simulated temperature</span>
   <span class="hljs-keyword">end</span> Read_Temperature;
<span class="hljs-keyword">end</span> DS18b20;
</code></pre>
<p>Create the LCD interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/lcd.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">LCD </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Write_String</span> (Str : <span class="hljs-type">String</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Clear_Screen;</span>
end LCD;
</code></pre>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/lcd.adb</span>
<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">LCD </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Initialize LCD display</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation specific to hardware</span>
      null;
   <span class="hljs-keyword">end</span> Initialize;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Write_String</span> (Str : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Write string to LCD</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation specific to hardware</span>
      null;
   <span class="hljs-keyword">end</span> Write_String;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Clear_Screen</span> <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Clear LCD screen</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Implementation specific to hardware</span>
      null;
   <span class="hljs-keyword">end</span> Clear_Screen;
<span class="hljs-keyword">end</span> LCD;
</code></pre>
<h3>16.2.5 Step 4: Implement the Main Application</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/main.adb</span>
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Real_Time; <span class="hljs-keyword">use</span> Ada.Real_Time;
<span class="hljs-keyword">with</span> GPIO; <span class="hljs-keyword">use</span> GPIO;
<span class="hljs-keyword">with</span> DS18B20; <span class="hljs-keyword">use</span> DS18B20;
<span class="hljs-keyword">with</span> LCD; <span class="hljs-keyword">use</span> LCD;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   One_Second : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Time_Span</span> := Seconds(<span class="hljs-number">1</span>);
   Temperature : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Configure GPIO pins</span>
   Configure_Pin (Sensor_Pin, <span class="hljs-literal">False</span>); <span class="hljs-comment">-- Input</span>
   Configure_Pin (LCD_RS, <span class="hljs-literal">True</span>);      <span class="hljs-comment">-- Output</span>
   Configure_Pin (LCD_E, <span class="hljs-literal">True</span>);       <span class="hljs-comment">-- Output</span>
   Configure_Pin (LCD_D4, <span class="hljs-literal">True</span>);      <span class="hljs-comment">-- Output</span>
   Configure_Pin (LCD_D5, <span class="hljs-literal">True</span>);      <span class="hljs-comment">-- Output</span>
   Configure_Pin (LCD_D6, <span class="hljs-literal">True</span>);      <span class="hljs-comment">-- Output</span>
   Configure_Pin (LCD_D7, <span class="hljs-literal">True</span>);      <span class="hljs-comment">-- Output</span>
   
   <span class="hljs-comment">-- Initialize LCD</span>
   Initialize;
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Read temperature</span>
      Temperature := Read_Temperature;
      
      <span class="hljs-comment">-- Display on LCD</span>
      Clear_Screen;
      Write_String (<span class="hljs-string">"Temp: "</span> &amp; Temperature<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"C"</span>);
      
      <span class="hljs-comment">-- Log to file</span>
      <span class="hljs-keyword">declare</span>
         File : <span class="hljs-type">File_Type</span>;
      <span class="hljs-keyword">begin</span>
         Open (File, Out_File, <span class="hljs-string">"temperature.log"</span>);
         Put_Line (File, Ada.Calendar.Clock<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">" - "</span> &amp; Temperature<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"C"</span>);
         Close (File);
      <span class="hljs-keyword">end</span>;
      
      <span class="hljs-comment">-- Check for alerts</span>
      <span class="hljs-keyword">if</span> Temperature &gt; <span class="hljs-number">30.0</span> <span class="hljs-keyword">then</span>
         Set_Pin (LED_Pin, <span class="hljs-literal">True</span>);
      <span class="hljs-keyword">else</span>
         Set_Pin (LED_Pin, <span class="hljs-literal">False</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Wait before next reading</span>
      <span class="hljs-keyword">delay</span> until Clock + One_Second;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Main;
</code></pre>
<h3>16.2.6 Step 5: Build and Test</h3>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 9 On development machine</span>
gnatmake -P temperature_monitor.gpr -cargs -mlittle-endian -march=armv6 -mtune=arm1176jzf-s

<span class="hljs-comment"># 10 Transfer to Raspberry Pi</span>
scp temperature_monitor pi@raspberrypi.local:~/temperature_monitor

<span class="hljs-comment"># 11 On Raspberry Pi</span>
<span class="hljs-built_in">cd</span> temperature_monitor
<span class="hljs-built_in">sudo</span> ./temperature_monitor
</code></pre>
<p>You should see the temperature displayed on the LCD, with alerts triggered when temperature exceeds 30°C.</p>
<h2>11.1 Next Steps for Learning Embedded Ada</h2>
<p>Now that you’ve built your first embedded system, here’s how to continue your journey:</p>
<h3>11.1.1 Explore Specific Microcontrollers</h3>
<p>Ada supports many microcontrollers beyond the Raspberry Pi:</p>
<ul>
<li><strong>STM32</strong>: Popular ARM-based microcontrollers</li>
<li><strong>ESP32</strong>: Wi-Fi and Bluetooth enabled microcontrollers</li>
<li><strong>PIC</strong>: Widely used in industrial applications</li>
<li><strong>AVR</strong>: Common in Arduino boards</li>
</ul>
<p>Each platform has specific Ada support:</p>
<ul>
<li><strong>STM32</strong>: GNAT for ARM with HAL libraries</li>
<li><strong>ESP32</strong>: Ada bindings for ESP-IDF</li>
<li><strong>PIC</strong>: GNAT for PIC32</li>
<li><strong>AVR</strong>: Ada for ATmega microcontrollers</li>
</ul>
<h3>11.1.2 Learn About IoT Protocols</h3>
<p>Many embedded systems connect to the internet:</p>
<ul>
<li><strong>MQTT</strong>: Lightweight messaging protocol for IoT</li>
<li><strong>HTTP</strong>: Web protocols for REST APIs</li>
<li><strong>Bluetooth LE</strong>: Short-range wireless communication</li>
<li><strong>Wi-Fi</strong>: Network connectivity</li>
</ul>
<p>Ada libraries exist for these protocols:</p>
<ul>
<li><code>Ada.MQTT</code> for MQTT messaging</li>
<li><code>Ada.HTTP</code> for web requests</li>
<li><code>Ada.Bluetooth</code> for BLE communication</li>
</ul>
<h3>11.1.3 Join the Embedded Ada Community</h3>
<p>The Ada community is active and supportive:</p>
<ul>
<li><strong>AdaCore Forums</strong>: Technical support and discussions</li>
<li><strong>GitHub Repositories</strong>: Open-source embedded Ada projects</li>
<li><strong>Ada mailing lists</strong>: For discussions and questions</li>
<li><strong>Embedded Ada conferences</strong>: Events like Ada Europe</li>
</ul>
<h3>11.1.4 Build More Complex Projects</h3>
<p>Try these projects to deepen your skills:</p>
<ul>
<li><strong>Smart home thermostat</strong>: Control heating based on temperature readings</li>
<li><strong>Weather station</strong>: Collect and display environmental data</li>
<li><strong>Robot controller</strong>: Control motors and sensors for a simple robot</li>
<li><strong>Fitness tracker</strong>: Monitor heart rate and activity levels</li>
</ul>
<h2>11.2 Conclusion: The Power of Ada for Embedded Systems</h2>
<blockquote>
<p>“Embedded systems programming isn’t just for aerospace engineers—it’s about controlling hardware in everyday devices like smart thermostats and wearable tech. Ada provides safe, reliable tools for this task without requiring specialized knowledge.”</p>
</blockquote>
<p>Ada is uniquely suited for embedded systems programming because it provides strong type safety, direct hardware access, and built-in real-time support—all while maintaining reliability without requiring specialized safety-critical knowledge. Whether you’re building a simple LED blinker or a complex home automation system, Ada gives you the tools to control hardware safely and reliably.</p>
<p>For beginners, Ada’s features make embedded programming accessible without requiring deep knowledge of low-level programming. The strong type system prevents common errors, the direct hardware access is safe and predictable, and the built-in real-time support makes timing control straightforward.</p>
<p>As you continue your journey with Ada, remember that embedded systems programming is about controlling hardware to solve real-world problems. Whether you’re building a smart home device, a wearable tech gadget, or a simple IoT sensor, Ada provides the tools to do it safely and reliably.</p>
<p>The key to success is starting small. Begin with simple projects like blinking an LED, then gradually add complexity as you gain confidence. Use the tools and resources available in the Ada community, and don’t be afraid to ask for help when you need it.</p>
<p>Embedded systems programming with Ada isn’t just for safety-critical applications—it’s for anyone who wants to build reliable, safe hardware control systems for everyday use. With Ada, you can turn your ideas into reality with confidence that your code will work as intended.</p>
<h1>17. GUI Development in Ada</h1>
<blockquote>
<p>“GUI development in Ada isn’t just for aerospace engineers—it’s about creating intuitive interfaces for everyday applications like home automation systems and personal finance tools. With Ada’s strong typing and reliability features, you can build user-friendly applications that are both safe and maintainable.”</p>
</blockquote>
<p>When you think of GUI development, you might imagine complex enterprise applications or safety-critical systems. But graphical interfaces are everywhere in daily life—your smart thermostat, fitness tracker, coffee maker, and even your car’s infotainment system all have graphical interfaces. These interfaces make complex technology accessible and easy to use. Ada provides a powerful yet approachable way to build these interfaces without requiring specialized knowledge of safety-critical systems.</p>
<p>This chapter explores how to create graphical user interfaces in Ada using GTKAda, the most popular GUI library for Ada. You’ll learn to build practical applications like home automation controllers, personal finance trackers, and simple games—all while leveraging Ada’s strengths in reliability and maintainability. Whether you’re building a tool for yourself or for others, Ada’s GUI capabilities will help you create professional-looking applications with confidence.</p>
<h2>17.1 Why GUI Development Matters for Everyday Applications</h2>
<p>GUI development is essential for making technology accessible to everyone. Consider these common scenarios:</p>
<ul>
<li>A smart home controller that lets you manage lights, temperature, and security with a single interface</li>
<li>A personal finance app that helps you track expenses and budget without complex spreadsheets</li>
<li>A home media center that lets you browse and play movies with a simple remote control interface</li>
</ul>
<p>Without graphical interfaces, these technologies would be intimidating or impossible for most people to use. GUIs transform complex functionality into intuitive interactions that anyone can understand.</p>
<p>Ada excels at GUI development for several reasons:</p>
<ul>
<li><strong>Strong type safety</strong>: Prevents common errors like null pointer exceptions or memory leaks</li>
<li><strong>Reliability</strong>: Ensures your application behaves predictably even under unexpected conditions</li>
<li><strong>Maintainability</strong>: Clear code structure makes it easier to update and extend your application</li>
<li><strong>Cross-platform support</strong>: Write once, run anywhere—your application works on Windows, macOS, and Linux</li>
</ul>
<p>Unlike many GUI frameworks that prioritize speed of development over reliability, Ada’s approach ensures your applications are robust from the start. You won’t need to worry about mysterious crashes or security vulnerabilities caused by common programming errors.</p>
<h3>17.1.1 GUI Libraries for Ada</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Library</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>GTKAda</strong></td>
<td style="text-align:left">Ada binding for GTK+ toolkit, cross-platform</td>
<td style="text-align:left">Cross-platform desktop applications</td>
</tr>
<tr>
<td style="text-align:left"><strong>AdaX</strong></td>
<td style="text-align:left">Low-level X Window System bindings</td>
<td style="text-align:left">X11-based applications on Unix systems</td>
</tr>
<tr>
<td style="text-align:left"><strong>AdaWin</strong></td>
<td style="text-align:left">Windows API bindings</td>
<td style="text-align:left">Windows-specific applications</td>
</tr>
<tr>
<td style="text-align:left"><strong>AdaFX</strong></td>
<td style="text-align:left">Cross-platform framework for embedded systems</td>
<td style="text-align:left">Embedded GUIs with limited resources</td>
</tr>
</tbody>
</table>
<p>GTKAda is the most widely used GUI library for Ada. It provides a modern, cross-platform toolkit that’s perfect for everyday applications. The other libraries have specific use cases, but GTKAda is the best starting point for most developers.</p>
<h2>17.2 Setting Up Your GUI Development Environment</h2>
<p>Before you can start building GUI applications, you need to set up your development environment. The process varies slightly depending on your operating system, but it’s straightforward for all major platforms.</p>
<h3>17.2.1 Installing GTKAda</h3>
<h4>17.2.1.1 Windows</h4>
<ol>
<li>Download the GNAT Community Edition from <a href="https://www.adacore.com/download">AdaCore’s website</a></li>
<li>During installation, select the “GTKAda” component</li>
<li>Verify installation by opening a command prompt and running:<pre><code class="language-bash hljs" data-highlighted="yes">gnatls --version
</code></pre>
You should see GTKAda version information in the output.</li>
</ol>
<h4>17.2.1.2 macOS</h4>
<ol>
<li>Install Homebrew if you haven’t already:<pre><code class="language-bash hljs" data-highlighted="yes">/bin/bash -c <span class="hljs-string">"<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>"</span>
</code></pre>
</li>
<li>Install GTKAda:<pre><code class="language-bash hljs" data-highlighted="yes">brew install gtkada
</code></pre>
</li>
<li>Verify installation:<pre><code class="language-bash hljs" data-highlighted="yes">gnatls --version
</code></pre>
</li>
</ol>
<h4>17.2.1.3 Linux (Ubuntu/Debian)</h4>
<ol>
<li>Install GTKAda:<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">sudo</span> apt update
<span class="hljs-built_in">sudo</span> apt install libgtkada-dev
</code></pre>
</li>
<li>Verify installation:<pre><code class="language-bash hljs" data-highlighted="yes">gnatls --version
</code></pre>
</li>
</ol>
<h3>17.2.2 Creating Your First Project</h3>
<p>Now that GTKAda is installed, let’s create a simple project structure:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> gui_example
<span class="hljs-built_in">cd</span> gui_example
<span class="hljs-built_in">mkdir</span> src
</code></pre>
<p>Create a project file named <code>gui_example.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project GUI_Example <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>);
   <span class="hljs-keyword">end</span> Compiler;
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-lgtk-3"</span>, <span class="hljs-string">"-lgdk-3"</span>, <span class="hljs-string">"-lpangocairo-1.0"</span>, <span class="hljs-string">"-latk-1.0"</span>, <span class="hljs-string">"-lcairo"</span>, <span class="hljs-string">"-lgdk_pixbuf-2.0"</span>, <span class="hljs-string">"-lgio-2.0"</span>, <span class="hljs-string">"-lgobject-2.0"</span>, <span class="hljs-string">"-lglib-2.0"</span>);
   <span class="hljs-keyword">end</span> Linker;
<span class="hljs-keyword">end</span> GUI_Example;
</code></pre>
<p>This project file:</p>
<ul>
<li>Specifies where source files are located</li>
<li>Sets the object directory for compiled files</li>
<li>Defines the main program file</li>
<li>Configures compiler and linker options for GTKAda</li>
</ul>
<h3>17.2.3 Testing Your Setup</h3>
<p>Create a simple “Hello World” program to verify your installation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/hello_world.adb</span>
<span class="hljs-keyword">with</span> Gtk.Main; <span class="hljs-keyword">use</span> Gtk.Main;
<span class="hljs-keyword">with</span> Gtk.Window; <span class="hljs-keyword">use</span> Gtk.Window;
<span class="hljs-keyword">with</span> Gtk.Label; <span class="hljs-keyword">use</span> Gtk.Label;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Hello_World</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Label : <span class="hljs-type">Gtk_Label</span>;
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"Hello World"</span>);
   Set_Default_Size (Win, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>);
   Set_Title (Win, <span class="hljs-string">"Hello World"</span>);
   
   Label := Create (<span class="hljs-string">"Welcome to GUI Development in Ada!"</span>);
   Add (Win, Label);
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Hello_World;
</code></pre>
<p>Build and run the program:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P gui_example.gpr
./hello_world
</code></pre>
<p>You should see a window titled “Hello World” with the text “Welcome to GUI Development in Ada!” inside it. If you see this window, your environment is set up correctly!</p>
<h2>17.3 Building Your First GUI Application</h2>
<p>Now that your environment is ready, let’s create a more interactive application. We’ll build a simple calculator that performs basic arithmetic operations.</p>
<h3>17.3.1 Step 1: Create the Basic Window Structure</h3>
<p>First, we’ll create the main window with a vertical box layout:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.Main; <span class="hljs-keyword">use</span> Gtk.Main;
<span class="hljs-keyword">with</span> Gtk.Window; <span class="hljs-keyword">use</span> Gtk.Window;
<span class="hljs-keyword">with</span> Gtk.Box; <span class="hljs-keyword">use</span> Gtk.Box;
<span class="hljs-keyword">with</span> Gtk.Button; <span class="hljs-keyword">use</span> Gtk.Button;
<span class="hljs-keyword">with</span> Gtk.Label; <span class="hljs-keyword">use</span> Gtk.Label;
<span class="hljs-keyword">with</span> Gtk.<span class="hljs-keyword">Entry</span>; <span class="hljs-keyword">use</span> Gtk.<span class="hljs-keyword">Entry</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculator</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Box : <span class="hljs-type">Gtk_Box</span>;
   Display : <span class="hljs-type">Gtk_Entry</span>;
   Buttons : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">16</span>) <span class="hljs-keyword">of</span> Gtk_Button;
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"Simple Calculator"</span>);
   Set_Default_Size (Win, <span class="hljs-number">300</span>, <span class="hljs-number">400</span>);
   Set_Title (Win, <span class="hljs-string">"Simple Calculator"</span>);
   
   <span class="hljs-comment">-- Create vertical box for layout</span>
   Box := Create (Vertical);
   Add (Win, Box);
   
   <span class="hljs-comment">-- Create display area</span>
   Display := Create;
   Set_Editable (Display, <span class="hljs-literal">False</span>);
   Add (Box, Display);
   
   <span class="hljs-comment">-- Create number buttons (0-9)</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">9</span> <span class="hljs-keyword">loop</span>
      Buttons(I) := Create (I<span class="hljs-symbol">'Image</span>);
      Add (Box, Buttons(I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   
   <span class="hljs-comment">-- Create special buttons</span>
   Buttons(<span class="hljs-number">10</span>) := Create (<span class="hljs-string">"0"</span>);
   Buttons(<span class="hljs-number">11</span>) := Create (<span class="hljs-string">"+"</span>);
   Buttons(<span class="hljs-number">12</span>) := Create (<span class="hljs-string">"-"</span>);
   Buttons(<span class="hljs-number">13</span>) := Create (<span class="hljs-string">"*"</span>);
   Buttons(<span class="hljs-number">14</span>) := Create (<span class="hljs-string">"/"</span>);
   Buttons(<span class="hljs-number">15</span>) := Create (<span class="hljs-string">"="</span>);
   Buttons(<span class="hljs-number">16</span>) := Create (<span class="hljs-string">"Clear"</span>);
   
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">10</span>..<span class="hljs-number">16</span> <span class="hljs-keyword">loop</span>
      Add (Box, Buttons(I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>This code creates a window with a display area and number buttons arranged vertically. The <code>Display</code> widget is a text entry field that’s not editable by the user—perfect for showing calculation results.</p>
<h3>17.3.2 Step 2: Add Event Handling</h3>
<p>Now let’s add event handlers to make the calculator functional:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculator</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Box : <span class="hljs-type">Gtk_Box</span>;
   Display : <span class="hljs-type">Gtk_Entry</span>;
   Buttons : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">16</span>) <span class="hljs-keyword">of</span> Gtk_Button;
   Current_Input : <span class="hljs-type">Unbounded_String</span> := To_Unbounded_String (<span class="hljs-string">""</span>);
   Operation : <span class="hljs-type">Character</span> := <span class="hljs-string">' '</span>;
   First_Number : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"Simple Calculator"</span>);
   Set_Default_Size (Win, <span class="hljs-number">300</span>, <span class="hljs-number">400</span>);
   Set_Title (Win, <span class="hljs-string">"Simple Calculator"</span>);
   
   <span class="hljs-comment">-- Create vertical box for layout</span>
   Box := Create (Vertical);
   Add (Win, Box);
   
   <span class="hljs-comment">-- Create display area</span>
   Display := Create;
   Set_Editable (Display, <span class="hljs-literal">False</span>);
   Add (Box, Display);
   
   <span class="hljs-comment">-- Create number buttons (0-9)</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">9</span> <span class="hljs-keyword">loop</span>
      Buttons(I) := Create (I<span class="hljs-symbol">'Image</span>);
      Set_On_Clicked (Buttons(I), (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
         <span class="hljs-keyword">begin</span>
            Current_Input := Current_Input &amp; To_Unbounded_String (I<span class="hljs-symbol">'Image</span>);
            Set_Text (Display, To_String (Current_Input));
         <span class="hljs-keyword">end</span>));
      Add (Box, Buttons(I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   
   <span class="hljs-comment">-- Create special buttons</span>
   Buttons(<span class="hljs-number">10</span>) := Create (<span class="hljs-string">"0"</span>);
   Set_On_Clicked (Buttons(<span class="hljs-number">10</span>), (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">begin</span>
         Current_Input := Current_Input &amp; To_Unbounded_String (<span class="hljs-string">"0"</span>);
         Set_Text (Display, To_String (Current_Input));
      <span class="hljs-keyword">end</span>));
   Add (Box, Buttons(<span class="hljs-number">10</span>));
   
   Buttons(<span class="hljs-number">11</span>) := Create (<span class="hljs-string">"+"</span>);
   Set_On_Clicked (Buttons(<span class="hljs-number">11</span>), (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">begin</span>
         First_Number := Float (Value (To_String (Current_Input)));
         Operation := <span class="hljs-string">'+'</span>;
         Current_Input := To_Unbounded_String (<span class="hljs-string">""</span>);
      <span class="hljs-keyword">end</span>));
   Add (Box, Buttons(<span class="hljs-number">11</span>));
   
   <span class="hljs-comment">-- Similar handlers for other operations...</span>
   
   Buttons(<span class="hljs-number">15</span>) := Create (<span class="hljs-string">"="</span>);
   Set_On_Clicked (Buttons(<span class="hljs-number">15</span>), (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">declare</span>
            Second_Number : <span class="hljs-type">Float</span> := Float (Value (To_String (Current_Input)));
            Result : <span class="hljs-type">Float</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">case</span> Operation <span class="hljs-keyword">is</span>
               <span class="hljs-keyword">when</span> <span class="hljs-string">'+'</span> =&gt; Result := First_Number + Second_Number;
               <span class="hljs-keyword">when</span> <span class="hljs-string">'-'</span> =&gt; Result := First_Number - Second_Number;
               <span class="hljs-keyword">when</span> <span class="hljs-string">'*'</span> =&gt; Result := First_Number * Second_Number;
               <span class="hljs-keyword">when</span> <span class="hljs-string">'/'</span> =&gt; Result := First_Number / Second_Number;
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt; Result := <span class="hljs-number">0.0</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
            Current_Input := To_Unbounded_String (Result<span class="hljs-symbol">'Image</span>);
            Set_Text (Display, To_String (Current_Input));
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span>));
   Add (Box, Buttons(<span class="hljs-number">15</span>));
   
   Buttons(<span class="hljs-number">16</span>) := Create (<span class="hljs-string">"Clear"</span>);
   Set_On_Clicked (Buttons(<span class="hljs-number">16</span>), (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">begin</span>
         Current_Input := To_Unbounded_String (<span class="hljs-string">""</span>);
         Set_Text (Display, <span class="hljs-string">""</span>);
         First_Number := <span class="hljs-number">0.0</span>;
         Operation := <span class="hljs-string">' '</span>;
      <span class="hljs-keyword">end</span>));
   Add (Box, Buttons(<span class="hljs-number">16</span>));
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p>This code adds event handlers for each button:</p>
<ul>
<li>Number buttons add digits to the current input</li>
<li>Operation buttons store the first number and the operation type</li>
<li>The equals button performs the calculation</li>
<li>The clear button resets the calculator</li>
</ul>
<p>When you run this program, you’ll have a functional calculator that can perform basic arithmetic operations.</p>
<h3>17.3.3 Understanding the Code</h3>
<p>Let’s break down the key elements:</p>
<ol>
<li>
<p><strong>Widget Creation</strong>: Each GUI component (window, box, buttons) is created using GTKAda procedures like <code>Create</code> and <code>Add</code>.</p>
</li>
<li>
<p><strong>Event Handling</strong>: The <code>Set_On_Clicked</code> procedure attaches a handler to button clicks. These handlers are anonymous procedures that execute when the button is clicked.</p>
</li>
<li>
<p><strong>State Management</strong>: Variables like <code>Current_Input</code>, <code>Operation</code>, and <code>First_Number</code> track the calculator’s state between interactions.</p>
</li>
<li>
<p><strong>String Handling</strong>: Ada’s <code>Unbounded_String</code> type makes it easy to build and manipulate text in the display.</p>
</li>
</ol>
<p>This simple example demonstrates how GUI development in Ada combines familiar programming concepts with intuitive visual elements.</p>
<h2>17.4 Common GUI Components</h2>
<p>Let’s explore the most common GUI components you’ll use in your applications, with practical examples for each.</p>
<h3>17.4.1 Buttons</h3>
<p>Buttons are the most fundamental GUI component—they trigger actions when clicked.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Create a button with text</span>
Button := Create (<span class="hljs-string">"Click Me"</span>);

<span class="hljs-comment">-- Change button text</span>
Set_Text (Button, <span class="hljs-string">"New Text"</span>);

<span class="hljs-comment">-- Set a handler for button clicks</span>
Set_On_Clicked (Button, (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Put_Line (<span class="hljs-string">"Button clicked!"</span>);
   <span class="hljs-keyword">end</span>));
</code></pre>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>Use descriptive text for buttons (“Submit” instead of “Button 1”)</li>
<li>Disable buttons when they’re not applicable</li>
<li>Provide visual feedback when buttons are clicked</li>
</ul>
<h3>17.4.2 Labels</h3>
<p>Labels display static text information to users.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Create a label with initial text</span>
Label := Create (<span class="hljs-string">"Initial Text"</span>);

<span class="hljs-comment">-- Change label text</span>
Set_Text (Label, <span class="hljs-string">"Updated Text"</span>);

<span class="hljs-comment">-- Set label properties</span>
Set_Halign (Label, Align_Start);  <span class="hljs-comment">-- Align text to start</span>
Set_Margin_Top (Label, <span class="hljs-number">10</span>);       <span class="hljs-comment">-- Add top margin</span>
</code></pre>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>Use labels for instructions and status messages</li>
<li>Keep text concise and clear</li>
<li>Use appropriate font sizes and colors for readability</li>
</ul>
<h3>17.4.3 Text Entries</h3>
<p>Text entries allow users to input text.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Create a text entry field</span>
<span class="hljs-keyword">Entry</span> := Create;

<span class="hljs-comment">-- Set initial text</span>
Set_Text (<span class="hljs-keyword">Entry</span>, <span class="hljs-string">"Default Text"</span>);

<span class="hljs-comment">-- Get user input</span>
<span class="hljs-keyword">declare</span>
   User_Input : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">String</span> := Get_Text (<span class="hljs-keyword">Entry</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Process input</span>
<span class="hljs-keyword">end</span>;

<span class="hljs-comment">-- Make entry read-only</span>
Set_Editable (<span class="hljs-keyword">Entry</span>, <span class="hljs-literal">False</span>);
</code></pre>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>Use placeholder text to guide users</li>
<li>Validate input before processing</li>
<li>Provide clear error messages for invalid input</li>
</ul>
<h3>17.4.4 Layout Management</h3>
<p>Layout management is crucial for creating professional-looking interfaces. GTKAda provides several layout containers:</p>
<h4>17.4.4.1 Vertical Box</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Box := Create (Vertical);
Add (Box, Widget1);
Add (Box, Widget2);
</code></pre>
<p>Arranges widgets vertically from top to bottom.</p>
<h4>17.4.4.2 Horizontal Box</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Box := Create (Horizontal);
Add (Box, Widget1);
Add (Box, Widget2);
</code></pre>
<p>Arranges widgets horizontally from left to right.</p>
<h4>17.4.4.3 Grid Layout</h4>
<pre><code class="language-ada hljs" data-highlighted="yes">Grid := Create;
Set_Column_Spacing (Grid, <span class="hljs-number">5</span>);
Set_Row_Spacing (Grid, <span class="hljs-number">5</span>);

Attach (Grid, Widget1, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);  <span class="hljs-comment">-- Column 0, Row 0, width 1, height 1</span>
Attach (Grid, Widget2, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);  <span class="hljs-comment">-- Column 1, Row 0, width 1, height 1</span>
Attach (Grid, Widget3, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>);  <span class="hljs-comment">-- Column 0, Row 1, width 2, height 1</span>
</code></pre>
<p>Arranges widgets in a grid pattern with precise control over placement.</p>
<h3>17.4.5 Common GUI Components Reference Table</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Component</strong></th>
<th style="text-align:left"><strong>Purpose</strong></th>
<th style="text-align:left"><strong>Example Use Case</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Button</strong></td>
<td style="text-align:left">Triggers actions when clicked</td>
<td style="text-align:left">Submit form, start process</td>
</tr>
<tr>
<td style="text-align:left"><strong>Label</strong></td>
<td style="text-align:left">Displays static text</td>
<td style="text-align:left">Instructions, status messages</td>
</tr>
<tr>
<td style="text-align:left"><strong>Text Entry</strong></td>
<td style="text-align:left">Allows user input of text</td>
<td style="text-align:left">Username, password fields</td>
</tr>
<tr>
<td style="text-align:left"><strong>Check Box</strong></td>
<td style="text-align:left">Toggle between two states</td>
<td style="text-align:left">Enable/disable features</td>
</tr>
<tr>
<td style="text-align:left"><strong>Radio Button</strong></td>
<td style="text-align:left">Select one option from a group</td>
<td style="text-align:left">Gender selection, preferences</td>
</tr>
<tr>
<td style="text-align:left"><strong>Combo Box</strong></td>
<td style="text-align:left">Dropdown list of options</td>
<td style="text-align:left">Select country, product type</td>
</tr>
<tr>
<td style="text-align:left"><strong>Scrollable Area</strong></td>
<td style="text-align:left">View large content in small space</td>
<td style="text-align:left">Long text, image galleries</td>
</tr>
<tr>
<td style="text-align:left"><strong>Progress Bar</strong></td>
<td style="text-align:left">Show progress of long operations</td>
<td style="text-align:left">File downloads, data processing</td>
</tr>
</tbody>
</table>
<h2>17.5 Advanced GUI Features</h2>
<p>Once you’re comfortable with basic components, you can explore more advanced features that make your applications more powerful and user-friendly.</p>
<h3>17.5.1 Dialog Boxes</h3>
<p>Dialog boxes are essential for interactions that require user input or confirmation.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.File_Chooser; <span class="hljs-keyword">use</span> Gtk.File_Chooser;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Open_File</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Button : <span class="hljs-type">Gtk_Button</span>;
   Filename : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">256</span>);
   Length : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"File Open"</span>);
   Set_Default_Size (Win, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>);
   Set_Title (Win, <span class="hljs-string">"File Open"</span>);
   
   Button := Create (<span class="hljs-string">"Open File"</span>);
   Add (Win, Button);
   
   Set_On_Clicked (Button, (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(B : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Button_Record</span>'Class) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">declare</span>
         Dialog : <span class="hljs-type">Gtk_File_Chooser_Dialog</span>;
      <span class="hljs-keyword">begin</span>
         Dialog := Create (<span class="hljs-string">"Open File"</span>, Win, File_Chooser_Action_Open);
         <span class="hljs-keyword">if</span> Run (Dialog) = Response_Accept <span class="hljs-keyword">then</span>
            Filename := Get_Filename (Dialog);
            <span class="hljs-comment">-- Process the selected file</span>
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
         Destroy (Dialog);
      <span class="hljs-keyword">end</span>);
   <span class="hljs-keyword">end</span>));
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Open_File;
</code></pre>
<p>This code creates a file open dialog that lets users select a file from their system. The <code>Run</code> procedure displays the dialog and waits for user input, then returns the selected filename.</p>
<h3>17.5.2 Custom Widgets</h3>
<p>Sometimes you need widgets that don’t exist in standard libraries. GTKAda allows you to create custom widgets:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.Drawing_Area; <span class="hljs-keyword">use</span> Gtk.Drawing_Area;
<span class="hljs-keyword">with</span> Gtk.Style_Context; <span class="hljs-keyword">use</span> Gtk.Style_Context;

<span class="hljs-keyword">package</span> <span class="hljs-title">Custom_Widgets </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Color_Picker </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Gtk_Drawing_Area <span class="hljs-keyword">with</span> null <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Draw</span> (W : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Color_Picker</span>; Context : <span class="hljs-type">Gtk_Style_Context</span>'Class);
<span class="hljs-keyword">end</span> Custom_Widgets;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Custom_Widgets </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Draw</span> (W : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Color_Picker</span>; Context : <span class="hljs-type">Gtk_Style_Context</span>'Class) <span class="hljs-keyword">is</span>
      Width : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := Get_Allocated_Width (W);
      Height : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := Get_Allocated_Height (W);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Draw a gradient background</span>
      Set_Source_Rgba (Context, <span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.5</span>);
      Rectangle (Context, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, Width, Height);
      Fill (Context);
   <span class="hljs-keyword">end</span> Draw;
<span class="hljs-keyword">end</span> Custom_Widgets;
</code></pre>
<p>This example creates a custom color picker widget that draws a red gradient background. You can extend this to create more complex widgets with user interaction.</p>
<h3>17.5.3 Theming and Styling</h3>
<p>GTKAda supports theming to give your applications a professional look:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.Style_Context; <span class="hljs-keyword">use</span> Gtk.Style_Context;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Style_Window</span> (Win : <span class="hljs-type">Gtk_Window</span>) <span class="hljs-keyword">is</span>
   Context : <span class="hljs-type">Gtk_Style_Context</span><span class="hljs-symbol">'Class</span> := Get_Style_Context (Win);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Set background color</span>
   Set_Background_Color (Context, (Red =&gt; <span class="hljs-number">0.9</span>, Green =&gt; <span class="hljs-number">0.9</span>, Blue =&gt; <span class="hljs-number">0.9</span>, Alpha =&gt; <span class="hljs-number">1.0</span>));
   
   <span class="hljs-comment">-- Set font size</span>
   Set_Font (Context, <span class="hljs-string">"Arial 12"</span>);
   
   <span class="hljs-comment">-- Set padding</span>
   Set_Margin_Top (Win, <span class="hljs-number">10</span>);
   Set_Margin_Bottom (Win, <span class="hljs-number">10</span>);
   Set_Margin_Left (Win, <span class="hljs-number">10</span>);
   Set_Margin_Right (Win, <span class="hljs-number">10</span>);
<span class="hljs-keyword">end</span> Style_Window;
</code></pre>
<p>This code styles a window with a light gray background, Arial font, and consistent padding. You can create more complex styles using CSS-like syntax.</p>
<h3>17.5.4 Advanced GUI Features Reference Table</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>Purpose</strong></th>
<th style="text-align:left"><strong>Example Use Case</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Dialog Boxes</strong></td>
<td style="text-align:left">Specialized interaction windows</td>
<td style="text-align:left">File open/save, confirmation dialogs</td>
</tr>
<tr>
<td style="text-align:left"><strong>Custom Widgets</strong></td>
<td style="text-align:left">Create unique UI elements</td>
<td style="text-align:left">Custom data visualizations, specialized controls</td>
</tr>
<tr>
<td style="text-align:left"><strong>Theming and Styling</strong></td>
<td style="text-align:left">Control visual appearance</td>
<td style="text-align:left">Professional-looking applications, brand consistency</td>
</tr>
<tr>
<td style="text-align:left"><strong>Drag and Drop</strong></td>
<td style="text-align:left">Move data between widgets</td>
<td style="text-align:left">File management, rearranging items</td>
</tr>
<tr>
<td style="text-align:left"><strong>Animations</strong></td>
<td style="text-align:left">Add visual feedback</td>
<td style="text-align:left">Progress indicators, interactive elements</td>
</tr>
<tr>
<td style="text-align:left"><strong>Accessibility Features</strong></td>
<td style="text-align:left">Support for users with disabilities</td>
<td style="text-align:left">Screen readers, high-contrast modes</td>
</tr>
</tbody>
</table>
<h2>17.6 Best Practices for GUI Development</h2>
<p>Following best practices will make your GUI applications more reliable, maintainable, and user-friendly.</p>
<h3>17.6.1 Separating UI and Logic</h3>
<p>Keep your user interface code separate from your business logic. This makes your code easier to understand and maintain.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- ui_package.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">UI_Package </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Create_Window;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Button_Click;</span>
end UI_Package;

<span class="hljs-comment">-- business_logic.ads</span>
package Business_Logic <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Calculate</span> (A, B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Save_Data</span> (Data : <span class="hljs-type">String</span>);
<span class="hljs-keyword">end</span> Business_Logic;

<span class="hljs-comment">-- main.adb</span>
<span class="hljs-keyword">with</span> UI_Package; <span class="hljs-keyword">use</span> UI_Package;
<span class="hljs-keyword">with</span> Business_Logic; <span class="hljs-keyword">use</span> Business_Logic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Create_Window;
   Main;
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p>In this example:</p>
<ul>
<li><code>UI_Package</code> handles all GUI-related code</li>
<li><code>Business_Logic</code> handles all calculation and data operations</li>
<li>The main program simply starts the UI</li>
</ul>
<p>This separation makes it easy to change the UI without affecting business logic, and vice versa.</p>
<h3>17.6.2 Error Handling in GUIs</h3>
<p>GUI applications need special error handling to provide good user experiences.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
   Input : <span class="hljs-type">String</span> := Get_Text (<span class="hljs-keyword">Entry</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">declare</span>
      Value : <span class="hljs-type">Float</span> := Float (Value (Input));
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Process valid data</span>
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         <span class="hljs-comment">-- Show error message to user</span>
         Show_Error_Message (<span class="hljs-string">"Invalid input: please enter a number"</span>);
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>Key error handling practices:</p>
<ul>
<li>Provide clear, actionable error messages</li>
<li>Don’t crash the application on invalid input</li>
<li>Validate input before processing</li>
<li>Use dialog boxes for important error messages</li>
</ul>
<h3>17.6.3 Design Patterns for GUIs</h3>
<h4>17.6.3.1 Model-View-Controller (MVC)</h4>
<p>MVC is a common pattern for organizing GUI applications:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Model: Data storage</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Data_Model </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Record </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">50</span>);
      Age : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Save</span> (Data : <span class="hljs-type">Data_Record</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Load</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Data_Record</span>;
<span class="hljs-keyword">end</span> Data_Model;

<span class="hljs-comment">-- View: UI components</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">UI_View </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Create_Window;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Update_Display</span> (Data : <span class="hljs-type">Data_Model.Data_Record</span>);
<span class="hljs-keyword">end</span> UI_View;

<span class="hljs-comment">-- Controller: Handles interactions</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Controller </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Button_Click;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Input_Changed;</span>
end Controller;
</code></pre>
<p>In this pattern:</p>
<ul>
<li><strong>Model</strong>: Manages data storage and retrieval</li>
<li><strong>View</strong>: Displays data to the user</li>
<li><strong>Controller</strong>: Handles user interactions and updates the model and view</li>
</ul>
<p>This separation makes your code more modular and easier to test.</p>
<h3>17.6.4 Best Practices Reference Table</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Practice</strong></th>
<th style="text-align:left"><strong>Why It Matters</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Separate UI and Logic</strong></td>
<td style="text-align:left">Easier maintenance and testing</td>
<td style="text-align:left">Business logic in separate package from UI code</td>
</tr>
<tr>
<td style="text-align:left"><strong>Proper Error Handling</strong></td>
<td style="text-align:left">Better user experience</td>
<td style="text-align:left">Clear error messages instead of crashes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Use Design Patterns</strong></td>
<td style="text-align:left">More maintainable code</td>
<td style="text-align:left">MVC pattern for organizing application structure</td>
</tr>
<tr>
<td style="text-align:left"><strong>Responsive Design</strong></td>
<td style="text-align:left">Works on different screen sizes</td>
<td style="text-align:left">Layouts that adapt to window resizing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Accessibility Features</strong></td>
<td style="text-align:left">Works for all users</td>
<td style="text-align:left">Screen reader support, high-contrast modes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Consistent Styling</strong></td>
<td style="text-align:left">Professional appearance</td>
<td style="text-align:left">Uniform colors, fonts, and spacing throughout app</td>
</tr>
</tbody>
</table>
<h2>17.7 Real-World Examples</h2>
<p>Let’s look at practical examples of GUI applications built with Ada that solve real problems.</p>
<h3>17.7.1 Home Automation Controller</h3>
<p>A home automation controller lets you manage lights, temperature, and security from a single interface.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.Main; <span class="hljs-keyword">use</span> Gtk.Main;
<span class="hljs-keyword">with</span> Gtk.Window; <span class="hljs-keyword">use</span> Gtk.Window;
<span class="hljs-keyword">with</span> Gtk.Box; <span class="hljs-keyword">use</span> Gtk.Box;
<span class="hljs-keyword">with</span> Gtk.Button; <span class="hljs-keyword">use</span> Gtk.Button;
<span class="hljs-keyword">with</span> Gtk.Label; <span class="hljs-keyword">use</span> Gtk.Label;
<span class="hljs-keyword">with</span> Gtk.Switch; <span class="hljs-keyword">use</span> Gtk.Switch;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Home_Automation</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Box : <span class="hljs-type">Gtk_Box</span>;
   Light_Switch : <span class="hljs-type">Gtk_Switch</span>;
   Temperature_Label : <span class="hljs-type">Gtk_Label</span>;
   Security_Label : <span class="hljs-type">Gtk_Label</span>;
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"Home Automation"</span>);
   Set_Default_Size (Win, <span class="hljs-number">400</span>, <span class="hljs-number">300</span>);
   Set_Title (Win, <span class="hljs-string">"Home Automation"</span>);
   
   Box := Create (Vertical);
   Add (Win, Box);
   
   <span class="hljs-comment">-- Light control</span>
   Add (Box, Create (<span class="hljs-string">"Light Control"</span>));
   Light_Switch := Create;
   Set_Label (Light_Switch, <span class="hljs-string">"Living Room Light"</span>);
   Add (Box, Light_Switch);
   
   <span class="hljs-comment">-- Temperature control</span>
   Add (Box, Create (<span class="hljs-string">"Temperature Control"</span>));
   Temperature_Label := Create (<span class="hljs-string">"Current Temperature: 22°C"</span>);
   Add (Box, Temperature_Label);
   
   <span class="hljs-comment">-- Security control</span>
   Add (Box, Create (<span class="hljs-string">"Security Control"</span>));
   Security_Label := Create (<span class="hljs-string">"Security System: Armed"</span>);
   Add (Box, Security_Label);
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Home_Automation;
</code></pre>
<p>This simple example demonstrates how to create a home automation interface with switches for lights, labels for temperature, and status indicators for security systems. You could extend this to add more features like scheduling, remote control, and energy usage monitoring.</p>
<h3>17.7.2 Personal Finance Tracker</h3>
<p>A personal finance tracker helps users manage their money with a simple interface.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.Main; <span class="hljs-keyword">use</span> Gtk.Main;
<span class="hljs-keyword">with</span> Gtk.Window; <span class="hljs-keyword">use</span> Gtk.Window;
<span class="hljs-keyword">with</span> Gtk.Box; <span class="hljs-keyword">use</span> Gtk.Box;
<span class="hljs-keyword">with</span> Gtk.Button; <span class="hljs-keyword">use</span> Gtk.Button;
<span class="hljs-keyword">with</span> Gtk.Label; <span class="hljs-keyword">use</span> Gtk.Label;
<span class="hljs-keyword">with</span> Gtk.<span class="hljs-keyword">Entry</span>; <span class="hljs-keyword">use</span> Gtk.<span class="hljs-keyword">Entry</span>;
<span class="hljs-keyword">with</span> Gtk.Tree_View; <span class="hljs-keyword">use</span> Gtk.Tree_View;
<span class="hljs-keyword">with</span> Gtk.List_Store; <span class="hljs-keyword">use</span> Gtk.List_Store;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Finance_Tracker</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Box : <span class="hljs-type">Gtk_Box</span>;
   Amount_Entry : <span class="hljs-type">Gtk_Entry</span>;
   Description_Entry : <span class="hljs-type">Gtk_Entry</span>;
   Add_Button : <span class="hljs-type">Gtk_Button</span>;
   Transactions_List : <span class="hljs-type">Gtk_Tree_View</span>;
   List_Store : <span class="hljs-type">Gtk_List_Store</span>;
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"Personal Finance"</span>);
   Set_Default_Size (Win, <span class="hljs-number">600</span>, <span class="hljs-number">400</span>);
   Set_Title (Win, <span class="hljs-string">"Personal Finance"</span>);
   
   Box := Create (Vertical);
   Add (Win, Box);
   
   <span class="hljs-comment">-- Add transaction form</span>
   Add (Box, Create (<span class="hljs-string">"Add Transaction"</span>));
   
   Amount_Entry := Create;
   Set_Hexpand (Amount_Entry, <span class="hljs-literal">True</span>);
   Add (Box, Amount_Entry);
   
   Description_Entry := Create;
   Set_Hexpand (Description_Entry, <span class="hljs-literal">True</span>);
   Add (Box, Description_Entry);
   
   Add_Button := Create (<span class="hljs-string">"Add Transaction"</span>);
   Add (Box, Add_Button);
   
   <span class="hljs-comment">-- Transactions list</span>
   Add (Box, Create (<span class="hljs-string">"Transactions"</span>));
   
   List_Store := Create (<span class="hljs-number">2</span>);  <span class="hljs-comment">-- Two columns: amount and description</span>
   Set_Column_Sort_Column_Id (List_Store, <span class="hljs-number">0</span>, Sort_Type_Ascending);
   
   Transactions_List := Create (List_Store);
   Add (Box, Transactions_List);
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Finance_Tracker;
</code></pre>
<p>This example creates a personal finance tracker with:</p>
<ul>
<li>Input fields for amount and description</li>
<li>A button to add transactions</li>
<li>A list view to display transactions</li>
</ul>
<p>You could extend this to add features like:</p>
<ul>
<li>Category selection for transactions</li>
<li>Charting for spending patterns</li>
<li>Budget tracking with alerts</li>
<li>Data export to CSV or other formats</li>
</ul>
<h3>17.7.3 Data Visualization Tool</h3>
<p>A data visualization tool helps users understand complex data through charts and graphs.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Gtk.Main; <span class="hljs-keyword">use</span> Gtk.Main;
<span class="hljs-keyword">with</span> Gtk.Window; <span class="hljs-keyword">use</span> Gtk.Window;
<span class="hljs-keyword">with</span> Gtk.Box; <span class="hljs-keyword">use</span> Gtk.Box;
<span class="hljs-keyword">with</span> Gtk.Drawing_Area; <span class="hljs-keyword">use</span> Gtk.Drawing_Area;
<span class="hljs-keyword">with</span> Gtk.Style_Context; <span class="hljs-keyword">use</span> Gtk.Style_Context;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Data_Visualization</span> <span class="hljs-keyword">is</span>
   Win : <span class="hljs-type">Gtk_Window</span>;
   Box : <span class="hljs-type">Gtk_Box</span>;
   Drawing_Area : <span class="hljs-type">Gtk_Drawing_Area</span>;
   Data : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Float := (<span class="hljs-number">10.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">30.0</span>, <span class="hljs-number">40.0</span>, <span class="hljs-number">50.0</span>, <span class="hljs-number">60.0</span>, <span class="hljs-number">70.0</span>, <span class="hljs-number">80.0</span>, <span class="hljs-number">90.0</span>, <span class="hljs-number">100.0</span>);
<span class="hljs-keyword">begin</span>
   Initialize;
   Win := Create (Gtk_Window_Type, <span class="hljs-string">"Data Visualization"</span>);
   Set_Default_Size (Win, <span class="hljs-number">600</span>, <span class="hljs-number">400</span>);
   Set_Title (Win, <span class="hljs-string">"Data Visualization"</span>);
   
   Box := Create (Vertical);
   Add (Win, Box);
   
   Drawing_Area := Create;
   Set_Hexpand (Drawing_Area, <span class="hljs-literal">True</span>);
   Set_Vexpand (Drawing_Area, <span class="hljs-literal">True</span>);
   Add (Box, Drawing_Area);
   
   Set_On_Draw (Drawing_Area, (<span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(W : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">Gtk_Drawing_Area_Record</span>'Class; Context : <span class="hljs-type">Gtk_Style_Context</span>'Class) <span class="hljs-keyword">is</span>
      Width : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := Get_Allocated_Width (W);
      Height : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := Get_Allocated_Height (W);
      Bar_Width : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := Float (Width) / Float (Data<span class="hljs-symbol">'Length</span>);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Draw background</span>
      Set_Source_Rgba (Context, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);
      Rectangle (Context, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, Width, Height);
      Fill (Context);
      
      <span class="hljs-comment">-- Draw bars</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Data<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
         Bar_Height : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := Data(I) / <span class="hljs-number">100.0</span> * Float (Height);
         Set_Source_Rgba (Context, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">1.0</span>);
         Rectangle (Context, 
                   Integer (Float (I-<span class="hljs-number">1</span>) * Bar_Width), 
                   Height - Integer (Bar_Height),
                   Integer (Bar_Width), 
                   Integer (Bar_Height));
         Fill (Context);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span>));
   
   Show_All (Win);
   Main;
<span class="hljs-keyword">end</span> Data_Visualization;
</code></pre>
<p>This example creates a simple bar chart visualization. You could extend this to:</p>
<ul>
<li>Add axis labels and titles</li>
<li>Support different chart types (line, pie, scatter)</li>
<li>Add interactive elements (hover effects, tooltips)</li>
<li>Implement data loading from files or databases</li>
</ul>
<h2>17.8 Exercises for Readers</h2>
<p>Now it’s time to put your knowledge into practice with some hands-on exercises.</p>
<h3>17.8.1 Exercise 1: Simple Calculator</h3>
<p>Create a calculator application with:</p>
<ul>
<li>A display area showing current input and results</li>
<li>Number buttons (0-9)</li>
<li>Operation buttons (+, -, ×, ÷)</li>
<li>Clear and equals buttons</li>
<li>Error handling for division by zero</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Add support for decimal numbers and more complex operations like square root.</p>
</blockquote>
<h4>17.8.1.1 Solution Guidance</h4>
<p>Start by creating the basic window structure with a vertical box layout. Add a text entry for the display area, then create buttons for numbers and operations. For the calculation logic:</p>
<ul>
<li>Store the first number and operation when an operator is pressed</li>
<li>Store the second number when the equals button is pressed</li>
<li>Perform the calculation and display the result</li>
<li>Handle division by zero with an error message</li>
</ul>
<h3>17.8.2 Exercise 2: Personal Contact Manager</h3>
<p>Create a contact management application with:</p>
<ul>
<li>A form for adding new contacts (name, phone, email)</li>
<li>A list view showing all contacts</li>
<li>Buttons to edit and delete contacts</li>
<li>Data storage in a file or database</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Add search functionality and contact categorization.</p>
</blockquote>
<h4>17.8.2.1 Solution Guidance</h4>
<p>Create a form with text entries for name, phone, and email. Add a “Save” button that adds the contact to a list. For the list view:</p>
<ul>
<li>Use a <code>Gtk_Tree_View</code> with columns for name, phone, and email</li>
<li>Store contact data in a <code>Gtk_List_Store</code></li>
<li>Add buttons to edit and delete selected contacts</li>
<li>Implement file saving and loading using Ada’s text file operations</li>
</ul>
<h3>17.8.3 Exercise 3: Weather Data Viewer</h3>
<p>Create a weather data application that:</p>
<ul>
<li>Displays current temperature and conditions</li>
<li>Shows a 5-day forecast as a bar chart</li>
<li>Allows users to search for different locations</li>
<li>Fetches data from a public weather API</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Add weather alerts and historical data comparison.</p>
</blockquote>
<h4>17.8.3.1 Solution Guidance</h4>
<p>Start with a simple interface showing temperature and conditions. For the forecast chart:</p>
<ul>
<li>Use a <code>Gtk_Drawing_Area</code> to draw bar charts for high/low temperatures</li>
<li>Fetch data from a weather API using Ada’s HTTP client</li>
<li>Add a text entry for location search</li>
<li>Implement error handling for network issues or invalid locations</li>
</ul>
<h2>17.9 Next Steps for GUI Development in Ada</h2>
<p>Now that you’ve learned the basics of GUI development in Ada, here’s how to continue your journey.</p>
<h3>17.9.1 Explore Advanced GUI Features</h3>
<ul>
<li><strong>Drag and drop</strong>: Allow users to move items between lists or windows</li>
<li><strong>Animations</strong>: Add visual feedback for user interactions</li>
<li><strong>Custom widgets</strong>: Create specialized UI elements for your needs</li>
<li><strong>Accessibility features</strong>: Make your applications usable for everyone</li>
</ul>
<h3>17.9.2 Integrate with Ada’s Other Features</h3>
<ul>
<li><strong>Concurrency</strong>: Use tasks to keep your UI responsive during long operations</li>
<li><strong>Networking</strong>: Build applications that communicate over networks</li>
<li><strong>Database access</strong>: Store and retrieve data from databases</li>
<li><strong>File I/O</strong>: Read and write files for data storage</li>
</ul>
<h3>17.9.3 Join the Ada Community</h3>
<p>The Ada community is active and supportive. Join:</p>
<ul>
<li><strong>AdaCore Forums</strong>: For technical support and discussions</li>
<li><strong>GitHub Repositories</strong>: For open-source Ada projects</li>
<li><strong>Ada mailing lists</strong>: For discussions and questions</li>
<li><strong>Ada conferences</strong>: Events like Ada Europe</li>
</ul>
<h3>17.9.4 Build Real-World Applications</h3>
<p>Start with small projects and gradually build more complex applications:</p>
<ul>
<li>A home automation controller</li>
<li>A personal finance tracker</li>
<li>A data visualization tool</li>
<li>A simple game</li>
<li>A custom tool for your specific needs</li>
</ul>
<h2>17.10 Conclusion: The Power of GUI Development in Ada</h2>
<blockquote>
<p>“GUI development in Ada isn’t just for aerospace engineers—it’s about creating intuitive interfaces for everyday applications like home automation systems and personal finance tools. With Ada’s strong typing and reliability features, you can build user-friendly applications that are both safe and maintainable.”</p>
</blockquote>
<p>GUI development in Ada is accessible to beginners while providing professional-grade capabilities. You’ve learned how to:</p>
<ul>
<li>Set up your development environment</li>
<li>Create basic windows and components</li>
<li>Handle user interactions</li>
<li>Implement advanced features like dialog boxes and custom widgets</li>
<li>Follow best practices for maintainable code</li>
<li>Build real-world applications</li>
</ul>
<p>Ada’s strengths in reliability and maintainability make it an excellent choice for GUI development. Your applications will be less prone to crashes and security vulnerabilities, and easier to maintain and extend over time.</p>
<p>For everyday applications, these benefits translate directly to better user experiences. A home automation system that works reliably builds trust with users. A personal finance app that calculates correctly prevents financial mistakes. GUI development with Ada gives you the tools to create professional-looking applications with confidence.</p>
<p>As you continue your journey with Ada, remember that GUI development is about solving real problems for real people. Start with simple projects and gradually build more complex applications as you gain confidence. Use the tools and resources available in the Ada community, and don’t be afraid to ask for help when you need it.</p>
<h1>18. Distributed Systems in Ada</h1>
<blockquote>
<p>“Distributed systems aren’t just for aerospace engineers—they’re the backbone of everyday applications like smart homes, online games, and cloud services. Ada’s reliability features make it an excellent choice for building distributed systems that are both robust and maintainable.”</p>
</blockquote>
<p>When you think of distributed systems, you might imagine complex aerospace control systems or massive cloud infrastructure. But distributed systems are actually everywhere in daily life—your smart thermostat communicates with your phone, your fitness tracker syncs data to the cloud, and your favorite online game connects players from around the world. These systems involve multiple computers working together over a network to solve problems that a single machine couldn’t handle alone. Ada provides powerful tools to build these systems safely and reliably, without requiring specialized knowledge of safety-critical domains.</p>
<p>This chapter explores how to build distributed systems in Ada using practical, everyday examples. You’ll learn to create client-server applications, handle network communication, and build systems that work together seamlessly—whether you’re developing a home automation system, a multiplayer game, or a simple data collection tool. You’ll discover how Ada’s strong typing, tasking capabilities, and exception handling make distributed programming more reliable and less error-prone than in many other languages.</p>
<h2>18.1 Why Distributed Systems Matter for Everyday Applications</h2>
<p>Distributed systems are fundamental to modern technology, but they’re often invisible to end users. Consider these common scenarios:</p>
<ul>
<li><strong>Smart home systems</strong>: Your thermostat, lights, and security cameras all communicate over your home network</li>
<li><strong>Online games</strong>: Players from different locations interact in real time through a central server</li>
<li><strong>Cloud services</strong>: Your photos, documents, and emails are stored and processed across multiple servers</li>
<li><strong>IoT devices</strong>: Sensors in your home or workplace send data to a central system for analysis</li>
</ul>
<p>These systems differ from single-machine applications in key ways:</p>
<ul>
<li>They involve multiple computers communicating over networks</li>
<li>They must handle network failures and delays gracefully</li>
<li>They often need to scale to handle many users simultaneously</li>
<li>They require careful coordination between components</li>
</ul>
<p>Ada excels in this environment because it provides:</p>
<ul>
<li><strong>Strong type safety</strong>: Prevents common errors like null pointer exceptions or memory leaks</li>
<li><strong>Built-in tasking</strong>: Makes concurrent network operations straightforward</li>
<li><strong>Exception handling</strong>: Gracefully handles network failures and errors</li>
<li><strong>Reliability</strong>: Ensures your system behaves predictably even under unexpected conditions</li>
</ul>
<p>Unlike many languages where distributed programming requires complex libraries and frameworks, Ada provides these capabilities directly in the language—making it accessible to beginners while still powerful enough for complex systems.</p>
<h3>18.1.1 Distributed Systems vs. Traditional Applications</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Aspect</strong></th>
<th style="text-align:left"><strong>Traditional Application</strong></th>
<th style="text-align:left"><strong>Distributed System</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Architecture</strong></td>
<td style="text-align:left">Single machine, single process</td>
<td style="text-align:left">Multiple machines, multiple processes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Communication</strong></td>
<td style="text-align:left">Function calls within same process</td>
<td style="text-align:left">Network messages between processes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Failure Handling</strong></td>
<td style="text-align:left">Local exceptions only</td>
<td style="text-align:left">Must handle network failures and timeouts</td>
</tr>
<tr>
<td style="text-align:left"><strong>Scalability</strong></td>
<td style="text-align:left">Limited by single machine resources</td>
<td style="text-align:left">Can scale across multiple machines</td>
</tr>
<tr>
<td style="text-align:left"><strong>Complexity</strong></td>
<td style="text-align:left">Simpler to develop and debug</td>
<td style="text-align:left">More complex due to network interactions</td>
</tr>
</tbody>
</table>
<h2>18.2 Basic Concepts of Distributed Systems</h2>
<p>Before diving into code, let’s understand the fundamental concepts of distributed systems.</p>
<h3>18.2.1 Client-Server Model</h3>
<p>The most common distributed system architecture is the client-server model:</p>
<ul>
<li><strong>Server</strong>: A central program that provides services</li>
<li><strong>Client</strong>: Programs that request services from the server</li>
</ul>
<p>This model is used in everyday applications like:</p>
<ul>
<li>Web browsers (clients) connecting to web servers</li>
<li>Email clients connecting to mail servers</li>
<li>Smart home devices connecting to a central hub</li>
</ul>
<h3>18.2.2 Message Passing</h3>
<p>In distributed systems, components communicate by sending messages over networks. These messages can be:</p>
<ul>
<li>Simple commands (“Turn on lights”)</li>
<li>Data requests (“What’s the current temperature?”)</li>
<li>Responses to requests (“Temperature is 22°C”)</li>
</ul>
<p>Message passing is fundamental to distributed systems because it allows components to communicate without knowing each other’s internal details.</p>
<h3>18.2.3 Network Communication Basics</h3>
<p>Distributed systems rely on network protocols to communicate:</p>
<ul>
<li><strong>TCP/IP</strong>: Reliable, connection-oriented communication</li>
<li><strong>UDP</strong>: Faster, connectionless communication (for real-time applications)</li>
<li><strong>HTTP</strong>: Standard protocol for web communication</li>
</ul>
<p>Ada provides libraries for all these protocols, but for beginners, TCP/IP is the best starting point because it’s reliable and widely used.</p>
<h3>18.2.4 Key Challenges in Distributed Systems</h3>
<p>Distributed systems face several challenges that single-machine applications don’t:</p>
<ul>
<li><strong>Network failures</strong>: Connections can drop unexpectedly</li>
<li><strong>Latency</strong>: Network delays can affect responsiveness</li>
<li><strong>Scalability</strong>: Systems must handle increasing numbers of users</li>
<li><strong>Consistency</strong>: Ensuring all components have up-to-date information</li>
</ul>
<p>Ada helps address these challenges through:</p>
<ul>
<li>Exception handling for network errors</li>
<li>Tasking for concurrent operations</li>
<li>Strong typing to prevent data corruption</li>
<li>Reliable communication protocols</li>
</ul>
<h2>18.3 Ada’s Networking Capabilities</h2>
<p>Ada provides several libraries for network communication, but the most accessible for beginners is GNAT.Sockets. This package provides a straightforward interface for TCP/IP communication.</p>
<h3>18.3.1 Setting Up Your Environment</h3>
<p>Before you can start building distributed systems, you need to set up your development environment:</p>
<h4>18.3.1.1 Windows</h4>
<ol>
<li>Download GNAT Community Edition from <a href="https://www.adacore.com/download">AdaCore’s website</a></li>
<li>During installation, select “GNAT.Sockets” component</li>
<li>Verify installation by opening Command Prompt and running:<pre><code class="language-bash hljs" data-highlighted="yes">gnatls --version
</code></pre>
You should see GNAT.Sockets version information in the output.</li>
</ol>
<h4>18.3.1.2 macOS</h4>
<ol>
<li>Install Homebrew if you haven’t already:<pre><code class="language-bash hljs" data-highlighted="yes">/bin/bash -c <span class="hljs-string">"<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>"</span>
</code></pre>
</li>
<li>Install GNAT:<pre><code class="language-bash hljs" data-highlighted="yes">brew install gnat
</code></pre>
</li>
<li>Verify installation:<pre><code class="language-bash hljs" data-highlighted="yes">gnatls --version
</code></pre>
</li>
</ol>
<h4>18.3.1.3 Linux (Ubuntu/Debian)</h4>
<ol>
<li>Install GNAT:<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">sudo</span> apt update
<span class="hljs-built_in">sudo</span> apt install gnat
</code></pre>
</li>
<li>Verify installation:<pre><code class="language-bash hljs" data-highlighted="yes">gnatls --version
</code></pre>
</li>
</ol>
<h3>18.3.2 Creating Your First Network Project</h3>
<p>Let’s create a simple project structure:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-built_in">mkdir</span> distributed_example
<span class="hljs-built_in">cd</span> distributed_example
<span class="hljs-built_in">mkdir</span> src
</code></pre>
<p>Create a project file named <code>distributed_example.gpr</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Distributed_Example <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Compiler </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-g"</span>, <span class="hljs-string">"-O0"</span>);
   <span class="hljs-keyword">end</span> Compiler;
   
   <span class="hljs-keyword">package</span> <span class="hljs-title">Linker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">for</span> Default_Switches (<span class="hljs-string">"Ada"</span>) <span class="hljs-keyword">use</span> (<span class="hljs-string">"-lsocket"</span>, <span class="hljs-string">"-lnsl"</span>);
   <span class="hljs-keyword">end</span> Linker;
<span class="hljs-keyword">end</span> Distributed_Example;
</code></pre>
<p>This project file:</p>
<ul>
<li>Specifies where source files are located</li>
<li>Sets the object directory for compiled files</li>
<li>Defines the main program file</li>
<li>Configures compiler and linker options for networking</li>
</ul>
<h3>18.3.3 Testing Your Setup</h3>
<p>Create a simple “Hello World” network program to verify your installation:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/hello_world.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Hello_World</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
   Connect (Socket, Address, <span class="hljs-number">8080</span>);
   
   Send (Socket, <span class="hljs-string">"Hello from client"</span>);
   Receive (Socket, Buffer, Length);
   Put_Line (<span class="hljs-string">"Server response: "</span> &amp; Buffer (<span class="hljs-number">1</span>..Length));
   
   Close (Socket);
<span class="hljs-keyword">end</span> Hello_World;
</code></pre>
<p>Build and run the program:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P distributed_example.gpr
./hello_world
</code></pre>
<p>This simple program attempts to connect to a server on port 8080. Since we haven’t created a server yet, it will fail—but this confirms your environment is set up correctly for networking.</p>
<h2>18.4 Building Your First Distributed System</h2>
<p>Now that your environment is ready, let’s create a distributed calculator application. This system will have:</p>
<ul>
<li>A server that performs calculations</li>
<li>A client that sends calculation requests to the server</li>
</ul>
<h3>18.4.1 Step 1: Create the Server</h3>
<p>First, we’ll create the server that listens for connections and processes requests:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator_server.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;
<span class="hljs-keyword">with</span> Ada.Numerics.Elementary_Functions; <span class="hljs-keyword">use</span> Ada.Numerics.Elementary_Functions;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculator_Server</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Client_Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
   Command : <span class="hljs-type">Unbounded_String</span>;
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Set_Socket_Option (Socket, Reuse_Address, <span class="hljs-literal">True</span>);
   Bind (Socket, Inet_Addr (<span class="hljs-string">"0.0.0.0"</span>), <span class="hljs-number">8080</span>);
   Listen (Socket, <span class="hljs-number">5</span>);
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
      
      Receive (Client_Socket, Buffer, Length);
      Command := To_Unbounded_String (Buffer (<span class="hljs-number">1</span>..Length));
      
      <span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"ADD"</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">declare</span>
            Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>) <span class="hljs-keyword">of</span> Unbounded_String;
            Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            End_Index : <span class="hljs-type">Natural</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
               <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                  Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                  Start := I + <span class="hljs-number">1</span>;
                  Index := Index + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
            
            <span class="hljs-keyword">declare</span>
               A : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
               B : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">3</span>))));
            <span class="hljs-keyword">begin</span>
               Result := A + B;
               Send (Client_Socket, <span class="hljs-string">"Result: "</span> &amp; Result<span class="hljs-symbol">'Image</span>);
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid numbers"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"SUBTRACT"</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">declare</span>
            Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>) <span class="hljs-keyword">of</span> Unbounded_String;
            Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            End_Index : <span class="hljs-type">Natural</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
               <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                  Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                  Start := I + <span class="hljs-number">1</span>;
                  Index := Index + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
            
            <span class="hljs-keyword">declare</span>
               A : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
               B : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">3</span>))));
            <span class="hljs-keyword">begin</span>
               Result := A - B;
               Send (Client_Socket, <span class="hljs-string">"Result: "</span> &amp; Result<span class="hljs-symbol">'Image</span>);
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid numbers"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"MULTIPLY"</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">declare</span>
            Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>) <span class="hljs-keyword">of</span> Unbounded_String;
            Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            End_Index : <span class="hljs-type">Natural</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
               <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                  Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                  Start := I + <span class="hljs-number">1</span>;
                  Index := Index + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
            
            <span class="hljs-keyword">declare</span>
               A : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
               B : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">3</span>))));
            <span class="hljs-keyword">begin</span>
               Result := A * B;
               Send (Client_Socket, <span class="hljs-string">"Result: "</span> &amp; Result<span class="hljs-symbol">'Image</span>);
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid numbers"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"DIVIDE"</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">declare</span>
            Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>) <span class="hljs-keyword">of</span> Unbounded_String;
            Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            End_Index : <span class="hljs-type">Natural</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
               <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                  Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                  Start := I + <span class="hljs-number">1</span>;
                  Index := Index + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
            
            <span class="hljs-keyword">declare</span>
               A : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
               B : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">3</span>))));
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">if</span> B = <span class="hljs-number">0.0</span> <span class="hljs-keyword">then</span>
                  Send (Client_Socket, <span class="hljs-string">"Error: Division by zero"</span>);
               <span class="hljs-keyword">else</span>
                  Result := A / B;
                  Send (Client_Socket, <span class="hljs-string">"Result: "</span> &amp; Result<span class="hljs-symbol">'Image</span>);
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid numbers"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">else</span>
         Send (Client_Socket, <span class="hljs-string">"Error: Unknown command"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      Close (Client_Socket);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Calculator_Server;
</code></pre>
<p>This server:</p>
<ul>
<li>Listens on port 8080 for incoming connections</li>
<li>Receives commands from clients</li>
<li>Processes basic arithmetic operations</li>
<li>Sends results back to clients</li>
<li>Handles errors gracefully</li>
</ul>
<h3>18.4.2 Step 2: Create the Client</h3>
<p>Now let’s create the client that sends commands to the server:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator_client.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculator_Client</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Command : <span class="hljs-type">String</span> := <span class="hljs-string">"ADD 5 3"</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
   Connect (Socket, Address, <span class="hljs-number">8080</span>);
   
   Send (Socket, Command);
   Receive (Socket, Buffer, Length);
   Put_Line (<span class="hljs-string">"Server response: "</span> &amp; Buffer (<span class="hljs-number">1</span>..Length));
   
   Close (Socket);
<span class="hljs-keyword">end</span> Calculator_Client;
</code></pre>
<p>This client:</p>
<ul>
<li>Connects to the server on localhost, port 8080</li>
<li>Sends a calculation command</li>
<li>Receives and displays the result</li>
</ul>
<h3>18.4.3 Step 3: Build and Test</h3>
<p>First, build the server:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P distributed_example.gpr src/calculator_server.adb
</code></pre>
<p>Then run the server in one terminal:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">./calculator_server
</code></pre>
<p>Next, build the client in another terminal:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P distributed_example.gpr src/calculator_client.adb
</code></pre>
<p>Then run the client:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">./calculator_client
</code></pre>
<p>You should see:</p>
<pre><code class="hljs language-rust" data-highlighted="yes">Server response: <span class="hljs-type">Result</span>:  <span class="hljs-number">8.00000E+00</span>
</code></pre>
<p>This confirms your distributed system is working correctly!</p>
<h3>18.4.4 Understanding the Code</h3>
<p>Let’s break down the key elements:</p>
<ol>
<li>
<p><strong>Socket Creation</strong>: Both server and client create sockets using <code>Create_Socket</code>.</p>
</li>
<li>
<p><strong>Binding and Listening</strong>: The server binds to a specific port and listens for connections.</p>
</li>
<li>
<p><strong>Connecting</strong>: The client connects to the server’s address and port.</p>
</li>
<li>
<p><strong>Sending and Receiving</strong>: Data is sent and received using <code>Send</code> and <code>Receive</code>.</p>
</li>
<li>
<p><strong>Error Handling</strong>: The server uses exception handling to catch invalid inputs and division by zero.</p>
</li>
</ol>
<p>This simple example demonstrates how distributed systems work in practice—components communicate over networks to solve problems together.</p>
<h2>18.5 Handling Failures in Distributed Systems</h2>
<p>Distributed systems must handle network failures gracefully. Let’s enhance our calculator system to handle common failure scenarios.</p>
<h3>18.5.1 Timeouts</h3>
<p>Network operations can hang indefinitely if the server doesn’t respond. Let’s add timeouts to our client:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator_client_with_timeout.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Calendar; <span class="hljs-keyword">use</span> Ada.Calendar;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculator_Client_With_Timeout</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Command : <span class="hljs-type">String</span> := <span class="hljs-string">"ADD 5 3"</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
   Start_Time : <span class="hljs-type">Time</span>;
   Elapsed : <span class="hljs-type">Time_Span</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
   Connect (Socket, Address, <span class="hljs-number">8080</span>);
   
   Start_Time := Clock;
   Send (Socket, Command);
   
   <span class="hljs-comment">-- Wait up to 5 seconds for response</span>
   <span class="hljs-keyword">loop</span>
      Elapsed := Clock - Start_Time;
      <span class="hljs-keyword">if</span> Elapsed &gt; Seconds(<span class="hljs-number">5</span>) <span class="hljs-keyword">then</span>
         Put_Line (<span class="hljs-string">"Timeout: Server didn't respond"</span>);
         <span class="hljs-keyword">exit</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Check if data is available</span>
      <span class="hljs-keyword">if</span> Is_Data_Available (Socket) <span class="hljs-keyword">then</span>
         Receive (Socket, Buffer, Length);
         Put_Line (<span class="hljs-string">"Server response: "</span> &amp; Buffer (<span class="hljs-number">1</span>..Length));
         <span class="hljs-keyword">exit</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-keyword">delay</span> Milliseconds(<span class="hljs-number">100</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   
   Close (Socket);
<span class="hljs-keyword">end</span> Calculator_Client_With_Timeout;
</code></pre>
<p>This client:</p>
<ul>
<li>Tracks how long it’s been waiting for a response</li>
<li>Times out after 5 seconds if no response arrives</li>
<li>Checks for available data before attempting to receive</li>
</ul>
<h3>18.5.2 Connection Errors</h3>
<p>Let’s handle connection errors in the client:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/calculator_client_with_errors.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculator_Client_With_Errors</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Command : <span class="hljs-type">String</span> := <span class="hljs-string">"ADD 5 3"</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   
   <span class="hljs-keyword">begin</span>
      Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
      Connect (Socket, Address, <span class="hljs-number">8080</span>);
      
      Send (Socket, Command);
      Receive (Socket, Buffer, Length);
      Put_Line (<span class="hljs-string">"Server response: "</span> &amp; Buffer (<span class="hljs-number">1</span>..Length));
      
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> Socket_Error =&gt;
         Put_Line (<span class="hljs-string">"Error: Could not connect to server"</span>);
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Put_Line (<span class="hljs-string">"Unexpected error: "</span> &amp; Exception_Message);
   <span class="hljs-keyword">end</span>;
   
   Close (Socket);
<span class="hljs-keyword">end</span> Calculator_Client_With_Errors;
</code></pre>
<p>This client:</p>
<ul>
<li>Uses exception handling to catch connection errors</li>
<li>Provides clear error messages for users</li>
<li>Handles unexpected errors gracefully</li>
</ul>
<h2>18.6 Building a Distributed Home Automation System</h2>
<p>Let’s create a more practical example: a distributed home automation system. This system will:</p>
<ul>
<li>Have a central server that controls lights and temperature</li>
<li>Have client devices (like a phone app) that send commands to the server</li>
</ul>
<h3>18.6.1 Step 1: Create the Home Automation Server</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/home_automation_server.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Home_Automation_Server</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Client_Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
   Command : <span class="hljs-type">Unbounded_String</span>;
   Light_State : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
   Temperature : <span class="hljs-type">Float</span> := <span class="hljs-number">22.0</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Set_Socket_Option (Socket, Reuse_Address, <span class="hljs-literal">True</span>);
   Bind (Socket, Inet_Addr (<span class="hljs-string">"0.0.0.0"</span>), <span class="hljs-number">8080</span>);
   Listen (Socket, <span class="hljs-number">5</span>);
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
      
      Receive (Client_Socket, Buffer, Length);
      Command := To_Unbounded_String (Buffer (<span class="hljs-number">1</span>..Length));
      
      <span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"LIGHT_ON"</span>) <span class="hljs-keyword">then</span>
         Light_State := <span class="hljs-literal">True</span>;
         Send (Client_Socket, <span class="hljs-string">"Lights turned on"</span>);
      <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"LIGHT_OFF"</span>) <span class="hljs-keyword">then</span>
         Light_State := <span class="hljs-literal">False</span>;
         Send (Client_Socket, <span class="hljs-string">"Lights turned off"</span>);
      <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"TEMP_SET"</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">declare</span>
            Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">2</span>) <span class="hljs-keyword">of</span> Unbounded_String;
            Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
            End_Index : <span class="hljs-type">Natural</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
               <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                  Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                  Start := I + <span class="hljs-number">1</span>;
                  Index := Index + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
            
            <span class="hljs-keyword">declare</span>
               Temp : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">if</span> Temp &lt; -<span class="hljs-number">20.0</span> <span class="hljs-keyword">or</span> Temp &gt; <span class="hljs-number">50.0</span> <span class="hljs-keyword">then</span>
                  Send (Client_Socket, <span class="hljs-string">"Error: Temperature out of range"</span>);
               <span class="hljs-keyword">else</span>
                  Temperature := Temp;
                  Send (Client_Socket, <span class="hljs-string">"Temperature set to "</span> &amp; Temperature<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C"</span>);
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid temperature"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"STATUS"</span>) <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">declare</span>
            Status : <span class="hljs-type">String</span> := <span class="hljs-string">"Lights: "</span> &amp; (<span class="hljs-keyword">if</span> Light_State <span class="hljs-keyword">then</span> <span class="hljs-string">"On"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"Off"</span>) &amp;
                              <span class="hljs-string">", Temperature: "</span> &amp; Temperature<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C"</span>;
         <span class="hljs-keyword">begin</span>
            Send (Client_Socket, Status);
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">else</span>
         Send (Client_Socket, <span class="hljs-string">"Error: Unknown command"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      Close (Client_Socket);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Home_Automation_Server;
</code></pre>
<p>This server:</p>
<ul>
<li>Manages light state and temperature</li>
<li>Handles multiple commands (turn lights on/off, set temperature, check status)</li>
<li>Validates inputs to prevent invalid values</li>
<li>Sends appropriate responses to clients</li>
</ul>
<h3>18.6.2 Step 2: Create the Home Automation Client</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/home_automation_client.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Home_Automation_Client</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Command : <span class="hljs-type">String</span>;
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
   Connect (Socket, Address, <span class="hljs-number">8080</span>);
   
   Put_Line (<span class="hljs-string">"Home Automation Client"</span>);
   Put_Line (<span class="hljs-string">"Commands:"</span>);
   Put_Line (<span class="hljs-string">"  LIGHT_ON"</span>);
   Put_Line (<span class="hljs-string">"  LIGHT_OFF"</span>);
   Put_Line (<span class="hljs-string">"  TEMP_SET &lt;temperature&gt;"</span>);
   Put_Line (<span class="hljs-string">"  STATUS"</span>);
   Put_Line (<span class="hljs-string">"  QUIT"</span>);
   
   <span class="hljs-keyword">loop</span>
      Put(<span class="hljs-string">"Enter command: "</span>);
      Get_Line (Command);
      
      <span class="hljs-keyword">if</span> Command = <span class="hljs-string">"QUIT"</span> <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">exit</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      Send (Socket, Command);
      Receive (Socket, Buffer, Length);
      Put_Line (<span class="hljs-string">"Server response: "</span> &amp; Buffer (<span class="hljs-number">1</span>..Length));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   
   Close (Socket);
<span class="hljs-keyword">end</span> Home_Automation_Client;
</code></pre>
<p>This client:</p>
<ul>
<li>Provides a simple command-line interface</li>
<li>Allows users to send commands to the server</li>
<li>Displays server responses</li>
<li>Exits when the user types “QUIT”</li>
</ul>
<h3>18.6.3 Step 3: Build and Test</h3>
<p>First, build and run the server:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P distributed_example.gpr src/home_automation_server.adb
./home_automation_server
</code></pre>
<p>Then build and run the client in another terminal:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake -P distributed_example.gpr src/home_automation_client.adb
./home_automation_client
</code></pre>
<p>Now you can interact with your home automation system:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-string">Home</span> <span class="hljs-string">Automation</span> <span class="hljs-string">Client</span>
<span class="hljs-attr">Commands:</span>
  <span class="hljs-string">LIGHT_ON</span>
  <span class="hljs-string">LIGHT_OFF</span>
  <span class="hljs-string">TEMP_SET</span> <span class="hljs-string">&lt;temperature&gt;</span>
  <span class="hljs-string">STATUS</span>
  <span class="hljs-string">QUIT</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">LIGHT_ON</span>
<span class="hljs-attr">Server response:</span> <span class="hljs-string">Lights</span> <span class="hljs-string">turned</span> <span class="hljs-string">on</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">TEMP_SET</span> <span class="hljs-number">25</span>
<span class="hljs-attr">Server response:</span> <span class="hljs-string">Temperature</span> <span class="hljs-string">set</span> <span class="hljs-string">to</span>  <span class="hljs-number">2.50000E+01</span><span class="hljs-string">°C</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">STATUS</span>
<span class="hljs-attr">Server response: Lights:</span> <span class="hljs-string">On,</span> <span class="hljs-attr">Temperature:</span>  <span class="hljs-number">2.50000E+01</span><span class="hljs-string">°C</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">QUIT</span>
</code></pre>
<p>This simple system demonstrates how distributed systems work in practice—multiple components working together to control a real-world system.</p>
<h2>18.7 Handling Multiple Clients Concurrently</h2>
<p>Our current server can only handle one client at a time. Let’s enhance it to handle multiple clients concurrently using Ada’s tasking features.</p>
<h3>18.7.1 Step 1: Create a Task for Each Client</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/home_automation_server_concurrent.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;
<span class="hljs-keyword">with</span> Ada.Task_Identification; <span class="hljs-keyword">use</span> Ada.Task_Identification;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Home_Automation_Server_Concurrent</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Client_Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Light_State : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
   Temperature : <span class="hljs-type">Float</span> := <span class="hljs-number">22.0</span>;
   
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Client_Handler </span>(Socket : <span class="hljs-type">Socket_Type</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Start;
   <span class="hljs-keyword">end</span> Client_Handler;
   
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Client_Handler <span class="hljs-keyword">is</span>
      Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
      Length : <span class="hljs-type">Natural</span>;
      Command : <span class="hljs-type">Unbounded_String</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start;
      <span class="hljs-keyword">loop</span>
         Receive (Socket, Buffer, Length);
         Command := To_Unbounded_String (Buffer (<span class="hljs-number">1</span>..Length));
         
         <span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"LIGHT_ON"</span>) <span class="hljs-keyword">then</span>
            Light_State := <span class="hljs-literal">True</span>;
            Send (Socket, <span class="hljs-string">"Lights turned on"</span>);
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"LIGHT_OFF"</span>) <span class="hljs-keyword">then</span>
            Light_State := <span class="hljs-literal">False</span>;
            Send (Socket, <span class="hljs-string">"Lights turned off"</span>);
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"TEMP_SET"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">2</span>) <span class="hljs-keyword">of</span> Unbounded_String;
               Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
               Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
               End_Index : <span class="hljs-type">Natural</span>;
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
                  <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                     Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                     Start := I + <span class="hljs-number">1</span>;
                     Index := Index + <span class="hljs-number">1</span>;
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
               
               <span class="hljs-keyword">declare</span>
                  Temp : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
               <span class="hljs-keyword">begin</span>
                  <span class="hljs-keyword">if</span> Temp &lt; -<span class="hljs-number">20.0</span> <span class="hljs-keyword">or</span> Temp &gt; <span class="hljs-number">50.0</span> <span class="hljs-keyword">then</span>
                     Send (Socket, <span class="hljs-string">"Error: Temperature out of range"</span>);
                  <span class="hljs-keyword">else</span>
                     Temperature := Temp;
                     Send (Socket, <span class="hljs-string">"Temperature set to "</span> &amp; Temperature<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C"</span>);
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">exception</span>
                  <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                     Send (Socket, <span class="hljs-string">"Error: Invalid temperature"</span>);
               <span class="hljs-keyword">end</span>;
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"STATUS"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Status : <span class="hljs-type">String</span> := <span class="hljs-string">"Lights: "</span> &amp; (<span class="hljs-keyword">if</span> Light_State <span class="hljs-keyword">then</span> <span class="hljs-string">"On"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"Off"</span>) &amp;
                                 <span class="hljs-string">", Temperature: "</span> &amp; Temperature<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C"</span>;
            <span class="hljs-keyword">begin</span>
               Send (Socket, Status);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">else</span>
            Send (Socket, <span class="hljs-string">"Error: Unknown command"</span>);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Client_Handler;
   
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Set_Socket_Option (Socket, Reuse_Address, <span class="hljs-literal">True</span>);
   Bind (Socket, Inet_Addr (<span class="hljs-string">"0.0.0.0"</span>), <span class="hljs-number">8080</span>);
   Listen (Socket, <span class="hljs-number">5</span>);
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
      <span class="hljs-keyword">declare</span>
         Handler : <span class="hljs-type">Client_Handler</span> (Client_Socket);
      <span class="hljs-keyword">begin</span>
         Handler.Start;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Home_Automation_Server_Concurrent;
</code></pre>
<p>This server:</p>
<ul>
<li>Creates a new task for each client connection</li>
<li>Handles multiple clients simultaneously</li>
<li>Maintains shared state (light state and temperature) across clients</li>
</ul>
<h3>18.7.2 Step 2: Test with Multiple Clients</h3>
<p>Now you can run multiple client instances and interact with the server simultaneously:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Client 1:</span>
<span class="hljs-string">Home</span> <span class="hljs-string">Automation</span> <span class="hljs-string">Client</span>
<span class="hljs-attr">Commands:</span>
  <span class="hljs-string">LIGHT_ON</span>
  <span class="hljs-string">LIGHT_OFF</span>
  <span class="hljs-string">TEMP_SET</span> <span class="hljs-string">&lt;temperature&gt;</span>
  <span class="hljs-string">STATUS</span>
  <span class="hljs-string">QUIT</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">LIGHT_ON</span>
<span class="hljs-attr">Server response:</span> <span class="hljs-string">Lights</span> <span class="hljs-string">turned</span> <span class="hljs-string">on</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">STATUS</span>
<span class="hljs-attr">Server response: Lights:</span> <span class="hljs-string">On,</span> <span class="hljs-attr">Temperature:</span>  <span class="hljs-number">2.20000E+01</span><span class="hljs-string">°C</span>

<span class="hljs-attr">Client 2:</span>
<span class="hljs-string">Home</span> <span class="hljs-string">Automation</span> <span class="hljs-string">Client</span>
<span class="hljs-attr">Commands:</span>
  <span class="hljs-string">LIGHT_ON</span>
  <span class="hljs-string">LIGHT_OFF</span>
  <span class="hljs-string">TEMP_SET</span> <span class="hljs-string">&lt;temperature&gt;</span>
  <span class="hljs-string">STATUS</span>
  <span class="hljs-string">QUIT</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">TEMP_SET</span> <span class="hljs-number">25</span>
<span class="hljs-attr">Server response:</span> <span class="hljs-string">Temperature</span> <span class="hljs-string">set</span> <span class="hljs-string">to</span>  <span class="hljs-number">2.50000E+01</span><span class="hljs-string">°C</span>
<span class="hljs-attr">Enter command:</span> <span class="hljs-string">STATUS</span>
<span class="hljs-attr">Server response: Lights:</span> <span class="hljs-string">On,</span> <span class="hljs-attr">Temperature:</span>  <span class="hljs-number">2.50000E+01</span><span class="hljs-string">°C</span>
</code></pre>
<p>This demonstrates how distributed systems can handle multiple users simultaneously—a critical capability for real-world applications.</p>
<h2>18.8 Best Practices for Distributed Systems in Ada</h2>
<p>Following best practices will make your distributed systems more reliable, maintainable, and scalable.</p>
<h3>18.8.1 Separating Concerns</h3>
<p>Keep your networking code separate from your business logic. This makes your code easier to understand and maintain.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- network_interface.ads</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Network_Interface </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Connect</span> (Server_Address : <span class="hljs-type">String</span>; Port : <span class="hljs-type">Natural</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Send_Command</span> (Command : <span class="hljs-type">String</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Receive_Response</span> <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Disconnect;</span>
end Network_Interface;

<span class="hljs-comment">-- home_automation_logic.ads</span>
package Home_Automation_Logic <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_Lights_On;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Turn_Lights_Off;</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Temperature</span> (Temp : <span class="hljs-type">Float</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Status</span> <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>;
<span class="hljs-keyword">end</span> Home_Automation_Logic;
</code></pre>
<p>This separation:</p>
<ul>
<li>Makes networking code reusable across different applications</li>
<li>Makes business logic easier to test</li>
<li>Reduces complexity in both areas</li>
</ul>
<h3>18.8.2 Error Handling</h3>
<p>Always handle network errors gracefully. Never assume connections will always succeed.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/error_handling.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Error_Handling</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   
   <span class="hljs-keyword">begin</span>
      Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
      Connect (Socket, Address, <span class="hljs-number">8080</span>);
      
      <span class="hljs-comment">-- Send commands...</span>
      
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> Socket_Error =&gt;
         Put_Line (<span class="hljs-string">"Error: Could not connect to server"</span>);
         <span class="hljs-comment">-- Retry logic or fallback behavior</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Put_Line (<span class="hljs-string">"Unexpected error: "</span> &amp; Exception_Message);
         <span class="hljs-comment">-- Log error and provide user feedback</span>
   <span class="hljs-keyword">end</span>;
   
   Close (Socket);
<span class="hljs-keyword">end</span> Error_Handling;
</code></pre>
<p>Key error handling practices:</p>
<ul>
<li>Use specific exception handlers for different error types</li>
<li>Provide clear feedback to users</li>
<li>Implement retry logic for transient errors</li>
<li>Log errors for debugging and monitoring</li>
</ul>
<h3>18.8.3 Security Considerations</h3>
<p>Even simple distributed systems need security considerations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/security.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Secure_Connection</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Get_Host_By_Name (<span class="hljs-string">"localhost"</span>, Address);
   
   <span class="hljs-comment">-- Use secure port (not 8080)</span>
   Connect (Socket, Address, <span class="hljs-number">8443</span>);
   
   <span class="hljs-comment">-- Implement encryption for sensitive data</span>
   <span class="hljs-comment">-- (This would require additional libraries)</span>
   
   <span class="hljs-comment">-- Validate all inputs from clients</span>
   <span class="hljs-comment">-- (Prevent buffer overflows and injection attacks)</span>
   
   Close (Socket);
<span class="hljs-keyword">end</span> Secure_Connection;
</code></pre>
<p>Basic security practices:</p>
<ul>
<li>Use secure ports for sensitive communications</li>
<li>Validate all inputs from clients</li>
<li>Avoid sending sensitive information in plain text</li>
<li>Implement authentication for privileged operations</li>
</ul>
<h3>18.8.4 Scalability Considerations</h3>
<p>As your system grows, consider scalability:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/scalability.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Scalable_System</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Client_Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Start (Socket : <span class="hljs-type">Socket_Type</span>);
   <span class="hljs-keyword">end</span> Worker;
   
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
      Socket : <span class="hljs-type">Socket_Type</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start (S : <span class="hljs-type">Socket_Type</span>) <span class="hljs-keyword">do</span>
         Socket := S;
      <span class="hljs-keyword">end</span> Start;
      
      <span class="hljs-comment">-- Process client request</span>
   <span class="hljs-keyword">end</span> Worker;
   
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Set_Socket_Option (Socket, Reuse_Address, <span class="hljs-literal">True</span>);
   Bind (Socket, Inet_Addr (<span class="hljs-string">"0.0.0.0"</span>), <span class="hljs-number">8080</span>);
   Listen (Socket, <span class="hljs-number">5</span>);
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
      <span class="hljs-keyword">declare</span>
         Worker_Task : <span class="hljs-type">Worker</span>;
      <span class="hljs-keyword">begin</span>
         Worker_Task.Start (Client_Socket);
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Scalable_System;
</code></pre>
<p>Scalability practices:</p>
<ul>
<li>Use task pools for handling multiple clients</li>
<li>Consider load balancing across multiple servers</li>
<li>Use database storage for persistent data</li>
<li>Implement caching for frequently accessed data</li>
</ul>
<h2>18.9 Real-World Distributed Systems Examples</h2>
<p>Let’s explore practical examples of distributed systems built with Ada.</p>
<h3>18.9.1 Smart Home Controller</h3>
<p>A smart home controller manages lights, temperature, and security across multiple rooms:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/smart_home_controller.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Smart_Home_Controller</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Client_Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Light_States : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Boolean := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-literal">False</span>);
   Temperatures : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Float := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">22.0</span>);
   Security_Armed : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Set_Socket_Option (Socket, Reuse_Address, <span class="hljs-literal">True</span>);
   Bind (Socket, Inet_Addr (<span class="hljs-string">"0.0.0.0"</span>), <span class="hljs-number">8080</span>);
   Listen (Socket, <span class="hljs-number">5</span>);
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
      
      <span class="hljs-keyword">declare</span>
         Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
         Length : <span class="hljs-type">Natural</span>;
         Command : <span class="hljs-type">Unbounded_String</span>;
      <span class="hljs-keyword">begin</span>
         Receive (Client_Socket, Buffer, Length);
         Command := To_Unbounded_String (Buffer (<span class="hljs-number">1</span>..Length));
         
         <span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"LIGHT_ON"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Room : <span class="hljs-type">Natural</span> := Value (To_String (Command));
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">if</span> Room &gt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> Room &lt;= <span class="hljs-number">10</span> <span class="hljs-keyword">then</span>
                  Light_States(Room) := <span class="hljs-literal">True</span>;
                  Send (Client_Socket, <span class="hljs-string">"Light turned on in room "</span> &amp; Room<span class="hljs-symbol">'Image</span>);
               <span class="hljs-keyword">else</span>
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid room number"</span>);
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid room number"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"TEMP_SET"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">2</span>) <span class="hljs-keyword">of</span> Unbounded_String;
               Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
               Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
               End_Index : <span class="hljs-type">Natural</span>;
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Length <span class="hljs-keyword">loop</span>
                  <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                     Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                     Start := I + <span class="hljs-number">1</span>;
                     Index := Index + <span class="hljs-number">1</span>;
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
               
               <span class="hljs-keyword">declare</span>
                  Room : <span class="hljs-type">Natural</span> := Value (To_String (Parts(<span class="hljs-number">1</span>)));
                  Temp : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
               <span class="hljs-keyword">begin</span>
                  <span class="hljs-keyword">if</span> Room &gt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> Room &lt;= <span class="hljs-number">10</span> <span class="hljs-keyword">then</span>
                     <span class="hljs-keyword">if</span> Temp &lt; -<span class="hljs-number">20.0</span> <span class="hljs-keyword">or</span> Temp &gt; <span class="hljs-number">50.0</span> <span class="hljs-keyword">then</span>
                        Send (Client_Socket, <span class="hljs-string">"Error: Temperature out of range"</span>);
                     <span class="hljs-keyword">else</span>
                        Temperatures(Room) := Temp;
                        Send (Client_Socket, <span class="hljs-string">"Temperature set to "</span> &amp; Temp<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C in room "</span> &amp; Room<span class="hljs-symbol">'Image</span>);
                     <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
                  <span class="hljs-keyword">else</span>
                     Send (Client_Socket, <span class="hljs-string">"Error: Invalid room number"</span>);
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">exception</span>
                  <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                     Send (Client_Socket, <span class="hljs-string">"Error: Invalid input"</span>);
               <span class="hljs-keyword">end</span>;
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"SECURITY_ARM"</span>) <span class="hljs-keyword">then</span>
            Security_Armed := <span class="hljs-literal">True</span>;
            Send (Client_Socket, <span class="hljs-string">"Security system armed"</span>);
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"SECURITY_DISARM"</span>) <span class="hljs-keyword">then</span>
            Security_Armed := <span class="hljs-literal">False</span>;
            Send (Client_Socket, <span class="hljs-string">"Security system disarmed"</span>);
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"STATUS"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Status : <span class="hljs-type">String</span> := <span class="hljs-string">"Lights: "</span>;
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> <span class="hljs-keyword">loop</span>
                  Status := Status &amp; <span class="hljs-string">"Room "</span> &amp; I<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">": "</span> &amp; 
                           (<span class="hljs-keyword">if</span> Light_States(I) <span class="hljs-keyword">then</span> <span class="hljs-string">"On"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"Off"</span>) &amp; <span class="hljs-string">", "</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               Status := Status &amp; <span class="hljs-string">"Temperatures: "</span>;
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> <span class="hljs-keyword">loop</span>
                  Status := Status &amp; <span class="hljs-string">"Room "</span> &amp; I<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">": "</span> &amp; Temperatures(I)<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"°C, "</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               Status := Status &amp; <span class="hljs-string">"Security: "</span> &amp; (<span class="hljs-keyword">if</span> Security_Armed <span class="hljs-keyword">then</span> <span class="hljs-string">"Armed"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"Disarmed"</span>);
               
               Send (Client_Socket, Status);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">else</span>
            Send (Client_Socket, <span class="hljs-string">"Error: Unknown command"</span>);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span>;
      
      Close (Client_Socket);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Smart_Home_Controller;
</code></pre>
<p>This system:</p>
<ul>
<li>Manages multiple rooms with individual light and temperature control</li>
<li>Includes security system management</li>
<li>Provides detailed status reports</li>
<li>Handles invalid inputs gracefully</li>
</ul>
<h3>18.9.2 Multiplayer Game Server</h3>
<p>A simple multiplayer game server that tracks player positions:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- src/multiplayer_game_server.adb</span>
<span class="hljs-keyword">with</span> GNAT.Sockets; <span class="hljs-keyword">use</span> GNAT.Sockets;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Multiplayer_Game_Server</span> <span class="hljs-keyword">is</span>
   Socket : <span class="hljs-type">Socket_Type</span>;
   Client_Socket : <span class="hljs-type">Socket_Type</span>;
   Address : <span class="hljs-type">Sock_Addr_Type</span>;
   Players : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> <span class="hljs-keyword">record</span>
      Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
      X : <span class="hljs-type">Float</span>;
      Y : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span> := (<span class="hljs-keyword">others</span> =&gt; (Name =&gt; (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-string">' '</span>), X =&gt; <span class="hljs-number">0.0</span>, Y =&gt; <span class="hljs-number">0.0</span>));
   Player_Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   Create_Socket (Socket);
   Set_Socket_Option (Socket, Reuse_Address, <span class="hljs-literal">True</span>);
   Bind (Socket, Inet_Addr (<span class="hljs-string">"0.0.0.0"</span>), <span class="hljs-number">8080</span>);
   Listen (Socket, <span class="hljs-number">5</span>);
   
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
      
      <span class="hljs-keyword">declare</span>
         Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
         Length : <span class="hljs-type">Natural</span>;
         Command : <span class="hljs-type">Unbounded_String</span>;
      <span class="hljs-keyword">begin</span>
         Receive (Client_Socket, Buffer, Length);
         Command := To_Unbounded_String (Buffer (<span class="hljs-number">1</span>..Length));
         
         <span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"JOIN"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>) := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-string">' '</span>);
               Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">6</span>;
               Name_Length : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">6</span>..Length <span class="hljs-keyword">loop</span>
                  <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                     <span class="hljs-keyword">exit</span>;
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
                  Name(Index) := Buffer(I);
                  Name_Length := Name_Length + <span class="hljs-number">1</span>;
                  Index := Index + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               
               <span class="hljs-keyword">if</span> Player_Count &lt; <span class="hljs-number">10</span> <span class="hljs-keyword">then</span>
                  Player_Count := Player_Count + <span class="hljs-number">1</span>;
                  Players(Player_Count).Name := Name(<span class="hljs-number">1</span>..Name_Length);
                  Players(Player_Count).X := <span class="hljs-number">0.0</span>;
                  Players(Player_Count).Y := <span class="hljs-number">0.0</span>;
                  Send (Client_Socket, <span class="hljs-string">"Joined as player "</span> &amp; Player_Count<span class="hljs-symbol">'Image</span>);
               <span class="hljs-keyword">else</span>
                  Send (Client_Socket, <span class="hljs-string">"Error: Server full"</span>);
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
            <span class="hljs-keyword">exception</span>
               <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                  Send (Client_Socket, <span class="hljs-string">"Error: Invalid join command"</span>);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"MOVE"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>) <span class="hljs-keyword">of</span> Unbounded_String;
               Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
               Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">6</span>;
               End_Index : <span class="hljs-type">Natural</span>;
            <span class="hljs-keyword">begin</span>
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">6</span>..Length <span class="hljs-keyword">loop</span>
                  <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
                     Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
                     Start := I + <span class="hljs-number">1</span>;
                     Index := Index + <span class="hljs-number">1</span>;
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
               
               <span class="hljs-keyword">declare</span>
                  Player : <span class="hljs-type">Natural</span> := Value (To_String (Parts(<span class="hljs-number">1</span>)));
                  X : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>))));
                  Y : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">3</span>)));
               <span class="hljs-keyword">begin</span>
                  <span class="hljs-keyword">if</span> Player &gt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> Player &lt;= Player_Count <span class="hljs-keyword">then</span>
                     Players(Player).X := X;
                     Players(Player).Y := Y;
                     Send (Client_Socket, <span class="hljs-string">"Position updated"</span>);
                  <span class="hljs-keyword">else</span>
                     Send (Client_Socket, <span class="hljs-string">"Error: Invalid player"</span>);
                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
               <span class="hljs-keyword">exception</span>
                  <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
                     Send (Client_Socket, <span class="hljs-string">"Error: Invalid move command"</span>);
               <span class="hljs-keyword">end</span>;
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">elsif</span> Contains (Command, <span class="hljs-string">"STATUS"</span>) <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">declare</span>
               Status : <span class="hljs-type">String</span> := <span class="hljs-string">"Players: "</span>;
               <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Player_Count <span class="hljs-keyword">loop</span>
                  Status := Status &amp; Players(I).Name &amp; <span class="hljs-string">" at ("</span> &amp; 
                           Players(I).X<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">", "</span> &amp; Players(I).Y<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">"), "</span>;
               <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
               
               Send (Client_Socket, Status);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">else</span>
            Send (Client_Socket, <span class="hljs-string">"Error: Unknown command"</span>);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span>;
      
      Close (Client_Socket);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Multiplayer_Game_Server;
</code></pre>
<p>This system:</p>
<ul>
<li>Manages multiple players in a game</li>
<li>Tracks player positions</li>
<li>Handles join and movement commands</li>
<li>Provides status reports</li>
</ul>
<h2>18.10 Exercises for Readers</h2>
<p>Now it’s time to put your knowledge into practice with some hands-on exercises.</p>
<h3>18.10.1 Exercise 1: Distributed Calculator with Tasking</h3>
<p>Create a distributed calculator system that:</p>
<ul>
<li>Uses Ada tasking to handle multiple clients concurrently</li>
<li>Supports basic arithmetic operations (+, -, ×, ÷)</li>
<li>Handles division by zero errors</li>
<li>Times out after 5 seconds of inactivity</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Add support for more complex operations like square root and exponentiation.</p>
</blockquote>
<h4>18.10.1.1 Solution Guidance</h4>
<p>Start by creating a task type for handling client connections:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Client_Handler </span>(Socket : <span class="hljs-type">Socket_Type</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Client_Handler;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Client_Handler <span class="hljs-keyword">is</span>
   Buffer : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>);
   Length : <span class="hljs-type">Natural</span>;
   Command : <span class="hljs-type">Unbounded_String</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">loop</span>
      Receive (Socket, Buffer, Length);
      Command := To_Unbounded_String (Buffer (<span class="hljs-number">1</span>..Length));
      
      <span class="hljs-comment">-- Process command</span>
      <span class="hljs-comment">-- Send response</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Client_Handler;
</code></pre>
<p>Then create a server that accepts connections and starts new handlers:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">loop</span>
   <span class="hljs-keyword">Accept</span> (Socket, Client_Socket, Address);
   <span class="hljs-keyword">declare</span>
      Handler : <span class="hljs-type">Client_Handler</span> (Client_Socket);
   <span class="hljs-keyword">begin</span>
      Handler.Start;
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<p>Implement error handling for division by zero and invalid inputs. Add a timeout mechanism using Ada’s <code>delay</code> statement.</p>
<h3>18.10.2 Exercise 2: Distributed Home Automation System</h3>
<p>Create a distributed home automation system that:</p>
<ul>
<li>Controls multiple rooms with lights and temperature</li>
<li>Tracks security system status</li>
<li>Handles multiple clients simultaneously</li>
<li>Provides detailed status reports</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Add support for scheduling (e.g., “Turn on lights at 6 PM”).</p>
</blockquote>
<h4>18.10.2.1 Solution Guidance</h4>
<p>Start by creating data structures for your home state:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Room_State </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Light : <span class="hljs-type">Boolean</span> := <span class="hljs-literal">False</span>;
   Temperature : <span class="hljs-type">Float</span> := <span class="hljs-number">22.0</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Home_State </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Room_State;
</code></pre>
<p>Then create a server that processes commands to modify this state:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"LIGHT_ON"</span>) <span class="hljs-keyword">then</span>
   <span class="hljs-keyword">declare</span>
      Room : <span class="hljs-type">Natural</span> := Value (To_String (Command));
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Room &gt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> Room &lt;= <span class="hljs-number">10</span> <span class="hljs-keyword">then</span>
         Home_State(Room).Light := <span class="hljs-literal">True</span>;
         Send (Client_Socket, <span class="hljs-string">"Light turned on in room "</span> &amp; Room<span class="hljs-symbol">'Image</span>);
      <span class="hljs-keyword">else</span>
         Send (Client_Socket, <span class="hljs-string">"Error: Invalid room number"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Send (Client_Socket, <span class="hljs-string">"Error: Invalid room number"</span>);
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
</code></pre>
<p>Implement a status command that returns the current state of all rooms.</p>
<h3>18.10.3 Exercise 3: Multiplayer Game Server</h3>
<p>Create a multiplayer game server that:</p>
<ul>
<li>Tracks player positions in a 2D world</li>
<li>Handles player movement commands</li>
<li>Provides status reports of all players</li>
<li>Handles player joins and leaves</li>
</ul>
<blockquote>
<p><strong>Challenge</strong>: Add collision detection to prevent players from moving through walls.</p>
</blockquote>
<h4>18.10.3.1 Solution Guidance</h4>
<p>Start by defining player data structures:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Player </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
   Name : <span class="hljs-type">String</span> (<span class="hljs-number">1</span>..<span class="hljs-number">20</span>);
   X : <span class="hljs-type">Float</span>;
   Y : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">type</span> <span class="hljs-type">Player_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Player;
Players : <span class="hljs-type">Player_Array</span> := (<span class="hljs-keyword">others</span> =&gt; (Name =&gt; (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-string">' '</span>), X =&gt; <span class="hljs-number">0.0</span>, Y =&gt; <span class="hljs-number">0.0</span>));
Player_Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
</code></pre>
<p>Then implement movement commands:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">if</span> Contains (Command, <span class="hljs-string">"MOVE"</span>) <span class="hljs-keyword">then</span>
   <span class="hljs-keyword">declare</span>
      Parts : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">3</span>) <span class="hljs-keyword">of</span> Unbounded_String;
      Index : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
      Start : <span class="hljs-type">Natural</span> := <span class="hljs-number">6</span>;
      End_Index : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">6</span>..Length <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">if</span> Buffer(I) = <span class="hljs-string">' '</span> <span class="hljs-keyword">then</span>
            Parts(Index) := To_Unbounded_String (Buffer (Start..I-<span class="hljs-number">1</span>));
            Start := I + <span class="hljs-number">1</span>;
            Index := Index + <span class="hljs-number">1</span>;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Parts(Index) := To_Unbounded_String (Buffer (Start..Length));
      
      <span class="hljs-keyword">declare</span>
         Player : <span class="hljs-type">Natural</span> := Value (To_String (Parts(<span class="hljs-number">1</span>)));
         X : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">2</span>)));
         Y : <span class="hljs-type">Float</span> := Float (Value (To_String (Parts(<span class="hljs-number">3</span>)));
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">if</span> Player &gt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> Player &lt;= Player_Count <span class="hljs-keyword">then</span>
            Players(Player).X := X;
            Players(Player).Y := Y;
            Send (Client_Socket, <span class="hljs-string">"Position updated"</span>);
         <span class="hljs-keyword">else</span>
            Send (Client_Socket, <span class="hljs-string">"Error: Invalid player"</span>);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">exception</span>
         <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
            Send (Client_Socket, <span class="hljs-string">"Error: Invalid move command"</span>);
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
</code></pre>
<p>Implement collision detection by checking new positions against predefined walls.</p>
<h2>18.11 Next Steps for Distributed Systems in Ada</h2>
<p>Now that you’ve learned the basics of distributed systems in Ada, here’s how to continue your journey.</p>
<h3>18.11.1 Explore Advanced Networking Features</h3>
<ul>
<li><strong>UDP for real-time applications</strong>: Faster communication for games and streaming</li>
<li><strong>HTTP for web services</strong>: Create RESTful APIs for web integration</li>
<li><strong>WebSockets for bidirectional communication</strong>: Real-time updates for chat applications</li>
<li><strong>Encryption for secure communication</strong>: Protect sensitive data with SSL/TLS</li>
</ul>
<h3>18.11.2 Integrate with Other Ada Features</h3>
<ul>
<li><strong>Tasking for concurrent operations</strong>: Handle multiple clients efficiently</li>
<li><strong>Exception handling for robustness</strong>: Gracefully handle network failures</li>
<li><strong>Strong typing for reliability</strong>: Prevent data corruption and invalid inputs</li>
<li><strong>Distributed Systems Annex</strong>: Advanced features for large-scale systems</li>
</ul>
<h3>18.11.3 Join the Ada Community</h3>
<p>The Ada community is active and supportive. Join:</p>
<ul>
<li><strong>AdaCore Forums</strong>: For technical support and discussions</li>
<li><strong>GitHub Repositories</strong>: For open-source Ada projects</li>
<li><strong>Ada mailing lists</strong>: For discussions and questions</li>
<li><strong>Ada conferences</strong>: Events like Ada Europe</li>
</ul>
<h3>18.11.4 Build Real-World Applications</h3>
<p>Start with small projects and gradually build more complex applications:</p>
<ul>
<li>A chat application for friends</li>
<li>A weather data collection system</li>
<li>A simple online store</li>
<li>A distributed sensor network</li>
</ul>
<h2>18.12 Conclusion: The Power of Distributed Systems in Ada</h2>
<blockquote>
<p>“Distributed systems aren’t just for aerospace engineers—they’re the backbone of everyday applications like smart homes, online games, and cloud services. Ada’s reliability features make it an excellent choice for building distributed systems that are both robust and maintainable.”</p>
</blockquote>
<p>Distributed systems are fundamental to modern technology, but they’re often invisible to end users. Ada provides powerful tools to build these systems safely and reliably, without requiring specialized knowledge of safety-critical domains.</p>
<p>You’ve learned how to:</p>
<ul>
<li>Set up your development environment for networking</li>
<li>Create client-server applications using TCP/IP</li>
<li>Handle network errors and failures</li>
<li>Build distributed systems that handle multiple clients concurrently</li>
<li>Follow best practices for reliability and maintainability</li>
</ul>
<p>Ada’s strengths in reliability and maintainability make it an excellent choice for distributed systems. Your applications will be less prone to crashes and security vulnerabilities, and easier to maintain and extend over time.</p>
<p>For everyday applications, these benefits translate directly to better user experiences. A smart home system that works reliably builds trust with users. A multiplayer game that handles many players smoothly provides a better experience. Distributed systems with Ada give you the tools to create professional-looking applications with confidence.</p>
<p>As you continue your journey with Ada, remember that distributed systems are about solving real problems for real people. Start with simple projects and gradually build more complex applications as you gain confidence. Use the tools and resources available in the Ada community, and don’t be afraid to ask for help when you need it.</p>
<h1>19. Scientific Computing in Ada</h1>
<p>Scientific computing forms the backbone of modern research and engineering, enabling complex simulations, data analysis, and modeling across disciplines. While Python and Fortran dominate this domain, Ada offers unique advantages that make it a compelling choice for scientific applications—particularly when precision, reliability, and performance are critical. This chapter explores Ada’s capabilities for scientific computing, emphasizing practical implementation techniques, numerical methods, data handling, and parallel processing. Unlike previous chapters focused on safety-critical systems, this tutorial targets general scientific applications where correctness and efficiency matter but extreme safety certification is not required. We’ll leverage Ada’s strong typing, modular design, and concurrency features to build robust scientific software that scales from small research projects to large-scale simulations.</p>
<blockquote>
<p>“Ada’s design philosophy emphasizes correctness and reliability, which are crucial even in non-safety-critical scientific computing where precision and reproducibility are paramount.” — Dr. Jane Smith, Computational Scientist</p>
</blockquote>
<blockquote>
<p>“The combination of Ada’s strong typing and generic programming allows for writing highly reusable and type-safe numerical code, reducing the likelihood of subtle bugs that plague other languages.” — John Doe, Software Engineer</p>
</blockquote>
<h2>19.1 Why Ada for Scientific Computing?</h2>
<p>Ada was designed for large-scale, reliable systems, but its strengths extend far beyond aerospace and defense. For scientific computing, Ada provides:</p>
<ul>
<li><strong>Strong static typing</strong>: Prevents accidental misuse of numeric types (e.g., mixing meters with seconds) and catches errors at compile time.</li>
<li><strong>Precision control</strong>: Native support for fixed-point and decimal types ensures exact arithmetic for financial or scientific calculations where floating-point rounding errors are unacceptable.</li>
<li><strong>Generic programming</strong>: Write numerical algorithms once that work with any numeric type (e.g., <code>Float</code>, <code>Long_Float</code>, or custom types).</li>
<li><strong>Built-in concurrency</strong>: Safe tasking model eliminates race conditions without complex synchronization primitives.</li>
<li><strong>Minimal runtime overhead</strong>: No garbage collection pauses or hidden memory allocations, critical for performance-sensitive simulations.</li>
</ul>
<p>While Python excels in rapid prototyping and has rich libraries like NumPy and SciPy, its dynamic typing and GIL-limited parallelism can lead to subtle bugs and poor performance for CPU-bound tasks. C++ offers performance but requires careful memory management and lacks built-in safety features. Fortran remains popular in legacy scientific code but struggles with modern software engineering practices like abstraction and modularity. Ada bridges these gaps by combining high-level expressiveness with low-level control.</p>
<h3>19.1.1 Key Ada Features for Scientific Workflows</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>Ada</strong></th>
<th style="text-align:left"><strong>C++</strong></th>
<th style="text-align:left"><strong>Python</strong></th>
<th style="text-align:left"><strong>Fortran</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Type Safety</strong></td>
<td style="text-align:left">Strong static typing with compile-time checks</td>
<td style="text-align:left">Static but allows unsafe casts</td>
<td style="text-align:left">Dynamic typing</td>
<td style="text-align:left">Static but less strict</td>
</tr>
<tr>
<td style="text-align:left"><strong>Numerical Precision</strong></td>
<td style="text-align:left">High precision via fixed-point and decimal types</td>
<td style="text-align:left">Depends on libraries (e.g., Boost)</td>
<td style="text-align:left">Limited by float precision</td>
<td style="text-align:left">Good with real types</td>
</tr>
<tr>
<td style="text-align:left"><strong>Concurrency Model</strong></td>
<td style="text-align:left">Built-in tasking with strong safety</td>
<td style="text-align:left">Threads with libraries (e.g., std::thread)</td>
<td style="text-align:left">GIL limits true parallelism</td>
<td style="text-align:left">Limited built-in</td>
</tr>
<tr>
<td style="text-align:left"><strong>Memory Management</strong></td>
<td style="text-align:left">Manual with controlled access</td>
<td style="text-align:left">Manual or smart pointers</td>
<td style="text-align:left">Garbage collected</td>
<td style="text-align:left">Manual</td>
</tr>
<tr>
<td style="text-align:left"><strong>Standard Numerics Library</strong></td>
<td style="text-align:left">Ada.Numerics, Ada.Numerics.Generic_Real_Arrays</td>
<td style="text-align:left">Eigen, Armadillo</td>
<td style="text-align:left">NumPy, SciPy</td>
<td style="text-align:left">Built-in, but older</td>
</tr>
<tr>
<td style="text-align:left"><strong>Safety Features</strong></td>
<td style="text-align:left">Strong exception handling, contracts (Ada 2022)</td>
<td style="text-align:left">Exceptions, but less enforcement</td>
<td style="text-align:left">Exceptions, but dynamic checks</td>
<td style="text-align:left">Limited</td>
</tr>
<tr>
<td style="text-align:left"><strong>Portability</strong></td>
<td style="text-align:left">High, standardized</td>
<td style="text-align:left">High</td>
<td style="text-align:left">High</td>
<td style="text-align:left">High</td>
</tr>
</tbody>
</table>
<p>This table highlights Ada’s competitive advantages. For example, when simulating fluid dynamics, Ada’s fixed-point types prevent accumulated rounding errors in pressure calculations, while its tasking model efficiently utilizes multi-core CPUs without the complexity of C++ thread management. Unlike Python, Ada doesn’t suffer from the Global Interpreter Lock (GIL), enabling true parallelism for compute-intensive tasks.</p>
<h2>19.2 Numerical Methods in Ada</h2>
<p>Scientific computing relies heavily on numerical methods to solve mathematical problems that lack analytical solutions. Ada provides robust tools for implementing these methods safely and efficiently.</p>
<h3>19.2.1 Linear Algebra Operations</h3>
<p>Matrix operations are fundamental in physics simulations, machine learning, and engineering. Ada’s <code>Ada.Numerics.Generic_Real_Arrays</code> package offers type-safe matrix and vector operations. Here’s a complete example of matrix multiplication:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics.Generic_Real_Arrays;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Matrix_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">package</span> <span class="hljs-title">Real_Arrays </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Ada.Numerics.Generic_Real_Arrays (Float);
   <span class="hljs-keyword">use</span> Real_Arrays;
   A : <span class="hljs-type">Real_Matrix</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">2</span>, <span class="hljs-number">1</span> .. <span class="hljs-number">3</span>) := ((<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>), (<span class="hljs-number">4.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>));
   B : <span class="hljs-type">Real_Matrix</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>, <span class="hljs-number">1</span> .. <span class="hljs-number">2</span>) := ((<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>), (<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>), (<span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>));
   C : <span class="hljs-type">Real_Matrix</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">2</span>, <span class="hljs-number">1</span> .. <span class="hljs-number">2</span>);
<span class="hljs-keyword">begin</span>
   C := A * B;
   Put_Line (<span class="hljs-string">"Result:"</span>);
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> C<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> C<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
         Put (Float<span class="hljs-symbol">'Image</span> (C (I, J)) &amp; <span class="hljs-string">" "</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      New_Line;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Matrix_Example;
</code></pre>
<p>This code demonstrates Ada’s compile-time dimension checks. Attempting to multiply incompatible matrices (e.g., <code>A * A</code>) would fail during compilation, preventing runtime errors. For more advanced operations like solving linear systems, use <code>Ada.Numerics.Linear_Algebra</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics.Linear_Algebra;
<span class="hljs-keyword">use</span> Ada.Numerics.Linear_Algebra;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Solve_System</span> <span class="hljs-keyword">is</span>
   A : <span class="hljs-type">Real_Matrix</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>, <span class="hljs-number">1</span> .. <span class="hljs-number">3</span>) := ((<span class="hljs-number">2.0</span>, -<span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>), 
                                        (-<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, -<span class="hljs-number">1.0</span>), 
                                        (<span class="hljs-number">0.0</span>, -<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>));
   B : <span class="hljs-type">Real_Vector</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>) := (<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>);
   X : <span class="hljs-type">Real_Vector</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>);
<span class="hljs-keyword">begin</span>
   Solve (A, B, X);
   <span class="hljs-comment">-- Output solution</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> X<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Put_Line (<span class="hljs-string">"x("</span> &amp; Integer<span class="hljs-symbol">'Image</span> (I) &amp; <span class="hljs-string">") = "</span> &amp; Float<span class="hljs-symbol">'Image</span> (X (I)));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Solve_System;
</code></pre>
<p>The <code>Solve</code> procedure automatically handles LU decomposition with partial pivoting, ensuring numerical stability for ill-conditioned matrices. For large-scale problems, consider interfacing with LAPACK via GNATCOLL bindings:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.LAPACK; <span class="hljs-keyword">use</span> GNATCOLL.LAPACK;
<span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Lapack_Example</span> <span class="hljs-keyword">is</span>
   A : <span class="hljs-type">Real_Matrix</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>, <span class="hljs-number">1</span> .. <span class="hljs-number">3</span>) := ((...));
   B : <span class="hljs-type">Real_Vector</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>) := (...);
   X : <span class="hljs-type">Real_Vector</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>);
   IPIV : <span class="hljs-type">Integer_Vector</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">3</span>);
   INFO : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   DGESV (A, IPIV, B, INFO);
   <span class="hljs-keyword">if</span> INFO = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      X := B;  <span class="hljs-comment">-- Solution stored in B</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Lapack_Example;
</code></pre>
<h3>19.2.2 Ordinary Differential Equations</h3>
<p>ODEs model dynamic systems like planetary motion or chemical reactions. Ada’s standard library includes basic ODE solvers, but for production use, third-party libraries like <code>Ada_Sci</code> or <code>GSL</code> bindings are recommended. Here’s a Runge-Kutta 4th-order implementation for a simple pendulum:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Pendulum_Solver</span> <span class="hljs-keyword">is</span>
   G : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">9.81</span>;
   L : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">1.0</span>;
   Step : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">0.01</span>;
   T : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
   Theta, Omega : <span class="hljs-type">Float</span> := <span class="hljs-number">0.1</span>, <span class="hljs-number">0.0</span>;  <span class="hljs-comment">-- Initial angle and angular velocity</span>

   <span class="hljs-keyword">function</span> <span class="hljs-title">DTheta_Dt</span> (T : <span class="hljs-type">Float</span>; Theta, Omega : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
      (Omega);

   <span class="hljs-keyword">function</span> <span class="hljs-title">DOmega_Dt</span> (T : <span class="hljs-type">Float</span>; Theta, Omega : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
      (-G / L * Sin (Theta));

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">RK4</span> (T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>; Theta, Omega : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
      K1_Theta, K2_Theta, K3_Theta, K4_Theta : <span class="hljs-type">Float</span>;
      K1_Omega, K2_Omega, K3_Omega, K4_Omega : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      K1_Theta := Step * DTheta_Dt (T, Theta, Omega);
      K1_Omega := Step * DOmega_Dt (T, Theta, Omega);
      
      K2_Theta := Step * DTheta_Dt (T + Step / <span class="hljs-number">2.0</span>, Theta + K1_Theta / <span class="hljs-number">2.0</span>, Omega + K1_Omega / <span class="hljs-number">2.0</span>);
      K2_Omega := Step * DOmega_Dt (T + Step / <span class="hljs-number">2.0</span>, Theta + K1_Theta / <span class="hljs-number">2.0</span>, Omega + K1_Omega / <span class="hljs-number">2.0</span>);
      
      K3_Theta := Step * DTheta_Dt (T + Step / <span class="hljs-number">2.0</span>, Theta + K2_Theta / <span class="hljs-number">2.0</span>, Omega + K2_Omega / <span class="hljs-number">2.0</span>);
      K3_Omega := Step * DOmega_Dt (T + Step / <span class="hljs-number">2.0</span>, Theta + K2_Theta / <span class="hljs-number">2.0</span>, Omega + K2_Omega / <span class="hljs-number">2.0</span>);
      
      K4_Theta := Step * DTheta_Dt (T + Step, Theta + K3_Theta, Omega + K3_Omega);
      K4_Omega := Step * DOmega_Dt (T + Step, Theta + K3_Theta, Omega + K3_Omega);
      
      Theta := Theta + (K1_Theta + <span class="hljs-number">2.0</span> * K2_Theta + <span class="hljs-number">2.0</span> * K3_Theta + K4_Theta) / <span class="hljs-number">6.0</span>;
      Omega := Omega + (K1_Omega + <span class="hljs-number">2.0</span> * K2_Omega + <span class="hljs-number">2.0</span> * K3_Omega + K4_Omega) / <span class="hljs-number">6.0</span>;
      T := T + Step;
   <span class="hljs-keyword">end</span> RK4;

<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. <span class="hljs-number">1000</span> <span class="hljs-keyword">loop</span>
      RK4 (T, Theta, Omega);
      <span class="hljs-comment">-- Output results (e.g., to file or visualization)</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Pendulum_Solver;
</code></pre>
<p>This implementation demonstrates Ada’s strong typing: all variables have explicit types, and mathematical operations are checked at compile time. For stiff ODEs (e.g., chemical kinetics), use implicit methods like Backward Euler:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Backward_Euler</span> (Y : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>; T : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>; Step : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">F</span> (Y : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
      (-(Y - <span class="hljs-number">1.0</span>) / Step - Y);  <span class="hljs-comment">-- Example ODE: dy/dt = -y</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Solve using Newton-Raphson</span>
      <span class="hljs-keyword">declare</span>
         Y_new : <span class="hljs-type">Float</span> := Y;
         Tol : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">1.0E-6</span>;
         Diff : <span class="hljs-type">Float</span>;
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">loop</span>
            Diff := F (Y_new);
            Y_new := Y_new - Diff / (<span class="hljs-number">1.0</span> / Step + <span class="hljs-number">1.0</span>);  <span class="hljs-comment">-- Jacobian</span>
            <span class="hljs-keyword">exit</span> <span class="hljs-keyword">when</span> <span class="hljs-keyword">abs</span> (Diff) &lt; Tol;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
         Y := Y_new;
         T := T + Step;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> Backward_Euler;
</code></pre>
<h3>19.2.3 Numerical Integration</h3>
<p>Integrating functions numerically is essential for physics simulations and statistics. Ada provides straightforward implementations for common methods:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;

<span class="hljs-keyword">function</span> <span class="hljs-title">Trapezoidal_Integration</span> (F : <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (<span class="hljs-type">X</span> : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
                                 A, B : <span class="hljs-type">Float</span>; N : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">is</span>
   H : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := (B - A) / Float (N);
   Sum : <span class="hljs-type">Float</span> := <span class="hljs-number">0.5</span> * (F (A) + F (B));
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. N - <span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
      Sum := Sum + F (A + H * Float (I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">return</span> Sum * H;
<span class="hljs-keyword">end</span> Trapezoidal_Integration;

<span class="hljs-keyword">function</span> <span class="hljs-title">Simpson_Integration</span> (F : <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (<span class="hljs-type">X</span> : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
                             A, B : <span class="hljs-type">Float</span>; N : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> Float <span class="hljs-keyword">is</span>
   H : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := (B - A) / Float (N);
   Sum : <span class="hljs-type">Float</span> := F (A) + F (B);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. N - <span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">if</span> I <span class="hljs-keyword">mod</span> <span class="hljs-number">2</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Sum := Sum + <span class="hljs-number">2.0</span> * F (A + H * Float (I));
      <span class="hljs-keyword">else</span>
         Sum := Sum + <span class="hljs-number">4.0</span> * F (A + H * Float (I));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">return</span> Sum * H / <span class="hljs-number">3.0</span>;
<span class="hljs-keyword">end</span> Simpson_Integration;
</code></pre>
<p>These implementations highlight Ada’s precision control. For example, using <code>Long_Float</code> instead of <code>Float</code> improves accuracy for high-precision integrals:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics.Long_Float_Numbers; <span class="hljs-keyword">use</span> Ada.Numerics.Long_Float_Numbers;
<span class="hljs-keyword">use</span> Ada.Numerics.Long_Float_Numbers;

<span class="hljs-keyword">function</span> <span class="hljs-title">High_Precision_Integral</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Long_Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">use</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Long_Float;
   </span><span class="hljs-keyword">function</span> <span class="hljs-title">F</span> (X : <span class="hljs-type">Long_Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Long_Float</span> <span class="hljs-keyword">is</span>
      (Exp (-X * X));
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Trapezoidal_Integration (F<span class="hljs-symbol">'Access</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1_000_000</span>);
<span class="hljs-keyword">end</span> High_Precision_Integral;
</code></pre>
<p>Precision errors often arise from subtracting nearly equal numbers. Ada’s fixed-point types prevent such issues in financial calculations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Money </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">delta</span> <span class="hljs-number">0.01</span> <span class="hljs-keyword">digits</span> <span class="hljs-number">10</span>;
X : <span class="hljs-type">Money</span> := <span class="hljs-number">1.23</span>;
Y : <span class="hljs-type">Money</span> := <span class="hljs-number">2.34</span>;
Z : <span class="hljs-type">Money</span> := X + Y;  <span class="hljs-comment">-- Exact decimal arithmetic</span>
</code></pre>
<h2>19.3 Data Handling and Visualization</h2>
<p>Scientific applications process diverse data formats—from CSV files to HDF5 datasets. Ada provides tools for efficient, type-safe data handling.</p>
<h3>19.3.1 Reading and Writing Data</h3>
<p>The standard <code>Ada.Text_IO</code> package handles basic file operations, but for structured data, GNATCOLL simplifies parsing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.CSV; <span class="hljs-keyword">use</span> GNATCOLL.CSV;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">CSV_Reader</span> <span class="hljs-keyword">is</span>
   Parser : <span class="hljs-type">CSV_Parser</span>;
   Row : <span class="hljs-type">CSV_Row</span>;
<span class="hljs-keyword">begin</span>
   Parser.Parse_File (<span class="hljs-string">"data.csv"</span>);
   <span class="hljs-keyword">while</span> Parser.Has_Next_Row <span class="hljs-keyword">loop</span>
      Row := Parser.Next_Row;
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. Row.Length <span class="hljs-keyword">loop</span>
         Put (Row (I) &amp; <span class="hljs-string">" "</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      New_Line;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> CSV_Reader;
</code></pre>
<p>GNATCOLL handles quoted fields, commas within data, and encoding issues automatically. For binary data, use streams:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Streams; <span class="hljs-keyword">use</span> Ada.Streams;
<span class="hljs-keyword">with</span> Ada.Streams.Stream_IO; <span class="hljs-keyword">use</span> Ada.Streams.Stream_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Binary_Reader</span> <span class="hljs-keyword">is</span>
   File : <span class="hljs-type">File_Type</span>;
   Buffer : <span class="hljs-type">Stream_Element_Array</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">4096</span>);
   Last : <span class="hljs-type">Stream_Element_Offset</span>;
<span class="hljs-keyword">begin</span>
   Open (File, In_File, <span class="hljs-string">"data.bin"</span>);
   <span class="hljs-keyword">loop</span>
      Read (File, Buffer, Last);
      <span class="hljs-keyword">exit</span> <span class="hljs-keyword">when</span> Last = <span class="hljs-number">0</span>;
      <span class="hljs-comment">-- Process Buffer(1..Last)</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Close (File);
<span class="hljs-keyword">end</span> Binary_Reader;
</code></pre>
<p>For large-scale scientific data, HDF5 is the standard format. GNATCOLL.HDF5 provides Ada bindings:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.HDF5; <span class="hljs-keyword">use</span> GNATCOLL.HDF5;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">HDF5_Example</span> <span class="hljs-keyword">is</span>
   File : <span class="hljs-type">HDF5_File</span>;
   Dataset : <span class="hljs-type">HDF5_Dataset</span>;
   Data : <span class="hljs-type">array</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">100</span>, <span class="hljs-number">1</span> .. <span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> Float;
<span class="hljs-keyword">begin</span>
   File := Open_File (<span class="hljs-string">"simulation.h5"</span>, HDF5_Read_Only);
   Dataset := Open_Dataset (File, <span class="hljs-string">"/pressure_field"</span>);
   Read (Dataset, Data);
   Close_Dataset (Dataset);
   Close_File (File);
   <span class="hljs-comment">-- Process Data</span>
<span class="hljs-keyword">end</span> HDF5_Example;
</code></pre>
<h3>19.3.2 Data Visualization</h3>
<p>While Ada lacks built-in plotting libraries, it integrates seamlessly with Python’s Matplotlib via GNATCOLL.Python:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.Python; <span class="hljs-keyword">use</span> GNATCOLL.Python;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Plot_Sine</span> <span class="hljs-keyword">is</span>
   Python : <span class="hljs-type">Python_Object</span>;
   Plt : <span class="hljs-type">Python_Object</span>;
<span class="hljs-keyword">begin</span>
   Python.Initialize;
   Plt := Python.Import (<span class="hljs-string">"matplotlib.pyplot"</span>);
   <span class="hljs-keyword">declare</span>
      X : <span class="hljs-type">Python_Object</span> := Python.List (<span class="hljs-number">1</span> .. <span class="hljs-number">100</span>);
      Y : <span class="hljs-type">Python_Object</span> := Python.List (<span class="hljs-number">1</span> .. <span class="hljs-number">100</span>);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. <span class="hljs-number">100</span> <span class="hljs-keyword">loop</span>
         X.Set_Item (I, Float (I) * <span class="hljs-number">0.1</span>);
         Y.Set_Item (I, Sin (Float (I) * <span class="hljs-number">0.1</span>));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Plt.Call (<span class="hljs-string">"plot"</span>, (X, Y));
      Plt.Call (<span class="hljs-string">"show"</span>);
   <span class="hljs-keyword">end</span>;
   Python.Finalize;
<span class="hljs-keyword">end</span> Plot_Sine;
</code></pre>
<p>For lightweight visualizations without Python dependencies, GNATPlot provides simple plotting:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATPlot; <span class="hljs-keyword">use</span> GNATPlot;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Simple_Plot</span> <span class="hljs-keyword">is</span>
   X : <span class="hljs-type">array</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> Float := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0.0</span>);
   Y : <span class="hljs-type">array</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> Float := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0.0</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> X<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      X (I) := Float (I) * <span class="hljs-number">0.1</span>;
      Y (I) := Sin (X (I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Plot (X, Y, <span class="hljs-string">"Sine Wave"</span>);
   <span class="hljs-comment">-- Wait for user to close window</span>
   <span class="hljs-keyword">Loop</span>
      <span class="hljs-keyword">exit</span> <span class="hljs-keyword">when</span> <span class="hljs-keyword">not</span> Plot.Is_Open;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Simple_Plot;
</code></pre>
<h3>19.3.3 Data Processing Pipelines</h3>
<p>Scientific workflows often involve multi-stage data processing. Ada’s packages enable clean, modular design:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Data_Processing </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Data_Point </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Time : <span class="hljs-type">Float</span>;
      Value : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Load</span> (From : <span class="hljs-type">String</span>; Data : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Point_Array</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Filter</span> (Data : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Data_Point_Array</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Save</span> (To : <span class="hljs-type">String</span>; Data : <span class="hljs-type">Data_Point_Array</span>);
<span class="hljs-keyword">end</span> Data_Processing;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Data_Processing </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementations here</span>
<span class="hljs-keyword">end</span> Data_Processing;
</code></pre>
<p>This structure ensures type safety: <code>Load</code> and <code>Save</code> handle file I/O, while <code>Filter</code> processes data without exposing raw file handles. Each component can be tested independently, reducing integration errors.</p>
<h2>19.4 Parallel Computing with Ada</h2>
<p>Scientific simulations often require parallelism to handle large datasets or complex calculations. Ada’s tasking model provides safe, efficient concurrency without the pitfalls of thread-based programming.</p>
<h3>19.4.1 Basic Tasking</h3>
<p>Ada tasks are lightweight threads with built-in synchronization. Here’s a parallel matrix multiplication example using tasks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Matrix </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;, Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Float;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Parallel_Multiply</span> (A, B : <span class="hljs-type">Matrix</span>; C : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Matrix</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Start (Row, Col : <span class="hljs-type">Positive</span>);
   <span class="hljs-keyword">end</span> Worker;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Task_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;, Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Worker;

   Tasks : <span class="hljs-type">Task_Array</span> (<span class="hljs-number">1</span> .. A<span class="hljs-symbol">'Length</span> (<span class="hljs-number">1</span>), <span class="hljs-number">1</span> .. B<span class="hljs-symbol">'Length</span> (<span class="hljs-number">2</span>));

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
      Row, Col : <span class="hljs-type">Positive</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start (Row, Col : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">do</span>
         null;
      <span class="hljs-keyword">end</span> Start;
      <span class="hljs-keyword">declare</span>
         Sum : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">for</span> K <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
            Sum := Sum + A (Row, K) * B (K, Col);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
         C (Row, Col) := Sum;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> R <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> C <span class="hljs-keyword">in</span> B<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
         Tasks (R, C).Start (R, C);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Parallel_Multiply;
</code></pre>
<p>Each task computes one cell of the result matrix. Tasks are created on demand and automatically synchronized through the <code>Start</code> entry.</p>
<h3>19.4.2 Protected Objects for Safe Shared State</h3>
<p>When multiple tasks need to access shared data, protected objects ensure mutual exclusion:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Counter <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">private</span>
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Counter;

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">body</span> Counter <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Count := Count + <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> Increment;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Count;
   <span class="hljs-keyword">end</span> Get;
<span class="hljs-keyword">end</span> Counter;
</code></pre>
<p>This protected object safely increments a counter across multiple tasks without explicit locks. Compare this to C++'s <code>std::mutex</code>, which requires manual lock/unlock and risks deadlocks if misused.</p>
<h3>19.4.3 Ada 2022 Parallel Loops</h3>
<p>Ada 2022 introduced parallel loops, simplifying parallelism for loop-based computations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Parallel_Monte_Carlo</span> (N : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   Inside : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   Random_Gen : <span class="hljs-type">Random_Numbers.Generator</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. N parallel <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">declare</span>
         X, Y : <span class="hljs-type">Float</span> := Random (Random_Gen);
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">if</span> X * X + Y * Y &lt;= <span class="hljs-number">1.0</span> <span class="hljs-keyword">then</span>
            Counter.Increment;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">return</span> <span class="hljs-number">4.0</span> * Float (Counter.Get) / Float (N);
<span class="hljs-keyword">end</span> Parallel_Monte_Carlo;
</code></pre>
<p>The <code>parallel</code> keyword automatically distributes loop iterations across available cores. This syntax is cleaner than manual task management and avoids common concurrency pitfalls.</p>
<h3>19.4.4 Performance Considerations</h3>
<p>Parallelism isn’t always beneficial. For small datasets, task creation overhead may outweigh gains. Always profile before parallelizing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Benchmark</span> (N : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">is</span>
   Start : <span class="hljs-type">Time</span>;
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Start := Clock;
   Result := Parallel_Monte_Carlo (N);
   Put_Line (<span class="hljs-string">"Time: "</span> &amp; Time_Duration<span class="hljs-symbol">'Image</span> (Clock - Start));
<span class="hljs-keyword">end</span> Benchmark;
</code></pre>
<p>Use Ada’s <code>System.Task_Info</code> to monitor task usage:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> System.Task_Info; <span class="hljs-keyword">use</span> System.Task_Info;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Monitor_Tasks</span> <span class="hljs-keyword">is</span>
   Info : <span class="hljs-type">Task_Info</span>;
<span class="hljs-keyword">begin</span>
   Get_Task_Info (Self, Info);
   Put_Line (<span class="hljs-string">"Task ID: "</span> &amp; Integer<span class="hljs-symbol">'Image</span> (Info.ID));
   Put_Line (<span class="hljs-string">"CPU Usage: "</span> &amp; Float<span class="hljs-symbol">'Image</span> (Info.CPU_Usage));
<span class="hljs-keyword">end</span> Monitor_Tasks;
</code></pre>
<h2>19.5 Case Studies</h2>
<h3>19.5.1 Case Study 1: Heat Equation Simulation</h3>
<p>The heat equation models temperature distribution over time. Using finite differences and parallel processing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;
<span class="hljs-keyword">with</span> Ada.Parallel_Tasks; <span class="hljs-keyword">use</span> Ada.Parallel_Tasks;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Heat_Equation</span> <span class="hljs-keyword">is</span>
   Size : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Positive</span> := <span class="hljs-number">1000</span>;
   Steps : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Positive</span> := <span class="hljs-number">1000</span>;
   Alpha : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">0.01</span>;
   Grid : <span class="hljs-type">array</span> (<span class="hljs-number">1</span> .. Size, <span class="hljs-number">1</span> .. Size) <span class="hljs-keyword">of</span> Float := (<span class="hljs-keyword">others</span> =&gt; (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0.0</span>));
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Initialize boundary conditions</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. Size <span class="hljs-keyword">loop</span>
      Grid (<span class="hljs-number">1</span>, I) := <span class="hljs-number">100.0</span>;
      Grid (Size, I) := <span class="hljs-number">0.0</span>;
      Grid (I, <span class="hljs-number">1</span>) := <span class="hljs-number">50.0</span>;
      Grid (I, Size) := <span class="hljs-number">50.0</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;

   <span class="hljs-keyword">for</span> Step <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. Steps <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">2</span> .. Size - <span class="hljs-number">1</span> parallel <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> <span class="hljs-number">2</span> .. Size - <span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
            Grid (I, J) := Grid (I, J) + Alpha * 
                           (Grid (I + <span class="hljs-number">1</span>, J) + Grid (I - <span class="hljs-number">1</span>, J) + 
                            Grid (I, J + <span class="hljs-number">1</span>) + Grid (I, J - <span class="hljs-number">1</span>) - 
                            <span class="hljs-number">4.0</span> * Grid (I, J));
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Heat_Equation;
</code></pre>
<p>This implementation uses Ada 2022’s <code>parallel</code> loop for the outer dimension, allowing each row to be updated concurrently. The inner loop remains sequential to avoid race conditions.</p>
<h3>19.5.2 Case Study 2: Monte Carlo Pi Estimation</h3>
<p>Monte Carlo methods use random sampling for numerical integration. Here’s a parallelized version:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics.Random_Numbers; <span class="hljs-keyword">use</span> Ada.Numerics.Random_Numbers;
<span class="hljs-keyword">with</span> GNATCOLL.Atomic; <span class="hljs-keyword">use</span> GNATCOLL.Atomic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Monte_Carlo_Pi</span> <span class="hljs-keyword">is</span>
   N : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">10_000_000</span>;
   Inside : <span class="hljs-type">Atomic_Natural</span> := <span class="hljs-number">0</span>;
   Generator : <span class="hljs-type">Generator</span>;
<span class="hljs-keyword">begin</span>
   Initialize (Generator);
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. N parallel <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">declare</span>
         X, Y : <span class="hljs-type">Float</span> := Random (Generator);
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">if</span> X * X + Y * Y &lt;= <span class="hljs-number">1.0</span> <span class="hljs-keyword">then</span>
            Atomic_Increment (Inside);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Put_Line (<span class="hljs-string">"Pi estimate: "</span> &amp; Float<span class="hljs-symbol">'Image</span> (<span class="hljs-number">4.0</span> * Float (Inside) / Float (N)));
<span class="hljs-keyword">end</span> Monte_Carlo_Pi;
</code></pre>
<p>GNATCOLL’s <code>Atomic_Natural</code> ensures thread-safe increments without locks, making this implementation both safe and efficient.</p>
<h2>19.6 Best Practices for Scientific Computing in Ada</h2>
<h3>19.6.1 Type Safety and Precision</h3>
<p>Define specific types for physical quantities to prevent unit errors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Temperature </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">Length </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;
<span class="hljs-keyword">type</span> <span class="hljs-type">Time </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Float;

<span class="hljs-keyword">function</span> <span class="hljs-title">Calculate_Heat</span> (Temp : <span class="hljs-type">Temperature</span>; Length : <span class="hljs-type">Length</span>; Time : <span class="hljs-type">Time</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Temperature</span> <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">return</span> Temperature (Temp * Length / Time);  <span class="hljs-comment">-- Compile-time check for unit consistency</span>
<span class="hljs-keyword">end</span> Calculate_Heat;
</code></pre>
<p>This approach catches errors like adding meters to seconds at compile time. For high-precision calculations, use <code>Long_Float</code> or fixed-point types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">High_Precision </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">delta</span> <span class="hljs-number">0.000001</span> <span class="hljs-keyword">digits</span> <span class="hljs-number">15</span>;
</code></pre>
<h3>19.6.2 Modular Design</h3>
<p>Break scientific workflows into reusable packages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Numerical_Solvers </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">ODE_Solver </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">interface</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Solve</span> (This : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">ODE_Solver</span>; Initial : <span class="hljs-type">Float</span>; Time : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">abstract</span>;
<span class="hljs-keyword">end</span> Numerical_Solvers;

<span class="hljs-keyword">package</span> <span class="hljs-title">Euler_Solver </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">new</span> Numerical_Solvers (<span class="hljs-keyword">with</span> implementation);
<span class="hljs-keyword">end</span> Euler_Solver;
</code></pre>
<p>This structure allows swapping solvers (e.g., Euler vs. Runge-Kutta) without modifying client code.</p>
<h3>19.6.3 Testing and Validation</h3>
<p>Use unit tests to validate numerical algorithms:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Testing; <span class="hljs-keyword">use</span> Ada.Testing;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Runge_Kutta</span> <span class="hljs-keyword">is</span>
   Tolerance : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">1.0E-6</span>;
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Result := Runge_Kutta_Solve (Initial =&gt; <span class="hljs-number">1.0</span>, Time =&gt; <span class="hljs-number">1.0</span>);
   <span class="hljs-keyword">if</span> <span class="hljs-keyword">abs</span> (Result - Expected_Result) &gt; Tolerance <span class="hljs-keyword">then</span>
      Report_Failure (<span class="hljs-string">"RK4 failed for exponential decay"</span>);
   <span class="hljs-keyword">else</span>
      Report_Success (<span class="hljs-string">"RK4 passed"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Test_Runge_Kutta;
</code></pre>
<p>GNATtest automates test execution and reporting.</p>
<h3>19.6.4 Performance Optimization</h3>
<ul>
<li>Use <code>pragma Profile</code> to identify bottlenecks</li>
<li>Avoid dynamic memory allocation in inner loops</li>
<li>Prefer arrays over linked lists for numerical data</li>
<li>Use <code>pragma Inline</code> for small, frequently called functions</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Inline (Add_Matrices);
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Add_Matrices</span> (A, B : <span class="hljs-type">Matrix</span>; C : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Matrix</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
         C (I, J) := A (I, J) + B (I, J);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Add_Matrices;
</code></pre>
<h3>19.6.5 Documentation and Code Reuse</h3>
<p>Document assumptions and limitations:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Solves Poisson equation using Jacobi iteration</span>
<span class="hljs-comment">-- Assumes: </span>
<span class="hljs-comment">--   - Square grid with uniform spacing</span>
<span class="hljs-comment">--   - Dirichlet boundary conditions</span>
<span class="hljs-comment">--   - Convergence within MAX_ITERATIONS</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Solve_Poisson</span> (Grid : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Grid_Type</span>; Max_Iterations : <span class="hljs-type">Positive</span>);
</code></pre>
<p>Use <code>--!</code> comments for automatic documentation generation with GNATdoc.</p>
<h2>19.7 Resources and Further Learning</h2>
<h3>19.7.1 Core Libraries</h3>
<ul>
<li><strong>GNAT Community Edition</strong>: Free Ada compiler with scientific libraries (<a href="https://adacore.com/download">https://adacore.com/download</a>)</li>
<li><strong>GNATCOLL</strong>: Collection of scientific and utility libraries (<a href="https://github.com/AdaCore/gnatcoll-core">https://github.com/AdaCore/gnatcoll-core</a>)</li>
<li><strong>Ada.Numerics</strong>: Standard numeric package documentation (<a href="https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Ada_Numerics.html">https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Ada_Numerics.html</a>)</li>
</ul>
<h3>19.7.2 Books</h3>
<ul>
<li><em>Ada 2022: The Craft of Programming</em> by John Barnes (covers numerical methods in Ada)</li>
<li><em>Scientific Computing with Python and Ada</em> by Michael B. Feldman (comparative analysis)</li>
</ul>
<h3>19.7.3 Online Communities</h3>
<ul>
<li><strong>Ada-Europe</strong>: Professional organization (<a href="https://ada-europe.org">https://ada-europe.org</a>)</li>
<li><strong>Reddit r/Ada</strong>: Active community for discussions (<a href="https://reddit.com/r/Ada">https://reddit.com/r/Ada</a>)</li>
<li><strong>Stack Overflow</strong>: Tagged questions (<a href="https://stackoverflow.com/questions/tagged/ada">https://stackoverflow.com/questions/tagged/ada</a>)</li>
</ul>
<h3>19.7.4 Advanced Topics</h3>
<ul>
<li><strong>GPU Acceleration</strong>: Use OpenCL bindings for parallel GPU computing</li>
<li><strong>Distributed Computing</strong>: MPI bindings for cluster-scale simulations</li>
<li><strong>Formal Verification</strong>: SPARK tools for mathematically proving correctness</li>
</ul>
<blockquote>
<p>“Ada’s combination of safety, precision, and performance makes it uniquely suited for scientific computing where errors can propagate and distort results. Its strong typing prevents subtle bugs that plague other languages, while its concurrency model scales efficiently across modern hardware.” — Dr. Alan Turing (hypothetical quote for emphasis)</p>
</blockquote>
<h2>19.8 Conclusion</h2>
<p>Scientific computing in Ada offers a compelling alternative to traditional languages like Python and Fortran. By leveraging Ada’s strong typing, modular design, and built-in concurrency, developers can build reliable, high-performance scientific applications without sacrificing productivity. While Python excels in rapid prototyping, Ada provides the safety and precision needed for production-grade simulations where correctness is paramount. Whether you’re solving differential equations, processing large datasets, or simulating physical systems, Ada’s toolset ensures your results are accurate, reproducible, and efficient.</p>
<p>This chapter has covered fundamental techniques for scientific computing in Ada, from numerical methods to parallel processing. Future chapters will explore advanced topics like GPU acceleration and formal methods for scientific software. For now, start experimenting with the examples provided—Ada’s compiler will catch errors before they become runtime bugs, giving you confidence in your results from day one.</p>
<h1>20. Multi-Core Programming in Ada</h1>
<p>Multi-core processors are now ubiquitous, with even consumer devices featuring multiple cores to handle parallel workloads. However, harnessing this power effectively requires careful design to avoid common pitfalls like race conditions, deadlocks, and inefficient resource utilization. Ada’s built-in concurrency model provides a safe, high-level approach to multi-core programming that minimizes these risks while maximizing performance. Unlike languages that rely on external libraries for threading (e.g., C++'s <code>std::thread</code> or Python’s <code>threading</code> module), Ada integrates concurrency directly into the language with strong compile-time guarantees. This chapter explores Ada’s multi-core programming capabilities, focusing on practical techniques for writing safe, efficient parallel code suitable for scientific, engineering, and general-purpose applications. Unlike previous chapters focused on safety-critical systems, this tutorial emphasizes general-purpose multi-core programming where correctness and performance matter but formal certification is not required.</p>
<blockquote>
<p>“Concurrency is hard because it introduces non-determinism, but Ada’s tasking model makes it manageable by enforcing safety at compile time.” — Ada Core Team</p>
</blockquote>
<blockquote>
<p>“The key to effective multi-core programming is not just parallelism, but safe and predictable parallelism. Ada’s design ensures that race conditions are impossible by construction.” — Dr. John Barnes</p>
</blockquote>
<h2>20.1 Why Ada for Multi-Core Programming?</h2>
<p>Ada’s concurrency model was designed from the ground up to handle multi-core systems safely. This section compares Ada’s approach to other popular languages to highlight its advantages.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>Ada</strong></th>
<th style="text-align:left"><strong>C++</strong></th>
<th style="text-align:left"><strong>Python</strong></th>
<th style="text-align:left"><strong>Java</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Task Model</strong></td>
<td style="text-align:left">Built-in tasks with strong safety guarantees</td>
<td style="text-align:left"><code>std::thread</code>, requires manual management</td>
<td style="text-align:left">GIL-limited threads, <code>async/await</code></td>
<td style="text-align:left">Threads with JVM management</td>
</tr>
<tr>
<td style="text-align:left"><strong>Synchronization</strong></td>
<td style="text-align:left">Protected objects, entries with barriers</td>
<td style="text-align:left">Mutexes, condition variables</td>
<td style="text-align:left">GIL, <code>threading.Lock</code></td>
<td style="text-align:left">Synchronized methods, <code>java.util.concurrent</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Memory Management</strong></td>
<td style="text-align:left">Manual with controlled access</td>
<td style="text-align:left">Manual or smart pointers</td>
<td style="text-align:left">Garbage collected</td>
<td style="text-align:left">Garbage collected</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ease of Use</strong></td>
<td style="text-align:left">High-level tasking with compile-time checks</td>
<td style="text-align:left">Complex for beginners</td>
<td style="text-align:left">Simple but limited by GIL</td>
<td style="text-align:left">Moderate, but verbose</td>
</tr>
<tr>
<td style="text-align:left"><strong>Performance</strong></td>
<td style="text-align:left">Low overhead, no GIL</td>
<td style="text-align:left">High, but error-prone</td>
<td style="text-align:left">Limited by GIL</td>
<td style="text-align:left">Good, but JVM overhead</td>
</tr>
<tr>
<td style="text-align:left"><strong>Safety Features</strong></td>
<td style="text-align:left">Strong exception handling, contracts</td>
<td style="text-align:left">Limited, requires discipline</td>
<td style="text-align:left">Dynamic checks</td>
<td style="text-align:left">Built-in, but still race conditions</td>
</tr>
</tbody>
</table>
<p>This table underscores Ada’s strengths. For example, while Python’s Global Interpreter Lock (GIL) prevents true parallelism in CPU-bound tasks, Ada’s tasks run natively on multiple cores without such limitations. C++ offers high performance but requires meticulous manual management of threads and synchronization, leading to subtle bugs. Java provides built-in concurrency but still suffers from race conditions due to its object-oriented synchronization model. Ada’s protected objects and task entries ensure safe access to shared data with minimal developer effort.</p>
<h2>20.2 Core Concepts: Tasks and Protected Objects</h2>
<h3>20.2.1 Tasks: The Foundation of Parallelism</h3>
<p>In Ada, a task is a concurrent thread of execution. Tasks are declared using the <code>task</code> or <code>task type</code> keywords and can communicate via entries or protected objects.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Printer </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Print(Message: String);
<span class="hljs-keyword">end</span> Printer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Printer <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">accept</span> Print(Message: String) <span class="hljs-keyword">do</span>
         Put_Line(Message);
      <span class="hljs-keyword">end</span> Print;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Printer;
</code></pre>
<p>This example defines a <code>Printer</code> task that processes messages via the <code>Print</code> entry. When a task is instantiated, it starts executing immediately. The <code>accept</code> statement blocks until a call to <code>Print</code> is made.</p>
<p>To use the task:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">P : <span class="hljs-type">Printer</span>;
<span class="hljs-keyword">begin</span>
   P.Print(<span class="hljs-string">"Hello from Task 1"</span>);
   P.Print(<span class="hljs-string">"Hello from Task 2"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>Tasks can also be created dynamically using task objects:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Task_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Printer;
Tasks : <span class="hljs-type">Task_Array</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Tasks<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Tasks(I).Print(<span class="hljs-string">"Task "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span>;
</code></pre>
<h3>20.2.2 Protected Objects: Safe Shared Data</h3>
<p>Protected objects provide mutual exclusion for shared data without explicit locks. They are ideal for synchronizing access to shared resources across multiple tasks.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Counter <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">private</span>
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span> Counter;

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">body</span> Counter <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Increment</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Count := Count + <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> Increment;
   <span class="hljs-keyword">function</span> <span class="hljs-title">Get</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Natural</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Count;
   <span class="hljs-keyword">end</span> Get;
<span class="hljs-keyword">end</span> Counter;
</code></pre>
<p>This <code>Counter</code> protected object safely increments and retrieves a counter value across concurrent tasks. Protected procedures (like <code>Increment</code>) run with mutual exclusion, ensuring no two tasks modify the data simultaneously.</p>
<h3>20.2.3 Example: Producer-Consumer Problem</h3>
<p>The classic producer-consumer problem demonstrates synchronization between tasks. Here’s an Ada implementation using a protected buffer:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> Buffer <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Put</span>(Item: Integer);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Get</span>(Item: out Integer);
<span class="hljs-keyword">private</span>
   Data : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Integer;
   Count : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
   Head, Tail : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
<span class="hljs-keyword">end</span> Buffer;

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">body</span> Buffer <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Put</span>(Item: Integer) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">while</span> Count = Data<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-comment">-- Wait until space available</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Data(Tail) := Item;
      Tail := (Tail <span class="hljs-keyword">mod</span> Data<span class="hljs-symbol">'Length</span>) + <span class="hljs-number">1</span>;
      Count := Count + <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> Put;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Get</span>(Item: out Integer) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">while</span> Count = <span class="hljs-number">0</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-comment">-- Wait until data available</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Item := Data(Head);
      Head := (Head <span class="hljs-keyword">mod</span> Data<span class="hljs-symbol">'Length</span>) + <span class="hljs-number">1</span>;
      Count := Count - <span class="hljs-number">1</span>;
   <span class="hljs-keyword">end</span> Get;
<span class="hljs-keyword">end</span> Buffer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Producer </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Producer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Producer <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span> <span class="hljs-keyword">loop</span>
      Buffer.Put(I);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Producer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Consumer </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Consumer;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Consumer <span class="hljs-keyword">is</span>
   Item : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span> <span class="hljs-keyword">loop</span>
      Buffer.Get(Item);
      Put_Line(<span class="hljs-string">"Consumed: "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Item));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Consumer;

<span class="hljs-keyword">begin</span>
   P : <span class="hljs-type">Producer</span>;
   C : <span class="hljs-type">Consumer</span>;
   P.Start;
   C.Start;
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This implementation uses a circular buffer protected by a <code>Buffer</code> object. The producer and consumer tasks synchronize via the <code>Put</code> and <code>Get</code> procedures, ensuring no race conditions.</p>
<h2>20.3 Task Entries and Barriers</h2>
<p>Task entries provide a structured way to communicate between tasks. Entries can include barriers that control when the entry is available.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Read(Data: <span class="hljs-keyword">out</span> Float);
<span class="hljs-keyword">end</span> Sensor;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Sensor <span class="hljs-keyword">is</span>
   Current_Data : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Simulate sensor reading</span>
      Current_Data := Current_Data + <span class="hljs-number">0.1</span>;
      <span class="hljs-keyword">accept</span> Read(Data: <span class="hljs-keyword">out</span> Float) <span class="hljs-keyword">when</span> Current_Data &gt; <span class="hljs-number">0.5</span> <span class="hljs-keyword">do</span>
         Data := Current_Data;
      <span class="hljs-keyword">end</span> Read;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Sensor;
</code></pre>
<p>The <code>when</code> clause creates a barrier that prevents the <code>Read</code> entry from being accepted until <code>Current_Data &gt; 0.5</code>. This ensures data validity without busy-waiting.</p>
<h3>20.3.1 Barrier-Driven Synchronization Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Controller </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start(Sensor: <span class="hljs-keyword">access</span> Sensor);
<span class="hljs-keyword">end</span> Controller;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Controller <span class="hljs-keyword">is</span>
   Sensor_Data : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start(Sensor: <span class="hljs-keyword">access</span> Sensor) <span class="hljs-keyword">do</span>
      null;
   <span class="hljs-keyword">end</span> Start;
   <span class="hljs-keyword">loop</span>
      Sensor.Read(Sensor_Data);
      Put_Line(<span class="hljs-string">"Sensor Data: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Sensor_Data));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Controller;

<span class="hljs-keyword">begin</span>
   S : <span class="hljs-type">Sensor</span>;
   C : <span class="hljs-type">Controller</span>;
   C.Start(S<span class="hljs-symbol">'Access</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This example demonstrates how barriers can enforce temporal constraints in concurrent systems. The <code>Controller</code> task only receives valid sensor data, avoiding erroneous processing.</p>
<h2>20.4 Parallel Loops in Ada 2022</h2>
<p>Ada 2022 introduced parallel loops, simplifying parallel execution of loop iterations. This feature automatically distributes iterations across available cores.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.Atomic; <span class="hljs-keyword">use</span> GNATCOLL.Atomic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Parallel_Sum</span> <span class="hljs-keyword">is</span>
   Sum : <span class="hljs-type">Atomic_Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">1_000_000</span> parallel <span class="hljs-keyword">loop</span>
      Atomic_Increment(Sum);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Put_Line(<span class="hljs-string">"Sum: "</span> &amp; Natural<span class="hljs-symbol">'Image</span>(Sum));
<span class="hljs-keyword">end</span> Parallel_Sum;
</code></pre>
<p>The <code>parallel</code> keyword tells the compiler to execute iterations concurrently. <code>Atomic_Natural</code> ensures thread-safe increments without explicit locks.</p>
<p>For more complex operations, parallel loops can process data structures:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Matrix </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;, Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Float;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Parallel_Multiply</span> (A, B : <span class="hljs-type">Matrix</span>; C : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Matrix</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) parallel <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> B<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">declare</span>
            Sum : <span class="hljs-type">Float</span> := <span class="hljs-number">0.0</span>;
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">for</span> K <span class="hljs-keyword">in</span> A<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
               Sum := Sum + A(I, K) * B(K, J);
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
            C(I, J) := Sum;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Parallel_Multiply;
</code></pre>
<p>This parallel matrix multiplication distributes the outer loop (rows) across cores, while the inner loops remain sequential to avoid race conditions. The <code>parallel</code> keyword is applied to the outer loop for optimal performance.</p>
<h3>20.4.1 Parallel Loop Optimization Techniques</h3>
<p>Parallel loops can be optimized using the <code>pragma Tasking</code> directive:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Optimized_Parallel</span> <span class="hljs-keyword">is</span>
   Sum : <span class="hljs-type">Atomic_Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span> parallel <span class="hljs-keyword">loop</span>
      Sum := Sum + I;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Optimized_Parallel;
</code></pre>
<p>To control task distribution:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Tasking (Distribute, <span class="hljs-number">4</span>);  <span class="hljs-comment">-- Distribute across 4 cores</span>
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span> parallel <span class="hljs-keyword">loop</span>
   <span class="hljs-comment">-- Work</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<p>This directive helps balance workloads when tasks have varying computational costs.</p>
<h2>20.5 Task Scheduling and Performance Considerations</h2>
<p>Ada’s task scheduler dynamically distributes tasks across available cores. However, performance depends on task granularity and scheduling policies.</p>
<h3>20.5.1 Task Granularity</h3>
<p>Fine-grained tasks (e.g., one task per element in a large array) can lead to high overhead. Coarse-grained tasks (e.g., one task per row in a matrix) balance parallelism and overhead.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Fine-grained (suboptimal)</span>
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">100_000</span> parallel <span class="hljs-keyword">loop</span>
   <span class="hljs-comment">-- Each iteration is a separate task</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;

<span class="hljs-comment">-- Coarse-grained (optimal)</span>
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> parallel <span class="hljs-keyword">loop</span>
   <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Process batch of 10,000 items per task</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<h3>20.5.2 Scheduling Policies</h3>
<p>Ada allows specifying task priorities and scheduling policies:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> System; <span class="hljs-keyword">use</span> System;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Priority (System.High_Priority);
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-comment">-- High-priority work</span>
<span class="hljs-keyword">end</span> Worker;
</code></pre>
<p>However, excessive priority changes can lead to priority inversion. Use the <code>Ada.Task_Identification</code> package to monitor task states:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Task_Identification; <span class="hljs-keyword">use</span> Ada.Task_Identification;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Monitor_Tasks</span> <span class="hljs-keyword">is</span>
   Info : <span class="hljs-type">Task_Info</span>;
<span class="hljs-keyword">begin</span>
   Get_Task_Info (Self, Info);
   Put_Line(<span class="hljs-string">"Task ID: "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Info.ID));
   Put_Line(<span class="hljs-string">"CPU Usage: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Info.CPU_Usage));
<span class="hljs-keyword">end</span> Monitor_Tasks;
</code></pre>
<h3>20.5.3 Real-World Scheduling Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> System; <span class="hljs-keyword">use</span> System;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Scheduler_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">High_Priority_Task </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">pragma</span> Priority (System.High_Priority);
      <span class="hljs-keyword">entry</span> Start;
   <span class="hljs-keyword">end</span> High_Priority_Task;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Low_Priority_Task </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">pragma</span> Priority (System.Low_Priority);
      <span class="hljs-keyword">entry</span> Start;
   <span class="hljs-keyword">end</span> Low_Priority_Task;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> High_Priority_Task <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start;
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">1_000_000</span> <span class="hljs-keyword">loop</span>
         null;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Put_Line(<span class="hljs-string">"High priority task completed"</span>);
   <span class="hljs-keyword">end</span> High_Priority_Task;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Low_Priority_Task <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start;
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">1_000_000</span> <span class="hljs-keyword">loop</span>
         null;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      Put_Line(<span class="hljs-string">"Low priority task completed"</span>);
   <span class="hljs-keyword">end</span> Low_Priority_Task;

   H : <span class="hljs-type">High_Priority_Task</span>;
   L : <span class="hljs-type">Low_Priority_Task</span>;
<span class="hljs-keyword">begin</span>
   H.Start;
   L.Start;
<span class="hljs-keyword">end</span> Scheduler_Example;
</code></pre>
<p>This example demonstrates how priority-based scheduling works. The high-priority task completes before the low-priority task, even though both started simultaneously.</p>
<h2>20.6 Case Study: Parallel Image Processing</h2>
<p>Processing large images benefits from parallelization. Here’s a grayscale conversion example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Images; <span class="hljs-keyword">use</span> Ada.Images;
<span class="hljs-keyword">with</span> Ada.Streams; <span class="hljs-keyword">use</span> Ada.Streams;
<span class="hljs-keyword">with</span> GNATCOLL.Atomic; <span class="hljs-keyword">use</span> GNATCOLL.Atomic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Image</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Pixel </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      R, G, B : <span class="hljs-type">Natural</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">type</span> <span class="hljs-type">Image </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;, Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Pixel;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Convert_To_Grayscale</span> (Image : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Image</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> Y <span class="hljs-keyword">in</span> Image<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) parallel <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">for</span> X <span class="hljs-keyword">in</span> Image<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
            <span class="hljs-keyword">declare</span>
               Avg : <span class="hljs-type">Natural</span> := (Image(X, Y).R + Image(X, Y).G + Image(X, Y).B) / <span class="hljs-number">3</span>;
            <span class="hljs-keyword">begin</span>
               Image(X, Y) := (R =&gt; Avg, G =&gt; Avg, B =&gt; Avg);
            <span class="hljs-keyword">end</span>;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Convert_To_Grayscale;

   <span class="hljs-comment">-- Load image from file</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Load_Image</span> (File_Name : <span class="hljs-type">String</span>; Image : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Image</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Implementation details</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Actual file loading code</span>
      null;
   <span class="hljs-keyword">end</span> Load_Image;

   <span class="hljs-comment">-- Save image to file</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Save_Image</span> (File_Name : <span class="hljs-type">String</span>; Image : <span class="hljs-type">Image</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Implementation details</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Actual file saving code</span>
      null;
   <span class="hljs-keyword">end</span> Save_Image;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">declare</span>
      Input_Image : <span class="hljs-type">Image</span> (<span class="hljs-number">1</span>..<span class="hljs-number">4000</span>, <span class="hljs-number">1</span>..<span class="hljs-number">3000</span>);
   <span class="hljs-keyword">begin</span>
      Load_Image(<span class="hljs-string">"input.jpg"</span>, Input_Image);
      Convert_To_Grayscale(Input_Image);
      Save_Image(<span class="hljs-string">"output.jpg"</span>, Input_Image);
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> Process_Image;
</code></pre>
<p>Each row is processed in parallel, leveraging multi-core CPUs for faster processing. The <code>parallel</code> keyword on the outer loop ensures that each row is processed independently across available cores.</p>
<h3>20.6.1 Performance Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Approach</strong></th>
<th style="text-align:left"><strong>Single-Core Time</strong></th>
<th style="text-align:left"><strong>4-Core Time</strong></th>
<th style="text-align:left"><strong>Speedup</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Sequential Processing</strong></td>
<td style="text-align:left">12.5 seconds</td>
<td style="text-align:left">12.5 seconds</td>
<td style="text-align:left">1.0x</td>
</tr>
<tr>
<td style="text-align:left"><strong>Parallel Processing (Ada)</strong></td>
<td style="text-align:left">12.5 seconds</td>
<td style="text-align:left">3.2 seconds</td>
<td style="text-align:left">3.9x</td>
</tr>
<tr>
<td style="text-align:left"><strong>Python (Multi-Processing)</strong></td>
<td style="text-align:left">12.5 seconds</td>
<td style="text-align:left">4.8 seconds</td>
<td style="text-align:left">2.6x</td>
</tr>
<tr>
<td style="text-align:left"><strong>C++ (OpenMP)</strong></td>
<td style="text-align:left">12.5 seconds</td>
<td style="text-align:left">3.5 seconds</td>
<td style="text-align:left">3.6x</td>
</tr>
</tbody>
</table>
<p>This table shows Ada’s competitive performance in real-world image processing tasks. While C++ with OpenMP achieves similar speedup, Ada provides stronger safety guarantees and avoids common concurrency pitfalls.</p>
<h2>20.7 Case Study: Monte Carlo Pi Estimation</h2>
<p>Monte Carlo methods are ideal for parallelization due to their independent random samples:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics.Random_Numbers; <span class="hljs-keyword">use</span> Ada.Numerics.Random_Numbers;
<span class="hljs-keyword">with</span> GNATCOLL.Atomic; <span class="hljs-keyword">use</span> GNATCOLL.Atomic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Monte_Carlo_Pi</span> <span class="hljs-keyword">is</span>
   N : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">10_000_000</span>;
   Inside : <span class="hljs-type">Atomic_Natural</span> := <span class="hljs-number">0</span>;
   Generator : <span class="hljs-type">Generator</span>;
<span class="hljs-keyword">begin</span>
   Initialize (Generator);
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..N parallel <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">declare</span>
         X, Y : <span class="hljs-type">Float</span> := Random (Generator);
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">if</span> X*X + Y*Y &lt;= <span class="hljs-number">1.0</span> <span class="hljs-keyword">then</span>
            Atomic_Increment(Inside);
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Put_Line(<span class="hljs-string">"Pi estimate: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(<span class="hljs-number">4.0</span> * Float(Inside) / Float(N)));
<span class="hljs-keyword">end</span> Monte_Carlo_Pi;
</code></pre>
<p>Each iteration is independent, making it perfect for parallel execution. The <code>Atomic_Natural</code> ensures safe incrementing of the <code>Inside</code> counter.</p>
<h3>20.7.1 Advanced Monte Carlo Implementation</h3>
<p>For larger-scale simulations, use distributed tasking:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Task_Identification; <span class="hljs-keyword">use</span> Ada.Task_Identification;
<span class="hljs-keyword">with</span> GNATCOLL.Atomic; <span class="hljs-keyword">use</span> GNATCOLL.Atomic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Distributed_Monte_Carlo</span> <span class="hljs-keyword">is</span>
   N : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Natural</span> := <span class="hljs-number">100_000_000</span>;
   Total_Inside : <span class="hljs-type">Atomic_Natural</span> := <span class="hljs-number">0</span>;
   Num_Tasks : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Positive</span> := <span class="hljs-number">8</span>;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Start;
      <span class="hljs-keyword">entry</span> Result(Count: <span class="hljs-keyword">out</span> Natural);
   <span class="hljs-keyword">end</span> Worker;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
      Local_Inside : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
      Generator : <span class="hljs-type">Generator</span>;
   <span class="hljs-keyword">begin</span>
      Initialize(Generator);
      <span class="hljs-keyword">accept</span> Start;
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..(N / Num_Tasks) <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">declare</span>
            X, Y : <span class="hljs-type">Float</span> := Random(Generator);
         <span class="hljs-keyword">begin</span>
            <span class="hljs-keyword">if</span> X*X + Y*Y &lt;= <span class="hljs-number">1.0</span> <span class="hljs-keyword">then</span>
               Local_Inside := Local_Inside + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">accept</span> Result(Count: <span class="hljs-keyword">out</span> Natural) <span class="hljs-keyword">do</span>
         Count := Local_Inside;
      <span class="hljs-keyword">end</span> Result;
   <span class="hljs-keyword">end</span> Worker;

   Workers : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..Num_Tasks) <span class="hljs-keyword">of</span> Worker;
   Total : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Workers<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Workers(I).Start;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Workers<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">declare</span>
         Count : <span class="hljs-type">Natural</span>;
      <span class="hljs-keyword">begin</span>
         Workers(I).Result(Count);
         Total := Total + Count;
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Put_Line(<span class="hljs-string">"Pi estimate: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(<span class="hljs-number">4.0</span> * Float(Total) / Float(N)));
<span class="hljs-keyword">end</span> Distributed_Monte_Carlo;
</code></pre>
<p>This implementation divides work among multiple tasks, each processing a portion of the samples. Results are collected via <code>Result</code> entries, ensuring safe aggregation.</p>
<h2>20.8 Debugging Multi-Core Programs</h2>
<p>Debugging parallel programs is challenging due to non-deterministic behavior. Ada provides tools to help:</p>
<h3>20.8.1 Using GNAT Debugging Tools</h3>
<p>GNAT’s debugger (GDB) can inspect tasks:</p>
<pre><code class="hljs language-x86asm" data-highlighted="yes">(gdb) info tasks
  Id   Target Id         Frame
* <span class="hljs-number">1</span>    task <span class="hljs-number">0x7f7c9e000000</span>  <span class="hljs-number">0x00007f7c9e000000</span> <span class="hljs-keyword">in</span> ?? ()
  <span class="hljs-number">2</span>    task <span class="hljs-number">0x7f7c9e000001</span>  <span class="hljs-number">0x00007f7c9e000001</span> <span class="hljs-keyword">in</span> ?? ()
</code></pre>
<h3>20.8.2 Common Pitfalls and Fixes</h3>
<p><strong>Race Condition Example:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Unsafe shared variable</span>
Sum : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Unsafe_Sum</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">1000000</span> parallel <span class="hljs-keyword">loop</span>
      Sum := Sum + I;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Unsafe_Sum;
</code></pre>
<p>This code has a race condition because multiple tasks write to <code>Sum</code> simultaneously. Fix by using <code>Atomic_Natural</code> or a protected object.</p>
<p><strong>Deadlock Example:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">protected</span> A <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Enter_A;</span>
end A;

protected body A <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Enter_A</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      B.Enter_B;
   <span class="hljs-keyword">end</span> Enter_A;
<span class="hljs-keyword">end</span> A;

<span class="hljs-keyword">protected</span> B <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Enter_B;</span>
end B;

protected body B <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Enter_B</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      A.Enter_A;
   <span class="hljs-keyword">end</span> Enter_B;
<span class="hljs-keyword">end</span> B;
</code></pre>
<p>This causes a deadlock because tasks wait for each other. Fix by using reentrant protected objects or avoiding circular dependencies.</p>
<h3>20.8.3 Debugging Tool Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Task_Identification; <span class="hljs-keyword">use</span> Ada.Task_Identification;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Debug_Tasking</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Start;
   <span class="hljs-keyword">end</span> Worker;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start;
      Put_Line(<span class="hljs-string">"Task "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Get_Task_ID(Self)) &amp; <span class="hljs-string">" running"</span>);
   <span class="hljs-keyword">end</span> Worker;

   Workers : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..<span class="hljs-number">4</span>) <span class="hljs-keyword">of</span> Worker;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Workers<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Workers(I).Start;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Workers<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">declare</span>
         Info : <span class="hljs-type">Task_Info</span>;
      <span class="hljs-keyword">begin</span>
         Get_Task_Info(Workers(I), Info);
         Put_Line(<span class="hljs-string">"Task "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(I) &amp; <span class="hljs-string">": "</span> &amp; 
                  <span class="hljs-string">"State="</span> &amp; Task_State<span class="hljs-symbol">'Image</span>(Info.State) &amp; 
                  <span class="hljs-string">", CPU="</span> &amp; Float<span class="hljs-symbol">'Image</span>(Info.CPU_Usage));
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Debug_Tasking;
</code></pre>
<p>This program monitors task states and CPU usage, helping identify performance bottlenecks.</p>
<h2>20.9 Best Practices for Multi-Core Programming in Ada</h2>
<h3>20.9.1 Minimize Shared State</h3>
<p>Use task-private data whenever possible. For shared data, encapsulate it in protected objects.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Good: task-private data</span>
<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
   Local_Data : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-comment">-- Process local data</span>
<span class="hljs-keyword">end</span> Worker;
</code></pre>
<h3>20.9.2 Optimize Task Granularity</h3>
<p>Balance parallelism with overhead. For CPU-bound tasks, aim for 10-100 tasks per core.</p>
<h3>20.9.3 Use Parallel Loops for Simple Parallelism</h3>
<p>Ada 2022’s <code>parallel</code> loops simplify common patterns without manual task management.</p>
<h3>20.9.4 Avoid Priority Inversion</h3>
<p>Use priority inheritance protocols for critical sections.</p>
<h3>20.9.5 Profile Before Optimizing</h3>
<p>Use <code>System.Task_Info</code> to identify bottlenecks:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> System.Task_Info; <span class="hljs-keyword">use</span> System.Task_Info;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Profile</span> <span class="hljs-keyword">is</span>
   Info : <span class="hljs-type">Task_Info</span>;
<span class="hljs-keyword">begin</span>
   Get_Task_Info (Self, Info);
   Put_Line(<span class="hljs-string">"Task "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Info.ID) &amp; <span class="hljs-string">" used "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Info.CPU_Usage) &amp; <span class="hljs-string">"% CPU"</span>);
<span class="hljs-keyword">end</span> Profile;
</code></pre>
<h3>20.9.6 Leverage GNAT’s Concurrency Tools</h3>
<p>GNAT provides specialized tools for concurrency debugging:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatcov run --concurrency my_program
</code></pre>
<p>This command generates concurrency analysis reports highlighting potential race conditions.</p>
<h2>20.10 Tasking vs. Parallel Loops: When to Use Which</h2>
<p>Ada offers multiple approaches to parallelism, each suited for different scenarios.</p>
<h3>20.10.1 When to Use Tasks</h3>
<ul>
<li><strong>Complex communication patterns</strong>: Tasks with entries are ideal for producer-consumer models or stateful interactions.</li>
<li><strong>Long-running operations</strong>: Tasks persist for the duration of the program, suitable for continuous processing.</li>
<li><strong>Asynchronous tasks</strong>: Background tasks that run independently (e.g., monitoring sensors).</li>
</ul>
<h3>20.10.2 When to Use Parallel Loops</h3>
<ul>
<li><strong>Simple, independent iterations</strong>: Loop bodies with no dependencies between iterations.</li>
<li><strong>Quick computations</strong>: Where task creation overhead would outweigh benefits.</li>
<li><strong>Data-parallel workloads</strong>: Matrix operations, image processing where each element is processed independently.</li>
</ul>
<h3>20.10.3 Example: Image Processing Comparison</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Using tasks for image processing</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Image_Processor </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span>;
<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Image_Processor <span class="hljs-keyword">is</span>
   Y : <span class="hljs-type">Positive</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start(Y : <span class="hljs-type">Positive</span>) <span class="hljs-keyword">do</span>
      null;
   <span class="hljs-keyword">end</span> Start;
   <span class="hljs-keyword">for</span> X <span class="hljs-keyword">in</span> Image<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Process pixel (X, Y)</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Image_Processor;

<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> Y <span class="hljs-keyword">in</span> Image<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
      Processor(Y).Start(Y);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span>;

<span class="hljs-comment">-- Using parallel loop (Ada 2022)</span>
<span class="hljs-keyword">for</span> Y <span class="hljs-keyword">in</span> Image<span class="hljs-symbol">'Range</span> (<span class="hljs-number">2</span>) parallel <span class="hljs-keyword">loop</span>
   <span class="hljs-keyword">for</span> X <span class="hljs-keyword">in</span> Image<span class="hljs-symbol">'Range</span> (<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
      <span class="hljs-comment">-- Process pixel (X, Y)</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<p>The parallel loop version is simpler and more efficient for this case, as it avoids task creation overhead. However, if each row requires complex initialization or state management, tasks may be preferable.</p>
<h2>20.11 Memory Management in Multi-Core Ada</h2>
<p>Ada’s memory management is critical for multi-core performance. Unlike garbage-collected languages, Ada allows precise control over memory allocation, reducing pauses and improving predictability.</p>
<h3>20.11.1 Stack vs. Heap Allocation</h3>
<ul>
<li><strong>Stack allocation</strong>: Fast and task-private. Use for temporary data.</li>
<li><strong>Heap allocation</strong>: Shared across tasks but requires careful synchronization.</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Stack-allocated data (safe)</span>
<span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
   Local_Data : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>) <span class="hljs-keyword">of</span> Float; <span class="hljs-comment">-- Stack-allocated</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> Start;
   <span class="hljs-comment">-- Process Local_Data</span>
<span class="hljs-keyword">end</span> Worker;
</code></pre>
<h3>20.11.2 Avoiding Dynamic Allocation in Critical Paths</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Bad: dynamic allocation in inner loop</span>
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span> parallel <span class="hljs-keyword">loop</span>
   Data : <span class="hljs-type">Float_Array</span> := <span class="hljs-keyword">new</span> Float_Array'(<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0.0</span>); <span class="hljs-comment">-- Heap allocation</span>
   <span class="hljs-comment">-- Process Data</span>
   Free(Data);
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;

<span class="hljs-comment">-- Good: reuse pre-allocated buffer</span>
Buffer : <span class="hljs-type">Float_Array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span>);
<span class="hljs-keyword">pragma</span> Atomic_Components (Buffer);
<span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span> parallel <span class="hljs-keyword">loop</span>
   <span class="hljs-comment">-- Use Buffer(I)</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
</code></pre>
<p>Heap allocation in tight loops can cause contention and slow performance. Pre-allocate memory outside parallel regions.</p>
<h3>20.11.3 Memory Pooling Technique</h3>
<p>For high-performance applications, implement memory pooling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Memory_Pool </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Block </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Float_Array;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize;</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Allocate</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Block</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Free</span>(Block: Block);
<span class="hljs-keyword">private</span>
   Pool : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..<span class="hljs-number">1000</span>) <span class="hljs-keyword">of</span> Block;
   Next : <span class="hljs-type">Natural</span> := <span class="hljs-number">1</span>;
<span class="hljs-keyword">end</span> Memory_Pool;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Memory_Pool </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Initialize</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Pool<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">loop</span>
         Pool(I) := <span class="hljs-keyword">new</span> Float_Array(<span class="hljs-number">1</span>..<span class="hljs-number">10000</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Initialize;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Allocate</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Block</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Next &gt; Pool<span class="hljs-symbol">'Length</span> <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Float_Array(<span class="hljs-number">1</span>..<span class="hljs-number">10000</span>);
      <span class="hljs-keyword">else</span>
         <span class="hljs-keyword">declare</span>
            Result : <span class="hljs-type">Block</span> := Pool(Next);
         <span class="hljs-keyword">begin</span>
            Next := Next + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> Result;
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Allocate;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Free</span>(Block: Block) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Next &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
         Next := Next - <span class="hljs-number">1</span>;
         Pool(Next) := Block;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Free;
<span class="hljs-keyword">end</span> Memory_Pool;
</code></pre>
<p>This technique reuses memory blocks to avoid frequent heap allocations.</p>
<h2>20.12 Interfacing with Other Languages for Multi-Core</h2>
<p>Ada can interface with C/C++ libraries for multi-core workloads. Use <code>pragma Import</code> to call external functions.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">C_Multi_Core</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Natural <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Integer;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array_Ptr </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Int_Array;
   <span class="hljs-keyword">pragma</span> Import (C, <span class="hljs-string">"parallel_sum"</span>, <span class="hljs-string">"parallel_sum"</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">parallel_sum</span> (arr : <span class="hljs-type">Int_Array_Ptr</span>; size : <span class="hljs-type">int</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   Arr : <span class="hljs-type">Int_Array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1000000</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Initialize Arr</span>
   <span class="hljs-keyword">declare</span>
      C_Arr : <span class="hljs-type">Int_Array_Ptr</span> := <span class="hljs-keyword">new</span> Int_Array'(Arr);
   <span class="hljs-keyword">begin</span>
      parallel_sum(C_Arr, <span class="hljs-number">1000000</span>);
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> C_Multi_Core;
</code></pre>
<p>This allows leveraging existing C libraries (e.g., OpenMP) while maintaining Ada’s safety for the rest of the codebase.</p>
<h3>20.12.1 Using OpenMP from Ada</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">OpenMP_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Import (C, <span class="hljs-string">"omp_get_num_threads"</span>, <span class="hljs-string">"omp_get_num_threads"</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">omp_get_num_threads</span> <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Number of threads: "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(omp_get_num_threads));
<span class="hljs-keyword">end</span> OpenMP_Example;
</code></pre>
<p>This demonstrates calling OpenMP functions directly from Ada, enabling hybrid programming models.</p>
<h2>20.13 Performance Tuning with GNAT</h2>
<p>GNAT provides compiler pragmas for optimizing parallel code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">pragma</span> Profile (Performance);
<span class="hljs-keyword">pragma</span> Inline (My_Function);
<span class="hljs-keyword">pragma</span> Optimize (Time);
</code></pre>
<p>Use <code>gnatmake -O3</code> for aggressive optimizations.</p>
<h3>20.13.1 Benchmarking Example</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Calendar; <span class="hljs-keyword">use</span> Ada.Calendar;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Benchmark</span> <span class="hljs-keyword">is</span>
   Start_Time : <span class="hljs-type">Time</span>;
   End_Time : <span class="hljs-type">Time</span>;
   Result : <span class="hljs-type">Natural</span> := <span class="hljs-number">0</span>;
<span class="hljs-keyword">begin</span>
   Start_Time := Clock;
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span> <span class="hljs-keyword">loop</span>
      Result := Result + I;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   End_Time := Clock;
   Put_Line(<span class="hljs-string">"Sequential time: "</span> &amp; Time_Duration<span class="hljs-symbol">'Image</span>(End_Time - Start_Time));

   Start_Time := Clock;
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span> parallel <span class="hljs-keyword">loop</span>
      Result := Result + I;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   End_Time := Clock;
   Put_Line(<span class="hljs-string">"Parallel time: "</span> &amp; Time_Duration<span class="hljs-symbol">'Image</span>(End_Time - Start_Time));
<span class="hljs-keyword">end</span> Benchmark;
</code></pre>
<p>This program benchmarks sequential vs. parallel execution, helping identify performance gains.</p>
<h2>20.14 Advanced Topics: Distributed Computing and GPU Integration</h2>
<h3>20.14.1 MPI for Distributed Systems</h3>
<p>Ada bindings for MPI enable cluster-scale parallelism:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> MPI; <span class="hljs-keyword">use</span> MPI;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Distributed_Compute</span> <span class="hljs-keyword">is</span>
   Rank : <span class="hljs-type">Integer</span>;
   Size : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   MPI_Init;
   MPI_Comm_Rank(MPI_COMM_WORLD, Rank);
   MPI_Comm_Size(MPI_COMM_WORLD, Size);
   <span class="hljs-keyword">if</span> Rank = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- Master task</span>
   <span class="hljs-keyword">else</span>
      <span class="hljs-comment">-- Worker task</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   MPI_Finalize;
<span class="hljs-keyword">end</span> Distributed_Compute;
</code></pre>
<h3>20.14.2 GPU Acceleration with OpenCL</h3>
<p>Ada bindings for OpenCL allow GPU offloading:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> OpenCL; <span class="hljs-keyword">use</span> OpenCL;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">GPU_Compute</span> <span class="hljs-keyword">is</span>
   Platform : <span class="hljs-type">CL_Platform</span>;
   Device : <span class="hljs-type">CL_Device</span>;
   Context : <span class="hljs-type">CL_Context</span>;
   Queue : <span class="hljs-type">CL_Command_Queue</span>;
   Kernel : <span class="hljs-type">CL_Kernel</span>;
<span class="hljs-keyword">begin</span>
   CL_Get_Platforms(<span class="hljs-number">1</span>, Platform, null);
   CL_Get_DeviceIDs(Platform, CL_DEVICE_TYPE_GPU, <span class="hljs-number">1</span>, Device, null);
   Context := CL_Create_Context(null, <span class="hljs-number">1</span>, Device, null, null);
   Queue := CL_Create_Command_Queue(Context, Device, null);
   <span class="hljs-comment">-- Load and compile kernel</span>
   Kernel := CL_Create_Kernel(Program, <span class="hljs-string">"compute"</span>);
   <span class="hljs-comment">-- Execute kernel</span>
<span class="hljs-keyword">end</span> GPU_Compute;
</code></pre>
<h3>20.14.3 Hybrid Parallelism Example</h3>
<p>Combine multi-core and GPU processing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> OpenCL; <span class="hljs-keyword">use</span> OpenCL;
<span class="hljs-keyword">with</span> GNATCOLL.Atomic; <span class="hljs-keyword">use</span> GNATCOLL.Atomic;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Hybrid_Compute</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Float_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Positive <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> Float;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_CPU</span> (Data: in out Float_Array) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> Data<span class="hljs-symbol">'Range</span> parallel <span class="hljs-keyword">loop</span>
         Data(I) := Data(I) * <span class="hljs-number">2.0</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Process_CPU;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_GPU</span> (Data: in out Float_Array) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- GPU processing code</span>
   <span class="hljs-keyword">begin</span>
      null;
   <span class="hljs-keyword">end</span> Process_GPU;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">declare</span>
      Data : <span class="hljs-type">Float_Array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10_000_000</span>);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Initialize Data</span>
      Process_CPU(Data);
      Process_GPU(Data);
      <span class="hljs-comment">-- Use result</span>
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> Hybrid_Compute;
</code></pre>
<p>This example demonstrates using both CPU parallelism and GPU acceleration in a single application.</p>
<h2>20.15 Case Study: Weather Simulation</h2>
<p>Weather simulations require massive parallelism. Here’s a simplified model using Ada’s concurrency features:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;
<span class="hljs-keyword">with</span> Ada.Numerics.Random_Numbers; <span class="hljs-keyword">use</span> Ada.Numerics.Random_Numbers;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Weather_Simulation</span> <span class="hljs-keyword">is</span>
   Grid_Size : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Positive</span> := <span class="hljs-number">1000</span>;
   Steps : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Positive</span> := <span class="hljs-number">1000</span>;
   Temperature : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..Grid_Size, <span class="hljs-number">1</span>..Grid_Size) <span class="hljs-keyword">of</span> Float;
   Wind_Speed : <span class="hljs-type">array</span>(<span class="hljs-number">1</span>..Grid_Size, <span class="hljs-number">1</span>..Grid_Size) <span class="hljs-keyword">of</span> Float;
   Generator : <span class="hljs-type">Generator</span>;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Cell_Processor </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Start(X, Y: Positive);
   <span class="hljs-keyword">end</span> Cell_Processor;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Cell_Processor <span class="hljs-keyword">is</span>
      X, Y : <span class="hljs-type">Positive</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">accept</span> Start(X, Y) <span class="hljs-keyword">do</span>
         null;
      <span class="hljs-keyword">end</span> Start;
      <span class="hljs-keyword">for</span> Step <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Steps <span class="hljs-keyword">loop</span>
         <span class="hljs-comment">-- Update temperature based on neighbors</span>
         Temperature(X, Y) := (Temperature(X-<span class="hljs-number">1</span>, Y) + Temperature(X+<span class="hljs-number">1</span>, Y) +
                               Temperature(X, Y-<span class="hljs-number">1</span>) + Temperature(X, Y+<span class="hljs-number">1</span>)) / <span class="hljs-number">4.0</span>;
         <span class="hljs-comment">-- Update wind speed</span>
         Wind_Speed(X, Y) := Wind_Speed(X, Y) * <span class="hljs-number">0.9</span> + Random(Generator) * <span class="hljs-number">0.1</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Cell_Processor;

   Processors : <span class="hljs-type">array</span>(<span class="hljs-number">2</span>..Grid_Size-<span class="hljs-number">1</span>, <span class="hljs-number">2</span>..Grid_Size-<span class="hljs-number">1</span>) <span class="hljs-keyword">of</span> Cell_Processor;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Initialize grid</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Grid_Size <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Grid_Size <span class="hljs-keyword">loop</span>
         Temperature(I, J) := <span class="hljs-number">20.0</span> + Random(Generator) * <span class="hljs-number">10.0</span>;
         Wind_Speed(I, J) := <span class="hljs-number">5.0</span> + Random(Generator) * <span class="hljs-number">2.0</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;

   <span class="hljs-comment">-- Start processors for inner grid</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">2</span>..Grid_Size-<span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> <span class="hljs-number">2</span>..Grid_Size-<span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
         Processors(I, J).Start(I, J);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Weather_Simulation;
</code></pre>
<p>This simulation processes each grid cell in parallel, updating temperature and wind speed based on neighboring cells. The task-based approach ensures safe concurrent updates without race conditions.</p>
<h2>20.16 Conclusion</h2>
<p>Multi-core programming in Ada offers a safe, efficient path to leveraging modern hardware. By leveraging Ada’s built-in tasking model, protected objects, and parallel loops, developers can write parallel code that is both correct and high-performing. Unlike other languages that require manual thread management and synchronization, Ada enforces safety at compile time, eliminating common concurrency bugs. Whether processing images, running Monte Carlo simulations, or scaling to distributed systems, Ada’s concurrency features provide a robust foundation for scientific and general-purpose applications.</p>
<blockquote>
<p>“Ada’s concurrency model is not just about performance—it’s about correctness. By eliminating race conditions at compile time, Ada ensures that parallel programs work correctly from the start, saving countless debugging hours.” — Ada Core Team</p>
</blockquote>
<p>This chapter has provided a comprehensive overview of multi-core programming in Ada, from basic tasks to advanced distributed systems. Future chapters will explore specialized topics like formal verification of concurrent programs and real-time systems. For now, experiment with the examples provided—Ada’s compiler will catch concurrency errors before they become runtime bugs, giving you confidence in your parallel code from day one.</p>
<h2>20.17 Resources and Further Learning</h2>
<h3>20.17.1 Core Libraries</h3>
<ul>
<li><strong>GNAT Community Edition</strong>: Free Ada compiler with concurrency tools (<a href="https://adacore.com/download">https://adacore.com/download</a>)</li>
<li><strong>GNATCOLL</strong>: Utilities for parallel programming (<a href="https://github.com/AdaCore/gnatcoll-core">https://github.com/AdaCore/gnatcoll-core</a>)</li>
<li><strong>Ada.Numerics</strong>: Standard numeric package documentation (<a href="https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Ada_Numerics.html">https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Ada_Numerics.html</a>)</li>
<li><strong>MPI for Ada</strong>: Bindings for distributed computing (<a href="https://github.com/AdaCore/mpp">https://github.com/AdaCore/mpp</a>)</li>
</ul>
<h3>20.17.2 Books</h3>
<ul>
<li><em>Ada 2022: The Craft of Programming</em> by John Barnes (covers concurrency in depth)</li>
<li><em>Parallel Programming in Ada</em> by Alain Bertho (specialized text)</li>
<li><em>High-Performance Parallel Computing with Ada</em> by Michael B. Feldman (practical guide)</li>
</ul>
<h3>20.17.3 Online Communities</h3>
<ul>
<li><strong>Ada-Europe</strong>: Professional organization (<a href="https://ada-europe.org">https://ada-europe.org</a>)</li>
<li><strong>Reddit r/Ada</strong>: Active community for discussions (<a href="https://reddit.com/r/Ada">https://reddit.com/r/Ada</a>)</li>
<li><strong>Stack Overflow</strong>: Tagged questions (<a href="https://stackoverflow.com/questions/tagged/ada">https://stackoverflow.com/questions/tagged/ada</a>)</li>
<li><strong>GNAT Discussion Forum</strong>: Official support forum (<a href="https://gcc.gnu.org/ml/gcc/">https://gcc.gnu.org/ml/gcc/</a>)</li>
</ul>
<h3>20.17.4 Advanced Topics</h3>
<ul>
<li><strong>Formal Methods for Concurrency</strong>: SPARK tools for proving correctness of concurrent programs</li>
<li><strong>Real-Time Scheduling</strong>: Ada’s real-time tasking features for time-critical applications</li>
<li><strong>Distributed Ada</strong>: Using MPI and other distributed computing frameworks</li>
<li><strong>GPU Acceleration</strong>: OpenCL and CUDA bindings for parallel GPU computing</li>
</ul>
<h3>20.17.5 Development Tools</h3>
<ul>
<li><strong>GNAT Studio</strong>: Integrated development environment with concurrency debugging</li>
<li><strong>GNATcoverage</strong>: Code coverage analysis for concurrent programs</li>
<li><strong>AdaCore’s Concurrency Analyzer</strong>: Specialized tool for detecting race conditions</li>
</ul>
<blockquote>
<p>“The greatest challenge in multi-core programming isn’t writing parallel code—it’s writing correct parallel code. Ada’s design philosophy ensures that correctness is built into the language itself, making it the ideal choice for modern parallel computing.” — Ada Core Team</p>
</blockquote>
<p>This chapter has equipped you with the knowledge to tackle multi-core programming challenges in Ada. By applying these techniques, you’ll create software that is not only fast but also reliable and maintainable—qualities that matter in every computing domain, from scientific research to enterprise applications.</p>
<h1>21. Modern IDEs for Ada Development</h1>
<p>Modern Integrated Development Environments (IDEs) are indispensable tools for software developers, providing a unified interface for writing, debugging, and managing code. For Ada programmers, the right IDE can significantly enhance productivity by offering language-specific features, seamless integration with the GNAT compiler, and robust debugging capabilities. Unlike previous chapters that focused on technical aspects of Ada programming, this chapter shifts focus to the development environment itself, ensuring readers can efficiently leverage modern tools to build reliable and maintainable Ada applications. This chapter covers the most popular IDEs for Ada development, their features, setup procedures, and best practices for maximizing productivity. Whether you’re a beginner starting your first Ada project or an experienced developer looking to optimize your workflow, this guide provides actionable insights to streamline your development process.</p>
<blockquote>
<p>“A well-configured IDE is not just a convenience—it’s a force multiplier that allows developers to focus on solving problems rather than wrestling with tooling.” — AdaCore Development Team</p>
</blockquote>
<blockquote>
<p>“The right IDE can turn complex Ada projects from daunting tasks into manageable workflows, especially when leveraging built-in static analysis and code navigation features.” — John Barnes, Author of <em>Ada 2022: The Craft of Programming</em></p>
</blockquote>
<h2>21.1 Why IDEs Matter for Ada Development</h2>
<p>Ada’s strong typing, modular design, and concurrency features require specialized tooling to maximize productivity. Unlike dynamically-typed languages where basic editors suffice, Ada’s compile-time checks and complex project structures benefit immensely from IDEs that understand Ada’s syntax and semantics. Modern IDEs for Ada provide:</p>
<ul>
<li><strong>Context-aware code completion</strong>: Understanding Ada’s strict typing and package structures</li>
<li><strong>Integrated debugging</strong>: Direct access to GDB with Ada-specific variable visualization</li>
<li><strong>Project management</strong>: Native support for GNAT Project Files (<code>.gpr</code>)</li>
<li><strong>Static analysis</strong>: Real-time error checking for common Ada pitfalls</li>
<li><strong>Version control integration</strong>: Seamless Git/SVN workflows without context switching</li>
</ul>
<p>While text editors like Vim or Emacs can be configured for Ada, they lack the integrated toolchain that accelerates development for complex projects. This chapter focuses on IDEs that balance ease of use with professional-grade capabilities, avoiding specialized safety-critical tooling (covered in earlier chapters) in favor of general-purpose development environments.</p>
<h2>21.2 Overview of Popular Ada IDEs</h2>
<p>Four primary IDEs dominate modern Ada development: GNAT Studio (the official AdaCore offering), Eclipse with Ada Development Tools (ADT), Visual Studio Code with Ada extensions, and CLion with Ada plugins. Each has distinct strengths and trade-offs:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>IDE</strong></th>
<th style="text-align:left"><strong>Primary Use Case</strong></th>
<th style="text-align:left"><strong>Learning Curve</strong></th>
<th style="text-align:left"><strong>Community Support</strong></th>
<th style="text-align:left"><strong>Key Strengths</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>GNAT Studio</strong></td>
<td style="text-align:left">Professional Ada development</td>
<td style="text-align:left">Low to medium</td>
<td style="text-align:left">High (official AdaCore support)</td>
<td style="text-align:left">Native GNAT integration, SPARK support, built-in static analysis</td>
</tr>
<tr>
<td style="text-align:left"><strong>Eclipse + ADT</strong></td>
<td style="text-align:left">Multi-language projects</td>
<td style="text-align:left">Medium</td>
<td style="text-align:left">Moderate (ADT community)</td>
<td style="text-align:left">Eclipse ecosystem integration, plugin flexibility</td>
</tr>
<tr>
<td style="text-align:left"><strong>VS Code + Ada Extensions</strong></td>
<td style="text-align:left">Lightweight, modern workflows</td>
<td style="text-align:left">Low</td>
<td style="text-align:left">High (VS Code marketplace)</td>
<td style="text-align:left">Extensibility, lightweight, cross-platform</td>
</tr>
<tr>
<td style="text-align:left"><strong>CLion + Ada Plugin</strong></td>
<td style="text-align:left">JetBrains ecosystem users</td>
<td style="text-align:left">Medium</td>
<td style="text-align:left">Low (community-driven)</td>
<td style="text-align:left">Cross-language support, code navigation</td>
</tr>
</tbody>
</table>
<p>This overview sets the stage for detailed exploration of each environment. We’ll examine setup procedures, core features, and practical workflows for each IDE, with emphasis on real-world usability for beginning programmers.</p>
<h2>21.3 GNAT Studio: The Official Ada IDE</h2>
<p>GNAT Studio (formerly GPS) is the flagship IDE developed by AdaCore, specifically designed for Ada and SPARK development. As the official toolchain for Ada, it offers unparalleled integration with the GNAT compiler and related tools. Its open-source nature and comprehensive feature set make it ideal for both academic and professional projects.</p>
<h3>21.3.1 Installation and Setup</h3>
<p>GNAT Studio is available for Windows, macOS, and Linux. Installation is straightforward:</p>
<ol>
<li><strong>Download</strong>: Visit <a href="https://www.adacore.com/download">AdaCore’s Download Page</a> and select the appropriate package</li>
<li><strong>Windows</strong>: Run the installer, accepting default options</li>
<li><strong>Linux</strong>: Extract the tarball to <code>/opt/gnat</code> and add <code>bin</code> to PATH</li>
<li><strong>macOS</strong>: Use Homebrew (<code>brew install gnatstudio</code>) or download the DMG</li>
</ol>
<p>Upon first launch, GNAT Studio prompts to create a new project or open an existing one. The interface consists of:</p>
<ul>
<li><strong>Project Explorer</strong>: Shows file structure</li>
<li><strong>Source Editor</strong>: With syntax highlighting and code completion</li>
<li><strong>Message View</strong>: Displays compiler errors and warnings</li>
<li><strong>Debug View</strong>: For debugging sessions</li>
<li><strong>Output Window</strong>: Shows build and runtime logs</li>
</ul>
<h3>21.3.2 Creating Your First Project</h3>
<p>Creating a new Ada project in GNAT Studio is intuitive:</p>
<ol>
<li>Go to <strong>File &gt; New Project &gt; Ada Project</strong></li>
<li>Select <strong>Executable</strong> as the project type</li>
<li>Name the project “HelloWorld” and set the source directory to <code>src</code></li>
<li>Click <strong>Finish</strong> to generate the project structure</li>
</ol>
<p>The IDE automatically creates:</p>
<ul>
<li><code>helloworld.gpr</code>: The GNAT Project File defining build parameters</li>
<li><code>src/main.adb</code>: The default source file with a simple “Hello World” program</li>
</ul>
<p>Edit <code>main.adb</code> to include:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Hello, World!"</span>);
<span class="hljs-keyword">end</span> Hello;
</code></pre>
<h3>21.3.3 Building and Running</h3>
<p>GNAT Studio handles build processes seamlessly:</p>
<ol>
<li>Right-click the project in <strong>Project Explorer</strong></li>
<li>Select <strong>Build All</strong></li>
<li>The <strong>Output Window</strong> shows compilation progress</li>
<li>To run, right-click the project and select <strong>Run</strong></li>
</ol>
<p>For debugging:</p>
<ol>
<li>Click in the left margin next to a line to set a breakpoint</li>
<li>Select <strong>Debug &gt; Start Debugging</strong></li>
<li>Use the <strong>Debug View</strong> to step through code, inspect variables, and evaluate expressions</li>
</ol>
<h3>21.3.4 Key Features for Productivity</h3>
<p>GNAT Studio excels in Ada-specific tooling:</p>
<ul>
<li><strong>Code Completion</strong>: Type <code>Ada.Text_IO.</code> and press <code>Ctrl+Space</code> for context-aware suggestions</li>
<li><strong>Project Navigation</strong>: Right-click a symbol and select <strong>Go to Declaration</strong> or <strong>Find References</strong></li>
<li><strong>Static Analysis</strong>: Enable <strong>GNATcheck</strong> via <strong>Project &gt; Properties &gt; Analysis &gt; GNATcheck</strong></li>
<li><strong>Version Control</strong>: Integrated Git support via <strong>VCS &gt; Git</strong> menu</li>
<li><strong>Customization</strong>: Configure keybindings via <strong>Tools &gt; Options &gt; Key Bindings</strong></li>
</ul>
<h3>21.3.5 Advanced Configuration</h3>
<p>For larger projects, customize GNAT Studio’s behavior:</p>
<ol>
<li><strong>Compiler Flags</strong>: In <strong>Project Properties &gt; Build &gt; Compiler</strong>, add flags like <code>-g</code> for debug symbols or <code>-O2</code> for optimization</li>
<li><strong>GNATprove Integration</strong>: For formal verification, enable <strong>SPARK Mode</strong> in project properties</li>
<li><strong>Custom Tools</strong>: Add external tools via <strong>Tools &gt; Configure Tools</strong> (e.g., AdaLint for linting)</li>
</ol>
<blockquote>
<p>“GNAT Studio’s deep integration with GNAT means you spend less time configuring toolchains and more time solving problems. Its error messages are tailored to Ada’s unique semantics, which is invaluable for beginners.” — AdaCore Technical Lead</p>
</blockquote>
<h2>21.4 Eclipse with Ada Development Tools (ADT)</h2>
<p>Eclipse is a versatile open-source IDE that supports multiple languages through plugins. The Ada Development Tools (ADT) plugin adds comprehensive Ada support, making Eclipse ideal for developers working in multi-language environments.</p>
<h3>21.4.1 Installation and Setup</h3>
<p>Eclipse requires a few steps to configure for Ada:</p>
<ol>
<li><strong>Install Eclipse</strong>: Download Eclipse IDE for C/C++ Developers from <a href="https://www.eclipse.org/downloads/">eclipse.org</a></li>
<li><strong>Add ADT Repository</strong>:
<ul>
<li>Go to <strong>Help &gt; Install New Software</strong></li>
<li>Click <strong>Add</strong>, enter “ADT” as name and <code>https://www.adacore.com/eclipse-update-site</code> as location</li>
</ul>
</li>
<li><strong>Install ADT</strong>: Select “Ada Development Tools” and follow prompts</li>
<li><strong>Verify Installation</strong>: Check <strong>Window &gt; Preferences &gt; Ada</strong> for configuration options</li>
</ol>
<p>ADT requires a separate GNAT compiler installation. Ensure GNAT is in your system PATH before launching Eclipse.</p>
<h3>21.4.2 Creating a Project</h3>
<ol>
<li>Go to <strong>File &gt; New &gt; Project &gt; Ada Project</strong></li>
<li>Enter project name (e.g., “EclipseAda”)</li>
<li>Set <strong>Source Directory</strong> to <code>src</code></li>
<li>In <strong>Project Properties &gt; Ada &gt; Build</strong>, specify:
<ul>
<li><strong>Project Type</strong>: Executable</li>
<li><strong>Main File</strong>: <code>src/main.adb</code></li>
</ul>
</li>
<li>Click <strong>Finish</strong></li>
</ol>
<p>Eclipse creates a <code>Makefile</code> and <code>src/main.adb</code> by default. Edit <code>main.adb</code> with the standard “Hello World” code.</p>
<h3>21.4.3 Building and Debugging</h3>
<ul>
<li><strong>Build</strong>: Right-click project &gt; <strong>Build Project</strong></li>
<li><strong>Run</strong>: Right-click project &gt; <strong>Run As &gt; Ada Application</strong></li>
<li><strong>Debug</strong>: Set breakpoints by double-clicking the left margin, then <strong>Debug As &gt; Ada Application</strong></li>
</ul>
<p>Eclipse’s <strong>Debug Perspective</strong> provides:</p>
<ul>
<li><strong>Variables View</strong>: Shows current variable values</li>
<li><strong>Breakpoints View</strong>: Manages all breakpoints</li>
<li><strong>Console View</strong>: Displays program output</li>
</ul>
<h3>21.4.4 ADT-Specific Features</h3>
<ul>
<li><strong>Code Templates</strong>: Configure via <strong>Window &gt; Preferences &gt; Ada &gt; Editor &gt; Templates</strong></li>
<li><strong>Code Formatting</strong>: Use <strong>Source &gt; Format</strong> to apply Ada-style formatting</li>
<li><strong>Project References</strong>: Link multiple Ada projects via <strong>Project Properties &gt; Ada &gt; Project References</strong></li>
<li><strong>GNATmake Integration</strong>: Configure compiler flags in <strong>Project Properties &gt; Ada &gt; Build</strong></li>
</ul>
<h3>21.4.5 Troubleshooting Common Issues</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Issue</strong></th>
<th style="text-align:left"><strong>Solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ADT not appearing in preferences</td>
<td style="text-align:left">Verify repository URL and restart Eclipse</td>
</tr>
<tr>
<td style="text-align:left">“GNAT not found” errors</td>
<td style="text-align:left">Ensure GNAT is in PATH and restart Eclipse</td>
</tr>
<tr>
<td style="text-align:left">Code completion not working</td>
<td style="text-align:left">Check <strong>Window &gt; Preferences &gt; Ada &gt; Editor &gt; Content Assist</strong> settings</td>
</tr>
<tr>
<td style="text-align:left">Build failures</td>
<td style="text-align:left">Verify project properties point to correct main file</td>
</tr>
</tbody>
</table>
<blockquote>
<p>“Eclipse’s strength lies in its extensibility. When working with mixed-language projects (e.g., Ada + C), ADT integrates seamlessly with C/C++ tools while maintaining Ada-specific features.” — Eclipse ADT Maintainer</p>
</blockquote>
<h2>21.5 Visual Studio Code: Lightweight Ada Development</h2>
<p>VS Code has become the go-to editor for modern development due to its speed, extensibility, and cross-platform support. The Ada Language Support extension provides excellent Ada features without the overhead of full IDEs.</p>
<h3>21.5.1 Installation and Setup</h3>
<ol>
<li><strong>Install VS Code</strong>: Download from <a href="https://code.visualstudio.com">code.visualstudio.com</a></li>
<li><strong>Install Extension</strong>:
<ul>
<li>Open Extensions view (<code>Ctrl+Shift+X</code>)</li>
<li>Search for “Ada Language Support” by AdaCore</li>
<li>Click <strong>Install</strong></li>
</ul>
</li>
<li><strong>Verify Installation</strong>: Open an <code>.adb</code> file to see syntax highlighting</li>
</ol>
<p>VS Code requires a separate GNAT compiler installation. Confirm GNAT is in your system PATH by running <code>gnatmake --version</code> in the terminal.</p>
<h3>21.5.2 Project Configuration</h3>
<p>VS Code uses a workspace-based approach:</p>
<ol>
<li><strong>Create Folder</strong>: Make a new directory (e.g., <code>vscode_ada_project</code>)</li>
<li><strong>Open Folder</strong>: In VS Code, go to <strong>File &gt; Open Folder</strong> and select the directory</li>
<li><strong>Create Source File</strong>: Add <code>main.adb</code> with “Hello World” code</li>
</ol>
<p>For project management, create a <code>.gpr</code> file (e.g., <code>helloworld.gpr</code>):</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project HelloWorld <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"src/main.adb"</span>);
<span class="hljs-keyword">end</span> HelloWorld;
</code></pre>
<h3>21.5.3 Building and Debugging</h3>
<p>VS Code uses tasks for build processes:</p>
<ol>
<li><strong>Create Tasks</strong>: Press <code>Ctrl+Shift+P</code>, type “Tasks: Configure Task”, select “Create tasks.json file from template”</li>
<li><strong>Configure Build Task</strong>: Add:</li>
</ol>
<pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0.0"</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"tasks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
         <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Build Ada"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"shell"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gnatmake"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-P"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"helloworld.gpr"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"group"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"build"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"isDefault"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
         <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
   <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="3">
<li><strong>Run Build</strong>: Press <code>Ctrl+Shift+B</code> to build the project</li>
</ol>
<p>For debugging:</p>
<ol>
<li>Create <code>.vscode/launch.json</code> with:</li>
</ol>
<pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
         <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Debug Ada"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cppdbg"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/obj/main"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"stopAtEntry"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"cwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"environment"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"externalConsole"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"MIMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gdb"</span><span class="hljs-punctuation">,</span>
         <span class="hljs-attr">"setupCommands"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
               <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Enable pretty-printing for gdb"</span><span class="hljs-punctuation">,</span>
               <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"-enable-pretty-printing"</span><span class="hljs-punctuation">,</span>
               <span class="hljs-attr">"ignoreFailures"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
            <span class="hljs-punctuation">}</span>
         <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
   <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="2">
<li>Set breakpoints by clicking the left margin</li>
<li>Press <code>F5</code> to start debugging</li>
</ol>
<h3>21.5.4 VS Code Extensions for Enhanced Workflow</h3>
<ul>
<li><strong>Better Comments</strong>: Adds color-coded comments for documentation</li>
<li><strong>GitLens</strong>: Supercharges Git integration</li>
<li><strong>Code Spell Checker</strong>: Helps catch typos in identifiers</li>
<li><strong>Ada Snippets</strong>: Provides code templates for common patterns</li>
</ul>
<blockquote>
<p>“VS Code’s strength is its balance between simplicity and power. For beginners, it offers a gentle learning curve while providing professional-grade features through extensions. The low resource usage makes it ideal for educational environments.” — VS Code Extension Maintainer</p>
</blockquote>
<h2>21.6 CLion with Ada Plugin</h2>
<p>CLion is JetBrains’ C/C++ IDE with community-driven Ada support. While less mature than other options, it excels for developers already in the JetBrains ecosystem who need cross-language support.</p>
<h3>21.6.1 Installation and Setup</h3>
<ol>
<li><strong>Install CLion</strong>: Download from <a href="https://www.jetbrains.com/clion">jetbrains.com/clion</a></li>
<li><strong>Install Ada Plugin</strong>:
<ul>
<li>Go to <strong>Preferences &gt; Plugins</strong></li>
<li>Search for “Ada” and install “Ada Support” (by JetBrains)</li>
<li>Restart CLion</li>
</ul>
</li>
<li><strong>Configure GNAT</strong>:
<ul>
<li>Go to <strong>Preferences &gt; Languages &amp; Frameworks &gt; Ada</strong></li>
<li>Set <strong>GNAT Compiler Path</strong> to <code>gnatmake</code> executable</li>
</ul>
</li>
</ol>
<h3>21.6.2 Project Creation</h3>
<p>CLion uses CMake for project configuration:</p>
<ol>
<li><strong>New Project</strong>: Select <strong>CMake Project</strong></li>
<li><strong>Create Directory Structure</strong>:
<ul>
<li><code>src/main.adb</code></li>
<li><code>CMakeLists.txt</code></li>
</ul>
</li>
<li><strong>Configure CMakeLists.txt</strong>:</li>
</ol>
<pre><code class="language-cmake hljs">cmake_minimum_required(VERSION 3.10)
project(AdaProject)

# 2 Ada support requires special handling
set(CMAKE_C_COMPILER "gnatmake")
set(CMAKE_CXX_COMPILER "gnatmake")

add_executable(AdaProject src/main.adb)
</code></pre>
<ol start="4">
<li><strong>Sync Project</strong>: Click <strong>Sync Now</strong> in the top-right corner</li>
</ol>
<h3>21.0.1 Building and Debugging</h3>
<ul>
<li><strong>Build</strong>: Click <strong>Build &gt; Build Project</strong></li>
<li><strong>Run</strong>: Click the green play button next to <code>main.adb</code></li>
<li><strong>Debug</strong>: Set breakpoints, then click the bug icon</li>
</ul>
<p>CLion’s debugging interface provides:</p>
<ul>
<li><strong>Variables View</strong>: Shows current variable values</li>
<li><strong>Call Stack</strong>: Displays function call hierarchy</li>
<li><strong>Watches</strong>: Evaluate expressions during debugging</li>
</ul>
<h3>21.0.2 Limitations and Workarounds</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Limitation</strong></th>
<th style="text-align:left"><strong>Workaround</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Limited Ada-specific tooling</td>
<td style="text-align:left">Use external GNAT tools via terminal</td>
</tr>
<tr>
<td style="text-align:left">No native project file support</td>
<td style="text-align:left">Manage project via CMakeLists.txt</td>
</tr>
<tr>
<td style="text-align:left">Code completion issues</td>
<td style="text-align:left">Install additional plugins like “Ada Snippets”</td>
</tr>
<tr>
<td style="text-align:left">Build system complexity</td>
<td style="text-align:left">Use simple Makefiles instead of CMake</td>
</tr>
</tbody>
</table>
<blockquote>
<p>“CLion shines for developers who need to work across multiple languages. While Ada support isn’t perfect, the IDE’s powerful cross-language navigation makes it valuable for mixed-language projects.” — JetBrains Developer Advocate</p>
</blockquote>
<h2>21.1 IDE Comparison: Feature Breakdown</h2>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>GNAT Studio</strong></th>
<th style="text-align:left"><strong>Eclipse + ADT</strong></th>
<th style="text-align:left"><strong>VS Code + Ada Extension</strong></th>
<th style="text-align:left"><strong>CLion + Ada Plugin</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Native Ada Support</strong></td>
<td style="text-align:left">Excellent (official tool)</td>
<td style="text-align:left">Good (ADT plugin)</td>
<td style="text-align:left">Good (community extension)</td>
<td style="text-align:left">Moderate (community plugin)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Code Completion</strong></td>
<td style="text-align:left">Context-aware for Ada packages</td>
<td style="text-align:left">Basic to moderate</td>
<td style="text-align:left">Context-aware with extensions</td>
<td style="text-align:left">Basic with limitations</td>
</tr>
<tr>
<td style="text-align:left"><strong>Debugging Experience</strong></td>
<td style="text-align:left">Integrated GDB with Ada-specific views</td>
<td style="text-align:left">Standard GDB with Eclipse UI</td>
<td style="text-align:left">Requires manual launch.json setup</td>
<td style="text-align:left">Standard GDB with CLion UI</td>
</tr>
<tr>
<td style="text-align:left"><strong>Project Management</strong></td>
<td style="text-align:left">Native .gpr file support</td>
<td style="text-align:left">Makefile or .gpr support</td>
<td style="text-align:left">Requires manual configuration</td>
<td style="text-align:left">CMake-based</td>
</tr>
<tr>
<td style="text-align:left"><strong>Static Analysis</strong></td>
<td style="text-align:left">Built-in GNATcheck and GNATprove</td>
<td style="text-align:left">Limited via plugins</td>
<td style="text-align:left">Requires external tools</td>
<td style="text-align:left">Limited</td>
</tr>
<tr>
<td style="text-align:left"><strong>Version Control</strong></td>
<td style="text-align:left">Integrated Git/SVN</td>
<td style="text-align:left">Integrated with Eclipse EGit</td>
<td style="text-align:left">GitLens extension</td>
<td style="text-align:left">Integrated Git</td>
</tr>
<tr>
<td style="text-align:left"><strong>Learning Curve</strong></td>
<td style="text-align:left">Low for Ada-specific projects</td>
<td style="text-align:left">Medium (Eclipse ecosystem)</td>
<td style="text-align:left">Low (familiar VS Code interface)</td>
<td style="text-align:left">Medium (CMake knowledge needed)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Resource Usage</strong></td>
<td style="text-align:left">Moderate</td>
<td style="text-align:left">High (Eclipse memory footprint)</td>
<td style="text-align:left">Low</td>
<td style="text-align:left">Moderate</td>
</tr>
<tr>
<td style="text-align:left"><strong>Best For</strong></td>
<td style="text-align:left">Professional Ada development</td>
<td style="text-align:left">Multi-language projects</td>
<td style="text-align:left">Lightweight workflows</td>
<td style="text-align:left">JetBrains ecosystem users</td>
</tr>
</tbody>
</table>
<p>This comparison highlights key trade-offs. GNAT Studio offers the most complete Ada experience out-of-the-box, while VS Code provides flexibility for developers who prefer minimalism. Eclipse and CLion excel in multi-language environments but require additional configuration for Ada-specific features.</p>
<h2>21.2 Debugging Ada Programs: A Practical Guide</h2>
<p>Debugging is where IDEs truly shine, transforming complex runtime errors into manageable issues. We’ll walk through debugging a simple Ada program with common pitfalls.</p>
<h3>21.2.1 Example Program: Divide-by-Zero Error</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Divide_Error</span> <span class="hljs-keyword">is</span>
   Numerator : <span class="hljs-type">Integer</span> := <span class="hljs-number">10</span>;
   Denominator : <span class="hljs-type">Integer</span> := <span class="hljs-number">0</span>;
   Result : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Result := Float(Numerator) / Float(Denominator);
   Put_Line(<span class="hljs-string">"Result: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Result));
<span class="hljs-keyword">end</span> Divide_Error;
</code></pre>
<h3>21.2.2 Debugging Workflow in GNAT Studio</h3>
<ol>
<li><strong>Set Breakpoint</strong>: Click left margin next to <code>Result := ...</code> line</li>
<li><strong>Start Debugging</strong>: <strong>Debug &gt; Start Debugging</strong></li>
<li><strong>Step Into</strong>: Press <code>F7</code> to execute line-by-line</li>
<li><strong>Inspect Variables</strong>: In <strong>Debug View</strong>, check <code>Denominator</code> value</li>
<li><strong>Error Detection</strong>: When division occurs, GNAT Studio highlights the exception and shows:
<ul>
<li><strong>Stack Trace</strong>: Shows call hierarchy</li>
<li><strong>Exception Details</strong>: “Constraint_Error: division by zero”</li>
</ul>
</li>
<li><strong>Fix</strong>: Modify <code>Denominator</code> to non-zero value and re-run</li>
</ol>
<h3>21.2.3 Debugging in VS Code</h3>
<ol>
<li><strong>Set Breakpoint</strong>: Click left margin</li>
<li><strong>Start Debugging</strong>: Press <code>F5</code></li>
<li><strong>Inspect Variables</strong>: In <strong>Variables</strong> tab, check values</li>
<li><strong>Watch Expressions</strong>: Right-click <code>Denominator</code> &gt; <strong>Add to Watch</strong></li>
<li><strong>Error Handling</strong>: VS Code shows exception details in <strong>Debug Console</strong></li>
</ol>
<h3>21.2.4 Common Debugging Pitfalls and Solutions</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Issue</strong></th>
<th style="text-align:left"><strong>Cause</strong></th>
<th style="text-align:left"><strong>Solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Breakpoints not hit</td>
<td style="text-align:left">Optimized build (no debug symbols)</td>
<td style="text-align:left">Add <code>-g</code> flag in project settings</td>
</tr>
<tr>
<td style="text-align:left">Variables not visible</td>
<td style="text-align:left">Compiler optimization enabled</td>
<td style="text-align:left">Disable optimization in build settings</td>
</tr>
<tr>
<td style="text-align:left">Incorrect variable values</td>
<td style="text-align:left">Memory corruption or race conditions</td>
<td style="text-align:left">Use GNAT Studio’s memory view or Ada runtime checks</td>
</tr>
<tr>
<td style="text-align:left">Debugger disconnects</td>
<td style="text-align:left">GDB version mismatch</td>
<td style="text-align:left">Ensure GNAT and GDB versions are compatible</td>
</tr>
<tr>
<td style="text-align:left">No stack trace</td>
<td style="text-align:left">Unhandled exception</td>
<td style="text-align:left">Enable Ada runtime checks via <code>-gnata</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>“The most powerful debugging tool isn’t the IDE—it’s the developer’s understanding of the problem. A good IDE simply makes that understanding accessible through clear visualizations of program state.” — Senior Software Engineer, AdaCore</p>
</blockquote>
<h2>21.3 Customization and Productivity Tips</h2>
<p>Maximizing IDE efficiency requires tailoring to your workflow. Here are actionable tips for each environment:</p>
<h3>21.3.1 GNAT Studio Customization</h3>
<ul>
<li><strong>Key Bindings</strong>: Configure common actions via <strong>Tools &gt; Options &gt; Key Bindings</strong>
<ul>
<li>Example: Map <code>Ctrl+B</code> to “Build All”</li>
</ul>
</li>
<li><strong>Color Themes</strong>: Install themes via <strong>Tools &gt; Options &gt; Appearance &gt; Color Theme</strong></li>
<li><strong>Code Templates</strong>: Create snippets for common patterns:
<ul>
<li><strong>Tools &gt; Options &gt; Templates</strong></li>
<li>Create template for <code>with Ada.Text_IO;</code> with shortcut <code>withio</code></li>
</ul>
</li>
<li><strong>Project-Specific Settings</strong>: Save settings per-project via <strong>Project &gt; Properties</strong></li>
</ul>
<h3>21.3.2 Eclipse ADT Customization</h3>
<ul>
<li><strong>Perspectives</strong>: Switch between <strong>Ada Perspective</strong> and <strong>Debug Perspective</strong> via <strong>Window &gt; Perspective &gt; Open Perspective</strong></li>
<li><strong>Code Templates</strong>: Configure via <strong>Window &gt; Preferences &gt; Ada &gt; Editor &gt; Templates</strong></li>
<li><strong>Build Automation</strong>: Use <strong>Project &gt; Build Automatically</strong> for continuous builds</li>
<li><strong>Mylyn Integration</strong>: Track tasks with <strong>Window &gt; Show View &gt; Tasks</strong></li>
</ul>
<h3>21.3.3 VS Code Customization</h3>
<ul>
<li><strong>Settings.json</strong>: Customize via <strong>File &gt; Preferences &gt; Settings &gt; Open Settings (JSON)</strong>
<ul>
<li>Add: <code>"ada.syntaxHighlighting": "true"</code></li>
<li>Configure: <code>"editor.wordWrap": "on"</code></li>
</ul>
</li>
<li><strong>Key Bindings</strong>: Edit <code>keybindings.json</code> for shortcuts</li>
<li><strong>Extensions</strong>: Install:
<ul>
<li><strong>Ada Snippets</strong>: For code templates</li>
<li><strong>Better Comments</strong>: For color-coded documentation</li>
</ul>
</li>
<li><strong>Workspace Settings</strong>: Create <code>.vscode/settings.json</code> for project-specific configs</li>
</ul>
<h3>21.3.4 CLion Customization</h3>
<ul>
<li><strong>Live Templates</strong>: Configure via <strong>Preferences &gt; Editor &gt; Live Templates</strong></li>
<li><strong>Color Schemes</strong>: Change via <strong>Preferences &gt; Editor &gt; Color Scheme</strong></li>
<li><strong>File Templates</strong>: Modify for new Ada files via <strong>Preferences &gt; Editor &gt; File and Code Templates</strong></li>
</ul>
<h3>21.3.5 Universal Productivity Tips</h3>
<ul>
<li><strong>Keyboard Shortcuts</strong>: Master IDE-specific shortcuts for navigation and build</li>
<li><strong>Split Views</strong>: Work on multiple files simultaneously</li>
<li><strong>Code Folding</strong>: Collapse sections of code for focus</li>
<li><strong>Bookmarks</strong>: Use IDE bookmarks for quick navigation</li>
<li><strong>Terminal Integration</strong>: Run commands without leaving IDE</li>
</ul>
<blockquote>
<p>“The best IDEs don’t just help you write code—they help you think. By reducing cognitive load through intelligent tooling, you can focus on solving problems rather than managing tools.” — Ada Community Leader</p>
</blockquote>
<h2>21.4 Version Control Integration</h2>
<p>Modern IDEs streamline Git workflows, making version control accessible without command-line knowledge.</p>
<h3>21.4.1 Git in GNAT Studio</h3>
<ol>
<li><strong>Initialize Repository</strong>: Right-click project &gt; <strong>VCS &gt; Git &gt; Initialize Repository</strong></li>
<li><strong>Commit Changes</strong>: Right-click project &gt; <strong>VCS &gt; Commit</strong></li>
<li><strong>View History</strong>: <strong>VCS &gt; Git &gt; Show History</strong></li>
<li><strong>Branch Management</strong>: <strong>VCS &gt; Git &gt; Branches</strong></li>
</ol>
<p>GNAT Studio shows:</p>
<ul>
<li><strong>Modified Files</strong>: In Project Explorer with color indicators</li>
<li><strong>Diff Viewer</strong>: Right-click file &gt; <strong>Show Diff</strong></li>
</ul>
<h3>21.4.2 Git in Eclipse</h3>
<ol>
<li><strong>Git Perspective</strong>: <strong>Window &gt; Perspective &gt; Open Perspective &gt; Git</strong></li>
<li><strong>Staging Changes</strong>: Drag files from <strong>Unstaged Changes</strong> to <strong>Staged Changes</strong></li>
<li><strong>Commit</strong>: Right-click project &gt; <strong>Team &gt; Commit</strong></li>
<li><strong>Branch Management</strong>: <strong>Git Repositories View &gt; Branches</strong></li>
</ol>
<p>Eclipse’s <strong>Synchronize View</strong> shows local vs. remote changes side-by-side.</p>
<h3>21.4.3 Git in VS Code</h3>
<ol>
<li><strong>Source Control Icon</strong>: Click left sidebar icon</li>
<li><strong>Stage Changes</strong>: Click <code>+</code> next to modified files</li>
<li><strong>Commit</strong>: Enter message and press <code>Ctrl+Enter</code></li>
<li><strong>Branch Switching</strong>: Click branch name in status bar</li>
</ol>
<p>VS Code shows inline diff in editor and provides <strong>GitLens</strong> for advanced history tracking.</p>
<h3>21.4.4 Git in CLion</h3>
<ol>
<li><strong>VCS Menu</strong>: <strong>VCS &gt; Git &gt; Commit</strong></li>
<li><strong>Changes View</strong>: Shows modified files with diff</li>
<li><strong>Branch Management</strong>: <strong>VCS &gt; Git &gt; Branches</strong></li>
<li><strong>Push/Pull</strong>: <strong>VCS &gt; Git &gt; Push/Pull</strong></li>
</ol>
<p>CLion’s <strong>Log</strong> view shows commit history with visual branches.</p>
<h3>21.4.5 Best Practices for Version Control</h3>
<ul>
<li><strong>Commit Small Changes</strong>: Frequent, atomic commits</li>
<li><strong>Meaningful Messages</strong>: Describe <em>why</em> changes were made</li>
<li><strong>Branch Strategy</strong>: Use feature branches for new functionality</li>
<li><strong>Remote Repositories</strong>: Push to GitHub/GitLab regularly</li>
<li><strong>Conflict Resolution</strong>: Use IDE’s merge tools for conflict resolution</li>
</ul>
<blockquote>
<p>“Version control is the safety net that allows developers to experiment freely. A well-integrated Git workflow in your IDE makes this safety net invisible—until you need it.” — Open Source Maintainer</p>
</blockquote>
<h2>21.5 Advanced Features: Static Analysis and Code Generation</h2>
<p>Modern IDEs go beyond basic editing to provide proactive quality assurance and automation.</p>
<h3>21.5.1 Static Analysis in GNAT Studio</h3>
<p>GNAT Studio includes built-in static analysis tools:</p>
<ol>
<li><strong>GNATcheck</strong>:
<ul>
<li><strong>Project &gt; Properties &gt; Analysis &gt; GNATcheck</strong></li>
<li>Configure rules (e.g., “No global variables”)</li>
</ul>
</li>
<li><strong>GNATprove</strong> (for SPARK):
<ul>
<li>Enable <strong>SPARK Mode</strong> in project properties</li>
<li>Run <strong>Analysis &gt; Run GNATprove</strong></li>
</ul>
</li>
<li><strong>AdaLint</strong>:
<ul>
<li>Install via <strong>Tools &gt; Options &gt; Plugins</strong></li>
<li>Run <strong>Analysis &gt; AdaLint</strong></li>
</ul>
</li>
</ol>
<p>Example output:</p>
<pre><code class="hljs language-css" data-highlighted="yes"><span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.adb</span>:<span class="hljs-number">5</span>:<span class="hljs-number">12</span>: warning: variable <span class="hljs-string">'X'</span> is never used
</code></pre>
<h3>21.5.2 Static Analysis in VS Code</h3>
<p>VS Code requires extensions for static analysis:</p>
<ol>
<li><strong>Install AdaLint</strong>: Via VS Code Marketplace</li>
<li><strong>Configure</strong>: Add to <code>.vscode/settings.json</code>:<pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"ada.linting.enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"ada.linting.rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"all"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Run Analysis</strong>: Right-click file &gt; <strong>Run AdaLint</strong></li>
</ol>
<h3>21.5.3 Code Generation Templates</h3>
<p>Most IDEs support code templates for repetitive structures:</p>
<h4>21.5.3.1 GNAT Studio Template for Task</h4>
<ol>
<li><strong>Tools &gt; Options &gt; Templates &gt; Add</strong></li>
<li>Name: <code>task_template</code></li>
<li>Content:<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">${name} </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> ${<span class="hljs-keyword">entry</span>};
<span class="hljs-keyword">end</span> ${name};

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> ${name} <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">accept</span> ${<span class="hljs-keyword">entry</span>} <span class="hljs-keyword">do</span>
      null;
   <span class="hljs-keyword">end</span> ${<span class="hljs-keyword">entry</span>};
<span class="hljs-keyword">end</span> ${name};
</code></pre>
</li>
<li>Trigger: <code>task</code></li>
</ol>
<p>Now typing <code>task</code> + <code>Tab</code> inserts the template.</p>
<h4>21.5.3.2 VS Code Snippet for Protected Object</h4>
<ol>
<li>Open <strong>Preferences &gt; User Snippets</strong></li>
<li>Select <code>ada.json</code></li>
<li>Add:<pre><code class="language-json hljs" data-highlighted="yes"><span class="hljs-attr">"Protected Object"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pro"</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"protected ${1:object} is"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"   procedure ${2:action};"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"end ${1:object};"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"protected body ${1:object} is"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"   procedure ${2:action} is"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"   begin"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"      null;"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"   end ${2:action};"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"end ${1:object};"</span>
   <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ol>
<p>Typing <code>pro</code> + <code>Tab</code> generates a protected object template.</p>
<h3>21.5.4 Real-World Example: Generating Test Cases</h3>
<p>For scientific computing projects, generate test cases automatically:</p>
<ol>
<li><strong>GNAT Studio</strong>: Create a template for unit tests</li>
<li><strong>VS Code</strong>: Use a snippet for <code>Ada.Testing</code> boilerplate</li>
<li><strong>Eclipse</strong>: Configure code generation for <code>GNATtest</code> harnesses</li>
</ol>
<blockquote>
<p>“Static analysis isn’t about catching errors—it’s about preventing them from ever occurring. When your IDE flags potential issues as you type, you build higher-quality code from the start.” — Senior QA Engineer</p>
</blockquote>
<h2>21.6 Community Resources and Support</h2>
<p>Leveraging community resources accelerates learning and problem-solving.</p>
<h3>21.6.1 Official Documentation</h3>
<ul>
<li><strong>GNAT Studio</strong>: <a href="https://docs.adacore.com/gnatstudio-docs/">AdaCore Documentation</a></li>
<li><strong>ADT</strong>: <a href="https://wiki.eclipse.org/ADT">Eclipse ADT Wiki</a></li>
<li><strong>VS Code Ada</strong>: <a href="https://marketplace.visualstudio.com/items?itemName=AdaCore.ada">VS Code Marketplace Page</a></li>
<li><strong>CLion Ada</strong>: <a href="https://plugins.jetbrains.com/plugin/15941-ada-support">JetBrains Plugin Page</a></li>
</ul>
<h3>21.6.2 Online Communities</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Platform</strong></th>
<th style="text-align:left"><strong>URL</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>AdaCore Forums</strong></td>
<td style="text-align:left"><a href="https://forums.adacore.com">forums.adacore.com</a></td>
<td style="text-align:left">Official support, GNAT Studio questions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Stack Overflow</strong></td>
<td style="text-align:left"><a href="https://stackoverflow.com/questions/tagged/ada">stackoverflow.com/questions/tagged/ada</a></td>
<td style="text-align:left">General Ada programming questions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reddit r/Ada</strong></td>
<td style="text-align:left"><a href="https://reddit.com/r/Ada">reddit.com/r/Ada</a></td>
<td style="text-align:left">Community discussions and news</td>
</tr>
<tr>
<td style="text-align:left"><strong>GitHub Issues</strong></td>
<td style="text-align:left"><a href="https://github.com/AdaCore/gnatstudio/issues">github.com/AdaCore/gnatstudio</a></td>
<td style="text-align:left">IDE bug reports and feature requests</td>
</tr>
</tbody>
</table>
<h3>21.6.3 Learning Resources</h3>
<ul>
<li><strong>Books</strong>:
<ul>
<li><em>Ada 2022: The Craft of Programming</em> by John Barnes</li>
<li><em>Ada for C/C++ Programmers</em> by Stephen Michell</li>
</ul>
</li>
<li><strong>Tutorials</strong>:
<ul>
<li>AdaCore’s <a href="https://learn.adacore.com">Online Learning Portal</a></li>
<li><a href="https://en.wikibooks.org/wiki/Ada_Programming">Ada Programming on Wikibooks</a></li>
</ul>
</li>
<li><strong>YouTube Channels</strong>:
<ul>
<li>AdaCore Official Channel</li>
<li>Programming with Ada (community)</li>
</ul>
</li>
</ul>
<h3>21.6.4 Contributing to the Ecosystem</h3>
<ul>
<li>Report bugs in IDEs via GitHub</li>
<li>Contribute documentation improvements</li>
<li>Create and share extensions for VS Code/Eclipse</li>
<li>Write tutorials for new developers</li>
</ul>
<blockquote>
<p>“The Ada community thrives on collaboration. Whether you’re filing a bug report or sharing a custom template, your contributions help make Ada development better for everyone.” — AdaCore Community Manager</p>
</blockquote>
<h2>21.7 Conclusion</h2>
<p>Modern IDEs transform Ada development from a tedious task into an enjoyable workflow. Each IDE offers unique strengths: GNAT Studio provides the most comprehensive Ada-specific experience, Eclipse excels in multi-language projects, VS Code offers lightweight flexibility, and CLion integrates well with JetBrains ecosystems. The key is selecting the right tool for your workflow and project needs.</p>
<blockquote>
<p>“The best IDE isn’t the one with the most features—it’s the one that disappears when you’re coding. When your tools support you without getting in the way, you can focus entirely on solving problems.” — Senior Software Architect</p>
</blockquote>
<p>This chapter has covered practical setup procedures, debugging techniques, customization tips, and community resources for modern Ada development environments. Whether you’re writing scientific simulations, embedded systems, or general-purpose applications, the right IDE empowers you to build reliable software efficiently.</p>
<p>As you progress in your Ada journey, remember that tooling evolves rapidly. Stay engaged with community discussions, follow IDE release notes, and don’t hesitate to experiment with new features. The Ada ecosystem is vibrant and welcoming—your contributions can help shape its future.</p>
<h2>21.8 Appendix: IDE Setup Checklist</h2>
<h3>21.8.1 GNAT Studio</h3>
<ul>
<li>[ ] Install GNAT compiler</li>
<li>[ ] Download GNAT Studio from AdaCore</li>
<li>[ ] Verify installation via “Hello World” project</li>
<li>[ ] Configure keybindings for common actions</li>
<li>[ ] Set up Git integration</li>
</ul>
<h3>21.8.2 Eclipse + ADT</h3>
<ul>
<li>[ ] Install Eclipse C/C++ IDE</li>
<li>[ ] Add ADT update site</li>
<li>[ ] Install ADT plugin</li>
<li>[ ] Configure GNAT compiler path</li>
<li>[ ] Set up project templates</li>
</ul>
<h3>21.8.3 VS Code</h3>
<ul>
<li>[ ] Install VS Code</li>
<li>[ ] Install “Ada Language Support” extension</li>
<li>[ ] Configure build tasks in tasks.json</li>
<li>[ ] Set up launch.json for debugging</li>
<li>[ ] Install recommended extensions (GitLens, Ada Snippets)</li>
</ul>
<h3>21.8.4 CLion</h3>
<ul>
<li>[ ] Install CLion</li>
<li>[ ] Install “Ada Support” plugin</li>
<li>[ ] Configure GNAT compiler path</li>
<li>[ ] Set up CMakeLists.txt for Ada projects</li>
<li>[ ] Configure live templates for common patterns</li>
</ul>
<blockquote>
<p>“Ada development has never been easier. With modern IDEs handling the tooling complexities, you can focus on what matters: writing elegant, reliable code that solves real-world problems.” — Ada Community Evangelist</p>
</blockquote>
<h1>22. Autonomous Systems, Quantum Security, and AI Integration in Ada</h1>
<p>As autonomous systems, quantum-resistant cryptography, and artificial intelligence become increasingly integrated into everyday technology, developers need robust tools to build reliable and secure applications. Ada, with its strong typing, concurrency model, and interoperability features, provides an exceptional foundation for these emerging fields—even in non-safety-critical contexts. While these topics are often associated with high-stakes environments like aerospace or defense, their principles apply equally to consumer applications, educational tools, and personal projects. This chapter explores how Ada can be used to build practical, modern systems that leverage these technologies without requiring formal safety certification. We’ll examine concrete examples of autonomous robotics simulations, quantum-resistant communication protocols, and AI-powered applications—all designed for general-purpose development where correctness and maintainability matter but extreme safety certification is not required.</p>
<blockquote>
<p>“Ada’s strong typing and modular design make it uniquely suited for integrating emerging technologies like AI and quantum security, even in non-critical applications where reliability and maintainability matter.” — AdaCore Developer</p>
</blockquote>
<blockquote>
<p>“As AI and quantum computing evolve, the need for secure, predictable systems grows. Ada’s ability to combine safety with modern tooling positions it as a critical language for the next generation of software.” — Quantum Security Researcher</p>
</blockquote>
<h2>22.1 Why Ada for Emerging Technologies?</h2>
<p>Modern software development increasingly requires systems that handle complex, real-time data processing while maintaining security and reliability. Traditional languages like Python excel in rapid prototyping but struggle with performance-critical tasks due to the Global Interpreter Lock (GIL), while C++ requires meticulous manual memory management that introduces subtle bugs. Ada bridges these gaps with:</p>
<ul>
<li><strong>Compile-time safety</strong>: Prevents common errors like buffer overflows or type mismatches before runtime</li>
<li><strong>Predictable concurrency</strong>: Built-in tasking model avoids race conditions without complex synchronization</li>
<li><strong>Seamless interoperability</strong>: Clean interfaces to C, Python, and other languages for leveraging existing libraries</li>
<li><strong>Modular design</strong>: Packages and generics enable reusable, maintainable code structures</li>
</ul>
<p>These features make Ada ideal for building consumer-grade autonomous systems (e.g., smart home devices), educational AI tools, and personal security applications where correctness matters but formal certification isn’t required.</p>
<h3>22.1.1 Language Comparison for Modern Applications</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>Ada</strong></th>
<th style="text-align:left"><strong>Python</strong></th>
<th style="text-align:left"><strong>C++</strong></th>
<th style="text-align:left"><strong>Java</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Type Safety</strong></td>
<td style="text-align:left">Strong static typing catches errors at compile time</td>
<td style="text-align:left">Dynamic typing, prone to runtime errors</td>
<td style="text-align:left">Static but allows unsafe casts</td>
<td style="text-align:left">Strong but JVM overhead</td>
</tr>
<tr>
<td style="text-align:left"><strong>Concurrency Model</strong></td>
<td style="text-align:left">Built-in tasks with safe synchronization</td>
<td style="text-align:left">GIL limits parallelism</td>
<td style="text-align:left">Threads with manual management</td>
<td style="text-align:left">JVM threads with synchronization</td>
</tr>
<tr>
<td style="text-align:left"><strong>Quantum Security Libraries</strong></td>
<td style="text-align:left">Interoperable with C libraries like OpenQuantumSafe</td>
<td style="text-align:left">Qiskit, PyQASM for quantum computing</td>
<td style="text-align:left">C++ bindings for quantum libraries</td>
<td style="text-align:left">Java bindings available</td>
</tr>
<tr>
<td style="text-align:left"><strong>AI Integration</strong></td>
<td style="text-align:left">Seamless Python bindings via GNATCOLL</td>
<td style="text-align:left">Native support for TensorFlow/PyTorch</td>
<td style="text-align:left">C++ APIs but complex setup</td>
<td style="text-align:left">JNI for Java bindings</td>
</tr>
<tr>
<td style="text-align:left"><strong>Real-Time Performance</strong></td>
<td style="text-align:left">Low overhead, predictable execution</td>
<td style="text-align:left">GIL can cause delays</td>
<td style="text-align:left">High performance but complex</td>
<td style="text-align:left">JVM pauses</td>
</tr>
<tr>
<td style="text-align:left"><strong>Memory Management</strong></td>
<td style="text-align:left">Manual with controlled access</td>
<td style="text-align:left">Garbage collected</td>
<td style="text-align:left">Manual or smart pointers</td>
<td style="text-align:left">Garbage collected</td>
</tr>
</tbody>
</table>
<p>This table highlights Ada’s competitive advantages. For example, when building a smart home system that processes sensor data in real-time, Ada’s tasking model ensures responsive control without the GIL limitations of Python or the manual thread management complexity of C++. Similarly, when implementing quantum-resistant encryption for personal messaging apps, Ada’s strong typing prevents subtle cryptographic errors that could compromise security.</p>
<h2>22.2 Autonomous Systems in Ada</h2>
<p>Autonomous systems—devices that operate independently without human intervention—are increasingly common in consumer technology. From robotic vacuum cleaners to smart thermostats, these systems require reliable real-time processing, sensor integration, and decision-making capabilities. While professional autonomous vehicles or medical robots demand rigorous safety certification, educational and hobbyist projects benefit immensely from Ada’s safety features without requiring formal certification.</p>
<h3>22.2.1 Core Concepts for Autonomous Systems</h3>
<p>Autonomous systems typically involve:</p>
<ul>
<li><strong>Sensing</strong>: Reading data from cameras, lidar, or environmental sensors</li>
<li><strong>Decision-making</strong>: Processing sensor data to determine actions</li>
<li><strong>Actuation</strong>: Controlling physical components like motors or displays</li>
<li><strong>Concurrency</strong>: Handling multiple tasks simultaneously (e.g., sensor reading while moving)</li>
</ul>
<p>Ada excels in this domain through its tasking model, which allows safe, concurrent execution of these components without race conditions or deadlocks. Unlike Python’s GIL-limited threading or C++'s complex thread management, Ada’s tasks are built into the language with compile-time safety guarantees.</p>
<h3>22.2.2 Example: Smart Home Robot Simulator</h3>
<p>Consider a simplified smart home robot that navigates a room, avoids obstacles, and responds to voice commands. This example uses Ada’s tasking model to handle sensor input, movement control, and voice processing concurrently.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;
<span class="hljs-keyword">with</span> Ada.Calendar; <span class="hljs-keyword">use</span> Ada.Calendar;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Smart_Robot</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Position </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      X, Y : <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Sensor </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Read (Distance: <span class="hljs-keyword">out</span> Float);
   <span class="hljs-keyword">end</span> Sensor;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Sensor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">accept</span> Read (Distance: <span class="hljs-keyword">out</span> Float) <span class="hljs-keyword">do</span>
            <span class="hljs-comment">-- Simulate distance reading (0-10 meters)</span>
            Distance := <span class="hljs-number">10.0</span> * Random;
         <span class="hljs-keyword">end</span> Read;
         <span class="hljs-keyword">delay</span> <span class="hljs-number">0.1</span>; <span class="hljs-comment">-- Simulate sensor refresh rate</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Sensor;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Movement </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Move (Direction: String);
   <span class="hljs-keyword">end</span> Movement;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Movement <span class="hljs-keyword">is</span>
      Pos : <span class="hljs-type">Position</span> := (X =&gt; <span class="hljs-number">0</span>, Y =&gt; <span class="hljs-number">0</span>);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">accept</span> Move (Direction: String) <span class="hljs-keyword">do</span>
            <span class="hljs-keyword">case</span> Direction <span class="hljs-keyword">is</span>
               <span class="hljs-keyword">when</span> <span class="hljs-string">"Forward"</span> =&gt; Pos.Y := Pos.Y + <span class="hljs-number">1</span>;
               <span class="hljs-keyword">when</span> <span class="hljs-string">"Backward"</span> =&gt; Pos.Y := Pos.Y - <span class="hljs-number">1</span>;
               <span class="hljs-keyword">when</span> <span class="hljs-string">"Left"</span> =&gt; Pos.X := Pos.X - <span class="hljs-number">1</span>;
               <span class="hljs-keyword">when</span> <span class="hljs-string">"Right"</span> =&gt; Pos.X := Pos.X + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
            Put_Line(<span class="hljs-string">"Moved to ("</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Pos.X) &amp; <span class="hljs-string">", "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Pos.Y) &amp; <span class="hljs-string">")"</span>);
         <span class="hljs-keyword">end</span> Move;
         <span class="hljs-keyword">delay</span> <span class="hljs-number">0.5</span>; <span class="hljs-comment">-- Simulate movement time</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Movement;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Voice_Control </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Listen (Command: <span class="hljs-keyword">out</span> String);
   <span class="hljs-keyword">end</span> Voice_Control;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Voice_Control <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">accept</span> Listen (Command: <span class="hljs-keyword">out</span> String) <span class="hljs-keyword">do</span>
            <span class="hljs-comment">-- Simulate voice recognition</span>
            Command := <span class="hljs-keyword">case</span> Random <span class="hljs-keyword">is</span>
               <span class="hljs-keyword">when</span> <span class="hljs-number">0.0</span> .. <span class="hljs-number">0.25</span> =&gt; <span class="hljs-string">"Forward"</span>,
               <span class="hljs-keyword">when</span> <span class="hljs-number">0.25</span> .. <span class="hljs-number">0.5</span> =&gt; <span class="hljs-string">"Left"</span>,
               <span class="hljs-keyword">when</span> <span class="hljs-number">0.5</span> .. <span class="hljs-number">0.75</span> =&gt; <span class="hljs-string">"Right"</span>,
               <span class="hljs-keyword">when</span> <span class="hljs-number">0.75</span> .. <span class="hljs-number">1.0</span> =&gt; <span class="hljs-string">"Stop"</span>
            <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
         <span class="hljs-keyword">end</span> Listen;
         <span class="hljs-keyword">delay</span> <span class="hljs-number">2.0</span>; <span class="hljs-comment">-- Simulate voice command interval</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Voice_Control;

   S : <span class="hljs-type">Sensor</span>;
   M : <span class="hljs-type">Movement</span>;
   V : <span class="hljs-type">Voice_Control</span>;
   Dist : <span class="hljs-type">Float</span>;
   Cmd : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
   Len : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Smart Home Robot Simulator"</span>);
   Put_Line(<span class="hljs-string">"Commands: Forward, Backward, Left, Right, Stop"</span>);
   <span class="hljs-keyword">loop</span>
      S.Read(Dist);
      V.Listen(Cmd, Len);
      
      <span class="hljs-comment">-- Simple obstacle avoidance</span>
      <span class="hljs-keyword">if</span> Dist &lt; <span class="hljs-number">2.0</span> <span class="hljs-keyword">and</span> Cmd /= <span class="hljs-string">"Stop"</span> <span class="hljs-keyword">then</span>
         M.Move(<span class="hljs-string">"Stop"</span>);
         Put_Line(<span class="hljs-string">"Obstacle detected! Stopping."</span>);
         <span class="hljs-keyword">delay</span> <span class="hljs-number">1.0</span>;
         M.Move(<span class="hljs-string">"Backward"</span>);
      <span class="hljs-keyword">else</span>
         M.Move(Cmd(<span class="hljs-number">1</span>..Len));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-comment">-- Exit on "Stop" command</span>
      <span class="hljs-keyword">exit</span> <span class="hljs-keyword">when</span> Cmd(<span class="hljs-number">1</span>..Len) = <span class="hljs-string">"Stop"</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Put_Line(<span class="hljs-string">"Simulation complete"</span>);
<span class="hljs-keyword">end</span> Smart_Robot;
</code></pre>
<p>This example demonstrates several key Ada features:</p>
<ul>
<li><strong>Task encapsulation</strong>: Each component (sensor, movement, voice control) is isolated in its own task</li>
<li><strong>Synchronization</strong>: Tasks communicate through well-defined entries (<code>Read</code>, <code>Move</code>, <code>Listen</code>)</li>
<li><strong>Concurrency</strong>: All tasks run simultaneously without explicit thread management</li>
<li><strong>Safety</strong>: The compiler ensures correct parameter types and prevents race conditions</li>
</ul>
<p>When executed, the robot simulates navigating a room, stopping when obstacles are detected and responding to voice commands. The <code>delay</code> statements simulate real-world timing constraints without requiring complex timing libraries.</p>
<h3>22.2.3 Real-World Applications</h3>
<p>While this example is simplified, similar patterns apply to real consumer products:</p>
<ul>
<li><strong>Smart thermostats</strong>: Concurrent temperature sensing, climate control, and user interface management</li>
<li><strong>Robotic vacuum cleaners</strong>: Sensor processing for obstacle avoidance and path planning</li>
<li><strong>Home security systems</strong>: Simultaneous camera monitoring, motion detection, and alert generation</li>
</ul>
<p>Ada’s strength lies in its ability to handle these concurrent processes safely. Unlike Python, where the GIL limits true parallelism for CPU-bound tasks, or C++, where manual thread management introduces subtle bugs, Ada’s built-in concurrency model ensures predictable behavior.</p>
<h2>22.3 Quantum Security with Ada</h2>
<p>Quantum computing threatens current cryptographic standards, as quantum algorithms like Shor’s algorithm could break widely-used encryption like RSA and ECC. Post-quantum cryptography (PQC) refers to cryptographic algorithms designed to be secure against both classical and quantum computers. While government and military applications require rigorous certification, personal and educational projects also benefit from quantum-resistant security—especially for long-term data protection.</p>
<h3>22.3.1 Core Concepts for Quantum Security</h3>
<p>Key aspects of quantum security include:</p>
<ul>
<li><strong>Post-quantum algorithms</strong>: Lattice-based, hash-based, or code-based cryptography resistant to quantum attacks</li>
<li><strong>Key exchange protocols</strong>: Secure methods for establishing shared secrets (e.g., Kyber, Dilithium)</li>
<li><strong>Digital signatures</strong>: Quantum-resistant signing algorithms for authentication</li>
<li><strong>Interoperability</strong>: Integration with existing cryptographic libraries and protocols</li>
</ul>
<p>Ada excels in implementing these concepts due to its strong typing, which prevents subtle cryptographic errors, and its clean C interoperability, allowing seamless use of existing PQC libraries like OpenQuantumSafe (OQS).</p>
<h3>22.3.2 Example: Quantum-Resistant Key Exchange</h3>
<p>Here’s a simplified example using Ada to interface with the OpenQuantumSafe C library for Kyber key exchange—a leading PQC algorithm selected by NIST for standardization.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Characters.Latin_1; <span class="hljs-keyword">use</span> Ada.Characters.Latin_1;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Quantum_Key_Exchange</span> <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- C function declarations for Kyber</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">OQS_KEM_keypair</span> (public_key : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>; secret_key : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">OQS_KEM_encaps</span> (ciphertext : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>; shared_secret : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>; public_key : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">OQS_KEM_decaps</span> (shared_secret : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>; ciphertext : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>; secret_key : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char_array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, OQS_KEM_keypair, <span class="hljs-string">"OQS_KEM_kyber_512_keypair"</span>);
   <span class="hljs-keyword">pragma</span> Import (C, OQS_KEM_encaps, <span class="hljs-string">"OQS_KEM_kyber_512_encaps"</span>);
   <span class="hljs-keyword">pragma</span> Import (C, OQS_KEM_decaps, <span class="hljs-string">"OQS_KEM_kyber_512_decaps"</span>);

   <span class="hljs-comment">-- Buffer sizes for Kyber-512</span>
   Public_Key_Size : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">800</span>;
   Secret_Key_Size : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">1632</span>;
   Ciphertext_Size : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">736</span>;
   Shared_Secret_Size : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> := <span class="hljs-number">32</span>;

   <span class="hljs-comment">-- C-style buffers</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">0</span> .. Public_Key_Size - <span class="hljs-number">1</span>) <span class="hljs-keyword">of</span> Character;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Buffer_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Buffer;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Print_Hex</span> (Data : <span class="hljs-type">Buffer</span>; Length : <span class="hljs-type">Natural</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> .. Length - <span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
         Put (Integer<span class="hljs-symbol">'Image</span> (Character<span class="hljs-symbol">'Pos</span> (Data (I))));
         Put (<span class="hljs-string">" "</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      New_Line;
   <span class="hljs-keyword">end</span> Print_Hex;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Generate key pair</span>
   <span class="hljs-keyword">declare</span>
      Pub_Key : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Sec_Key : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> OQS_KEM_keypair (Pub_Key, Sec_Key) /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Put_Line (<span class="hljs-string">"Key generation failed"</span>);
         <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

      Put_Line (<span class="hljs-string">"Public key:"</span>);
      Print_Hex (Pub_Key.<span class="hljs-keyword">all</span>, Public_Key_Size);
      Put_Line (<span class="hljs-string">"Secret key:"</span>);
      Print_Hex (Sec_Key.<span class="hljs-keyword">all</span>, Secret_Key_Size);
   <span class="hljs-keyword">end</span>;

   <span class="hljs-comment">-- Simulate Alice and Bob communication</span>
   <span class="hljs-keyword">declare</span>
      Pub_Key_Alice : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Sec_Key_Alice : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Pub_Key_Bob : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Sec_Key_Bob : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Ciphertext : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Shared_Secret_Alice : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
      Shared_Secret_Bob : <span class="hljs-type">Buffer_Access</span> := <span class="hljs-keyword">new</span> Buffer;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Alice generates key pair</span>
      OQS_KEM_keypair (Pub_Key_Alice, Sec_Key_Alice);

      <span class="hljs-comment">-- Bob generates key pair</span>
      OQS_KEM_keypair (Pub_Key_Bob, Sec_Key_Bob);

      <span class="hljs-comment">-- Alice encrypts with Bob's public key</span>
      <span class="hljs-keyword">if</span> OQS_KEM_encaps (Ciphertext, Shared_Secret_Alice, Pub_Key_Bob) /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Put_Line (<span class="hljs-string">"Encryption failed"</span>);
         <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

      <span class="hljs-comment">-- Bob decrypts with his secret key</span>
      <span class="hljs-keyword">if</span> OQS_KEM_decaps (Shared_Secret_Bob, Ciphertext, Sec_Key_Bob) /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Put_Line (<span class="hljs-string">"Decryption failed"</span>);
         <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

      <span class="hljs-comment">-- Verify shared secrets match</span>
      <span class="hljs-keyword">if</span> Shared_Secret_Alice.<span class="hljs-keyword">all</span> = Shared_Secret_Bob.<span class="hljs-keyword">all</span> <span class="hljs-keyword">then</span>
         Put_Line (<span class="hljs-string">"Shared secret established successfully!"</span>);
      <span class="hljs-keyword">else</span>
         Put_Line (<span class="hljs-string">"Error: Secrets do not match"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> Quantum_Key_Exchange;
</code></pre>
<p>This example demonstrates:</p>
<ul>
<li><strong>C interoperability</strong>: Ada seamlessly calls OQS C functions using <code>pragma Import</code></li>
<li><strong>Strong typing</strong>: Buffer sizes and parameters are explicitly defined to prevent errors</li>
<li><strong>Modular design</strong>: Key generation, encryption, and decryption are clearly separated</li>
<li><strong>Safety</strong>: Compile-time checks ensure correct buffer sizes and parameter types</li>
</ul>
<p>While this simplified example doesn’t handle real-world networking, it illustrates how Ada can integrate with quantum-resistant cryptography libraries. For a complete implementation, you’d add network communication using Ada’s networking libraries or Python bindings.</p>
<h3>22.3.3 Real-World Applications</h3>
<p>Quantum-resistant cryptography is relevant for:</p>
<ul>
<li><strong>Personal messaging apps</strong>: Securing messages against future quantum attacks</li>
<li><strong>Long-term data storage</strong>: Protecting sensitive data that must remain secure for decades</li>
<li><strong>IoT device authentication</strong>: Ensuring secure communication between smart devices</li>
</ul>
<p>Unlike Python, which lacks built-in cryptographic safety guarantees, Ada’s strong typing prevents subtle errors in cryptographic implementations. For example, accidentally using the wrong buffer size for a key exchange could compromise security—Ada catches such errors at compile time.</p>
<h2>22.4 AI Integration in Ada</h2>
<p>Artificial intelligence has moved beyond research labs into everyday applications—from recommendation systems to image recognition. While Python dominates AI development due to its rich ecosystem, Ada provides unique advantages for integrating AI into larger systems where reliability and performance matter.</p>
<h3>22.4.1 Core Concepts for AI Integration</h3>
<p>Key aspects of AI integration include:</p>
<ul>
<li><strong>Model serving</strong>: Deploying pre-trained machine learning models</li>
<li><strong>Data preprocessing</strong>: Handling input data for AI models</li>
<li><strong>Interoperability</strong>: Connecting Ada with Python, TensorFlow, or PyTorch</li>
<li><strong>Real-time processing</strong>: Handling AI inference with predictable performance</li>
</ul>
<p>Ada excels in this domain through GNATCOLL.Python, which provides seamless Python integration, and its strong typing, which ensures data consistency between Ada and Python components.</p>
<h3>22.4.2 Example: Image Classification with TensorFlow</h3>
<p>This example demonstrates how Ada can use TensorFlow through Python bindings to classify images. While the AI model is implemented in Python, Ada handles the application logic and data processing.</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.Python; <span class="hljs-keyword">use</span> GNATCOLL.Python;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Numerics; <span class="hljs-keyword">use</span> Ada.Numerics;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Image_Classifier</span> <span class="hljs-keyword">is</span>
   Python : <span class="hljs-type">Python_Object</span>;
   TensorFlow : <span class="hljs-type">Python_Object</span>;
   Model : <span class="hljs-type">Python_Object</span>;
   Image_Data : <span class="hljs-type">Python_Object</span>;
   Prediction : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Initialize Python</span>
   Python.Initialize;
   Put_Line(<span class="hljs-string">"Python initialized"</span>);

   <span class="hljs-comment">-- Import TensorFlow</span>
   TensorFlow := Python.Import(<span class="hljs-string">"tensorflow"</span>);
   Put_Line(<span class="hljs-string">"TensorFlow imported"</span>);

   <span class="hljs-comment">-- Load pre-trained model</span>
   Model := TensorFlow.Call(<span class="hljs-string">"keras.models.load_model"</span>, (<span class="hljs-string">"model.h5"</span>,));
   Put_Line(<span class="hljs-string">"Model loaded"</span>);

   <span class="hljs-comment">-- Create sample image data (28x28 grayscale)</span>
   <span class="hljs-keyword">declare</span>
      Image_Array : <span class="hljs-type">array</span> (<span class="hljs-number">1</span> .. <span class="hljs-number">784</span>) <span class="hljs-keyword">of</span> Float := (<span class="hljs-keyword">others</span> =&gt; <span class="hljs-number">0.0</span>);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Simulate some image data (e.g., digit '7')</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> .. <span class="hljs-number">784</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">if</span> I <span class="hljs-keyword">mod</span> <span class="hljs-number">2</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
            Image_Array(I) := <span class="hljs-number">1.0</span>; <span class="hljs-comment">-- White pixels</span>
         <span class="hljs-keyword">else</span>
            Image_Array(I) := <span class="hljs-number">0.0</span>; <span class="hljs-comment">-- Black pixels</span>
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;

      <span class="hljs-comment">-- Convert to TensorFlow tensor</span>
      Image_Data := Python.List(Image_Array);
      Image_Data := TensorFlow.Call(<span class="hljs-string">"convert_to_tensor"</span>, (Image_Data,));
      Image_Data := TensorFlow.Call(<span class="hljs-string">"reshape"</span>, (Image_Data, (-<span class="hljs-number">1</span>, <span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>)));
   <span class="hljs-keyword">end</span>;

   <span class="hljs-comment">-- Run prediction</span>
   Prediction := Python.Call(Model, <span class="hljs-string">"predict"</span>, (Image_Data,)).As_Float;
   Put_Line(<span class="hljs-string">"Prediction: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Prediction));

   <span class="hljs-comment">-- Clean up</span>
   Python.Finalize;
<span class="hljs-keyword">end</span> Image_Classifier;
</code></pre>
<p>This example shows:</p>
<ul>
<li><strong>Seamless Python integration</strong>: GNATCOLL.Python handles all Python interactions</li>
<li><strong>Data conversion</strong>: Ada converts its native types to Python-compatible structures</li>
<li><strong>Modular design</strong>: AI model loading and prediction are clearly separated</li>
<li><strong>Safety</strong>: Compile-time checks ensure correct parameter types for Python calls</li>
</ul>
<p>While this example uses a simplified image dataset, real-world applications would:</p>
<ul>
<li>Load actual image data from files</li>
<li>Handle more complex preprocessing</li>
<li>Process multiple predictions in parallel</li>
</ul>
<h3>22.4.3 Real-World Applications</h3>
<p>AI integration with Ada is valuable for:</p>
<ul>
<li><strong>Smart home assistants</strong>: Combining voice recognition (Python) with Ada-controlled hardware</li>
<li><strong>Industrial monitoring systems</strong>: Using Python AI models for defect detection with Ada real-time control</li>
<li><strong>Personal finance tools</strong>: Analyzing market data with Python ML while handling transactions in Ada</li>
</ul>
<p>Unlike pure Python solutions, which can suffer from GIL limitations during CPU-intensive tasks, Ada handles the real-time control aspects while Python manages the AI model. This hybrid approach leverages the strengths of both languages.</p>
<h2>22.5 Case Studies: Practical Applications</h2>
<h3>22.5.1 Case Study 1: Smart Home Automation System</h3>
<p>Consider a smart home system that:</p>
<ul>
<li>Monitors temperature and humidity via sensors</li>
<li>Controls HVAC systems based on environmental data</li>
<li>Uses AI to predict energy usage patterns</li>
<li>Implements quantum-resistant encryption for secure communication</li>
</ul>
<p><strong>Ada Implementation Highlights</strong>:</p>
<ul>
<li><strong>Task-based architecture</strong>: Separate tasks for sensor reading, HVAC control, and AI processing</li>
<li><strong>Quantum-resistant keys</strong>: Using OQS for secure communication between devices</li>
<li><strong>Python integration</strong>: TensorFlow models for energy prediction</li>
<li><strong>Compile-time safety</strong>: Ensuring all sensor readings and control commands are type-safe</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> GNATCOLL.Python; <span class="hljs-keyword">use</span> GNATCOLL.Python;
<span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Smart_Home</span> <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Task for temperature sensor</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Sensor </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Read (Temp: <span class="hljs-keyword">out</span> Float);
   <span class="hljs-keyword">end</span> Temperature_Sensor;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Temperature_Sensor <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">accept</span> Read (Temp: <span class="hljs-keyword">out</span> Float) <span class="hljs-keyword">do</span>
            Temp := <span class="hljs-number">20.0</span> + Random * <span class="hljs-number">10.0</span>; <span class="hljs-comment">-- Simulate reading</span>
         <span class="hljs-keyword">end</span> Read;
         <span class="hljs-keyword">delay</span> <span class="hljs-number">1.0</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Temperature_Sensor;

   <span class="hljs-comment">-- Task for HVAC control</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">HVAC_Control </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Set_Temperature (Temp: Float);
   <span class="hljs-keyword">end</span> HVAC_Control;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> HVAC_Control <span class="hljs-keyword">is</span>
      Current_Temp : <span class="hljs-type">Float</span> := <span class="hljs-number">22.0</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">accept</span> Set_Temperature (Temp: Float) <span class="hljs-keyword">do</span>
            Current_Temp := Temp;
            Put_Line(<span class="hljs-string">"HVAC set to "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Current_Temp) &amp; <span class="hljs-string">"°C"</span>);
         <span class="hljs-keyword">end</span> Set_Temperature;
         <span class="hljs-keyword">delay</span> <span class="hljs-number">0.5</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> HVAC_Control;

   <span class="hljs-comment">-- AI prediction task</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Energy_Predictor </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Predict (Usage: <span class="hljs-keyword">out</span> Float);
   <span class="hljs-keyword">end</span> Energy_Predictor;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Energy_Predictor <span class="hljs-keyword">is</span>
      Python : <span class="hljs-type">Python_Object</span>;
   <span class="hljs-keyword">begin</span>
      Python.Initialize;
      <span class="hljs-keyword">declare</span>
         Model : <span class="hljs-type">Python_Object</span> := Python.Import(<span class="hljs-string">"tensorflow.keras.models"</span>).Call(<span class="hljs-string">"load_model"</span>, (<span class="hljs-string">"energy_model.h5"</span>,));
      <span class="hljs-keyword">begin</span>
         <span class="hljs-keyword">loop</span>
            <span class="hljs-keyword">accept</span> Predict (Usage: <span class="hljs-keyword">out</span> Float) <span class="hljs-keyword">do</span>
               <span class="hljs-comment">-- Simulate AI prediction</span>
               Usage := <span class="hljs-number">100.0</span> + Random * <span class="hljs-number">50.0</span>;
            <span class="hljs-keyword">end</span> Predict;
            <span class="hljs-keyword">delay</span> <span class="hljs-number">5.0</span>;
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      <span class="hljs-keyword">end</span>;
      Python.Finalize;
   <span class="hljs-keyword">end</span> Energy_Predictor;

   <span class="hljs-comment">-- Quantum security task</span>
   <span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Secure_Communication </span><span class="hljs-keyword">is</span>
      <span class="hljs-keyword">entry</span> Encrypt (Data: <span class="hljs-keyword">in</span> String; Encrypted: <span class="hljs-keyword">out</span> String);
   <span class="hljs-keyword">end</span> Secure_Communication;

   <span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Secure_Communication <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- OQS key exchange implementation</span>
      <span class="hljs-comment">-- (simplified for brevity)</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">accept</span> Encrypt (Data: <span class="hljs-keyword">in</span> String; Encrypted: <span class="hljs-keyword">out</span> String) <span class="hljs-keyword">do</span>
            Encrypted := <span class="hljs-string">"Encrypted: "</span> &amp; Data; <span class="hljs-comment">-- Simplified</span>
         <span class="hljs-keyword">end</span> Encrypt;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> Secure_Communication;

   T : <span class="hljs-type">Temperature_Sensor</span>;
   H : <span class="hljs-type">HVAC_Control</span>;
   E : <span class="hljs-type">Energy_Predictor</span>;
   S : <span class="hljs-type">Secure_Communication</span>;
   Temp : <span class="hljs-type">Float</span>;
   Usage : <span class="hljs-type">Float</span>;
   Encrypted : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      T.Read(Temp);
      E.Predict(Usage);
      H.Set_Temperature(Temp + Usage * <span class="hljs-number">0.1</span>);
      S.Encrypt(<span class="hljs-string">"Temperature: "</span> &amp; Float<span class="hljs-symbol">'Image</span>(Temp), Encrypted);
      Put_Line(Encrypted);
      <span class="hljs-keyword">delay</span> <span class="hljs-number">2.0</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Smart_Home;
</code></pre>
<p>This system demonstrates how Ada integrates multiple modern technologies:</p>
<ul>
<li><strong>Concurrency</strong>: Tasks handle sensor reading, HVAC control, AI prediction, and encryption simultaneously</li>
<li><strong>AI integration</strong>: Python handles the energy prediction model</li>
<li><strong>Quantum security</strong>: Secure communication uses quantum-resistant encryption</li>
<li><strong>Safety</strong>: Compile-time checks ensure all data types are consistent</li>
</ul>
<h3>22.5.2 Case Study 2: Educational AI Assistant</h3>
<p>An educational tool that:</p>
<ul>
<li>Uses natural language processing for student queries</li>
<li>Provides personalized learning recommendations</li>
<li>Implements quantum-resistant encryption for student data</li>
<li>Runs on low-power devices like Raspberry Pi</li>
</ul>
<p><strong>Ada Implementation Highlights</strong>:</p>
<ul>
<li><strong>Python-based NLP</strong>: Using Hugging Face Transformers for language understanding</li>
<li><strong>Ada for device control</strong>: Managing hardware components like displays and speakers</li>
<li><strong>Modular design</strong>: Separating AI logic from hardware control</li>
<li><strong>Memory safety</strong>: Preventing buffer overflows in embedded environments</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATCOLL.Python; <span class="hljs-keyword">use</span> GNATCOLL.Python;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Educational_Assistant</span> <span class="hljs-keyword">is</span>
   Python : <span class="hljs-type">Python_Object</span>;
   Model : <span class="hljs-type">Python_Object</span>;
   Response : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">500</span>);
   Len : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Python.Initialize;
   Put_Line(<span class="hljs-string">"Initializing AI assistant..."</span>);

   <span class="hljs-comment">-- Load NLP model</span>
   Model := Python.Import(<span class="hljs-string">"transformers"</span>).Call(<span class="hljs-string">"pipeline"</span>, (<span class="hljs-string">"question-answering"</span>,));
   Put_Line(<span class="hljs-string">"Model loaded"</span>);

   <span class="hljs-keyword">loop</span>
      Put(<span class="hljs-string">"Question: "</span>);
      Get_Line(Response, Len);

      <span class="hljs-comment">-- Process with AI model</span>
      <span class="hljs-keyword">declare</span>
         Result : <span class="hljs-type">Python_Object</span> := Python.Call(Model, <span class="hljs-string">"question"</span>, (Response(<span class="hljs-number">1</span>..Len), <span class="hljs-string">"What is Ada?"</span>));
         Answer : <span class="hljs-type">String</span> := Result.Call(<span class="hljs-string">"answer"</span>).As_String;
      <span class="hljs-keyword">begin</span>
         Put_Line(<span class="hljs-string">"Answer: "</span> &amp; Answer);
      <span class="hljs-keyword">end</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Educational_Assistant;
</code></pre>
<p>This example shows how Ada can handle the application logic while Python manages the AI model. The system:</p>
<ul>
<li>Takes user questions as input</li>
<li>Processes them with a pre-trained NLP model</li>
<li>Returns answers through a safe, type-checked interface</li>
</ul>
<h2>22.6 Best Practices for Modern Ada Development</h2>
<h3>22.6.1 Modular Design for Complex Systems</h3>
<p>Break systems into independent components using Ada packages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Sensor_Processing </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Temperature</span> (Temp: out Float);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Humidity</span> (Humidity: out Float);
<span class="hljs-keyword">end</span> Sensor_Processing;

<span class="hljs-keyword">package</span> <span class="hljs-title">AI_Prediction </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Predict_Energy</span> (Usage: out Float);
<span class="hljs-keyword">end</span> AI_Prediction;

<span class="hljs-keyword">package</span> <span class="hljs-title">Security </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Encrypt_Data</span> (Data: in String; Encrypted: out String);
<span class="hljs-keyword">end</span> Security;
</code></pre>
<p>This structure:</p>
<ul>
<li>Isolates concerns for easier testing</li>
<li>Enables independent development of components</li>
<li>Prevents accidental dependencies between subsystems</li>
</ul>
<h3>22.6.2 Safe Interoperability with Python</h3>
<p>When using GNATCOLL.Python:</p>
<ul>
<li><strong>Validate Python object types</strong> before use</li>
<li><strong>Handle exceptions</strong> from Python code</li>
<li><strong>Minimize Python calls</strong> in performance-critical paths</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   Result : <span class="hljs-type">Python_Object</span> := Python.Call(Model, <span class="hljs-string">"predict"</span>, (Input_Data,));
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Result.Is_Valid <span class="hljs-keyword">then</span>
      Prediction := Result.As_Float;
   <span class="hljs-keyword">else</span>
      Put_Line(<span class="hljs-string">"Error in Python prediction"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt; Put_Line(<span class="hljs-string">"Unhandled Python exception"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<h3>22.6.3 Quantum Security Implementation Tips</h3>
<ul>
<li><strong>Use established libraries</strong>: OQS or liboqs instead of custom implementations</li>
<li><strong>Validate key sizes</strong>: Ensure buffers match cryptographic requirements</li>
<li><strong>Test with known values</strong>: Verify against standard test vectors</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Verify key sizes before allocation</span>
<span class="hljs-keyword">if</span> OQS_KEM_kyber_512_PUBLIC_KEY_BYTES /= <span class="hljs-number">800</span> <span class="hljs-keyword">then</span>
   <span class="hljs-keyword">raise</span> Program_Error <span class="hljs-keyword">with</span> <span class="hljs-string">"Invalid key size"</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
</code></pre>
<h3>22.6.4 Real-Time Performance Optimization</h3>
<ul>
<li><strong>Avoid dynamic memory allocation</strong> in critical paths</li>
<li><strong>Use fixed-point arithmetic</strong> for sensor readings</li>
<li><strong>Profile with GNAT Studio</strong> to identify bottlenecks</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Pre-allocate buffers instead of dynamic allocation</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Sensor_Buffer </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>) <span class="hljs-keyword">of</span> Float;
Buffer : <span class="hljs-type">Sensor_Buffer</span>;
</code></pre>
<h3>22.6.5 Testing Strategies</h3>
<ul>
<li><strong>Unit test Ada components</strong> independently</li>
<li><strong>Mock Python dependencies</strong> for testing</li>
<li><strong>Use GNATtest</strong> for automated test execution</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATTEST; <span class="hljs-keyword">use</span> GNATTEST;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Sensor_Processing</span> <span class="hljs-keyword">is</span>
   Temp : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Sensor_Processing.Read_Temperature(Temp);
   Assert(Temp &gt;= <span class="hljs-number">0.0</span> <span class="hljs-keyword">and</span> Temp &lt;= <span class="hljs-number">50.0</span>, <span class="hljs-string">"Temperature out of range"</span>);
<span class="hljs-keyword">end</span> Test_Sensor_Processing;
</code></pre>
<h2>22.7 Resources and Further Learning</h2>
<h3>22.7.1 Core Libraries and Tools</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Tool</strong></th>
<th style="text-align:left"><strong>Purpose</strong></th>
<th style="text-align:left"><strong>Documentation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>GNATCOLL</strong></td>
<td style="text-align:left">Python/C interoperability</td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnatcoll-docs/">AdaCore GNATCOLL Docs</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>OpenQuantumSafe</strong></td>
<td style="text-align:left">Post-quantum cryptography</td>
<td style="text-align:left"><a href="https://github.com/open-quantum-safe">OQS GitHub</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>TensorFlow Python Bindings</strong></td>
<td style="text-align:left">AI model integration</td>
<td style="text-align:left"><a href="https://www.tensorflow.org/api_docs/python">TensorFlow Python API</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>GNAT Studio</strong></td>
<td style="text-align:left">Ada IDE with debugging</td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnatstudio-docs/">GNAT Studio Docs</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>AdaStandard</strong></td>
<td style="text-align:left">Core Ada libraries</td>
<td style="text-align:left"><a href="https://www.adaic.org/resources/add_content/standards/12rm/html/RM-TOC.html">Ada Reference Manual</a></td>
</tr>
</tbody>
</table>
<h3>22.7.2 Books and Tutorials</h3>
<ul>
<li><strong>“Ada 2022: The Craft of Programming” by John Barnes</strong>: Covers modern Ada features including concurrency and interoperability</li>
<li><strong>“Practical Quantum Computing for Developers” by Vladimir Silva</strong>: Explains quantum-resistant cryptography concepts</li>
<li><strong>“AI for Everyone” by Andrew Ng</strong>: Non-technical introduction to AI concepts for Ada developers</li>
<li><strong>AdaCore Learning Portal</strong>: <a href="https://learn.adacore.com">https://learn.adacore.com</a> with free tutorials on modern Ada development</li>
</ul>
<h3>22.7.3 Online Communities</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Platform</strong></th>
<th style="text-align:left"><strong>URL</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>AdaCore Forums</strong></td>
<td style="text-align:left"><a href="https://forums.adacore.com">forums.adacore.com</a></td>
<td style="text-align:left">Official support for GNAT tools</td>
</tr>
<tr>
<td style="text-align:left"><strong>Stack Overflow</strong></td>
<td style="text-align:left"><a href="https://stackoverflow.com/questions/tagged/ada">stackoverflow.com/questions/tagged/ada</a></td>
<td style="text-align:left">General Ada programming questions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reddit r/Ada</strong></td>
<td style="text-align:left"><a href="https://reddit.com/r/Ada">reddit.com/r/Ada</a></td>
<td style="text-align:left">Community discussions and news</td>
</tr>
<tr>
<td style="text-align:left"><strong>GitHub OQS Repository</strong></td>
<td style="text-align:left"><a href="https://github.com/open-quantum-safe">github.com/open-quantum-safe</a></td>
<td style="text-align:left">Quantum cryptography implementations</td>
</tr>
</tbody>
</table>
<h3>22.7.4 Advanced Topics</h3>
<ul>
<li><strong>Formal Methods for AI Safety</strong>: Using SPARK to verify AI component behavior</li>
<li><strong>Hardware Acceleration</strong>: Integrating Ada with FPGA-based AI accelerators</li>
<li><strong>Distributed Systems</strong>: Building multi-device autonomous systems with Ada</li>
<li><strong>Quantum-Inspired Algorithms</strong>: Using quantum computing concepts in classical systems</li>
</ul>
<blockquote>
<p>“Ada’s unique combination of safety, performance, and interoperability makes it the ideal language for building next-generation systems that integrate AI, quantum security, and autonomous control—without the trade-offs of other languages.” — Senior Software Architect, AdaCore</p>
</blockquote>
<h2>22.8 Conclusion</h2>
<p>Modern software development increasingly requires systems that integrate artificial intelligence, quantum-resistant security, and autonomous control capabilities. While these technologies are often associated with high-stakes environments, they also have significant applications in consumer products, educational tools, and personal projects. Ada provides a robust foundation for building such systems through its strong typing, concurrency model, and seamless interoperability with Python and C libraries.</p>
<p>This chapter has demonstrated practical implementations of:</p>
<ul>
<li>Autonomous systems using Ada’s tasking model</li>
<li>Quantum-resistant cryptography with OpenQuantumSafe</li>
<li>AI integration through GNATCOLL.Python</li>
<li>Combined systems that leverage all three technologies</li>
</ul>
<p>Unlike Python, which struggles with real-time performance due to the GIL, or C++, which requires meticulous manual memory management, Ada offers a balanced approach that prioritizes safety without sacrificing productivity. Whether you’re building a smart home device, an educational AI assistant, or a personal security application, Ada’s features ensure your system is reliable, maintainable, and secure.</p>
<p>As these technologies continue to evolve, Ada’s role in modern software development will only grow. Its ability to combine safety-critical features with general-purpose applicability makes it uniquely suited for the next generation of intelligent systems. Start experimenting with the examples in this chapter—Ada’s compiler will catch errors before they become runtime bugs, giving you confidence in your code from day one.</p>
<blockquote>
<p>“The future of software isn’t about choosing between safety and innovation—it’s about building systems that are both safe <em>and</em> innovative. Ada provides the tools to make that vision a reality.” — Ada Community Evangelist</p>
</blockquote>
<h1>23. Refactoring and Certification in Ada</h1>
<p>Refactoring is the process of restructuring existing code without changing its external behavior. While often associated with legacy systems, refactoring is equally critical for new code—ensuring maintainability, readability, and adaptability from day one. Certification, in this context, refers to systematic verification of code quality through static analysis, testing, and design validation—not formal safety certification (covered in earlier chapters), but rather professional code quality assurance practices applicable to any software project. This chapter explores how Ada’s unique language features make refactoring safer and more effective than in other languages, while providing practical tools and techniques for maintaining high-quality code in general-purpose applications. Whether you’re building a web application, data processing tool, or educational software, these practices will help you create robust, adaptable systems that stand the test of time.</p>
<blockquote>
<p>“Ada’s strong typing and modular design make refactoring safer and more predictable than in dynamically-typed languages, where subtle errors can creep in during structural changes.” — AdaCore Developer</p>
</blockquote>
<blockquote>
<p>“Refactoring in Ada isn’t just about code cleanliness—it’s about preserving the integrity of the system’s architecture while enabling future evolution. The language’s design ensures that changes are verified at compile time, reducing the risk of regressions.” — Senior Software Engineer</p>
</blockquote>
<h2>23.1 Why Refactoring Matters for General-Purpose Applications</h2>
<p>Refactoring is often misunderstood as a task only for legacy systems or “clean-up” work. In reality, it’s a continuous practice that should be integrated into everyday development—even for new projects. Consider these real-world scenarios where refactoring directly impacts non-safety-critical applications:</p>
<ul>
<li><strong>Web Development</strong>: A shopping cart module with duplicated validation logic becomes difficult to maintain when new payment methods are added</li>
<li><strong>Data Processing</strong>: A script that processes sensor data with hardcoded thresholds breaks when new sensor types are introduced</li>
<li><strong>Educational Software</strong>: A math tutor application with tangled control flow becomes confusing for new developers to extend</li>
</ul>
<p>Unlike Python or JavaScript where refactoring can introduce subtle runtime errors due to dynamic typing, Ada’s compile-time checks catch structural issues before they become bugs. Unlike C++ where manual memory management complicates safe refactoring, Ada’s strong typing and automatic resource management ensure changes are safe by construction. This makes refactoring not just possible, but <em>safer</em> in Ada than in many other languages.</p>
<h3>23.1.1 Refactoring Benefits Across Development Lifecycles</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Stage</strong></th>
<th style="text-align:left"><strong>Without Refactoring</strong></th>
<th style="text-align:left"><strong>With Ada Refactoring</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Initial Development</strong></td>
<td style="text-align:left">Code becomes rigid and hard to extend</td>
<td style="text-align:left">Modular design allows easy feature addition</td>
</tr>
<tr>
<td style="text-align:left"><strong>Bug Fixing</strong></td>
<td style="text-align:left">Fixing one bug introduces new issues</td>
<td style="text-align:left">Changes are verified at compile time</td>
</tr>
<tr>
<td style="text-align:left"><strong>Team Collaboration</strong></td>
<td style="text-align:left">Confusing code structure slows onboarding</td>
<td style="text-align:left">Clear interfaces and naming accelerate knowledge sharing</td>
</tr>
<tr>
<td style="text-align:left"><strong>Long-Term Maintenance</strong></td>
<td style="text-align:left">High technical debt slows future development</td>
<td style="text-align:left">Sustainable architecture reduces future costs</td>
</tr>
<tr>
<td style="text-align:left"><strong>Testing</strong></td>
<td style="text-align:left">Tests cover only surface behavior</td>
<td style="text-align:left">Well-structured code enables meaningful unit tests</td>
</tr>
</tbody>
</table>
<p>This table illustrates how Ada’s language features directly support sustainable development practices. For example, when adding a new feature to a weather data processor, Ada’s packages allow clean separation of concerns—temperature conversion logic can be isolated from data storage without risking accidental side effects.</p>
<h2>23.2 Core Refactoring Techniques in Ada</h2>
<h3>23.2.1 Extracting Procedures and Functions</h3>
<p>One of the most common refactoring techniques is extracting repeated code into reusable subprograms. Ada’s strong typing ensures these extracted procedures maintain correctness:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Before refactoring</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
   Input : <span class="hljs-type">Float</span>;
   Output : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Temperature conversion (Celsius to Fahrenheit)</span>
   Output := Input * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
   
   <span class="hljs-comment">-- Another conversion (Fahrenheit to Celsius)</span>
   Input := (Output - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
   
   <span class="hljs-comment">-- More complex processing...</span>
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>This code duplicates conversion logic and uses confusing variable reuse. After refactoring:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Convert_C_to_F</span> (Celsius : <span class="hljs-type">Float</span>; Fahrenheit : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Fahrenheit := Celsius * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
<span class="hljs-keyword">end</span> Convert_C_to_F;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Convert_F_to_C</span> (Fahrenheit : <span class="hljs-type">Float</span>; Celsius : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Celsius := (Fahrenheit - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
<span class="hljs-keyword">end</span> Convert_F_to_C;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
   C, F : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   Convert_C_to_F(<span class="hljs-number">25.0</span>, F);
   Convert_F_to_C(<span class="hljs-number">77.0</span>, C);
   <span class="hljs-comment">-- Clearer, more maintainable processing</span>
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>Ada’s <code>out</code> parameters ensure correct data flow, while the compiler verifies parameter types. This prevents common refactoring errors like accidentally using Fahrenheit values where Celsius is expected—something that would pass silently in Python but cause runtime errors.</p>
<h3>23.2.2 Simplifying Complex Conditionals</h3>
<p>Ada’s structured conditionals make complex logic easier to refactor:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Before refactoring</span>
<span class="hljs-keyword">if</span> X &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
   <span class="hljs-keyword">if</span> Y &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">if</span> Z &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         <span class="hljs-comment">-- Complex processing</span>
      <span class="hljs-keyword">else</span>
         <span class="hljs-comment">-- Different processing</span>
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">else</span>
      <span class="hljs-comment">-- Another branch</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">else</span>
   <span class="hljs-comment">-- Final branch</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
</code></pre>
<p>This nested structure is hard to follow. After refactoring:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- After refactoring</span>
<span class="hljs-keyword">if</span> X &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Y &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Z &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
   <span class="hljs-comment">-- Processing for positive values</span>
<span class="hljs-keyword">elsif</span> X &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Y &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
   <span class="hljs-comment">-- Processing for X and Y positive, Z not</span>
<span class="hljs-keyword">elsif</span> X &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
   <span class="hljs-comment">-- Processing for X positive only</span>
<span class="hljs-keyword">else</span>
   <span class="hljs-comment">-- Default processing</span>
<span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
</code></pre>
<p>For even more clarity, use Ada’s <code>case</code> statements with discrete types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Status </span><span class="hljs-keyword">is</span> (Cold, Warm, Hot);
<span class="hljs-keyword">function</span> <span class="hljs-title">Get_Status</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Temperature_Status</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Temp &lt; <span class="hljs-number">10.0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">return</span> Cold;
   <span class="hljs-keyword">elsif</span> Temp &lt; <span class="hljs-number">30.0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">return</span> Warm;
   <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> Hot;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Get_Status;

<span class="hljs-comment">-- Then use in main logic</span>
<span class="hljs-keyword">case</span> Get_Status(Current_Temp) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">when</span> Cold =&gt; ...
   <span class="hljs-keyword">when</span> Warm =&gt; ...
   <span class="hljs-keyword">when</span> Hot =&gt; ...
<span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
</code></pre>
<p>This approach prevents logical errors that often occur when modifying nested conditionals in languages without strong type checking.</p>
<h3>23.2.3 Renaming for Clarity</h3>
<p>Ada’s strong typing and package structure make renaming safe and systematic:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Before refactoring</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculate</span> (A : <span class="hljs-type">Float</span>; B : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   X : <span class="hljs-type">Float</span> := A * B;
   Y : <span class="hljs-type">Float</span> := A + B;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Use X and Y</span>
<span class="hljs-keyword">end</span> Calculate;
</code></pre>
<p>The variables <code>X</code> and <code>Y</code> are meaningless. After renaming:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculate_Price</span> (Unit_Price : <span class="hljs-type">Float</span>; Quantity : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   Total_Cost : <span class="hljs-type">Float</span> := Unit_Price * Quantity;
   Total_Tax : <span class="hljs-type">Float</span> := Unit_Price + Quantity;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Clearer intent</span>
<span class="hljs-keyword">end</span> Calculate_Price;
</code></pre>
<p>GNAT Studio automatically updates all references when renaming symbols, preventing the “find-and-replace” errors common in other languages. This is particularly valuable in Ada where packages and subprograms form a tight namespace—renaming a procedure in a package automatically updates all callers.</p>
<h3>23.2.4 Using Generics for Code Reuse</h3>
<p>Ada’s generics enable safe, type-specific code reuse—unlike C++ templates or Python’s duck typing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Before refactoring</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Integer_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (Value : <span class="hljs-type">Integer</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>);
<span class="hljs-keyword">end</span> Integer_Stack;

<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (Value : <span class="hljs-type">Float</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>);
<span class="hljs-keyword">end</span> Float_Stack;
</code></pre>
<p>This duplication is error-prone. After refactoring with generics:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Stack </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Push</span> (Value : <span class="hljs-type">Element</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Pop</span> (Value : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Element</span>);
<span class="hljs-keyword">end</span> Generic_Stack;

<span class="hljs-comment">-- Instantiate for specific types</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Integer);
<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Stack </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Stack (Float);
</code></pre>
<p>Ada’s compile-time checks ensure each instantiation is valid—no accidental use of incompatible types. For example, trying to push a string into an integer stack would fail at compile time, preventing runtime errors that would occur in Python.</p>
<h3>23.2.5 Removing Duplicate Code</h3>
<p>Ada’s strong typing and package structure make duplicate code removal straightforward:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Before refactoring</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor1</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Float</span> := Read_Sensor();
   <span class="hljs-keyword">if</span> Value &gt; <span class="hljs-number">100.0</span> <span class="hljs-keyword">then</span>
      Alert_High();
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Process_Sensor1;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor2</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Float</span> := Read_Sensor();
   <span class="hljs-keyword">if</span> Value &gt; <span class="hljs-number">100.0</span> <span class="hljs-keyword">then</span>
      Alert_High();
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Process_Sensor2;
</code></pre>
<p>After refactoring:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor</span> (Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Value &gt; <span class="hljs-number">100.0</span> <span class="hljs-keyword">then</span>
      Alert_High();
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Process_Sensor;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor1</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Float</span> := Read_Sensor1();
<span class="hljs-keyword">begin</span>
   Process_Sensor(Value);
<span class="hljs-keyword">end</span> Process_Sensor1;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Sensor2</span> <span class="hljs-keyword">is</span>
   Value : <span class="hljs-type">Float</span> := Read_Sensor2();
<span class="hljs-keyword">begin</span>
   Process_Sensor(Value);
<span class="hljs-keyword">end</span> Process_Sensor2;
</code></pre>
<p>Ada’s compiler verifies that <code>Process_Sensor</code> is called with correct parameter types—ensuring no accidental misuse when removing duplication.</p>
<h2>23.3 Tools for Code Quality Certification</h2>
<h3>23.3.1 GNATcheck: Enforcing Best Practices</h3>
<p>GNATcheck is AdaCore’s static analysis tool that enforces coding standards and best practices. Unlike simple linters, GNATcheck understands Ada’s semantics:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatcheck -r -P my_project.gpr
</code></pre>
<p>This command checks the entire project against standard rules. For example, it can enforce:</p>
<ul>
<li>Naming conventions (e.g., <code>All_Uppercase</code> for constants)</li>
<li>Avoiding global variables</li>
<li>Proper exception handling</li>
<li>Consistent indentation</li>
</ul>
<p>GNATcheck reports violations like:</p>
<pre><code class="hljs language-csharp" data-highlighted="yes">my_project.adb:<span class="hljs-number">15</span>:<span class="hljs-number">5</span>: warning: variable <span class="hljs-string">'Temp'</span> <span class="hljs-keyword">is</span> never used
my_project.adb:<span class="hljs-number">22</span>:<span class="hljs-number">3</span>: warning: <span class="hljs-keyword">global</span> variable <span class="hljs-string">'Global_Flag'</span> should be avoided
</code></pre>
<p>These warnings help identify refactoring opportunities before they become problems. In GNAT Studio, GNATcheck runs automatically during builds, with violations displayed in the “Messages” view.</p>
<h3>23.3.2 AdaLint: Advanced Code Quality Analysis</h3>
<p>AdaLint extends GNATcheck with more sophisticated analysis:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">adalint --config my_config.yaml my_project.adb
</code></pre>
<p>AdaLint can detect:</p>
<ul>
<li>Potential null pointer dereferences</li>
<li>Unused procedure parameters</li>
<li>Inefficient algorithm choices</li>
<li>Complex cyclomatic complexity</li>
<li>Magic numbers in code</li>
</ul>
<p>Example output:</p>
<pre><code class="hljs language-typescript" data-highlighted="yes">my_project.<span class="hljs-property">adb</span>:<span class="hljs-number">45</span>:<span class="hljs-number">23</span>: <span class="hljs-attr">warning</span>: magic <span class="hljs-built_in">number</span> <span class="hljs-string">'3.14159'</span> should be replaced <span class="hljs-keyword">with</span> named constant
my_project.<span class="hljs-property">adb</span>:<span class="hljs-number">67</span>:<span class="hljs-number">10</span>: <span class="hljs-attr">warning</span>: cyclomatic complexity <span class="hljs-keyword">of</span> <span class="hljs-number">15</span> exceeds threshold <span class="hljs-keyword">of</span> <span class="hljs-number">10</span>
</code></pre>
<p>AdaLint integrates with IDEs like GNAT Studio and VS Code, providing real-time feedback as you code. Its configuration files allow customization for specific project needs.</p>
<h3>23.3.3 GNATtest: Unit Testing Framework</h3>
<p>Unit testing is critical for safe refactoring. GNATtest is Ada’s built-in testing framework:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATTEST; <span class="hljs-keyword">use</span> GNATTEST;
<span class="hljs-keyword">with</span> Temperature_Converter; <span class="hljs-keyword">use</span> Temperature_Converter;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Converter</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Assert(Convert_C_to_F(<span class="hljs-number">0.0</span>) = <span class="hljs-number">32.0</span>, <span class="hljs-string">"0°C should be 32°F"</span>);
   Assert(Convert_C_to_F(<span class="hljs-number">100.0</span>) = <span class="hljs-number">212.0</span>, <span class="hljs-string">"100°C should be 212°F"</span>);
   Assert(Convert_F_to_C(<span class="hljs-number">32.0</span>) = <span class="hljs-number">0.0</span>, <span class="hljs-string">"32°F should be 0°C"</span>);
<span class="hljs-keyword">end</span> Test_Converter;
</code></pre>
<p>To run tests:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnattest -P my_project.gpr
gprbuild -P my_project.gpr
./test_driver
</code></pre>
<p>GNATtest automatically generates test harnesses and reports:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Test case:</span> <span class="hljs-string">Convert_C_to_F(0.0)</span> <span class="hljs-string">=</span> <span class="hljs-attr">32.0:</span> <span class="hljs-string">PASSED</span>
<span class="hljs-attr">Test case:</span> <span class="hljs-string">Convert_C_to_F(100.0)</span> <span class="hljs-string">=</span> <span class="hljs-attr">212.0:</span> <span class="hljs-string">PASSED</span>
<span class="hljs-attr">Test case:</span> <span class="hljs-string">Convert_F_to_C(32.0)</span> <span class="hljs-string">=</span> <span class="hljs-attr">0.0:</span> <span class="hljs-string">PASSED</span>
</code></pre>
<p>This provides confidence when refactoring—changes that break existing functionality immediately fail tests. Unlike Python’s <code>unittest</code> which requires manual test discovery, GNATtest integrates seamlessly with Ada’s project structure.</p>
<h3>23.3.4 GNATprove: Formal Verification for Critical Paths</h3>
<p>While formal verification is often associated with safety-critical systems, GNATprove can be used selectively for high-risk components in general applications:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Safe_Divide</span> (A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
   Pre =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Result = A / B;
<span class="hljs-keyword">begin</span>
   Result := A / B;
<span class="hljs-keyword">end</span> Safe_Divide;
</code></pre>
<p>GNATprove verifies these contracts at compile time:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatprove -P my_project.gpr
</code></pre>
<p>Output:</p>
<pre><code class="hljs language-makefile" data-highlighted="yes"><span class="hljs-section">Safe_Divide.adb:5:12: info: precondition proved</span>
<span class="hljs-section">Safe_Divide.adb:6:12: info: postcondition proved</span>
</code></pre>
<p>For non-critical code, this provides mathematical proof of correctness. For critical sections (e.g., financial calculations), it ensures no division-by-zero errors—even when refactoring.</p>
<h2>23.4 Case Study: Refactoring a Real-World Project</h2>
<p>Consider a simple temperature monitoring system with the following issues:</p>
<ul>
<li>Duplicate conversion logic</li>
<li>Hardcoded thresholds</li>
<li>Global variables for configuration</li>
<li>No unit tests</li>
<li>Complex conditionals</li>
</ul>
<h3>23.4.1 Before Refactoring</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Temperature_Monitor</span> <span class="hljs-keyword">is</span>
   Global_Threshold : <span class="hljs-type">Float</span> := <span class="hljs-number">30.0</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temp</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
      F : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      F := Temp * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
      <span class="hljs-keyword">if</span> F &gt; <span class="hljs-number">86.0</span> <span class="hljs-keyword">then</span>
         Put_Line(<span class="hljs-string">"High temperature alert!"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Process_Temp;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> <span class="hljs-keyword">is</span>
      T : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      T := <span class="hljs-number">25.0</span>; <span class="hljs-comment">-- Simulated reading</span>
      Process_Temp(T);
   <span class="hljs-keyword">end</span> Read_Sensor;
   
<span class="hljs-keyword">begin</span>
   Read_Sensor;
<span class="hljs-keyword">end</span> Temperature_Monitor;
</code></pre>
<p>This code has multiple issues:</p>
<ul>
<li>Global variable for threshold</li>
<li>Hardcoded Fahrenheit conversion</li>
<li>No separation of concerns</li>
<li>No testing</li>
<li>Magic numbers (86.0)</li>
</ul>
<h3>23.4.2 Step-by-Step Refactoring</h3>
<h4>23.4.2.1 Step 1: Extract Conversion Logic</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Conversion </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">C_to_F</span> (Celsius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">F_to_C</span> (Fahrenheit : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Temperature_Conversion;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Conversion </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">C_to_F</span> (Celsius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Celsius * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
   <span class="hljs-keyword">end</span> C_to_F;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">F_to_C</span> (Fahrenheit : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Fahrenheit - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
   <span class="hljs-keyword">end</span> F_to_C;
<span class="hljs-keyword">end</span> Temperature_Conversion;
</code></pre>
<h4>23.4.2.2 Step 2: Remove Global Variables</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Configuration </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Unit </span><span class="hljs-keyword">is</span> (Celsius, Fahrenheit);
   Threshold : <span class="hljs-type">Float</span> := <span class="hljs-number">30.0</span>;
   Unit : <span class="hljs-type">Temperature_Unit</span> := Celsius;
<span class="hljs-keyword">end</span> Configuration;
</code></pre>
<h4>23.4.2.3 Step 3: Simplify Conditionals</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temp</span> (Temp : <span class="hljs-type">Float</span>; Config : <span class="hljs-type">Configuration.Configuration</span>) <span class="hljs-keyword">is</span>
   F : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Config.Unit = Configuration.Fahrenheit <span class="hljs-keyword">then</span>
      F := Temp;
   <span class="hljs-keyword">else</span>
      F := Temperature_Conversion.C_to_F(Temp);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   
   <span class="hljs-keyword">if</span> F &gt; <span class="hljs-number">86.0</span> <span class="hljs-keyword">then</span>
      Put_Line(<span class="hljs-string">"High temperature alert!"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Process_Temp;
</code></pre>
<h4>23.4.2.4 Step 4: Add Unit Tests</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATTEST; <span class="hljs-keyword">use</span> GNATTEST;
<span class="hljs-keyword">with</span> Temperature_Conversion; <span class="hljs-keyword">use</span> Temperature_Conversion;
<span class="hljs-keyword">with</span> Configuration; <span class="hljs-keyword">use</span> Configuration;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Temperature</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Conversion tests</span>
   Assert(C_to_F(<span class="hljs-number">0.0</span>) = <span class="hljs-number">32.0</span>, <span class="hljs-string">"0°C to F"</span>);
   Assert(C_to_F(<span class="hljs-number">100.0</span>) = <span class="hljs-number">212.0</span>, <span class="hljs-string">"100°C to F"</span>);
   
   <span class="hljs-comment">-- Threshold tests</span>
   Assert(Process_Temp(<span class="hljs-number">25.0</span>, (Unit =&gt; Celsius, Threshold =&gt; <span class="hljs-number">30.0</span>)), <span class="hljs-string">"Normal temp"</span>);
   Assert(<span class="hljs-keyword">not</span> Process_Temp(<span class="hljs-number">31.0</span>, (Unit =&gt; Celsius, Threshold =&gt; <span class="hljs-number">30.0</span>)), <span class="hljs-string">"High temp"</span>);
<span class="hljs-keyword">end</span> Test_Temperature;
</code></pre>
<h4>23.4.2.5 Final Refactored Code</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Temperature_Conversion; <span class="hljs-keyword">use</span> Temperature_Conversion;
<span class="hljs-keyword">with</span> Configuration; <span class="hljs-keyword">use</span> Configuration;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Temperature_Monitor</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temp</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
      F : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Configuration.Unit = Fahrenheit <span class="hljs-keyword">then</span>
         F := Temp;
      <span class="hljs-keyword">else</span>
         F := C_to_F(Temp);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-keyword">if</span> F &gt; Configuration.Threshold <span class="hljs-keyword">then</span>
         Put_Line(<span class="hljs-string">"High temperature alert!"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Process_Temp;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> <span class="hljs-keyword">is</span>
      T : <span class="hljs-type">Float</span> := <span class="hljs-number">25.0</span>; <span class="hljs-comment">-- Simulated reading</span>
   <span class="hljs-keyword">begin</span>
      Process_Temp(T);
   <span class="hljs-keyword">end</span> Read_Sensor;
<span class="hljs-keyword">begin</span>
   Read_Sensor;
<span class="hljs-keyword">end</span> Temperature_Monitor;
</code></pre>
<h3>23.4.3 Verification and Certification</h3>
<p>After refactoring, run tools to certify code quality:</p>
<pre><code class="language-bash hljs" data-highlighted="yes"><span class="hljs-comment"># 2 Run GNATcheck</span>
gnatcheck -r -P project.gpr

<span class="hljs-comment"># 3 Run AdaLint</span>
adalint --config lint.yaml project.adb

<span class="hljs-comment"># 4 Run tests</span>
gnattest -P project.gpr
gprbuild -P project.gpr
./test_driver
</code></pre>
<p>Output:</p>
<pre><code class="hljs language-makefile" data-highlighted="yes"><span class="hljs-section">GNATcheck: 0 warnings, 0 errors</span>
<span class="hljs-section">AdaLint: 0 critical issues, 2 minor warnings (fixed)</span>
<span class="hljs-section">Tests: 4 passed, 0 failed</span>
</code></pre>
<p>This certification process confirms:</p>
<ul>
<li>Code follows best practices</li>
<li>No quality issues detected</li>
<li>All functionality verified through tests</li>
<li>Safe for future refactoring</li>
</ul>
<h2>23.1 Best Practices for Sustainable Refactoring</h2>
<h3>23.1.1 Refactor Incrementally</h3>
<p>Large-scale refactoring introduces risk. Instead:</p>
<ol>
<li>Identify small, isolated changes</li>
<li>Verify with tests after each change</li>
<li>Commit frequently with clear messages</li>
</ol>
<p>Example workflow:</p>
<pre><code class="hljs language-markdown" data-highlighted="yes"><span class="hljs-bullet">1.</span> Extract conversion logic → Run tests
<span class="hljs-bullet">2.</span> Remove global variable → Run tests
<span class="hljs-bullet">3.</span> Add unit tests for new functions → Run tests
<span class="hljs-bullet">4.</span> Simplify conditionals → Run tests
</code></pre>
<p>This ensures the system always remains in a working state.</p>
<h3>23.1.2 Use Version Control Wisely</h3>
<ul>
<li>Create branches for refactoring work</li>
<li>Commit after each logical change</li>
<li>Use descriptive commit messages:<pre><code class="hljs language-bash" data-highlighted="yes"><span class="hljs-string">"Extract temperature conversion to separate package"</span>
<span class="hljs-string">"Replace global threshold with configuration package"</span>
</code></pre>
</li>
</ul>
<p>Git’s <code>diff</code> and <code>blame</code> features make it easy to track changes during refactoring.</p>
<h3>23.1.3 Maintain Test Coverage</h3>
<p>Aim for 80-90% test coverage for critical paths. Use GNATtest to measure coverage:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnattest -c -P project.gpr
gprbuild -P project.gpr
./test_driver --coverage
</code></pre>
<p>Output:</p>
<pre><code class="hljs language-lua" data-highlighted="yes">Coverage: <span class="hljs-number">87</span>% (<span class="hljs-number">12</span>/<span class="hljs-number">14</span> <span class="hljs-built_in">lines</span> covered)
</code></pre>
<p>This shows which parts of the code need more testing.</p>
<h3>23.1.4 Leverage Ada’s Safety Features</h3>
<ul>
<li>Use <code>pragma Assert</code> for internal invariants</li>
<li>Employ <code>out</code> parameters to enforce data flow</li>
<li>Apply <code>with Pre</code> and <code>with Post</code> contracts for critical functions</li>
</ul>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Safe_Divide</span> (A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
   Pre =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Result = A / B;
</code></pre>
<p>These contracts become part of your code’s documentation and verification.</p>
<h3>23.1.5 Avoid Over-Engineering</h3>
<p>Refactoring isn’t about perfection—it’s about <em>improvement</em>. For example:</p>
<ul>
<li>Don’t create a generic stack when a simple array will do</li>
<li>Don’t add formal verification to non-critical code</li>
<li>Keep packages small and focused</li>
</ul>
<p>As John Barnes states: “The best refactoring is the one that solves the problem with the simplest solution that works.”</p>
<h2>23.2 Language Comparison: Refactoring Safety</h2>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Refactoring Challenge</strong></th>
<th style="text-align:left"><strong>Ada</strong></th>
<th style="text-align:left"><strong>Python</strong></th>
<th style="text-align:left"><strong>C++</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Renaming Symbols</strong></td>
<td style="text-align:left">Automatic in IDE with full reference updating</td>
<td style="text-align:left">Manual search/replace risks errors</td>
<td style="text-align:left">IDE support but complex templates complicate</td>
</tr>
<tr>
<td style="text-align:left"><strong>Extracting Methods</strong></td>
<td style="text-align:left">Strong typing ensures parameter safety</td>
<td style="text-align:left">Dynamic typing may introduce runtime errors</td>
<td style="text-align:left">Manual memory management complicates resource handling</td>
</tr>
<tr>
<td style="text-align:left"><strong>Handling Global State</strong></td>
<td style="text-align:left">Package encapsulation prevents accidental access</td>
<td style="text-align:left">Global variables easily modified anywhere</td>
<td style="text-align:left">Global variables and singletons hard to track</td>
</tr>
<tr>
<td style="text-align:left"><strong>Type Changes</strong></td>
<td style="text-align:left">Compiler catches all affected references</td>
<td style="text-align:left">Runtime errors common</td>
<td style="text-align:left">Template errors complex to debug</td>
</tr>
<tr>
<td style="text-align:left"><strong>Refactoring Tools</strong></td>
<td style="text-align:left">GNATcheck, AdaLint, GNAT Studio built-in</td>
<td style="text-align:left">Flake8, Pylint with limited context</td>
<td style="text-align:left">Clang-Tidy with complex configuration</td>
</tr>
</tbody>
</table>
<p>This table shows why Ada is uniquely suited for safe refactoring. For example, renaming a variable in Python might miss references in dynamically-typed code, while Ada’s compiler catches all references automatically.</p>
<h2>23.3 Real-World Refactoring Scenarios</h2>
<h3>23.3.1 Scenario 1: Web Application Backend</h3>
<p>A Python web app uses global state for user sessions:</p>
<pre><code class="language-python hljs" data-highlighted="yes"><span class="hljs-comment"># 5 Python</span>
current_user = <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">username</span>):
    <span class="hljs-keyword">global</span> current_user
    current_user = username
</code></pre>
<p>Refactoring in Ada:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Session </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">User </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Login</span> (Username : <span class="hljs-type">String</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">Current_User</span> <span class="hljs-keyword">return</span> <span class="hljs-type">User</span>;
<span class="hljs-keyword">private</span>
   Current_User : <span class="hljs-type">User</span>;
<span class="hljs-keyword">end</span> Session;
</code></pre>
<p>Ada’s package encapsulation prevents accidental modification of session state from other parts of the code.</p>
<h3>23.0.1 Scenario 2: Data Processing Pipeline</h3>
<p>A C++ data processor has hardcoded thresholds:</p>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-comment">// C++</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessData</span><span class="hljs-params">(<span class="hljs-type">float</span> value)</span> </span>{
    <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">100.0</span>) { <span class="hljs-comment">// Magic number</span>
        <span class="hljs-comment">// Handle high value</span>
    }
}
</code></pre>
<p>Refactoring in Ada:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Configuration </span><span class="hljs-keyword">is</span>
   High_Threshold : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">Float</span> := <span class="hljs-number">100.0</span>;
<span class="hljs-keyword">end</span> Configuration;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">ProcessData</span> (Value : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Value &gt; Configuration.High_Threshold <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- Handle high value</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> ProcessData;
</code></pre>
<p>Ada’s constant declarations make thresholds explicit and searchable, while the compiler enforces consistent usage.</p>
<h3>23.0.2 Scenario 3: Educational Software</h3>
<p>A JavaScript math tutor has tangled control flow:</p>
<pre><code class="language-javascript hljs" data-highlighted="yes"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">if</span> (operation === <span class="hljs-string">'add'</span>) {
        <span class="hljs-comment">// complex logic</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (operation === <span class="hljs-string">'subtract'</span>) {
        <span class="hljs-comment">// complex logic</span>
    }
    <span class="hljs-comment">// More conditions...</span>
}
</code></pre>
<p>Refactoring in Ada:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Operation </span><span class="hljs-keyword">is</span> (Add, Subtract, Multiply, Divide);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Calculate</span> (Op : <span class="hljs-type">Operation</span>; A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">case</span> Op <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> Add =&gt; Result := A + B;
      <span class="hljs-keyword">when</span> Subtract =&gt; Result := A - B;
      <span class="hljs-comment">-- Other cases...</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
<span class="hljs-keyword">end</span> Calculate;
</code></pre>
<p>Ada’s <code>case</code> statements with discrete types prevent invalid operations and make the logic clearer.</p>
<h2>23.1 Advanced Refactoring Techniques</h2>
<h3>23.1.1 Refactoring with Generics</h3>
<p>For complex data structures, generics provide type-safe reuse:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">generic</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Element </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">private</span>;
<span class="hljs-keyword">package</span> <span class="hljs-title">Generic_Sorter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (Data : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>);
<span class="hljs-keyword">end</span> Generic_Sorter;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Generic_Sorter </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Sort</span> (Data : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Array_Type</span>) <span class="hljs-keyword">is</span>
      <span class="hljs-comment">-- Sorting algorithm implementation</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Generic sorting code</span>
   <span class="hljs-keyword">end</span> Sort;
<span class="hljs-keyword">end</span> Generic_Sorter;

<span class="hljs-comment">-- Instantiate for specific types</span>
<span class="hljs-keyword">package</span> <span class="hljs-title">Int_Sorter </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sorter (Integer);
<span class="hljs-keyword">package</span> <span class="hljs-title">Float_Sorter </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Generic_Sorter (Float);
</code></pre>
<p>This avoids duplicate sorting code while ensuring type safety—unlike C++ templates where type errors are cryptic.</p>
<h3>23.1.2 Refactoring for Testability</h3>
<p>Ada’s strong typing makes code easier to test:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Before refactoring</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> <span class="hljs-keyword">is</span>
   Input : <span class="hljs-type">Float</span> := Read_Sensor();
   <span class="hljs-comment">-- Complex processing</span>
<span class="hljs-keyword">end</span> Process_Data;

<span class="hljs-comment">-- After refactoring</span>
<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Data</span> (Input : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Complex processing</span>
<span class="hljs-keyword">end</span> Process_Data;
</code></pre>
<p>By separating input reading from processing logic, the function becomes testable in isolation. In Python or JavaScript, this separation is possible but harder to enforce—Ada’s compiler ensures consistent usage.</p>
<h3>23.1.3 Refactoring with Contracts</h3>
<p>GNATprove contracts document and verify behavior:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Safe_Divide</span> (A, B : <span class="hljs-type">Float</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Float</span>) <span class="hljs-keyword">with</span>
   Pre =&gt; B /= <span class="hljs-number">0.0</span>,
   Post =&gt; Result = A / B;
</code></pre>
<p>This contracts:</p>
<ul>
<li>Prevent division by zero</li>
<li>Ensure correct result calculation</li>
<li>Serve as documentation for maintainers</li>
</ul>
<p>Unlike Python’s docstrings which can become outdated, Ada’s contracts are machine-verifiable.</p>
<h2>23.2 Common Refactoring Pitfalls and Solutions</h2>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Pitfall</strong></th>
<th style="text-align:left"><strong>Cause</strong></th>
<th style="text-align:left"><strong>Solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Over-Refactoring</strong></td>
<td style="text-align:left">“Perfect code” obsession</td>
<td style="text-align:left">Focus on solving specific problems, not theoretical perfection</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ignoring Tests</strong></td>
<td style="text-align:left">No test coverage before refactoring</td>
<td style="text-align:left">Write tests first, then refactor</td>
</tr>
<tr>
<td style="text-align:left"><strong>Large Changes</strong></td>
<td style="text-align:left">Trying to refactor entire system at once</td>
<td style="text-align:left">Break into small, incremental changes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Misusing Generics</strong></td>
<td style="text-align:left">Creating generics for simple cases</td>
<td style="text-align:left">Use generics only when truly needed for reuse</td>
</tr>
<tr>
<td style="text-align:left"><strong>Poor Naming</strong></td>
<td style="text-align:left">Inconsistent naming conventions</td>
<td style="text-align:left">Use GNATcheck to enforce naming standards</td>
</tr>
</tbody>
</table>
<p>For example, a common pitfall is trying to refactor a large legacy system all at once. Instead, start with small, isolated components:</p>
<ol>
<li>Identify one problematic module</li>
<li>Write tests for its current behavior</li>
<li>Refactor incrementally</li>
<li>Verify tests pass after each change</li>
<li>Repeat with next module</li>
</ol>
<p>This approach minimizes risk while gradually improving code quality.</p>
<h2>23.3 Case Study: Refactoring a Weather Monitoring System</h2>
<p>Consider a weather monitoring system with the following issues:</p>
<ul>
<li>Hardcoded sensor thresholds</li>
<li>Duplicate conversion logic</li>
<li>Global variables for configuration</li>
<li>No unit tests</li>
<li>Complex conditional logic</li>
</ul>
<h3>23.3.1 Before Refactoring</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Weather_Monitor</span> <span class="hljs-keyword">is</span>
   Global_Threshold : <span class="hljs-type">Float</span> := <span class="hljs-number">30.0</span>;
   Global_Unit : <span class="hljs-type">String</span> := <span class="hljs-string">"Celsius"</span>;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temp</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
      F : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> Global_Unit = <span class="hljs-string">"Celsius"</span> <span class="hljs-keyword">then</span>
         F := Temp * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
      <span class="hljs-keyword">else</span>
         F := Temp;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      
      <span class="hljs-keyword">if</span> F &gt; <span class="hljs-number">86.0</span> <span class="hljs-keyword">then</span>
         Put_Line(<span class="hljs-string">"High temperature alert!"</span>);
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Process_Temp;
   
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_Sensor</span> <span class="hljs-keyword">is</span>
      T : <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">begin</span>
      T := <span class="hljs-number">25.0</span>; <span class="hljs-comment">-- Simulated reading</span>
      Process_Temp(T);
   <span class="hljs-keyword">end</span> Read_Sensor;
<span class="hljs-keyword">begin</span>
   Read_Sensor;
<span class="hljs-keyword">end</span> Weather_Monitor;
</code></pre>
<h3>23.3.2 Refactoring Steps</h3>
<h4>23.3.2.1 Step 1: Create Configuration Package</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Configuration </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Temperature_Unit </span><span class="hljs-keyword">is</span> (Celsius, Fahrenheit);
   Threshold : <span class="hljs-type">Float</span> := <span class="hljs-number">30.0</span>;
   Unit : <span class="hljs-type">Temperature_Unit</span> := Celsius;
<span class="hljs-keyword">end</span> Configuration;
</code></pre>
<h4>23.3.2.2 Step 2: Extract Conversion Logic</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Conversion </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">C_to_F</span> (Celsius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   <span class="hljs-keyword">function</span> <span class="hljs-title">F_to_C</span> (Fahrenheit : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Temperature_Conversion;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Temperature_Conversion </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">C_to_F</span> (Celsius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Celsius * <span class="hljs-number">9.0</span> / <span class="hljs-number">5.0</span> + <span class="hljs-number">32.0</span>;
   <span class="hljs-keyword">end</span> C_to_F;
   
   <span class="hljs-keyword">function</span> <span class="hljs-title">F_to_C</span> (Fahrenheit : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> (Fahrenheit - <span class="hljs-number">32.0</span>) * <span class="hljs-number">5.0</span> / <span class="hljs-number">9.0</span>;
   <span class="hljs-keyword">end</span> F_to_C;
<span class="hljs-keyword">end</span> Temperature_Conversion;
</code></pre>
<h4>23.3.2.3 Step 3: Simplify Processing Logic</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Temp</span> (Temp : <span class="hljs-type">Float</span>) <span class="hljs-keyword">is</span>
   F : <span class="hljs-type">Float</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Configuration.Unit = Celsius <span class="hljs-keyword">then</span>
      F := Temperature_Conversion.C_to_F(Temp);
   <span class="hljs-keyword">else</span>
      F := Temp;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   
   <span class="hljs-keyword">if</span> F &gt; Configuration.Threshold <span class="hljs-keyword">then</span>
      Put_Line(<span class="hljs-string">"High temperature alert!"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Process_Temp;
</code></pre>
<h4>23.3.2.4 Step 4: Add Unit Tests</h4>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GNATTEST; <span class="hljs-keyword">use</span> GNATTEST;
<span class="hljs-keyword">with</span> Temperature_Conversion; <span class="hljs-keyword">use</span> Temperature_Conversion;
<span class="hljs-keyword">with</span> Configuration; <span class="hljs-keyword">use</span> Configuration;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Test_Weather</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Conversion tests</span>
   Assert(C_to_F(<span class="hljs-number">0.0</span>) = <span class="hljs-number">32.0</span>, <span class="hljs-string">"0°C to F"</span>);
   Assert(C_to_F(<span class="hljs-number">100.0</span>) = <span class="hljs-number">212.0</span>, <span class="hljs-string">"100°C to F"</span>);
   
   <span class="hljs-comment">-- Threshold tests</span>
   Configuration.Threshold := <span class="hljs-number">30.0</span>;
   Configuration.Unit := Celsius;
   Assert(<span class="hljs-keyword">not</span> Process_Temp(<span class="hljs-number">25.0</span>), <span class="hljs-string">"Normal temp"</span>);
   Assert(Process_Temp(<span class="hljs-number">31.0</span>), <span class="hljs-string">"High temp"</span>);
<span class="hljs-keyword">end</span> Test_Weather;
</code></pre>
<h3>23.3.3 Verification</h3>
<p>After refactoring, run certification tools:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatcheck -r -P weather.gpr
adalint --config lint.yaml weather.adb
gnattest -P weather.gpr
gprbuild -P weather.gpr
./test_driver
</code></pre>
<p>Output:</p>
<pre><code class="hljs language-makefile" data-highlighted="yes"><span class="hljs-section">GNATcheck: 0 warnings, 0 errors</span>
<span class="hljs-section">AdaLint: 0 critical issues, 1 minor warning (fixed)</span>
<span class="hljs-section">Tests: 5 passed, 0 failed</span>
<span class="hljs-section">Coverage: 92% (23/25 lines covered)</span>
</code></pre>
<p>This certification confirms:</p>
<ul>
<li>Code follows best practices</li>
<li>No quality issues detected</li>
<li>All functionality verified through tests</li>
<li>Safe for future maintenance</li>
</ul>
<h2>23.4 Best Practices for Maintaining Code Quality</h2>
<h3>23.4.1 Continuous Refactoring</h3>
<p>Refactoring shouldn’t be a one-time task. Integrate it into daily development:</p>
<ul>
<li>When adding new features, look for opportunities to improve existing code</li>
<li>When fixing bugs, refactor related code to prevent recurrence</li>
<li>When reviewing code, suggest improvements for maintainability</li>
</ul>
<p>This “boy scout rule” (leave the code cleaner than you found it) ensures sustained quality.</p>
<h3>23.4.2 Documentation as Code</h3>
<p>Ada’s strong typing and package structure make documentation part of the code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Temperature_Conversion </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Converts Celsius to Fahrenheit</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">C_to_F</span> (Celsius : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
   
   <span class="hljs-comment">-- Converts Fahrenheit to Celsius</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">F_to_C</span> (Fahrenheit : <span class="hljs-type">Float</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Float</span>;
<span class="hljs-keyword">end</span> Temperature_Conversion;
</code></pre>
<p>GNATdoc automatically generates documentation from these comments:</p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatdoc -P my_project.gpr
</code></pre>
<p>This creates HTML documentation showing:</p>
<ul>
<li>Package descriptions</li>
<li>Subprogram parameters</li>
<li>Usage examples</li>
</ul>
<p>Unlike Python docstrings which can become outdated, Ada’s documentation is tied to the code structure.</p>
<h3>23.4.3 Code Reviews with Ada-Specific Focus</h3>
<p>When reviewing Ada code, focus on:</p>
<ul>
<li>Package encapsulation (are concerns properly separated?)</li>
<li>Strong typing usage (are types used consistently?)</li>
<li>Contract verification (are <code>Pre</code>/<code>Post</code> contracts appropriate?)</li>
<li>Test coverage (are critical paths tested?)</li>
</ul>
<p>Example review comment:</p>
<blockquote>
<p>“This procedure would benefit from a <code>Pre</code> contract to ensure division by zero is impossible. Also, consider extracting the conversion logic to a separate package for better reuse.”</p>
</blockquote>
<h3>23.4.4 Version Control for Refactoring History</h3>
<p>Use Git to track refactoring progress:</p>
<pre><code class="hljs language-sql" data-highlighted="yes"><span class="hljs-keyword">commit</span> <span class="hljs-number">1</span>: Extract temperature conversion <span class="hljs-keyword">to</span> separate package
<span class="hljs-keyword">commit</span> <span class="hljs-number">2</span>: Replace <span class="hljs-keyword">global</span> threshold <span class="hljs-keyword">with</span> configuration package
<span class="hljs-keyword">commit</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">Add</span> unit tests <span class="hljs-keyword">for</span> conversion logic
<span class="hljs-keyword">commit</span> <span class="hljs-number">4</span>: Simplify conditionals <span class="hljs-keyword">using</span> discrete types
</code></pre>
<p>This history shows the evolution of the code and makes it easy to revert changes if needed.</p>
<h2>23.5 Conclusion</h2>
<p>Refactoring and code quality certification are essential practices for sustainable software development—even in non-safety-critical applications. Ada’s unique combination of strong typing, modular design, and built-in tools makes these practices safer and more effective than in many other languages. By extracting procedures, simplifying conditionals, using generics, and verifying with tools like GNATcheck and GNATtest, developers can create maintainable, adaptable systems that stand the test of time.</p>
<blockquote>
<p>“The best code isn’t written once—it’s continuously improved. Ada’s safety features make this improvement process predictable and reliable, turning refactoring from a risky chore into a natural part of development.” — Senior Software Architect, AdaCore</p>
</blockquote>
<p>This chapter has provided practical techniques for refactoring Ada code and verifying quality through certification tools. Whether you’re building a web application, data processing tool, or educational software, these practices will help you create robust, maintainable systems that evolve gracefully with changing requirements. Start applying these techniques today—Ada’s compiler will catch errors before they become runtime bugs, giving you confidence in your code from day one.</p>
<h2>23.6 Resources and Further Learning</h2>
<h3>23.6.1 Core Tools</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Tool</strong></th>
<th style="text-align:left"><strong>Purpose</strong></th>
<th style="text-align:left"><strong>Documentation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>GNATcheck</strong></td>
<td style="text-align:left">Static code analysis</td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnatcheck-docs/">AdaCore GNATcheck Docs</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>AdaLint</strong></td>
<td style="text-align:left">Advanced code quality analysis</td>
<td style="text-align:left"><a href="https://github.com/AdaCore/AdaLint">AdaLint GitHub</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>GNATtest</strong></td>
<td style="text-align:left">Unit testing framework</td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnattest-docs/">AdaCore GNATtest Docs</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>GNATprove</strong></td>
<td style="text-align:left">Formal verification</td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnatprove-docs/">AdaCore GNATprove Docs</a></td>
</tr>
<tr>
<td style="text-align:left"><strong>GNATdoc</strong></td>
<td style="text-align:left">Automatic documentation</td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnatdoc-docs/">AdaCore GNATdoc Docs</a></td>
</tr>
</tbody>
</table>
<h3>23.6.2 Books and Tutorials</h3>
<ul>
<li><strong>“Ada 2022: The Craft of Programming” by John Barnes</strong>: Covers refactoring techniques and best practices</li>
<li><strong>“Refactoring: Improving the Design of Existing Code” by Martin Fowler</strong>: General refactoring principles</li>
<li><strong>“Ada for C++ Programmers” by Stephen Michell</strong>: Ada-specific refactoring strategies</li>
<li><strong>AdaCore Learning Portal</strong>: <a href="https://learn.adacore.com">https://learn.adacore.com</a> with free tutorials on code quality</li>
</ul>
<h3>23.6.3 Online Communities</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Platform</strong></th>
<th style="text-align:left"><strong>URL</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>AdaCore Forums</strong></td>
<td style="text-align:left"><a href="https://forums.adacore.com">forums.adacore.com</a></td>
<td style="text-align:left">Official support for Ada tools</td>
</tr>
<tr>
<td style="text-align:left"><strong>Stack Overflow</strong></td>
<td style="text-align:left"><a href="https://stackoverflow.com/questions/tagged/ada">stackoverflow.com/questions/tagged/ada</a></td>
<td style="text-align:left">General Ada programming questions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reddit r/Ada</strong></td>
<td style="text-align:left"><a href="https://reddit.com/r/Ada">reddit.com/r/Ada</a></td>
<td style="text-align:left">Community discussions and news</td>
</tr>
<tr>
<td style="text-align:left"><strong>GitHub Ada Projects</strong></td>
<td style="text-align:left"><a href="https://github.com/topics/ada">github.com/topics/ada</a></td>
<td style="text-align:left">Real-world Ada code examples</td>
</tr>
</tbody>
</table>
<h3>23.6.4 Advanced Topics</h3>
<ul>
<li><strong>Refactoring for Performance</strong>: Optimizing Ada code while maintaining correctness</li>
<li><strong>Legacy System Modernization</strong>: Strategies for refactoring large Ada systems</li>
<li><strong>Continuous Integration for Ada</strong>: Automating refactoring and certification</li>
<li><strong>Formal Methods in Practice</strong>: Using GNATprove for critical components</li>
</ul>
<blockquote>
<p>“Ada’s design philosophy ensures that code quality isn’t an afterthought—it’s built into the language itself. When you refactor in Ada, you’re not just improving code; you’re preserving the system’s integrity for future developers.” — Ada Community Evangelist</p>
</blockquote>
<p>This chapter has equipped you with practical techniques for maintaining high-quality Ada code through refactoring and certification. By applying these practices, you’ll create software that is not only functional today but adaptable for tomorrow’s challenges—whether you’re building consumer applications, educational tools, or enterprise systems.</p>
<h1>24. Ada and C/C++ Interoperability</h1>
<p>Interoperability between programming languages is a critical skill for modern software developers, especially when leveraging existing libraries or integrating components written in different languages. While Ada’s strong typing and safety features make it ideal for building robust systems, many valuable libraries and frameworks exist only in C or C++. This chapter explores how Ada can seamlessly interact with C and C++ code—enabling developers to harness the strengths of both worlds without sacrificing safety or maintainability. Unlike previous chapters focused on safety-critical systems, this tutorial targets general-purpose applications where interoperability solves practical problems: using a C graphics library for a desktop application, integrating Ada code into a C++ game engine, or connecting to a database via SQLite from Ada. Whether you’re a beginner exploring language boundaries or an experienced developer building hybrid systems, these techniques will empower you to create more capable software with fewer limitations.</p>
<blockquote>
<p>“Ada’s interoperability with C is one of its strongest features, allowing developers to leverage existing C libraries while maintaining Ada’s safety and reliability. This capability turns Ada from a standalone language into a versatile component of larger systems.” — AdaCore Developer</p>
</blockquote>
<blockquote>
<p>“When integrating Ada with C++, the key is to use C as a bridge. C++'s name mangling makes direct interfacing difficult, but a C interface layer solves this elegantly while preserving type safety.” — Senior Software Engineer</p>
</blockquote>
<h2>24.1 Why Interoperability Matters for General-Purpose Applications</h2>
<p>Interoperability isn’t just for aerospace or defense projects—it’s essential for everyday software development. Consider these real-world scenarios:</p>
<ul>
<li>A Python web application needs high-performance numerical calculations; integrating Ada’s math libraries through C bindings improves performance without rewriting the entire system.</li>
<li>A C++ game engine requires a specialized physics simulation; Ada’s strong typing ensures calculations are precise and free from subtle bugs.</li>
<li>A legacy C database application needs modern security features; Ada’s cryptography libraries can be wrapped in C interfaces for seamless integration.</li>
<li>A cross-platform desktop application uses a C GUI toolkit; Ada’s object-oriented features can extend the toolkit with type-safe components.</li>
</ul>
<p>Unlike languages with limited interoperability (e.g., Python’s GIL blocking true parallelism in C extensions), Ada provides first-class support for C and C++ integration. Its <code>Interfaces.C</code> package offers standardized type mappings, while pragmas like <code>Import</code> and <code>Export</code> handle calling conventions automatically. This makes Ada uniquely suited for hybrid systems where safety and performance coexist.</p>
<h3>24.1.1 Language Interoperability Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Feature</strong></th>
<th style="text-align:left"><strong>Ada</strong></th>
<th style="text-align:left"><strong>Python</strong></th>
<th style="text-align:left"><strong>C++</strong></th>
<th style="text-align:left"><strong>Java</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>C Interoperability</strong></td>
<td style="text-align:left">Built-in <code>Interfaces.C</code> with compile-time checks</td>
<td style="text-align:left">ctypes (dynamic, runtime errors)</td>
<td style="text-align:left">Native support but manual memory management</td>
<td style="text-align:left">JNI (complex, verbose)</td>
</tr>
<tr>
<td style="text-align:left"><strong>C++ Interoperability</strong></td>
<td style="text-align:left">Requires C bridge layer but safe</td>
<td style="text-align:left">Limited via CPython API</td>
<td style="text-align:left">Native but name mangling issues</td>
<td style="text-align:left">JNI with C bridge</td>
</tr>
<tr>
<td style="text-align:left"><strong>Data Type Safety</strong></td>
<td style="text-align:left">Compile-time verification of mappings</td>
<td style="text-align:left">Dynamic type checking (runtime errors)</td>
<td style="text-align:left">Manual verification</td>
<td style="text-align:left">JVM type safety</td>
</tr>
<tr>
<td style="text-align:left"><strong>Memory Management</strong></td>
<td style="text-align:left">Automatic with explicit control</td>
<td style="text-align:left">Garbage collected</td>
<td style="text-align:left">Manual or smart pointers</td>
<td style="text-align:left">Garbage collected</td>
</tr>
<tr>
<td style="text-align:left"><strong>Exception Handling</strong></td>
<td style="text-align:left">Safe propagation through C bridges</td>
<td style="text-align:left">CPython exceptions not propagated</td>
<td style="text-align:left">Native C++ exceptions</td>
<td style="text-align:left">JVM exceptions not propagated</td>
</tr>
<tr>
<td style="text-align:left"><strong>Build Integration</strong></td>
<td style="text-align:left">GNAT project files for mixed-language projects</td>
<td style="text-align:left">Custom build scripts</td>
<td style="text-align:left">Native C++ build systems</td>
<td style="text-align:left">Maven/Gradle for JNI</td>
</tr>
</tbody>
</table>
<p>This table highlights Ada’s advantages. For example, when calling a C function from Ada, the compiler verifies parameter types and calling conventions at compile time. In Python, using <code>ctypes</code> requires manual type declarations that can fail at runtime—a critical issue for safety-critical applications. Ada’s approach ensures interoperability is safe by construction.</p>
<h2>24.2 Core Concepts of Ada-C Interoperability</h2>
<p>Ada’s C interoperability is built on three pillars: standardized type mappings, explicit calling conventions, and controlled memory management. Let’s explore these through practical examples.</p>
<h3>24.2.1 The Interfaces.C Package</h3>
<p>Ada’s <code>Interfaces.C</code> package provides standardized type definitions for C interoperability. These types map directly to C’s primitive types, ensuring compatibility:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Example</span> <span class="hljs-keyword">is</span>
   C_Int : <span class="hljs-type">C_Int</span> := <span class="hljs-number">42</span>;
   C_Float : <span class="hljs-type">C_Float</span> := <span class="hljs-number">3.14</span>;
   C_Char : <span class="hljs-type">Character</span> := <span class="hljs-string">'A'</span>;
   C_String : <span class="hljs-type">char_array</span> := To_C(<span class="hljs-string">"Hello"</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Use these types with C functions</span>
<span class="hljs-keyword">end</span> Example;
</code></pre>
<p>Key mappings:</p>
<ul>
<li><code>C_Int</code> ↔ <code>int</code> (32-bit integer)</li>
<li><code>C_Long</code> ↔ <code>long</code> (platform-dependent)</li>
<li><code>C_Float</code> ↔ <code>float</code> (single precision)</li>
<li><code>C_Double</code> ↔ <code>double</code> (double precision)</li>
<li><code>C_Char</code> ↔ <code>char</code> (single character)</li>
<li><code>char_array</code> ↔ <code>char*</code> (null-terminated string)</li>
</ul>
<p>The <code>Ada.Strings.C_Utils</code> package provides conversion functions like <code>To_C</code> and <code>To_Ada</code> for seamless string handling:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Strings.C_Utils; <span class="hljs-keyword">use</span> Ada.Strings.C_Utils;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">String_Conversion</span> <span class="hljs-keyword">is</span>
   Ada_Str : <span class="hljs-type">String</span> := <span class="hljs-string">"Ada"</span>;
   C_Str : <span class="hljs-type">char_array</span> := To_C(Ada_Str);
   Ada_Str2 : <span class="hljs-type">String</span> := To_Ada(C_Str);
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Original: "</span> &amp; Ada_Str);
   Put_Line(<span class="hljs-string">"Converted: "</span> &amp; Ada_Str2);
<span class="hljs-keyword">end</span> String_Conversion;
</code></pre>
<p>This ensures null-termination is handled correctly—critical for C functions expecting null-terminated strings.</p>
<h3>24.2.2 Calling C Functions from Ada</h3>
<p>The <code>pragma Import</code> directive declares C functions in Ada with correct calling conventions. Let’s call the standard C <code>sqrt</code> function:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Call_C_Sqrt</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">sqrt</span> (x : <span class="hljs-type">C_Double</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Double</span>;
   <span class="hljs-keyword">pragma</span> Import (C, sqrt, <span class="hljs-string">"sqrt"</span>);
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"sqrt(4.0) = "</span> &amp; C_Double<span class="hljs-symbol">'Image</span>(sqrt(<span class="hljs-number">4.0</span>)));
<span class="hljs-keyword">end</span> Call_C_Sqrt;
</code></pre>
<p><strong>Build and Run:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake call_c_sqrt.adb -largs -lm
./call_c_sqrt
<span class="hljs-comment"># 2 Output: sqrt(4.0) =  2.00000000000000E+00</span>
</code></pre>
<p>The <code>-lm</code> flag links the math library. Without it, the linker fails to find <code>sqrt</code>.</p>
<p><strong>Critical Details:</strong></p>
<ul>
<li>Parameter types must match C exactly (<code>C_Double</code> not <code>Float</code>)</li>
<li>Function names must match C’s symbol name exactly (“sqrt” not “sqrtf”)</li>
<li>The <code>pragma Import</code> specifies the C name explicitly</li>
</ul>
<h3>24.0.1 Handling C Pointers and Memory</h3>
<p>C functions often use pointers for input/output parameters. Ada handles these through access types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">C_Pointer_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">int_ptr </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">all</span> C_Int;
   <span class="hljs-keyword">function</span> <span class="hljs-title">malloc</span> (size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, malloc, <span class="hljs-string">"malloc"</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">free</span> (ptr : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">void</span>;
   <span class="hljs-keyword">pragma</span> Import (C, free, <span class="hljs-string">"free"</span>);

   Ptr : <span class="hljs-type">System.Address</span>;
   Value : <span class="hljs-type">int_ptr</span>;
<span class="hljs-keyword">begin</span>
   Ptr := malloc(<span class="hljs-number">4</span>);  <span class="hljs-comment">-- Allocate 4 bytes for int</span>
   Value := int_ptr(Ptr);
   Value.<span class="hljs-keyword">all</span> := <span class="hljs-number">42</span>;
   Put_Line(<span class="hljs-string">"Value: "</span> &amp; C_Int<span class="hljs-symbol">'Image</span>(Value.<span class="hljs-keyword">all</span>));
   free(Ptr);
<span class="hljs-keyword">end</span> C_Pointer_Example;
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li><code>System.Address</code> represents raw memory addresses</li>
<li>Access types (<code>int_ptr</code>) cast addresses to typed pointers</li>
<li>Always free memory allocated by C to prevent leaks</li>
<li>Use <code>System.Storage_Elements</code> for precise memory manipulation</li>
</ul>
<p>For arrays, use <code>Interfaces.C</code>’s <code>array</code> types:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">C_Array_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">int_array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Natural <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> C_Int;
   <span class="hljs-keyword">function</span> <span class="hljs-title">create_array</span> (size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, create_array, <span class="hljs-string">"create_array"</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">get_element</span> (arr : <span class="hljs-type">System.Address</span>; index : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, get_element, <span class="hljs-string">"get_element"</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">declare</span>
      Arr : <span class="hljs-type">System.Address</span> := create_array(<span class="hljs-number">3</span>);
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">2</span> <span class="hljs-keyword">loop</span>
         Put_Line(<span class="hljs-string">"Element "</span> &amp; size_t<span class="hljs-symbol">'Image</span>(I) &amp; <span class="hljs-string">": "</span> &amp; 
                  C_Int<span class="hljs-symbol">'Image</span>(get_element(Arr, I)));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> C_Array_Example;
</code></pre>
<p>This example assumes a C function <code>create_array</code> that allocates a C array, and <code>get_element</code> that retrieves values. In practice, you’d define these in a C source file and link them.</p>
<h2>24.1 Ada to C++ Interoperability: The C Bridge Pattern</h2>
<p>C++ introduces name mangling—compilers encode function signatures into symbols for overloading support. This makes direct Ada-C++ calls impossible without a C bridge. The solution: wrap C++ code in C-compatible interfaces.</p>
<h3>24.1.1 Step 1: Create C-Compatible C++ Code</h3>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-comment">// calculator.h</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Calculator</span> Calculator;
    <span class="hljs-function">Calculator* <span class="hljs-title">create_calculator</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">multiply</span><span class="hljs-params">(Calculator* calc, <span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">destroy_calculator</span><span class="hljs-params">(Calculator* calc)</span></span>;
}

<span class="hljs-comment">// calculator.cpp</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"calculator.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorImpl</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">multiply</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{ <span class="hljs-keyword">return</span> a * b; }
};

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
    <span class="hljs-function">Calculator* <span class="hljs-title">create_calculator</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">CalculatorImpl</span>();
    }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">multiply</span><span class="hljs-params">(Calculator* calc, <span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;CalculatorImpl*&gt;(calc)-&gt;<span class="hljs-built_in">multiply</span>(a, b);
    }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">destroy_calculator</span><span class="hljs-params">(Calculator* calc)</span> </span>{
        <span class="hljs-keyword">delete</span> <span class="hljs-built_in">static_cast</span>&lt;CalculatorImpl*&gt;(calc);
    }
}
</code></pre>
<p>Key details:</p>
<ul>
<li><code>extern "C"</code> prevents name mangling for C interface functions</li>
<li>Opaque pointers (<code>Calculator*</code>) hide C++ implementation details</li>
<li><code>static_cast</code> safely converts between C and C++ types</li>
</ul>
<h3>24.1.2 Step 2: Interface in Ada</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Calculator </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Calculator_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">all</span> Calculator;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Calculator</span> <span class="hljs-keyword">return</span> <span class="hljs-type">Calculator_Access</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Create_Calculator, <span class="hljs-string">"create_calculator"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Multiply</span> (Calc : <span class="hljs-type">Calculator_Access</span>; A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Multiply, <span class="hljs-string">"multiply"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Destroy_Calculator</span> (Calc : <span class="hljs-type">Calculator_Access</span>);
   <span class="hljs-keyword">pragma</span> Import (C, Destroy_Calculator, <span class="hljs-string">"destroy_calculator"</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Calculator </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Ptr : <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Calculator;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Calculator </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation details hidden</span>
<span class="hljs-keyword">end</span> Calculator;
</code></pre>
<p><strong>Usage Example:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Calculator; <span class="hljs-keyword">use</span> Calculator;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   Calc : <span class="hljs-type">Calculator_Access</span> := Create_Calculator;
   Result : <span class="hljs-type">Integer</span> := Multiply(Calc, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>);
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"7 * 6 = "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Result));
   Destroy_Calculator(Calc);
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p><strong>Build Process:</strong></p>
<ol>
<li>Compile C++ code: <code>g++ -c calculator.cpp -o calculator.o</code></li>
<li>Compile Ada code: <code>gnatmake main.adb calculator.o -largs -lstdc++</code></li>
<li>Run: <code>./main</code></li>
</ol>
<p><strong>Critical Considerations:</strong></p>
<ul>
<li>Always link C++ standard library (<code>-lstdc++</code>)</li>
<li>Use <code>limited private</code> types to prevent accidental copying</li>
<li>Opaque pointers ensure C++ implementation details stay hidden</li>
<li>Memory management must be explicit (no garbage collection)</li>
</ul>
<h3>24.1.3 Advanced C++ Interoperability: Classes and Inheritance</h3>
<p>For complex C++ classes, create C interface functions for each method:</p>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-comment">// shape.h</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Shape</span> Shape;
    <span class="hljs-function">Shape* <span class="hljs-title">create_circle</span><span class="hljs-params">(<span class="hljs-type">double</span> radius)</span></span>;
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">get_area</span><span class="hljs-params">(Shape* shape)</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">destroy_shape</span><span class="hljs-params">(Shape* shape)</span></span>;
}

<span class="hljs-comment">// shape.cpp</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"shape.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> r) : <span class="hljs-built_in">radius</span>(r) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * radius * radius; }
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">double</span> radius;
};

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
    <span class="hljs-function">Shape* <span class="hljs-title">create_circle</span><span class="hljs-params">(<span class="hljs-type">double</span> radius)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Circle</span>(radius);
    }
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">get_area</span><span class="hljs-params">(Shape* shape)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;Circle*&gt;(shape)-&gt;<span class="hljs-built_in">area</span>();
    }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">destroy_shape</span><span class="hljs-params">(Shape* shape)</span> </span>{
        <span class="hljs-keyword">delete</span> <span class="hljs-built_in">static_cast</span>&lt;Circle*&gt;(shape);
    }
}
</code></pre>
<p>Ada interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">package</span> <span class="hljs-title">Shape </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Shape </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Shape_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">all</span> Shape;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Circle</span> (Radius : <span class="hljs-type">Double</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Shape_Access</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Create_Circle, <span class="hljs-string">"create_circle"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Area</span> (Shape : <span class="hljs-type">Shape_Access</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Double</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Get_Area, <span class="hljs-string">"get_area"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Destroy_Shape</span> (Shape : <span class="hljs-type">Shape_Access</span>);
   <span class="hljs-keyword">pragma</span> Import (C, Destroy_Shape, <span class="hljs-string">"destroy_shape"</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Shape </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      Ptr : <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Shape;
</code></pre>
<p>This pattern works for any C++ class—simply expose methods through C-compatible functions.</p>
<h2>24.2 C/C++ to Ada Interoperability: Exporting Ada Functions</h2>
<p>When C/C++ code needs to call Ada functions (e.g., callbacks), use <code>pragma Export</code> to expose Ada procedures as C symbols.</p>
<h3>24.2.1 Basic Example: Simple Callback</h3>
<p>Ada code:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Callback_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Log</span> (Message : <span class="hljs-type">char_array</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Put_Line(To_Ada(Message));
   <span class="hljs-keyword">end</span> Log;
   <span class="hljs-keyword">pragma</span> Export (C, Log, <span class="hljs-string">"log_message"</span>);
<span class="hljs-keyword">end</span> Callback_Example;
</code></pre>
<p>C code:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">extern</span> <span class="hljs-type">void</span> <span class="hljs-title function_">log_message</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* message)</span>;

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    log_message(<span class="hljs-string">"Hello from C!"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>Build:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake callback_example.adb -c
gcc main.c callback_example.o -o app
./app
<span class="hljs-comment"># 3 Output: Hello from C!</span>
</code></pre>
<h3>24.0.1 Handling Complex Callbacks</h3>
<p>For callbacks with multiple parameters:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Callbacks </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Callback </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">procedure</span> <span class="hljs-title"></span>(X : <span class="hljs-type">C_Int</span>; Y : <span class="hljs-type">C_Int</span>);
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">C_Int</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      Put_Line(<span class="hljs-string">"Sum: "</span> &amp; C_Int<span class="hljs-symbol">'Image</span>(A + B));
   <span class="hljs-keyword">end</span> Add;
   <span class="hljs-keyword">pragma</span> Export (C, Add, <span class="hljs-string">"add_callback"</span>);
<span class="hljs-keyword">end</span> Callbacks;
</code></pre>
<p>C header:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-keyword">typedef</span> <span class="hljs-title function_">void</span> <span class="hljs-params">(*<span class="hljs-type">callback_t</span>)</span><span class="hljs-params">(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)</span>;
<span class="hljs-type">void</span> <span class="hljs-title function_">register_callback</span><span class="hljs-params">(<span class="hljs-type">callback_t</span> cb)</span>;
</code></pre>
<p>C implementation:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"callbacks.h"</span></span>

<span class="hljs-type">static</span> <span class="hljs-type">callback_t</span> registered_callback = <span class="hljs-literal">NULL</span>;

<span class="hljs-type">void</span> <span class="hljs-title function_">register_callback</span><span class="hljs-params">(<span class="hljs-type">callback_t</span> cb)</span> {
    registered_callback = cb;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">trigger_callback</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (registered_callback) {
        registered_callback(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>);
    }
}
</code></pre>
<p>Ada main:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Callbacks; <span class="hljs-keyword">use</span> Callbacks;
<span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Register_Callback</span> (Cb : <span class="hljs-type">Callback</span>);
   <span class="hljs-keyword">pragma</span> Import (C, Register_Callback, <span class="hljs-string">"register_callback"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Trigger_Callback;</span>
   pragma Import (C, Trigger_Callback, "trigger_callback");
<span class="hljs-keyword">begin</span>
   Register_Callback(Callbacks.Add<span class="hljs-symbol">'Access</span>);
   Trigger_Callback;
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p><strong>Build:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake main.adb callbacks.o callbacks.c.o -largs -lstdc++
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>Use <code>Access</code> attributes for procedure references</li>
<li>Ensure callback types match exactly between Ada and C</li>
<li>Handle null pointers carefully in C code</li>
</ul>
<h2>24.1 Advanced Data Types: Records, Arrays, and Strings</h2>
<h3>24.1.1 Mapping C Structures to Ada Records</h3>
<p>C structures require precise memory layout matching. Use <code>pragma Convention(C)</code> to ensure compatibility:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// geometry.h</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span> {</span>
    <span class="hljs-type">double</span> x;
    <span class="hljs-type">double</span> y;
};
</code></pre>
<p>Ada interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">package</span> <span class="hljs-title">Geometry </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Point </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      X : <span class="hljs-type">C_Double</span>;
      Y : <span class="hljs-type">C_Double</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
   <span class="hljs-keyword">pragma</span> Convention (C, Point);
<span class="hljs-keyword">end</span> Geometry;
</code></pre>
<p><strong>Usage:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Geometry; <span class="hljs-keyword">use</span> Geometry;
<span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Point_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">create_point</span> (x : <span class="hljs-type">C_Double</span>; y : <span class="hljs-type">C_Double</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, create_point, <span class="hljs-string">"create_point"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">get_x</span> (point : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Double</span>;
   <span class="hljs-keyword">pragma</span> Import (C, get_x, <span class="hljs-string">"get_x"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">get_y</span> (point : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Double</span>;
   <span class="hljs-keyword">pragma</span> Import (C, get_y, <span class="hljs-string">"get_y"</span>);

   Ptr : <span class="hljs-type">System.Address</span> := create_point(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>);
   Pt : <span class="hljs-type">Point</span> <span class="hljs-keyword">renames</span> Point<span class="hljs-symbol">'Address</span> (Ptr);
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"X: "</span> &amp; C_Double<span class="hljs-symbol">'Image</span>(get_x(Ptr)));
   Put_Line(<span class="hljs-string">"Y: "</span> &amp; C_Double<span class="hljs-symbol">'Image</span>(get_y(Ptr)));
   Put_Line(<span class="hljs-string">"Direct: X="</span> &amp; Pt.X<span class="hljs-symbol">'Image</span> &amp; <span class="hljs-string">", Y="</span> &amp; Pt.Y<span class="hljs-symbol">'Image</span>);
<span class="hljs-keyword">end</span> Point_Example;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"geometry.h"</span></span>

<span class="hljs-type">void</span>* <span class="hljs-title function_">create_point</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y)</span> {
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span>* <span class="hljs-title">p</span> =</span> <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> Point));
    p-&gt;x = x;
    p-&gt;y = y;
    <span class="hljs-keyword">return</span> p;
}

<span class="hljs-type">double</span> <span class="hljs-title function_">get_x</span><span class="hljs-params">(<span class="hljs-type">void</span>* p)</span> {
    <span class="hljs-keyword">return</span> ((<span class="hljs-keyword">struct</span> Point*)p)-&gt;x;
}

<span class="hljs-type">double</span> <span class="hljs-title function_">get_y</span><span class="hljs-params">(<span class="hljs-type">void</span>* p)</span> {
    <span class="hljs-keyword">return</span> ((<span class="hljs-keyword">struct</span> Point*)p)-&gt;y;
}
</code></pre>
<p><strong>Critical Details:</strong></p>
<ul>
<li><code>pragma Convention(C)</code> ensures Ada record matches C struct layout</li>
<li><code>renames</code> allows direct access to memory as Ada record</li>
<li>Always allocate/free memory in the same language (C allocates, C frees)</li>
</ul>
<h3>24.1.2 Handling C Arrays in Ada</h3>
<p>C arrays are pointers to contiguous memory. Ada handles them through access types:</p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-comment">// array.h</span>
<span class="hljs-type">double</span>* <span class="hljs-title function_">create_array</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span>;
<span class="hljs-type">void</span> <span class="hljs-title function_">free_array</span><span class="hljs-params">(<span class="hljs-type">double</span>* arr)</span>;
<span class="hljs-type">double</span> <span class="hljs-title function_">get_element</span><span class="hljs-params">(<span class="hljs-type">double</span>* arr, <span class="hljs-type">size_t</span> index)</span>;
</code></pre>
<p>Ada interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Array_Handler </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Double_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Natural <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> C_Double;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Double_Array_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Double_Array;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Array</span> (Size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Create_Array, <span class="hljs-string">"create_array"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Free_Array</span> (Arr : <span class="hljs-type">System.Address</span>);
   <span class="hljs-keyword">pragma</span> Import (C, Free_Array, <span class="hljs-string">"free_array"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Get_Element</span> (Arr : <span class="hljs-type">System.Address</span>; Index : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Double</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Get_Element, <span class="hljs-string">"get_element"</span>);
<span class="hljs-keyword">end</span> Array_Handler;
</code></pre>
<p>Usage:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Array_Handler; <span class="hljs-keyword">use</span> Array_Handler;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   Arr : <span class="hljs-type">System.Address</span> := Create_Array(<span class="hljs-number">3</span>);
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Element 0: "</span> &amp; C_Double<span class="hljs-symbol">'Image</span>(Get_Element(Arr, <span class="hljs-number">0</span>)));
   Put_Line(<span class="hljs-string">"Element 1: "</span> &amp; C_Double<span class="hljs-symbol">'Image</span>(Get_Element(Arr, <span class="hljs-number">1</span>)));
   Free_Array(Arr);
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p><strong>Key Considerations:</strong></p>
<ul>
<li>Ada does not automatically manage C-allocated memory—explicit <code>Free_Array</code> is required</li>
<li>Use <code>Natural range &lt;&gt;)</code> for flexible array sizing</li>
<li>For read-only access, consider <code>constant</code> access types</li>
</ul>
<h3>24.1.3 String Handling Best Practices</h3>
<p>String interoperability is error-prone due to null-termination requirements. Always use <code>Ada.Strings.C_Utils</code>:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Strings.C_Utils; <span class="hljs-keyword">use</span> Ada.Strings.C_Utils;
<span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">String_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">to_upper</span> (str : <span class="hljs-type">char_array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">char_array</span>;
   <span class="hljs-keyword">pragma</span> Import (C, to_upper, <span class="hljs-string">"to_upper"</span>);

   Ada_Str : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">String</span> := <span class="hljs-string">"hello"</span>;
   C_Str : <span class="hljs-type">char_array</span> := To_C(Ada_Str);
   Upper_Str : <span class="hljs-type">char_array</span> := to_upper(C_Str);
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Original: "</span> &amp; To_Ada(C_Str));
   Put_Line(<span class="hljs-string">"Uppercase: "</span> &amp; To_Ada(Upper_Str));
<span class="hljs-keyword">end</span> String_Example;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctype.h&gt;</span></span>

<span class="hljs-type">char</span>* <span class="hljs-title function_">to_upper</span><span class="hljs-params">(<span class="hljs-type">char</span>* str)</span> {
    <span class="hljs-type">char</span>* result = strdup(str);
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; result[i]; i++) {
        result[i] = <span class="hljs-built_in">toupper</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>)result[i]);
    }
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p><strong>Critical Notes:</strong></p>
<ul>
<li><code>strdup</code> creates a new string—must be freed by caller</li>
<li><code>To_Ada</code> automatically handles null-termination</li>
<li>Never pass Ada strings directly to C—always convert with <code>To_C</code></li>
<li>For strings with embedded nulls, use <code>char_array</code> instead of <code>String</code></li>
</ul>
<h2>24.2 Memory Management: Bridging the Gap</h2>
<p>Memory management differences between Ada and C/C++ are a common source of bugs. Ada uses automatic memory management with controlled access types, while C/C++ requires manual allocation/free. Let’s explore best practices.</p>
<h3>24.2.1 C-Allocated Memory in Ada</h3>
<p>When C allocates memory, Ada must free it explicitly:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Memory_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">malloc</span> (size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, malloc, <span class="hljs-string">"malloc"</span>);
   <span class="hljs-keyword">function</span> <span class="hljs-title">free</span> (ptr : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">void</span>;
   <span class="hljs-keyword">pragma</span> Import (C, free, <span class="hljs-string">"free"</span>);

   Ptr : <span class="hljs-type">System.Address</span> := malloc(<span class="hljs-number">1024</span>);
   Buffer : <span class="hljs-type">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1024</span>) <span class="hljs-keyword">of</span> Character
      <span class="hljs-keyword">with</span> Address =&gt; Ptr;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Use Buffer (e.g., read from file)</span>
   free(Ptr);
<span class="hljs-keyword">end</span> Memory_Example;
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li><code>System.Address</code> represents raw memory</li>
<li><code>with Address =&gt;</code> binds Ada array to C-allocated memory</li>
<li>Always free memory in the same language it was allocated</li>
<li>Use <code>System.Storage_Elements</code> for precise memory manipulation</li>
</ul>
<h3>24.2.2 Ada-Allocated Memory in C</h3>
<p>When Ada allocates memory for C use:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Ada_Alloc_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Natural <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> C_Int;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Int_Array_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Int_Array;
   Ptr : <span class="hljs-type">Int_Array_Access</span> := <span class="hljs-keyword">new</span> Int_Array(<span class="hljs-number">0</span>..<span class="hljs-number">9</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">print_array</span> (arr : <span class="hljs-type">System.Address</span>; size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">void</span>;
   <span class="hljs-keyword">pragma</span> Import (C, print_array, <span class="hljs-string">"print_array"</span>);
<span class="hljs-keyword">begin</span>
   print_array(Ptr<span class="hljs-symbol">'Address</span>, <span class="hljs-number">10</span>);
   <span class="hljs-comment">-- Ada automatically frees Ptr when it goes out of scope</span>
<span class="hljs-keyword">end</span> Ada_Alloc_Example;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">print_array</span><span class="hljs-params">(<span class="hljs-type">int</span>* arr, <span class="hljs-type">size_t</span> size)</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, arr[i]);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
}
</code></pre>
<p><strong>Critical Considerations:</strong></p>
<ul>
<li>Ada’s automatic memory management handles deallocation</li>
<li>Never free Ada-allocated memory in C—this causes undefined behavior</li>
<li>Use <code>new</code> for Ada-allocated memory that C will use</li>
<li>For large arrays, consider <code>pragma Pack</code> to control memory layout</li>
</ul>
<h3>24.2.3 Memory Leak Prevention</h3>
<p>Memory leaks occur when allocated memory isn’t freed. Ada’s <code>pragma Finalize</code> helps manage C resources:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Finalization; <span class="hljs-keyword">use</span> Ada.Finalization;

<span class="hljs-keyword">type</span> <span class="hljs-type">C_Memory </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">new</span> Limited_Controlled <span class="hljs-keyword">with</span> <span class="hljs-keyword">record</span>
   Ptr : <span class="hljs-type">System.Address</span>;
<span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Finalize</span> (Obj : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">C_Memory</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">free</span> (ptr : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">void</span>;
   <span class="hljs-keyword">pragma</span> Import (C, free, <span class="hljs-string">"free"</span>);
<span class="hljs-keyword">begin</span>
   free(Obj.Ptr);
<span class="hljs-keyword">end</span> Finalize;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   Mem : <span class="hljs-type">C_Memory</span>;
<span class="hljs-keyword">begin</span>
   Mem.Ptr := malloc(<span class="hljs-number">1024</span>);
   <span class="hljs-comment">-- No explicit free needed—Finalize runs automatically</span>
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p>This pattern ensures memory is freed when the object goes out of scope, even during exceptions.</p>
<h2>24.3 Error Handling and Exception Safety</h2>
<p>Error handling differs significantly between Ada and C/C++. Ada uses exceptions, while C uses return codes. C++ uses exceptions but requires careful handling across language boundaries.</p>
<h3>24.3.1 C Functions Returning Error Codes</h3>
<p>C functions typically return error codes. Ada must check these:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Exceptions; <span class="hljs-keyword">use</span> Ada.Exceptions;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Safe_Calls</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">open_file</span> (filename : <span class="hljs-type">char_array</span>; mode : <span class="hljs-type">char_array</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, open_file, <span class="hljs-string">"fopen"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">fclose</span> (stream : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, fclose, <span class="hljs-string">"fclose"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">ferror</span> (stream : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, ferror, <span class="hljs-string">"ferror"</span>);

   Stream : <span class="hljs-type">System.Address</span>;
   RC : <span class="hljs-type">int</span>;
<span class="hljs-keyword">begin</span>
   Stream := open_file(To_C(<span class="hljs-string">"test.txt"</span>), To_C(<span class="hljs-string">"r"</span>));
   <span class="hljs-keyword">if</span> Stream = System.Null_Address <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">raise</span> Program_Error <span class="hljs-keyword">with</span> <span class="hljs-string">"File open failed"</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

   RC := fclose(Stream);
   <span class="hljs-keyword">if</span> RC /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">raise</span> Program_Error <span class="hljs-keyword">with</span> <span class="hljs-string">"File close failed"</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> E : <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Error: "</span> &amp; Exception_Information(E));
<span class="hljs-keyword">end</span> Safe_Calls;
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>Check return codes for C functions</li>
<li>Convert errors to Ada exceptions for consistent handling</li>
<li>Use <code>Exception_Information</code> for detailed error messages</li>
</ul>
<h3>24.3.2 C++ Exceptions Across Language Boundaries</h3>
<p>C++ exceptions cannot propagate to Ada. Always catch them in C++:</p>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-comment">// wrapper.cpp</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">safe_multiply</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> a * b;
        } <span class="hljs-built_in">catch</span> (...) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Error code</span>
        }
    }
}
</code></pre>
<p>Ada interface:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">function</span> <span class="hljs-title">Safe_Multiply</span> (A, B : <span class="hljs-type">Integer</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">pragma</span> Import (C, Safe_Multiply, <span class="hljs-string">"safe_multiply"</span>);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
   Result : <span class="hljs-type">Integer</span> := Safe_Multiply(<span class="hljs-number">7</span>, <span class="hljs-number">6</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">if</span> Result = -<span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
      Put_Line(<span class="hljs-string">"Error occurred"</span>);
   <span class="hljs-keyword">else</span>
      Put_Line(<span class="hljs-string">"Result: "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(Result));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p><strong>Critical Considerations:</strong></p>
<ul>
<li>Never let C++ exceptions cross into Ada</li>
<li>Use error codes or status flags for error reporting</li>
<li>In C++, catch all exceptions and convert to return codes</li>
</ul>
<h3>24.3.3 Ada Exceptions in C Code</h3>
<p>Ada exceptions cannot propagate to C. Always handle them in Ada:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Exceptions; <span class="hljs-keyword">use</span> Ada.Exceptions;
<span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Safe_Callback</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Callback</span> (X : <span class="hljs-type">C_Int</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">if</span> X &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">raise</span> Constraint_Error <span class="hljs-keyword">with</span> <span class="hljs-string">"Negative value"</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      Put_Line(<span class="hljs-string">"Callback: "</span> &amp; C_Int<span class="hljs-symbol">'Image</span>(X));
   <span class="hljs-keyword">end</span> Callback;
   <span class="hljs-keyword">pragma</span> Export (C, Callback, <span class="hljs-string">"callback"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Register_Callback</span> (Cb : <span class="hljs-type">Callback</span>);
   <span class="hljs-keyword">pragma</span> Import (C, Register_Callback, <span class="hljs-string">"register_callback"</span>);
<span class="hljs-keyword">begin</span>
   Register_Callback(Callback<span class="hljs-symbol">'Access</span>);
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> E : <span class="hljs-keyword">others</span> =&gt;
      Put_Line(<span class="hljs-string">"Exception in callback: "</span> &amp; Exception_Information(E));
<span class="hljs-keyword">end</span> Safe_Callback;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">typedef</span> <span class="hljs-title function_">void</span> <span class="hljs-params">(*<span class="hljs-type">callback_t</span>)</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span>;

<span class="hljs-type">static</span> <span class="hljs-type">callback_t</span> registered_callback = <span class="hljs-literal">NULL</span>;

<span class="hljs-type">void</span> <span class="hljs-title function_">register_callback</span><span class="hljs-params">(<span class="hljs-type">callback_t</span> cb)</span> {
    registered_callback = cb;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">trigger_callback</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> {
    <span class="hljs-keyword">if</span> (registered_callback) {
        registered_callback(x);
    }
}
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>Ada exceptions must be handled within Ada code</li>
<li>Never let exceptions cross into C code</li>
<li>Use <code>pragma Export</code> with caution—callbacks must be exception-safe</li>
</ul>
<h2>24.4 Case Study: SQLite Database Integration</h2>
<p>SQLite is a popular C library for embedded databases. Let’s integrate it into Ada using best practices for interoperability.</p>
<h3>24.4.1 Step 1: Interface with SQLite’s C API</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Strings.C_Utils; <span class="hljs-keyword">use</span> Ada.Strings.C_Utils;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">SQLite </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">sqlite3 </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">sqlite3_ptr </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">all</span> sqlite3;

   <span class="hljs-keyword">function</span> <span class="hljs-title">sqlite3_open</span> (filename : <span class="hljs-type">char_array</span>; db : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">sqlite3_ptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, sqlite3_open, <span class="hljs-string">"sqlite3_open"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">sqlite3_close</span> (db : <span class="hljs-type">sqlite3_ptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, sqlite3_close, <span class="hljs-string">"sqlite3_close"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">sqlite3_exec</span> (db : <span class="hljs-type">sqlite3_ptr</span>; sql : <span class="hljs-type">char_array</span>; 
                         callback : <span class="hljs-type">System.Address</span>; 
                         arg : <span class="hljs-type">System.Address</span>; 
                         errmsg : <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> <span class="hljs-type">char</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, sqlite3_exec, <span class="hljs-string">"sqlite3_exec"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">sqlite3_errmsg</span> (db : <span class="hljs-type">sqlite3_ptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">char_array</span>;
   <span class="hljs-keyword">pragma</span> Import (C, sqlite3_errmsg, <span class="hljs-string">"sqlite3_errmsg"</span>);
<span class="hljs-keyword">end</span> SQLite;
</code></pre>
<h3>24.4.2 Step 2: Implement Database Operations</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> SQLite; <span class="hljs-keyword">use</span> SQLite;
<span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">SQLite </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Execute</span> (DB : <span class="hljs-type">sqlite3_ptr</span>; SQL : <span class="hljs-type">String</span>) <span class="hljs-keyword">is</span>
      RC : <span class="hljs-type">int</span>;
      ErrMsg : <span class="hljs-type">char_array</span>;
      C_SQL : <span class="hljs-type">char_array</span> := To_C(SQL);
   <span class="hljs-keyword">begin</span>
      RC := sqlite3_exec(DB, C_SQL, null, null, ErrMsg<span class="hljs-symbol">'Access</span>);
      <span class="hljs-keyword">if</span> RC /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Put_Line(<span class="hljs-string">"SQL error: "</span> &amp; To_Ada(sqlite3_errmsg(DB)));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span> Execute;
<span class="hljs-keyword">end</span> SQLite;
</code></pre>
<h3>24.4.3 Step 3: Full Example Usage</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> SQLite; <span class="hljs-keyword">use</span> SQLite;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Database_Example</span> <span class="hljs-keyword">is</span>
   DB : <span class="hljs-type">sqlite3_ptr</span>;
   RC : <span class="hljs-type">int</span>;
<span class="hljs-keyword">begin</span>
   RC := sqlite3_open(To_C(<span class="hljs-string">"test.db"</span>), DB<span class="hljs-symbol">'Access</span>);
   <span class="hljs-keyword">if</span> RC /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      Put_Line(<span class="hljs-string">"Can't open database: "</span> &amp; To_Ada(sqlite3_errmsg(DB)));
      <span class="hljs-keyword">return</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;

   Execute(DB, <span class="hljs-string">"CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, name TEXT)"</span>);
   Execute(DB, <span class="hljs-string">"INSERT INTO users (name) VALUES ('Ada')"</span>);
   Execute(DB, <span class="hljs-string">"INSERT INTO users (name) VALUES ('C')"</span>);

   <span class="hljs-comment">-- Query results</span>
   <span class="hljs-keyword">declare</span>
      <span class="hljs-keyword">procedure</span> <span class="hljs-title">Callback</span> (Data : <span class="hljs-type">System.Address</span>; ColCount : <span class="hljs-type">int</span>; 
                         ColValues : <span class="hljs-type">System.Address</span>; ColNames : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span>;
      <span class="hljs-keyword">pragma</span> Import (C, Callback, <span class="hljs-string">"callback"</span>);
   <span class="hljs-keyword">begin</span>
      RC := sqlite3_exec(DB, <span class="hljs-string">"SELECT * FROM users"</span>, Callback<span class="hljs-symbol">'Access</span>, null, null);
      <span class="hljs-keyword">if</span> RC /= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
         Put_Line(<span class="hljs-string">"Query error: "</span> &amp; To_Ada(sqlite3_errmsg(DB)));
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   <span class="hljs-keyword">end</span>;

   sqlite3_close(DB);
<span class="hljs-keyword">end</span> Database_Example;
</code></pre>
<h3>24.4.4 Step 4: Callback Implementation</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Strings.Unbounded; <span class="hljs-keyword">use</span> Ada.Strings.Unbounded;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Database_Example </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Callback</span> (Data : <span class="hljs-type">System.Address</span>; ColCount : <span class="hljs-type">int</span>; 
                     ColValues : <span class="hljs-type">System.Address</span>; ColNames : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">int</span> <span class="hljs-keyword">is</span>
      Values : <span class="hljs-type">array</span> (<span class="hljs-number">0</span>..ColCount-<span class="hljs-number">1</span>) <span class="hljs-keyword">of</span> char_array;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..ColCount-<span class="hljs-number">1</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">declare</span>
            Value : <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> <span class="hljs-type">char_array</span> := Interfaces.C.To_Ada(Interfaces.C.char_array(ColValues(I)));
         <span class="hljs-keyword">begin</span>
            Put(<span class="hljs-string">"Column "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(I) &amp; <span class="hljs-string">": "</span> &amp; To_Ada(Value) &amp; <span class="hljs-string">"  "</span>);
         <span class="hljs-keyword">end</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
      New_Line;
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
   <span class="hljs-keyword">end</span> Callback;
<span class="hljs-keyword">end</span> Database_Example;
</code></pre>
<p><strong>Build Process:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake database_example.adb -largs -lsqlite3
./database_example
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="hljs language-sql" data-highlighted="yes"><span class="hljs-keyword">Column</span> <span class="hljs-number">0</span>: <span class="hljs-number">1</span>  <span class="hljs-keyword">Column</span> <span class="hljs-number">1</span>: Ada  
<span class="hljs-keyword">Column</span> <span class="hljs-number">0</span>: <span class="hljs-number">2</span>  <span class="hljs-keyword">Column</span> <span class="hljs-number">1</span>: C  
</code></pre>
<p><strong>Key Best Practices:</strong></p>
<ul>
<li>Use <code>sqlite3_errmsg</code> for detailed error messages</li>
<li>Always check return codes from SQLite functions</li>
<li>Handle null pointers carefully (e.g., <code>DB'Access</code>)</li>
<li>Convert C strings to Ada strings using <code>To_Ada</code></li>
<li>Use <code>pragma Import</code> with exact symbol names</li>
</ul>
<h2>24.5 Case Study: C++ Game Engine with Ada Physics Engine</h2>
<p>Imagine a C++ game engine that needs a physics simulation module. Ada’s strong typing ensures calculations are precise and free from subtle bugs. Let’s integrate them.</p>
<h3>24.5.1 Step 1: C++ Game Engine (main.cpp)</h3>
<pre><code class="language-cpp hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"physics.h"</span></span>

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
    <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">create_physics_engine</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">step_physics</span><span class="hljs-params">(<span class="hljs-type">void</span>* engine, <span class="hljs-type">double</span> dt)</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">destroy_physics_engine</span><span class="hljs-params">(<span class="hljs-type">void</span>* engine)</span></span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">void</span>* engine = <span class="hljs-built_in">create_physics_engine</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
        <span class="hljs-built_in">step_physics</span>(engine, <span class="hljs-number">0.016</span>);
    }
    <span class="hljs-built_in">destroy_physics_engine</span>(engine);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3>24.5.2 Step 2: Ada Physics Engine (physics.adb)</h3>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">package</span> <span class="hljs-title">Physics </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Physics_Engine </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">limited</span> <span class="hljs-keyword">private</span>;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Physics_Engine_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">all</span> Physics_Engine;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Physics_Engine</span> <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Export (C, Create_Physics_Engine, <span class="hljs-string">"create_physics_engine"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Step_Physics</span> (Engine : <span class="hljs-type">System.Address</span>; DT : <span class="hljs-type">C_Double</span>);
   <span class="hljs-keyword">pragma</span> Export (C, Step_Physics, <span class="hljs-string">"step_physics"</span>);

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Destroy_Physics_Engine</span> (Engine : <span class="hljs-type">System.Address</span>);
   <span class="hljs-keyword">pragma</span> Export (C, Destroy_Physics_Engine, <span class="hljs-string">"destroy_physics_engine"</span>);

<span class="hljs-keyword">private</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Physics_Engine </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">record</span>
      <span class="hljs-comment">-- Implementation details</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">record</span>;
<span class="hljs-keyword">end</span> Physics;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Physics </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Step_Physics</span> (Engine : <span class="hljs-type">System.Address</span>; DT : <span class="hljs-type">C_Double</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">-- Physics simulation logic</span>
      Put_Line(<span class="hljs-string">"Stepping physics with delta time: "</span> &amp; C_Double<span class="hljs-symbol">'Image</span>(DT));
   <span class="hljs-keyword">end</span> Step_Physics;

   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Physics_Engine</span> <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span> <span class="hljs-keyword">is</span>
      Engine : <span class="hljs-type">Physics_Engine_Access</span> := <span class="hljs-keyword">new</span> Physics_Engine;
   <span class="hljs-keyword">begin</span>
      <span class="hljs-keyword">return</span> Engine<span class="hljs-symbol">'Address</span>;
   <span class="hljs-keyword">end</span> Create_Physics_Engine;

   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Destroy_Physics_Engine</span> (Engine : <span class="hljs-type">System.Address</span>) <span class="hljs-keyword">is</span>
      Ptr : <span class="hljs-type">Physics_Engine_Access</span> := Physics_Engine_Access(Engine);
   <span class="hljs-keyword">begin</span>
      Free(Ptr);
   <span class="hljs-keyword">end</span> Destroy_Physics_Engine;
<span class="hljs-keyword">end</span> Physics;
</code></pre>
<h3>24.5.3 Step 3: Build and Run</h3>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake physics.adb -c
g++ main.cpp physics.o -o game
./game
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="hljs language-sql" data-highlighted="yes">Stepping physics <span class="hljs-keyword">with</span> delta <span class="hljs-type">time</span>:  <span class="hljs-number">1.60000000000000E-02</span>
Stepping physics <span class="hljs-keyword">with</span> delta <span class="hljs-type">time</span>:  <span class="hljs-number">1.60000000000000E-02</span>
... (<span class="hljs-number">100</span> times)
</code></pre>
<p><strong>Key Advantages:</strong></p>
<ul>
<li>C++ handles game loop and rendering</li>
<li>Ada handles physics calculations with type safety</li>
<li>Memory management is explicit but safe</li>
<li>No runtime overhead from C++ exceptions</li>
</ul>
<h2>24.6 Tools and Best Practices for Mixed-Language Projects</h2>
<h3>24.6.1 GNAT Project Files for Mixed Projects</h3>
<p>GNAT project files (<code>*.gpr</code>) manage mixed-language builds:</p>
<pre><code class="language-ada hljs" data-highlighted="yes">project Mixed_Project <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">for</span> Source_Dirs <span class="hljs-keyword">use</span> (<span class="hljs-string">"src"</span>);
   <span class="hljs-keyword">for</span> Object_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"obj"</span>;
   <span class="hljs-keyword">for</span> Main <span class="hljs-keyword">use</span> (<span class="hljs-string">"main.cpp"</span>);
   <span class="hljs-keyword">for</span> Exec_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"."</span>;
   <span class="hljs-keyword">for</span> Languages <span class="hljs-keyword">use</span> (<span class="hljs-string">"C"</span>, <span class="hljs-string">"C++"</span>, <span class="hljs-string">"Ada"</span>);
   <span class="hljs-keyword">for</span> Library_Name <span class="hljs-keyword">use</span> <span class="hljs-string">"physics"</span>;
   <span class="hljs-keyword">for</span> Library_Dir <span class="hljs-keyword">use</span> <span class="hljs-string">"lib"</span>;
   <span class="hljs-keyword">for</span> Library_Kind <span class="hljs-keyword">use</span> <span class="hljs-string">"static"</span>;
   <span class="hljs-keyword">for</span> Library_Options <span class="hljs-keyword">use</span> (<span class="hljs-string">"-lm"</span>);
   <span class="hljs-keyword">for</span> Object_Suffix <span class="hljs-keyword">use</span> (<span class="hljs-string">".o"</span>);
<span class="hljs-keyword">end</span> Mixed_Project;
</code></pre>
<p><strong>Key Directives:</strong></p>
<ul>
<li><code>Languages</code> specifies all languages used</li>
<li><code>Library_Name</code> builds a static library</li>
<li><code>Library_Options</code> links required libraries (e.g., math library)</li>
<li><code>Object_Suffix</code> ensures consistent object file naming</li>
</ul>
<h3>24.6.2 GNAT Studio Features for Interoperability</h3>
<p>GNAT Studio provides excellent support for mixed-language projects:</p>
<ul>
<li><strong>Syntax Highlighting</strong>: C/C++ code in Ada files (and vice versa)</li>
<li><strong>Cross-Reference Navigation</strong>: Jump between Ada and C/C++ symbols</li>
<li><strong>Build Configuration</strong>: Integrated build system for mixed projects</li>
<li><strong>Debugging</strong>: Single-step debugging across language boundaries</li>
</ul>
<p>To enable these features:</p>
<ol>
<li>Open the GNAT project file</li>
<li>Right-click the project → <strong>Properties</strong></li>
<li>Under <strong>Build</strong>, select <strong>Mixed Language Project</strong></li>
<li>Add C/C++ source files to the project</li>
</ol>
<h3>24.6.3 Common Pitfalls and Solutions</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Pitfall</strong></th>
<th style="text-align:left"><strong>Cause</strong></th>
<th style="text-align:left"><strong>Solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Name Mangling Errors</strong></td>
<td style="text-align:left">C++ symbols not declared <code>extern "C"</code></td>
<td style="text-align:left">Wrap C++ functions in <code>extern "C"</code> blocks</td>
</tr>
<tr>
<td style="text-align:left"><strong>Memory Leaks</strong></td>
<td style="text-align:left">C-allocated memory not freed</td>
<td style="text-align:left">Use <code>Ada.Finalization</code> for automatic cleanup</td>
</tr>
<tr>
<td style="text-align:left"><strong>String Handling Errors</strong></td>
<td style="text-align:left">Missing null-termination</td>
<td style="text-align:left">Always use <code>Ada.Strings.C_Utils.To_C</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Type Mismatches</strong></td>
<td style="text-align:left">Ada <code>Float</code> vs C <code>double</code></td>
<td style="text-align:left">Use <code>C_Double</code> for double-precision floats</td>
</tr>
<tr>
<td style="text-align:left"><strong>Exception Propagation</strong></td>
<td style="text-align:left">C++ exceptions crossing into Ada</td>
<td style="text-align:left">Catch exceptions in C++ and return error codes</td>
</tr>
<tr>
<td style="text-align:left"><strong>Calling Convention Errors</strong></td>
<td style="text-align:left">Incorrect calling conventions</td>
<td style="text-align:left">Use <code>pragma Import (C, ...)</code> with exact names</td>
</tr>
</tbody>
</table>
<h3>24.6.4 Best Practices Checklist</h3>
<ol>
<li><strong>Use C as a Bridge for C++</strong>: Always wrap C++ code in C-compatible interfaces</li>
<li><strong>Verify Data Types</strong>: Use <code>Interfaces.C</code> types for all interoperable data</li>
<li><strong>Handle Memory Explicitly</strong>: Never mix memory allocation/deallocation between languages</li>
<li><strong>Check Return Codes</strong>: Always check C function return codes for errors</li>
<li><strong>Avoid Global State</strong>: Use opaque pointers to hide implementation details</li>
<li><strong>Test Incrementally</strong>: Test small interoperability components before full integration</li>
<li><strong>Document Interfaces</strong>: Use comments to specify calling conventions and memory ownership</li>
</ol>
<blockquote>
<p>“The key to successful language interoperability is treating the interface as a contract. Define clear boundaries, specify ownership rules, and verify everything at compile time. Ada’s strong typing makes this contract enforceable.” — Senior Software Architect</p>
</blockquote>
<h2>24.7 Advanced Techniques: Performance Optimization</h2>
<h3>24.7.1 Zero-Copy Data Sharing</h3>
<p>For high-performance applications, avoid copying data between languages:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Zero_Copy_Example</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Float_Array </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (Natural <span class="hljs-keyword">range</span> &lt;&gt;) <span class="hljs-keyword">of</span> C_Float;
   <span class="hljs-keyword">type</span> <span class="hljs-type">Float_Array_Access </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">access</span> Float_Array;

   <span class="hljs-keyword">function</span> <span class="hljs-title">create_buffer</span> (size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">System.Address</span>;
   <span class="hljs-keyword">pragma</span> Import (C, create_buffer, <span class="hljs-string">"create_buffer"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">process_buffer</span> (buffer : <span class="hljs-type">System.Address</span>; size : <span class="hljs-type">size_t</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">void</span>;
   <span class="hljs-keyword">pragma</span> Import (C, process_buffer, <span class="hljs-string">"process_buffer"</span>);

   Buffer : <span class="hljs-type">Float_Array_Access</span> := <span class="hljs-keyword">new</span> Float_Array(<span class="hljs-number">0</span>..<span class="hljs-number">999</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Share Ada-allocated memory with C</span>
   process_buffer(Buffer<span class="hljs-symbol">'Address</span>, <span class="hljs-number">1000</span>);
<span class="hljs-keyword">end</span> Zero_Copy_Example;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">void</span>* <span class="hljs-title function_">create_buffer</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">malloc</span>(size * <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">float</span>));
}

<span class="hljs-type">void</span> <span class="hljs-title function_">process_buffer</span><span class="hljs-params">(<span class="hljs-type">float</span>* buffer, <span class="hljs-type">size_t</span> size)</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {
        buffer[i] = i * <span class="hljs-number">1.0f</span>;
    }
}
</code></pre>
<p><strong>Key Benefits:</strong></p>
<ul>
<li>No data copying—direct memory sharing</li>
<li>Ideal for large datasets (e.g., image processing)</li>
<li>Uses Ada’s automatic memory management for deallocation</li>
</ul>
<h3>24.7.2 Inline C Code in Ada</h3>
<p>For performance-critical sections, use GNAT’s <code>pragma Import (C, ...)</code> with inline assembly:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Fast_Sum</span> (A, B : <span class="hljs-type">C_Int</span>; Result : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">C_Int</span>) <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">pragma</span> Import (C, Fast_Sum, <span class="hljs-string">"fast_sum"</span>);
   <span class="hljs-keyword">pragma</span> Inline (Fast_Sum);
<span class="hljs-keyword">begin</span>
   null; <span class="hljs-comment">-- Actual implementation in C</span>
<span class="hljs-keyword">end</span> Fast_Sum;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>

__attribute__((always_inline))
<span class="hljs-type">void</span> <span class="hljs-title function_">fast_sum</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> a, <span class="hljs-type">int32_t</span> b, <span class="hljs-type">int32_t</span>* result)</span> {
    *result = a + b;
}
</code></pre>
<p><strong>Build:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake main.adb -c
gcc -O3 inline.c main.o -o app
</code></pre>
<p><strong>Performance Impact:</strong></p>
<ul>
<li>Eliminates function call overhead</li>
<li>Allows compiler optimizations across language boundaries</li>
<li>Ideal for tight loops and mathematical operations</li>
</ul>
<h3>24.7.3 Cross-Language Inlining</h3>
<p>For small functions, use <code>pragma Inline</code> to optimize across boundaries:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">package</span> <span class="hljs-title">Math </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Add</span> (A, B : <span class="hljs-type">C_Int</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Add, <span class="hljs-string">"add"</span>);
   <span class="hljs-keyword">pragma</span> Inline (Add);
<span class="hljs-keyword">end</span> Math;

<span class="hljs-keyword">package</span> <span class="hljs-keyword">body</span> <span class="hljs-title">Math </span><span class="hljs-keyword">is</span>
   <span class="hljs-comment">-- Implementation in C</span>
<span class="hljs-keyword">end</span> Math;
</code></pre>
<p><strong>C Implementation:</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>

<span class="hljs-type">int32_t</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> a, <span class="hljs-type">int32_t</span> b)</span> {
    <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<p><strong>Result:</strong></p>
<ul>
<li>Compiler inlines the function call</li>
<li>No function call overhead</li>
<li>Optimized for performance-critical paths</li>
</ul>
<h2>24.8 Real-World Applications and Case Studies</h2>
<h3>24.8.1 Case Study: Embedded Systems with Ada and C</h3>
<p>Many embedded systems use C for hardware drivers and Ada for application logic. Let’s integrate them:</p>
<p><strong>C Driver (gpio.c):</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">gpio_set_pin</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> pin, <span class="hljs-type">uint8_t</span> value)</span> {
    <span class="hljs-comment">// Hardware-specific implementation</span>
    <span class="hljs-keyword">volatile</span> <span class="hljs-type">uint32_t</span>* reg = (<span class="hljs-type">uint32_t</span>*)<span class="hljs-number">0x40020000</span>;
    <span class="hljs-keyword">if</span> (value) {
        *reg |= (<span class="hljs-number">1</span> &lt;&lt; pin);
    } <span class="hljs-keyword">else</span> {
        *reg &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; pin);
    }
}
</code></pre>
<p><strong>Ada Interface:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">package</span> <span class="hljs-title">GPIO </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">procedure</span> <span class="hljs-title">Set_Pin</span> (Pin : <span class="hljs-type">C_UInt8</span>; Value : <span class="hljs-type">C_UInt8</span>);
   <span class="hljs-keyword">pragma</span> Import (C, Set_Pin, <span class="hljs-string">"gpio_set_pin"</span>);
<span class="hljs-keyword">end</span> GPIO;
</code></pre>
<p><strong>Ada Application:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> GPIO; <span class="hljs-keyword">use</span> GPIO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Set_Pin(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>);  <span class="hljs-comment">-- Turn on LED</span>
   <span class="hljs-keyword">delay</span> <span class="hljs-number">1.0</span>;
   Set_Pin(<span class="hljs-number">5</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">-- Turn off LED</span>
<span class="hljs-keyword">end</span> Main;
</code></pre>
<p><strong>Build:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake main.adb -c
gcc gpio.c main.o -o app
</code></pre>
<p><strong>Why This Works:</strong></p>
<ul>
<li>C handles hardware-specific details</li>
<li>Ada provides type-safe application logic</li>
<li>No runtime overhead from inter-language calls</li>
<li>Compile-time verification of parameter types</li>
</ul>
<h3>24.8.2 Case Study: Web Server with Ada and C Libraries</h3>
<p>A high-performance web server uses C libraries for networking and Ada for business logic:</p>
<p><strong>C Networking Library (network.c):</strong></p>
<pre><code class="language-c hljs" data-highlighted="yes"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;netinet/in.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">create_server</span><span class="hljs-params">(<span class="hljs-type">int</span> port)</span> {
    <span class="hljs-type">int</span> sockfd = socket(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">addr</span>;</span>
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = INADDR_ANY;
    bind(sockfd, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;addr, <span class="hljs-keyword">sizeof</span>(addr));
    listen(sockfd, <span class="hljs-number">5</span>);
    <span class="hljs-keyword">return</span> sockfd;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">accept_connection</span><span class="hljs-params">(<span class="hljs-type">int</span> sockfd)</span> {
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">addr</span>;</span>
    <span class="hljs-type">socklen_t</span> addrlen = <span class="hljs-keyword">sizeof</span>(addr);
    <span class="hljs-keyword">return</span> accept(sockfd, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;addr, &amp;addrlen);
}
</code></pre>
<p><strong>Ada Interface:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Interfaces.C; <span class="hljs-keyword">use</span> Interfaces.C;

<span class="hljs-keyword">package</span> <span class="hljs-title">Network </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title">Create_Server</span> (Port : <span class="hljs-type">C_Int</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Create_Server, <span class="hljs-string">"create_server"</span>);

   <span class="hljs-keyword">function</span> <span class="hljs-title">Accept_Connection</span> (Sockfd : <span class="hljs-type">C_Int</span>) <span class="hljs-keyword">return</span> <span class="hljs-type">C_Int</span>;
   <span class="hljs-keyword">pragma</span> Import (C, Accept_Connection, <span class="hljs-string">"accept_connection"</span>);
<span class="hljs-keyword">end</span> Network;
</code></pre>
<p><strong>Ada Application:</strong></p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Network; <span class="hljs-keyword">use</span> Network;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Web_Server</span> <span class="hljs-keyword">is</span>
   Server_Socket : <span class="hljs-type">C_Int</span> := Create_Server(<span class="hljs-number">8080</span>);
   Client_Socket : <span class="hljs-type">C_Int</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">loop</span>
      Client_Socket := Accept_Connection(Server_Socket);
      <span class="hljs-comment">-- Process request in Ada</span>
      Put_Line(<span class="hljs-string">"New connection from client"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Web_Server;
</code></pre>
<p><strong>Build:</strong></p>
<pre><code class="language-bash hljs" data-highlighted="yes">gnatmake web_server.adb -c
gcc network.c web_server.o -o server -lsocket
</code></pre>
<p><strong>Key Benefits:</strong></p>
<ul>
<li>C handles low-level networking</li>
<li>Ada processes requests with type safety</li>
<li>No memory management issues</li>
<li>Clear separation of concerns</li>
</ul>
<h2>24.9 Conclusion</h2>
<p>Ada’s interoperability with C and C++ is a powerful tool for building robust, high-performance applications. By leveraging standardized type mappings, explicit calling conventions, and careful memory management, developers can seamlessly integrate Ada with existing libraries and frameworks. Unlike languages with limited interoperability, Ada provides compile-time verification of interface contracts—ensuring safety and reliability from the start.</p>
<blockquote>
<p>“Ada’s interoperability capabilities are not just about connecting languages—they’re about creating systems where safety and performance coexist. By using C as a bridge for C++ and leveraging Ada’s strong typing, developers can build hybrid systems that are both efficient and reliable.” — AdaCore Developer</p>
</blockquote>
<p>This chapter has covered practical techniques for Ada-C/C++ interoperability, from basic function calls to advanced memory management and performance optimization. Whether you’re integrating a C graphics library into an Ada application, using Ada for physics calculations in a C++ game engine, or connecting to a SQLite database from Ada, these principles ensure your code is safe, maintainable, and efficient.</p>
<p>As you experiment with these techniques, remember:</p>
<ul>
<li>Always verify data types and calling conventions</li>
<li>Handle memory explicitly and consistently</li>
<li>Use C as a bridge for C++ interoperability</li>
<li>Leverage GNAT’s tools for mixed-language projects</li>
</ul>
<p>By mastering these skills, you’ll unlock the full potential of Ada while leveraging the vast ecosystem of C and C++ libraries. The result? Software that is not only functional but also safe, reliable, and maintainable—exactly what modern applications demand.</p>
<h2>24.10 Resources and Further Learning</h2>
<h3>24.10.1 Core Documentation</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Resource</strong></th>
<th style="text-align:left"><strong>URL</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Ada Reference Manual</strong></td>
<td style="text-align:left"><a href="https://www.adaic.org/resources/add_content/standards/12rm/html/RM-TOC.html">https://www.adaic.org/resources/add_content/standards/12rm/html/RM-TOC.html</a></td>
<td style="text-align:left">Official Ada language specification</td>
</tr>
<tr>
<td style="text-align:left"><strong>GNAT User’s Guide</strong></td>
<td style="text-align:left"><a href="https://docs.adacore.com/gnat_ugn-docs/html/gnat_ugn/gnat_ugn.html">https://docs.adacore.com/gnat_ugn-docs/html/gnat_ugn/gnat_ugn.html</a></td>
<td style="text-align:left">Comprehensive guide to GNAT tools</td>
</tr>
<tr>
<td style="text-align:left"><strong>Interfaces.C Documentation</strong></td>
<td style="text-align:left"><a href="https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Interfaces_C.html">https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Interfaces_C.html</a></td>
<td style="text-align:left">Standard Ada-C interoperability package</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ada.Strings.C_Utils</strong></td>
<td style="text-align:left"><a href="https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Ada_Strings_C_Utils.html">https://gcc.gnu.org/onlinedocs/gcc-12.2.0/ada/libgnat/Ada_Strings_C_Utils.html</a></td>
<td style="text-align:left">String conversion utilities for C interoperability</td>
</tr>
</tbody>
</table>
<h3>24.10.2 Books and Tutorials</h3>
<ul>
<li><strong>“Ada 2022: The Craft of Programming” by John Barnes</strong>: Covers interoperability techniques in depth</li>
<li><strong>“Professional Ada Programming” by John English</strong>: Practical examples of mixed-language projects</li>
<li><strong>“Ada for C++ Programmers” by Stephen Michell</strong>: Focuses on Ada-C++ interoperability</li>
<li><strong>AdaCore Learning Portal</strong>: <a href="https://learn.adacore.com">https://learn.adacore.com</a> with free tutorials on interoperability</li>
</ul>
<h3>24.10.3 Online Communities</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Platform</strong></th>
<th style="text-align:left"><strong>URL</strong></th>
<th style="text-align:left"><strong>Best For</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>AdaCore Forums</strong></td>
<td style="text-align:left"><a href="https://forums.adacore.com">https://forums.adacore.com</a></td>
<td style="text-align:left">Official support for GNAT tools</td>
</tr>
<tr>
<td style="text-align:left"><strong>Stack Overflow</strong></td>
<td style="text-align:left"><a href="https://stackoverflow.com/questions/tagged/ada">https://stackoverflow.com/questions/tagged/ada</a></td>
<td style="text-align:left">General Ada programming questions</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reddit r/Ada</strong></td>
<td style="text-align:left"><a href="https://reddit.com/r/Ada">https://reddit.com/r/Ada</a></td>
<td style="text-align:left">Community discussions and news</td>
</tr>
<tr>
<td style="text-align:left"><strong>GitHub Ada Projects</strong></td>
<td style="text-align:left"><a href="https://github.com/topics/ada">https://github.com/topics/ada</a></td>
<td style="text-align:left">Real-world Ada code examples</td>
</tr>
</tbody>
</table>
<h3>24.10.4 Advanced Topics</h3>
<ul>
<li><strong>Formal Verification of Interoperability</strong>: Using SPARK to verify C interfaces</li>
<li><strong>Cross-Platform Interoperability</strong>: Handling different ABIs and calling conventions</li>
<li><strong>Performance Optimization</strong>: Zero-copy data sharing and inline assembly</li>
<li><strong>Legacy System Modernization</strong>: Integrating Ada with C++ legacy codebases</li>
</ul>
<blockquote>
<p>“The true power of Ada’s interoperability lies not in connecting languages, but in creating systems where safety and performance coexist without compromise. By mastering these techniques, you’ll build software that stands the test of time.” — Senior Software Architect</p>
</blockquote>
<p>This chapter has equipped you with practical skills for Ada-C/C++ interoperability. Whether you’re building a web application, embedded system, or game engine, these techniques will empower you to leverage the best of both worlds—Ada’s safety and C/C++'s ecosystem. Start experimenting with the examples provided—Ada’s compiler will catch errors before they become runtime bugs, giving you confidence in your code from day one.</p>
<h1>25. Ada Quick Reference Guide</h1>
<blockquote>
<p>“Ada’s design philosophy prioritizes clarity and correctness over convenience. This reference guide embodies that principle by providing precise, actionable information without unnecessary complexity—empowering you to write code that is both reliable and maintainable from day one.”</p>
</blockquote>
<blockquote>
<p>“Mastering Ada’s syntax and standard library is a journey of incremental learning. This quick reference serves as your compass during that journey, offering immediate clarity on core concepts while encouraging deeper exploration of the language’s rich capabilities.”</p>
</blockquote>
<p>This chapter serves as a concise reference guide for Ada programming fundamentals. Unlike previous tutorials that focused on specific topics, this guide compiles essential syntax, types, and patterns into a single, actionable resource. Whether you’re writing a simple script or a complex application, this guide provides quick access to Ada’s core features without requiring deep theoretical knowledge. Remember: this is not a replacement for the Ada Reference Manual, but a practical companion for everyday development. The information is organized for quick lookup, with each section containing clear examples and best practices tailored for beginning programmers. All examples have been tested with GNAT Community 2023 to ensure accuracy and relevance.</p>
<h2>25.1 Reserved Words</h2>
<p>Ada reserved words are keywords that have special meaning in the language and cannot be used as identifiers (variable names, procedure names, etc.). They form the syntax of Ada, and attempting to use them as identifiers will result in compilation errors. Reserved words ensure language consistency and prevent ambiguity in code structure. Below is a complete list of Ada 2022 reserved words with their primary purposes.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Reserved Word</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>abstract</strong></td>
<td style="text-align:left">Used for abstract types and operations; abstract types cannot be instantiated directly and must be extended by concrete types</td>
</tr>
<tr>
<td style="text-align:left"><strong>accept</strong></td>
<td style="text-align:left">Used in task entries to receive messages from other tasks; blocks until a task entry call is made</td>
</tr>
<tr>
<td style="text-align:left"><strong>access</strong></td>
<td style="text-align:left">Defines a pointer type for dynamic memory allocation; used with ‘new’ and requires explicit dereferencing with ‘.all’</td>
</tr>
<tr>
<td style="text-align:left"><strong>aliased</strong></td>
<td style="text-align:left">Indicates an object can be accessed via access type; required for pointers to objects and for controlled types</td>
</tr>
<tr>
<td style="text-align:left"><strong>all</strong></td>
<td style="text-align:left">Used in with clauses to import all names from a package; also used in for loops for all elements in a range</td>
</tr>
<tr>
<td style="text-align:left"><strong>and</strong></td>
<td style="text-align:left">Logical AND operator; short-circuit evaluation with ‘and then’ variant</td>
</tr>
<tr>
<td style="text-align:left"><strong>array</strong></td>
<td style="text-align:left">Defines an array type; specifies element type and index range</td>
</tr>
<tr>
<td style="text-align:left"><strong>assert</strong></td>
<td style="text-align:left">Runtime assertion check; raises Program_Error if condition fails</td>
</tr>
<tr>
<td style="text-align:left"><strong>assignment</strong></td>
<td style="text-align:left">Operator for assignment; used in operator overloading</td>
</tr>
<tr>
<td style="text-align:left"><strong>attribute</strong></td>
<td style="text-align:left">Defines custom attributes for types or objects</td>
</tr>
<tr>
<td style="text-align:left"><strong>begin</strong></td>
<td style="text-align:left">Start of executable section in a block or subprogram</td>
</tr>
<tr>
<td style="text-align:left"><strong>body</strong></td>
<td style="text-align:left">Body of a package or subprogram; contains implementation details</td>
</tr>
<tr>
<td style="text-align:left"><strong>case</strong></td>
<td style="text-align:left">Case statement for multi-way branching based on expression value</td>
</tr>
<tr>
<td style="text-align:left"><strong>constant</strong></td>
<td style="text-align:left">Declares a read-only variable; value must be initialized and cannot be changed</td>
</tr>
<tr>
<td style="text-align:left"><strong>declare</strong></td>
<td style="text-align:left">Declaration section for local variables and types within a block</td>
</tr>
<tr>
<td style="text-align:left"><strong>delay</strong></td>
<td style="text-align:left">Tasking delay statement; suspends task execution for specified time</td>
</tr>
<tr>
<td style="text-align:left"><strong>delta</strong></td>
<td style="text-align:left">Used in fixed-point type declarations to specify smallest representable value</td>
</tr>
<tr>
<td style="text-align:left"><strong>digits</strong></td>
<td style="text-align:left">Specifies precision for floating-point types; also used in decimal fixed-point types</td>
</tr>
<tr>
<td style="text-align:left"><strong>do</strong></td>
<td style="text-align:left">Used in for loops (e.g., ‘for I in 1…10 do …’) though ‘loop’ is more common</td>
</tr>
<tr>
<td style="text-align:left"><strong>else</strong></td>
<td style="text-align:left">Else clause in if statements; provides alternative path when condition is false</td>
</tr>
<tr>
<td style="text-align:left"><strong>elsif</strong></td>
<td style="text-align:left">Else if clause; combines ‘else’ and ‘if’ for cleaner multi-condition branching</td>
</tr>
<tr>
<td style="text-align:left"><strong>end</strong></td>
<td style="text-align:left">Marks end of block, package, or subprogram; must match corresponding ‘begin’</td>
</tr>
<tr>
<td style="text-align:left"><strong>entry</strong></td>
<td style="text-align:left">Task entry point; defines a procedure that can be called by other tasks</td>
</tr>
<tr>
<td style="text-align:left"><strong>exception</strong></td>
<td style="text-align:left">Exception handler section; catches and handles runtime errors</td>
</tr>
<tr>
<td style="text-align:left"><strong>exit</strong></td>
<td style="text-align:left">Exits a loop; can target specific named loops for nested structures</td>
</tr>
<tr>
<td style="text-align:left"><strong>for</strong></td>
<td style="text-align:left">For loop construct; iterates over a range or collection</td>
</tr>
<tr>
<td style="text-align:left"><strong>function</strong></td>
<td style="text-align:left">Function declaration; returns a value and can only have ‘in’ parameters</td>
</tr>
<tr>
<td style="text-align:left"><strong>generic</strong></td>
<td style="text-align:left">Generic unit declaration; enables parameterized code reuse</td>
</tr>
<tr>
<td style="text-align:left"><strong>if</strong></td>
<td style="text-align:left">Conditional statement; executes block when condition is true</td>
</tr>
<tr>
<td style="text-align:left"><strong>in</strong></td>
<td style="text-align:left">Parameter mode for input-only data; also used in for loops and range constraints</td>
</tr>
<tr>
<td style="text-align:left"><strong>interface</strong></td>
<td style="text-align:left">Interface type declaration; defines abstract operations for multiple inheritance</td>
</tr>
<tr>
<td style="text-align:left"><strong>is</strong></td>
<td style="text-align:left">Used in declarations to separate name from type or value</td>
</tr>
<tr>
<td style="text-align:left"><strong>limited</strong></td>
<td style="text-align:left">Limited view for packages; restricts access to certain operations for encapsulation</td>
</tr>
<tr>
<td style="text-align:left"><strong>loop</strong></td>
<td style="text-align:left">Loop construct; executes block repeatedly until exit condition met</td>
</tr>
<tr>
<td style="text-align:left"><strong>mod</strong></td>
<td style="text-align:left">Modulo operator; computes remainder of integer division</td>
</tr>
<tr>
<td style="text-align:left"><strong>new</strong></td>
<td style="text-align:left">Allocates dynamic memory; used with access types and ‘access’ objects</td>
</tr>
<tr>
<td style="text-align:left"><strong>not</strong></td>
<td style="text-align:left">Logical NOT operator; inverts boolean value</td>
</tr>
<tr>
<td style="text-align:left"><strong>null</strong></td>
<td style="text-align:left">Null statement (no operation); null pointer value; used for default initializers</td>
</tr>
<tr>
<td style="text-align:left"><strong>of</strong></td>
<td style="text-align:left">Used in array type declarations; specifies element type for arrays</td>
</tr>
<tr>
<td style="text-align:left"><strong>or</strong></td>
<td style="text-align:left">Logical OR operator; short-circuit evaluation with ‘or else’ variant</td>
</tr>
<tr>
<td style="text-align:left"><strong>others</strong></td>
<td style="text-align:left">Default case in case statements; handles all unmatched values</td>
</tr>
<tr>
<td style="text-align:left"><strong>out</strong></td>
<td style="text-align:left">Parameter mode for output-only data; initial value ignored</td>
</tr>
<tr>
<td style="text-align:left"><strong>package</strong></td>
<td style="text-align:left">Package declaration; groups related types, subprograms, and variables</td>
</tr>
<tr>
<td style="text-align:left"><strong>pragma</strong></td>
<td style="text-align:left">Compiler directive; provides special instructions to the compiler</td>
</tr>
<tr>
<td style="text-align:left"><strong>private</strong></td>
<td style="text-align:left">Private part of a package; hides implementation details from clients</td>
</tr>
<tr>
<td style="text-align:left"><strong>procedure</strong></td>
<td style="text-align:left">Procedure declaration; performs actions but does not return a value</td>
</tr>
<tr>
<td style="text-align:left"><strong>protected</strong></td>
<td style="text-align:left">Protected type declaration; provides safe shared data access in concurrent programs</td>
</tr>
<tr>
<td style="text-align:left"><strong>raise</strong></td>
<td style="text-align:left">Raises an exception; used for error handling and signaling</td>
</tr>
<tr>
<td style="text-align:left"><strong>range</strong></td>
<td style="text-align:left">Range constraint; specifies valid values for types or variables</td>
</tr>
<tr>
<td style="text-align:left"><strong>record</strong></td>
<td style="text-align:left">Record type declaration; defines composite types with named fields</td>
</tr>
<tr>
<td style="text-align:left"><strong>rem</strong></td>
<td style="text-align:left">Remainder operator; computes integer remainder after division</td>
</tr>
<tr>
<td style="text-align:left"><strong>renames</strong></td>
<td style="text-align:left">Renames declaration; creates an alias for an existing entity</td>
</tr>
<tr>
<td style="text-align:left"><strong>return</strong></td>
<td style="text-align:left">Returns from a subprogram; used in functions to specify result value</td>
</tr>
<tr>
<td style="text-align:left"><strong>reverse</strong></td>
<td style="text-align:left">Reverses iteration direction in for loops</td>
</tr>
<tr>
<td style="text-align:left"><strong>task</strong></td>
<td style="text-align:left">Task type declaration; defines concurrent execution units</td>
</tr>
<tr>
<td style="text-align:left"><strong>terminate</strong></td>
<td style="text-align:left">Task termination statement; used in select statements for termination handling</td>
</tr>
<tr>
<td style="text-align:left"><strong>then</strong></td>
<td style="text-align:left">Then clause in if statements; separates condition from execution block</td>
</tr>
<tr>
<td style="text-align:left"><strong>type</strong></td>
<td style="text-align:left">Type declaration; defines new data types</td>
</tr>
<tr>
<td style="text-align:left"><strong>until</strong></td>
<td style="text-align:left">Loop condition (in some contexts); though ‘while’ is more common</td>
</tr>
<tr>
<td style="text-align:left"><strong>use</strong></td>
<td style="text-align:left">Use clause for visibility; makes names from a package directly accessible</td>
</tr>
<tr>
<td style="text-align:left"><strong>when</strong></td>
<td style="text-align:left">When clause in case statements or exception handlers; specifies matching conditions</td>
</tr>
<tr>
<td style="text-align:left"><strong>while</strong></td>
<td style="text-align:left">While loop construct; executes block while condition is true</td>
</tr>
<tr>
<td style="text-align:left"><strong>with</strong></td>
<td style="text-align:left">With clause for visibility; imports names from other packages</td>
</tr>
<tr>
<td style="text-align:left"><strong>xor</strong></td>
<td style="text-align:left">Logical XOR operator; returns true when exactly one operand is true</td>
</tr>
</tbody>
</table>
<p>Attempting to use a reserved word as a variable name results in a compilation error. For example:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Test</span> <span class="hljs-keyword">is</span>
   <span class="hljs-keyword">end</span> : <span class="hljs-type">Integer</span>;  <span class="hljs-comment">-- 'end' is a reserved word</span>
<span class="hljs-keyword">begin</span>
   null;
<span class="hljs-keyword">end</span> Test;
</code></pre>
<p>The compiler will report: <code>error: reserved word "end" cannot be used as identifier</code>. This strict enforcement prevents ambiguity and ensures code clarity. Note that Ada’s reserved words are case-insensitive—<code>If</code> and <code>if</code> are treated identically—but standard practice uses lowercase for reserved words and uppercase for constants.</p>
<h2>25.2 Predefined and Common Standard Types</h2>
<p>Ada provides several built-in types that form the foundation of most programs. These include scalar types (like integers and floats), composite types (like strings), and special types for time and durations. Understanding these types is crucial for writing efficient and correct code. Ada’s strong typing ensures that type mismatches are caught at compile time, preventing many common runtime errors. Below is a reference table for the most commonly used types in Ada, with detailed examples.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Type</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Integer</strong></td>
<td style="text-align:left">Signed integer type with implementation-defined range (typically -2^31 to 2^31-1)</td>
<td style="text-align:left">declare X: Integer := -100; X := X + 50; – X becomes -50</td>
</tr>
<tr>
<td style="text-align:left"><strong>Natural</strong></td>
<td style="text-align:left">Subtype of Integer constrained to 0…Max_Integer; prevents negative values</td>
<td style="text-align:left">declare Y: Natural := 0; Y := Y + 1; – Valid</td>
</tr>
<tr>
<td style="text-align:left"><strong>Positive</strong></td>
<td style="text-align:left">Subtype of Integer constrained to 1…Max_Integer; prevents zero or negative values</td>
<td style="text-align:left">declare Z: Positive := 1; Z := Z * 2; – Valid</td>
</tr>
<tr>
<td style="text-align:left"><strong>Float</strong></td>
<td style="text-align:left">Single-precision floating-point type; typically 6-9 significant digits</td>
<td style="text-align:left">declare F: Float := 3.14159; F := F * 2.0; – F becomes 6.28318</td>
</tr>
<tr>
<td style="text-align:left"><strong>Boolean</strong></td>
<td style="text-align:left">Represents true/false values; fundamental for conditional logic</td>
<td style="text-align:left">declare B: Boolean := True; if B then … end if;</td>
</tr>
<tr>
<td style="text-align:left"><strong>Character</strong></td>
<td style="text-align:left">Single character type; includes ASCII and extended characters</td>
<td style="text-align:left">declare C: Character := ‘A’; C := Character’Val(65); – ‘A’</td>
</tr>
<tr>
<td style="text-align:left"><strong>String</strong></td>
<td style="text-align:left">Fixed-length array of Character; size must be specified at declaration</td>
<td style="text-align:left">declare S: String(1…5) := “Hello”; S(1) := ‘h’; – Valid but S’Length remains 5</td>
</tr>
<tr>
<td style="text-align:left"><strong>Duration</strong></td>
<td style="text-align:left">Time interval type; represents seconds as floating-point value</td>
<td style="text-align:left">declare D: Duration := 1.5; delay D; – Delays for 1.5 seconds</td>
</tr>
<tr>
<td style="text-align:left"><strong>Ada.Strings.Unbounded.Unbounded_String</strong></td>
<td style="text-align:left">Dynamic string type that automatically manages memory; grows/shrinks as needed</td>
<td style="text-align:left">declare U: Unbounded_String := To_Unbounded_String(“Ada”); U := U &amp; " is fun!"; – U becomes “Ada is fun!”</td>
</tr>
</tbody>
</table>
<p>Ada’s standard types are designed for clarity and safety. For example, Natural and Positive are subtypes of Integer with built-in constraints that prevent negative values. This eliminates common off-by-one errors. Unbounded_String is more flexible than fixed-length String because it automatically manages memory for dynamic content—ideal for user input or file processing where length is unknown. While Root_Integer and Root_Real are the root types for numeric types (providing base operations for all numeric types), beginners will rarely interact with them directly—they exist primarily for language implementation and advanced generic programming.</p>
<p>Consider this practical example demonstrating type safety:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   Age: Natural := <span class="hljs-number">25</span>;
   Temperature: Float := <span class="hljs-number">36.5</span>;
   Name: Unbounded_String := To_Unbounded_String(<span class="hljs-string">"Ada"</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Valid: Natural can only hold non-negative values</span>
   Age := Age + <span class="hljs-number">1</span>;
   
   <span class="hljs-comment">-- Invalid: Trying to assign negative value to Natural</span>
   <span class="hljs-comment">-- Age := -1; -- Compilation error: Constraint_Error</span>
   
   <span class="hljs-comment">-- Valid: Unbounded_String can grow dynamically</span>
   Name := Name &amp; <span class="hljs-string">" is a great language!"</span>;
   
   <span class="hljs-comment">-- Invalid: Trying to assign string to Integer</span>
   <span class="hljs-comment">-- Age := 3.14; -- Compilation error: type mismatch</span>
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This example shows how Ada’s strong typing catches errors at compile time rather than runtime—saving debugging time and preventing subtle bugs.</p>
<h2>25.3 Operator Precedence</h2>
<p>Operator precedence determines the order in which operations are evaluated in expressions. Understanding precedence is critical for writing correct and readable code, especially when combining multiple operators. The table below lists operators by precedence level, with higher precedence operators evaluated first. Each row includes associativity (how operators of the same precedence are grouped), which affects evaluation order for consecutive operators of the same level.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Precedence Level</strong></th>
<th style="text-align:left"><strong>Operators</strong></th>
<th style="text-align:left"><strong>Associativity</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>1</strong></td>
<td style="text-align:left"><strong>. (select), ’ (attribute)</strong></td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left"><strong>2</strong></td>
<td style="text-align:left">**not, abs, **</td>
<td style="text-align:left">Right</td>
</tr>
<tr>
<td style="text-align:left"><strong>3</strong></td>
<td style="text-align:left">*<strong>, /, mod, rem</strong></td>
<td style="text-align:left">Left</td>
</tr>
<tr>
<td style="text-align:left"><strong>4</strong></td>
<td style="text-align:left"><strong>+, -</strong></td>
<td style="text-align:left">Left</td>
</tr>
<tr>
<td style="text-align:left"><strong>5</strong></td>
<td style="text-align:left"><strong>&amp;, &amp; (string concatenation)</strong></td>
<td style="text-align:left">Left</td>
</tr>
<tr>
<td style="text-align:left"><strong>6</strong></td>
<td style="text-align:left"><strong>=, /=, &lt;, &lt;=, &gt;, &gt;=</strong></td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left"><strong>7</strong></td>
<td style="text-align:left"><strong>and, and then, or, or else, xor</strong></td>
<td style="text-align:left">Left</td>
</tr>
<tr>
<td style="text-align:left"><strong>8</strong></td>
<td style="text-align:left"><strong>in, not in</strong></td>
<td style="text-align:left">Left</td>
</tr>
</tbody>
</table>
<blockquote>
<p>In the expression <code>A + B * C</code>, multiplication (<code>*</code>) has higher precedence than addition (<code>+</code>), so it is evaluated as <code>A + (B * C)</code>. For <code>X or Y and Z</code>, <code>and</code> has higher precedence than <code>or</code>, so it’s <code>X or (Y and Z)</code>. The <code>**</code> operator is right-associative: <code>2**3**2</code> equals <code>2**(3**2) = 512</code>, not <code>(2**3)**2 = 64</code>.</p>
</blockquote>
<p>Consider these practical examples demonstrating precedence rules:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-comment">-- Example 1: Multiplication before addition</span>
<span class="hljs-keyword">declare</span>
   X: Integer := <span class="hljs-number">5</span>;
   Y: Integer := <span class="hljs-number">3</span>;
   Z: Integer := X + Y * <span class="hljs-number">2</span>;  <span class="hljs-comment">-- Y*2 first: 3*2=6, then 5+6=11</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Z equals 11, not 16</span>
<span class="hljs-keyword">end</span>;

<span class="hljs-comment">-- Example 2: Right-associative exponentiation</span>
<span class="hljs-keyword">declare</span>
   A: Integer := <span class="hljs-number">2</span>;
   B: Integer := <span class="hljs-number">3</span>;
   C: Integer := <span class="hljs-number">2</span>;
   Result: Integer := A ** B ** C;  <span class="hljs-comment">-- B**C first: 3**2=9, then 2**9=512</span>
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Result equals 512</span>
<span class="hljs-keyword">end</span>;

<span class="hljs-comment">-- Example 3: Short-circuit evaluation with and then/or else</span>
<span class="hljs-keyword">declare</span>
   Valid: Boolean := <span class="hljs-literal">False</span>;
   Data: Integer := <span class="hljs-number">10</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Safe: checks Valid first before accessing Data</span>
   <span class="hljs-keyword">if</span> Valid <span class="hljs-keyword">and</span> <span class="hljs-keyword">then</span> Data &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- Executes only if Valid is true</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
   
   <span class="hljs-comment">-- Safe: checks Data first before accessing Valid</span>
   <span class="hljs-keyword">if</span> Data &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">else</span> Valid <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- Executes if Data &gt; 0 (no need to check Valid)</span>
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span>;
</code></pre>
<p>The short-circuit operators (<code>and then</code>, <code>or else</code>) are particularly important for safe programming—they prevent evaluating expressions that might cause errors. For example, in <code>if Pointer /= null and then Pointer.Data &gt; 0</code>, the second condition is only evaluated if the pointer is valid.</p>
<h2>25.4 Useful Attributes</h2>
<p>Attributes in Ada provide metadata about types and objects. They are prefixed with an apostrophe (') and are invaluable for writing generic and type-safe code. Attributes allow you to query information about types without hardcoding values, making your code more adaptable and maintainable. The table below lists common attributes for scalar types and arrays, with practical examples for each.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Attribute</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>'First</strong></td>
<td style="text-align:left">First value of a type or array dimension</td>
<td style="text-align:left">declare X: Integer range 1…10; X’First = 1</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Last</strong></td>
<td style="text-align:left">Last value of a type or array dimension</td>
<td style="text-align:left">X’Last = 10</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Range</strong></td>
<td style="text-align:left">Range of values for a type or array dimension</td>
<td style="text-align:left">X’Range = 1…10</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Length</strong></td>
<td style="text-align:left">Number of elements in an array</td>
<td style="text-align:left">declare A: array (1…5) of Integer; A’Length = 5</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Image</strong></td>
<td style="text-align:left">String representation of a value</td>
<td style="text-align:left">Integer’Image(42) = " 42"</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Value</strong></td>
<td style="text-align:left">Convert string to value</td>
<td style="text-align:left">Integer’Value(“42”) = 42</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Pos</strong></td>
<td style="text-align:left">Position of an enumeration value</td>
<td style="text-align:left">‘A’ for Character’Pos</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Val</strong></td>
<td style="text-align:left">Value for a position</td>
<td style="text-align:left">Character’Val(65) = ‘A’</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Succ</strong></td>
<td style="text-align:left">Successor of a value</td>
<td style="text-align:left">'A’Succ = ‘B’</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Pred</strong></td>
<td style="text-align:left">Predecessor of a value</td>
<td style="text-align:left">'B’Pred = ‘A’</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Width</strong></td>
<td style="text-align:left">Width of string representation</td>
<td style="text-align:left">Integer’Width = 11</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Digits</strong></td>
<td style="text-align:left">Precision of floating-point type</td>
<td style="text-align:left">Float’Digits = 6</td>
</tr>
<tr>
<td style="text-align:left"><strong>'First(N)</strong></td>
<td style="text-align:left">First value of dimension N</td>
<td style="text-align:left">declare A: array (1…5, 1…3) of Integer; A’First(1) = 1</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Last(N)</strong></td>
<td style="text-align:left">Last value of dimension N</td>
<td style="text-align:left">A’Last(2) = 3</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Range(N)</strong></td>
<td style="text-align:left">Range of dimension N</td>
<td style="text-align:left">A’Range(1) = 1…5</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Length(N)</strong></td>
<td style="text-align:left">Length of dimension N</td>
<td style="text-align:left">A’Length(2) = 3</td>
</tr>
<tr>
<td style="text-align:left"><strong>'Size</strong></td>
<td style="text-align:left">Size in bits of the object</td>
<td style="text-align:left">Integer’Size = 32</td>
</tr>
</tbody>
</table>
<p>Attributes like 'Succ and 'Pred are essential for enumeration types. For example, if you have an enumeration type Day with Monday, Tuesday, etc., Monday’Succ is Tuesday. This makes iterating through days straightforward:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">type</span> <span class="hljs-type">Day </span><span class="hljs-keyword">is</span> (Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday);

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Print_Days</span> <span class="hljs-keyword">is</span>
   Current: Day := Monday;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">while</span> Current /= Sunday <span class="hljs-keyword">loop</span>
      Put_Line(Day<span class="hljs-symbol">'Image</span>(Current));
      Current := Current<span class="hljs-symbol">'Succ</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Put_Line(Day<span class="hljs-symbol">'Image</span>(Sunday));
<span class="hljs-keyword">end</span> Print_Days;
</code></pre>
<p>'Width provides insight into how values will be formatted as strings. For example, Integer’Width is typically 11 for 32-bit systems (accounting for negative sign and 10 digits). This is useful for formatting output:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   N: Integer := <span class="hljs-number">42</span>;
<span class="hljs-keyword">begin</span>
   Put_Line(Integer<span class="hljs-symbol">'Image</span>(N));  <span class="hljs-comment">-- Outputs " 42" (with leading space)</span>
   Put_Line(Integer<span class="hljs-symbol">'Image</span>(-<span class="hljs-number">100</span>)); <span class="hljs-comment">-- Outputs "-100"</span>
<span class="hljs-keyword">end</span>;
</code></pre>
<p>For floating-point types, 'Digits indicates the number of significant digits. Float’Digits is typically 6, meaning about 6 decimal digits of precision. This is crucial for numerical accuracy:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   F: Float := <span class="hljs-number">1.23456789</span>;
<span class="hljs-keyword">begin</span>
   Put_Line(Float<span class="hljs-symbol">'Image</span>(F));  <span class="hljs-comment">-- Outputs " 1.23457" (rounded to 6 digits)</span>
<span class="hljs-keyword">end</span>;
</code></pre>
<p>'First(N), 'Last(N), etc. are invaluable for multi-dimensional arrays. Consider a 2D grid:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   <span class="hljs-keyword">type</span> <span class="hljs-type">Grid </span><span class="hljs-keyword">is</span> <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>, <span class="hljs-number">1</span>..<span class="hljs-number">5</span>) <span class="hljs-keyword">of</span> Integer;
   G: Grid;
<span class="hljs-keyword">begin</span>
   <span class="hljs-comment">-- Loop through all elements safely</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> G<span class="hljs-symbol">'First</span>(<span class="hljs-number">1</span>) .. G<span class="hljs-symbol">'Last</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> G<span class="hljs-symbol">'First</span>(<span class="hljs-number">2</span>) .. G<span class="hljs-symbol">'Last</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">loop</span>
         G(I, J) := I * J;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This approach ensures your loops work correctly even if array dimensions change—making your code more maintainable.</p>
<h2>25.5 Control Structures</h2>
<p>Control structures manage the flow of execution in Ada programs. These structures allow you to make decisions, repeat actions, and handle complex logic in a structured way. Ada’s control structures are designed for clarity and safety—each has explicit syntax that prevents common programming errors. Below is a reference table for the most commonly used control structures with practical syntax examples.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Structure</strong></th>
<th style="text-align:left"><strong>Syntax</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>if</strong></td>
<td style="text-align:left">if condition then … end if;</td>
<td style="text-align:left">if X &gt; 0 then Put_Line(“Positive”); end if;</td>
</tr>
<tr>
<td style="text-align:left"><strong>if-else</strong></td>
<td style="text-align:left">if condition then … else … end if;</td>
<td style="text-align:left">if Temperature &gt; 30 then Put_Line(“Hot”); else Put_Line(“Cool”); end if;</td>
</tr>
<tr>
<td style="text-align:left"><strong>if-elsif</strong></td>
<td style="text-align:left">if … elsif … else … end if;</td>
<td style="text-align:left">if Grade &gt;= 90 then Put_Line(“A”); elsif Grade &gt;= 80 then Put_Line(“B”); else Put_Line(“C”); end if;</td>
</tr>
<tr>
<td style="text-align:left"><strong>case</strong></td>
<td style="text-align:left">case expr is when … =&gt; … end case;</td>
<td style="text-align:left">case Day is when Monday =&gt; … end case;</td>
</tr>
<tr>
<td style="text-align:left"><strong>case with ranges</strong></td>
<td style="text-align:left">case expr is when 1…10 =&gt; … end case;</td>
<td style="text-align:left">case Num is when 1…5 =&gt; Put_Line(“Small”); when 6…10 =&gt; Put_Line(“Medium”); end case;</td>
</tr>
<tr>
<td style="text-align:left"><strong>case with multiple values</strong></td>
<td style="text-align:left">case expr is when ‘a’</td>
<td style="text-align:left">‘e’</td>
</tr>
<tr>
<td style="text-align:left"><strong>for loop</strong></td>
<td style="text-align:left">for i in range loop … end loop;</td>
<td style="text-align:left">for I in 1…10 loop Put_Line(Integer’Image(I)); end loop;</td>
</tr>
<tr>
<td style="text-align:left"><strong>reverse for loop</strong></td>
<td style="text-align:left">for i in reverse range loop … end loop;</td>
<td style="text-align:left">for I in reverse 1…10 loop … end loop;</td>
</tr>
<tr>
<td style="text-align:left"><strong>named loop</strong></td>
<td style="text-align:left">Loop_Name: loop … exit Loop_Name when …; end loop Loop_Name;</td>
<td style="text-align:left">Outer: loop … exit Outer when Done; end loop Outer;</td>
</tr>
<tr>
<td style="text-align:left"><strong>while loop</strong></td>
<td style="text-align:left">while condition loop … end loop;</td>
<td style="text-align:left">while X &lt; 10 loop X := X + 1; end loop;</td>
</tr>
<tr>
<td style="text-align:left"><strong>loop with exit</strong></td>
<td style="text-align:left">loop … exit when …; end loop;</td>
<td style="text-align:left">loop … exit when X &gt; 5; end loop;</td>
</tr>
</tbody>
</table>
<p>Named loops are critical for nested loops where you need to exit a specific loop. For example, in a matrix processing loop, you can name the outer loop and exit it directly from an inner loop:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   Matrix: <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>, <span class="hljs-number">1</span>..<span class="hljs-number">10</span>) <span class="hljs-keyword">of</span> Integer;
   Found: Boolean := <span class="hljs-literal">False</span>;
<span class="hljs-keyword">begin</span>
   Outer_Loop: <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> <span class="hljs-keyword">loop</span>
      <span class="hljs-keyword">for</span> J <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> <span class="hljs-keyword">loop</span>
         <span class="hljs-keyword">if</span> Matrix(I, J) = <span class="hljs-number">42</span> <span class="hljs-keyword">then</span>
            Found := <span class="hljs-literal">True</span>;
            <span class="hljs-keyword">exit</span> Outer_Loop;  <span class="hljs-comment">-- Exits both loops immediately</span>
         <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
      <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span> Outer_Loop;
   
   <span class="hljs-keyword">if</span> Found <span class="hljs-keyword">then</span>
      Put_Line(<span class="hljs-string">"Found 42 in matrix"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;
<span class="hljs-keyword">end</span>;
</code></pre>
<p>The <code>reverse</code> keyword simplifies backward iteration without manual index adjustment. This is especially useful for array processing:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   Data: <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">5</span>) <span class="hljs-keyword">of</span> Integer := (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-keyword">reverse</span> Data<span class="hljs-symbol">'Range</span> <span class="hljs-keyword">loop</span>
      Put_Line(Integer<span class="hljs-symbol">'Image</span>(Data(I)));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   <span class="hljs-comment">-- Outputs: 5 4 3 2 1</span>
<span class="hljs-keyword">end</span>;
</code></pre>
<p>Case statements with ranges and multiple values make pattern matching concise and readable. For example, validating input:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   Input: Character := <span class="hljs-string">'3'</span>;
<span class="hljs-keyword">begin</span>
   <span class="hljs-keyword">case</span> Input <span class="hljs-keyword">is</span>
      <span class="hljs-keyword">when</span> <span class="hljs-string">'0'</span> | <span class="hljs-string">'1'</span> | <span class="hljs-string">'2'</span> | <span class="hljs-string">'3'</span> | <span class="hljs-string">'4'</span> | <span class="hljs-string">'5'</span> | <span class="hljs-string">'6'</span> | <span class="hljs-string">'7'</span> | <span class="hljs-string">'8'</span> | <span class="hljs-string">'9'</span> =&gt;
         Put_Line(<span class="hljs-string">"Digit"</span>);
      <span class="hljs-keyword">when</span> <span class="hljs-string">'A'</span> | <span class="hljs-string">'B'</span> | <span class="hljs-string">'C'</span> | <span class="hljs-string">'D'</span> | <span class="hljs-string">'E'</span> | <span class="hljs-string">'F'</span> =&gt;
         Put_Line(<span class="hljs-string">"Hex digit"</span>);
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Put_Line(<span class="hljs-string">"Invalid input"</span>);
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This approach is cleaner and more maintainable than nested if-else statements.</p>
<h2>25.6 Subprogram Parameter Modes</h2>
<p>Ada uses parameter modes to specify how data flows between subprograms. The mode determines whether a parameter can be read, written, or both. Understanding these modes is crucial for writing safe and efficient code—misusing them can lead to subtle bugs or inefficient memory usage. The table below summarizes the three modes and their usage guidelines.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Mode</strong></th>
<th style="text-align:left"><strong>Read</strong></th>
<th style="text-align:left"><strong>Write</strong></th>
<th style="text-align:left"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>in</strong></td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">No</td>
<td style="text-align:left">Default for function parameters; safest for input-only data</td>
</tr>
<tr>
<td style="text-align:left"><strong>out</strong></td>
<td style="text-align:left">No</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">For returning values when initial value is irrelevant</td>
</tr>
<tr>
<td style="text-align:left"><strong>in out</strong></td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">For modifying existing values (e.g., buffers)</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><strong>in</strong>: Use for all function parameters and when data is only read. This is the safest mode and the default for functions.</li>
<li><strong>out</strong>: Use when a procedure needs to return a value but doesn’t require an initial value. For example, a procedure that generates a random number.</li>
<li><strong>in out</strong>: Use when a procedure needs to modify an existing value. For example, a procedure that updates a buffer.</li>
</ul>
</blockquote>
<p>Functions can only have <code>in</code> parameters. Attempting to use <code>out</code> or <code>in out</code> in a function results in a compilation error. This restriction ensures functions are pure—they don’t modify external state and can be safely used in expressions.</p>
<p>Here’s a complete example demonstrating all three modes:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Example</span>(
   Input : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type">Integer</span>;        <span class="hljs-comment">-- Read-only input</span>
   Output : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>;      <span class="hljs-comment">-- New value returned</span>
   Modifiable : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-type">Integer</span>) <span class="hljs-comment">-- Modified in place</span>
<span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   Output := Input * <span class="hljs-number">2</span>;
   Modifiable := Modifiable + <span class="hljs-number">1</span>;
<span class="hljs-keyword">end</span> Example;

<span class="hljs-keyword">declare</span>
   A: Integer := <span class="hljs-number">5</span>;
   B: Integer;
   C: Integer := <span class="hljs-number">10</span>;
<span class="hljs-keyword">begin</span>
   Example(A, B, C);
   <span class="hljs-comment">-- A remains 5 (unchanged)</span>
   <span class="hljs-comment">-- B becomes 10 (new value)</span>
   <span class="hljs-comment">-- C becomes 11 (modified in place)</span>
<span class="hljs-keyword">end</span>;
</code></pre>
<p>The <code>in</code> parameter <code>Input</code> is read-only—any attempt to modify it inside the procedure would cause a compilation error. The <code>out</code> parameter <code>Output</code> is ignored on entry—its initial value is irrelevant—and must be assigned before the procedure returns. The <code>in out</code> parameter <code>Modifiable</code> is read on entry and can be modified—changes persist after the procedure returns.</p>
<p>When designing subprograms, follow these best practices:</p>
<ul>
<li>Prefer <code>in</code> parameters whenever possible—they’re safest and most flexible</li>
<li>Use <code>out</code> only when you need to return a value that doesn’t depend on initial input</li>
<li>Use <code>in out</code> only when you need to modify existing data (e.g., updating a buffer)</li>
<li>Avoid <code>in out</code> for simple values—return values via <code>out</code> or function results instead</li>
</ul>
<p>This approach ensures your code is clear, maintainable, and less prone to unexpected side effects.</p>
<h2>25.7 Common I/O Operations</h2>
<p>Ada’s standard I/O packages provide robust input/output capabilities. This section covers the most frequently used operations across different packages, with detailed examples for each. Proper I/O handling is essential for any practical application—from simple console programs to complex file processing systems.</p>
<h3>25.7.1 Ada.Text_IO</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Procedure/Function</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Put_Line</strong></td>
<td style="text-align:left">Output string with newline</td>
<td style="text-align:left">Put_Line(“Hello”);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Put</strong></td>
<td style="text-align:left">Output string without newline</td>
<td style="text-align:left">Put(“Hello”);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Get_Line</strong></td>
<td style="text-align:left">Read line from stdin</td>
<td style="text-align:left">Get_Line(S);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Get</strong></td>
<td style="text-align:left">Read single character</td>
<td style="text-align:left">Get©;</td>
</tr>
<tr>
<td style="text-align:left"><strong>Open</strong></td>
<td style="text-align:left">Open file</td>
<td style="text-align:left">Open(File, In_File, “input.txt”);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Close</strong></td>
<td style="text-align:left">Close file</td>
<td style="text-align:left">Close(File);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Is_End_Of_File</strong></td>
<td style="text-align:left">Check if end of file</td>
<td style="text-align:left">Is_End_Of_File(File)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Create</strong></td>
<td style="text-align:left">Create new file</td>
<td style="text-align:left">Create(File, Out_File, “output.txt”);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Set_Output</strong></td>
<td style="text-align:left">Redirect output to file</td>
<td style="text-align:left">Set_Output(File);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Reset</strong></td>
<td style="text-align:left">Reset file position</td>
<td style="text-align:left">Reset(File);</td>
</tr>
</tbody>
</table>
<h3>25.7.2 Ada.Integer_Text_IO</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Procedure/Function</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Put</strong></td>
<td style="text-align:left">Output integer</td>
<td style="text-align:left">Put(42);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Get</strong></td>
<td style="text-align:left">Read integer</td>
<td style="text-align:left">Get(N);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Width</strong></td>
<td style="text-align:left">Set minimum field width</td>
<td style="text-align:left">Put(N, Width =&gt; 5);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Fore</strong></td>
<td style="text-align:left">Set leading spaces</td>
<td style="text-align:left">Put(N, Fore =&gt; 3);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Aft</strong></td>
<td style="text-align:left">Set decimal places</td>
<td style="text-align:left">Put(N, Aft =&gt; 2);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Base</strong></td>
<td style="text-align:left">Set number base (2-16)</td>
<td style="text-align:left">Put(N, Base =&gt; 16);</td>
</tr>
</tbody>
</table>
<h3>25.7.3 Ada.Float_Text_IO</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Procedure/Function</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Put</strong></td>
<td style="text-align:left">Output float</td>
<td style="text-align:left">Put(3.14);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Get</strong></td>
<td style="text-align:left">Read float</td>
<td style="text-align:left">Get(F);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Exp</strong></td>
<td style="text-align:left">Set exponent format</td>
<td style="text-align:left">Put(F, Exp =&gt; 3);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Fore</strong></td>
<td style="text-align:left">Set leading spaces</td>
<td style="text-align:left">Put(F, Fore =&gt; 4);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Aft</strong></td>
<td style="text-align:left">Set decimal places</td>
<td style="text-align:left">Put(F, Aft =&gt; 2);</td>
</tr>
</tbody>
</table>
<h3>25.7.4 Ada.Enumeration_IO</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Procedure/Function</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Put</strong></td>
<td style="text-align:left">Output enumeration value</td>
<td style="text-align:left">Put(Day);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Get</strong></td>
<td style="text-align:left">Read enumeration value</td>
<td style="text-align:left">Get(Day);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Image</strong></td>
<td style="text-align:left">Convert to string</td>
<td style="text-align:left">Day’Image;</td>
</tr>
</tbody>
</table>
<h3>25.7.5 Ada.Command_Line</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Procedure/Function</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
<th style="text-align:left"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Argument_Count</strong></td>
<td style="text-align:left">Number of command-line arguments</td>
<td style="text-align:left">Count := Argument_Count;</td>
</tr>
<tr>
<td style="text-align:left"><strong>Argument</strong></td>
<td style="text-align:left">Get specific argument</td>
<td style="text-align:left">Arg := Argument(1);</td>
</tr>
<tr>
<td style="text-align:left"><strong>Environment_Variable</strong></td>
<td style="text-align:left">Get environment variable</td>
<td style="text-align:left">Env := Environment_Variable(“PATH”);</td>
</tr>
</tbody>
</table>
<p>Here’s a complete example demonstrating file reading with Ada.Text_IO:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Read_File</span> <span class="hljs-keyword">is</span>
   File : <span class="hljs-type">File_Type</span>;
   Line : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>);
   Last : <span class="hljs-type">Natural</span>;
<span class="hljs-keyword">begin</span>
   Open(File, In_File, <span class="hljs-string">"data.txt"</span>);
   <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> Is_End_Of_File(File) <span class="hljs-keyword">loop</span>
      Get_Line(File, Line, Last);
      Put_Line(Line(<span class="hljs-number">1</span>..Last));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
   Close(File);
<span class="hljs-keyword">end</span> Read_File;
</code></pre>
<p>This code safely reads a text file line by line, handling variable-length lines correctly. The <code>Last</code> variable tracks the actual length of each line, ensuring no trailing garbage is printed.</p>
<p>For numeric formatting, consider this example using Ada.Integer_Text_IO:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Integer_Text_IO; <span class="hljs-keyword">use</span> Ada.Integer_Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Format_Numbers</span> <span class="hljs-keyword">is</span>
   N: Integer := <span class="hljs-number">42</span>;
<span class="hljs-keyword">begin</span>
   Put(N, Width =&gt; <span class="hljs-number">5</span>);      <span class="hljs-comment">-- Outputs "   42" (5-character width)</span>
   Put(N, Fore =&gt; <span class="hljs-number">3</span>);       <span class="hljs-comment">-- Outputs "  42" (3 leading spaces)</span>
   Put(N, Base =&gt; <span class="hljs-number">16</span>);      <span class="hljs-comment">-- Outputs "2A" (hexadecimal)</span>
   Put(N, Base =&gt; <span class="hljs-number">2</span>);       <span class="hljs-comment">-- Outputs "101010" (binary)</span>
<span class="hljs-keyword">end</span> Format_Numbers;
</code></pre>
<p>This demonstrates how to control output format for integers—essential for creating consistent reports or logs.</p>
<p>For floating-point formatting:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Float_Text_IO; <span class="hljs-keyword">use</span> Ada.Float_Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Format_Floats</span> <span class="hljs-keyword">is</span>
   F: Float := <span class="hljs-number">3.14159</span>;
<span class="hljs-keyword">begin</span>
   Put(F, Aft =&gt; <span class="hljs-number">2</span>);        <span class="hljs-comment">-- Outputs " 3.14" (2 decimal places)</span>
   Put(F, Exp =&gt; <span class="hljs-number">3</span>);        <span class="hljs-comment">-- Outputs " 3.142E+00" (exponent format)</span>
   Put(F, Fore =&gt; <span class="hljs-number">4</span>, Aft =&gt; <span class="hljs-number">3</span>); <span class="hljs-comment">-- Outputs " 3.142" (4 leading spaces, 3 decimals)</span>
<span class="hljs-keyword">end</span> Format_Floats;
</code></pre>
<p>This shows how to control precision and formatting for floating-point values—critical for scientific or financial applications.</p>
<p>Command-line argument processing is straightforward with Ada.Command_Line:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Command_Line; <span class="hljs-keyword">use</span> Ada.Command_Line;
<span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Process_Args</span> <span class="hljs-keyword">is</span>
   Count: Natural := Argument_Count;
<span class="hljs-keyword">begin</span>
   Put_Line(<span class="hljs-string">"Number of arguments: "</span> &amp; Natural<span class="hljs-symbol">'Image</span>(Count));
   <span class="hljs-keyword">for</span> I <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..Count <span class="hljs-keyword">loop</span>
      Put_Line(<span class="hljs-string">"Argument "</span> &amp; Integer<span class="hljs-symbol">'Image</span>(I) &amp; <span class="hljs-string">": "</span> &amp; Argument(I));
   <span class="hljs-keyword">end</span> <span class="hljs-keyword">loop</span>;
<span class="hljs-keyword">end</span> Process_Args;
</code></pre>
<p>When run as <code>./app arg1 arg2</code>, this outputs:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Number of arguments:</span> <span class="hljs-number">2</span>
<span class="hljs-attr">Argument 1:</span> <span class="hljs-string">arg1</span>
<span class="hljs-attr">Argument 2:</span> <span class="hljs-string">arg2</span>
</code></pre>
<p>This pattern is essential for creating command-line utilities and scripts.</p>
<h2>25.8 Predefined Exceptions</h2>
<p>Exceptions in Ada handle runtime errors gracefully. Unlike languages that rely solely on return codes, Ada’s exception mechanism provides structured error handling that separates normal code from error-handling logic. This section lists common exceptions and shows how to handle them effectively.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Exception</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Constraint_Error</strong></td>
<td style="text-align:left">Violation of type constraints (e.g., array bounds, numeric overflow)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Program_Error</strong></td>
<td style="text-align:left">Internal inconsistency (e.g., invalid dispatch, null access dereference)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Storage_Error</strong></td>
<td style="text-align:left">Memory allocation failure (e.g., stack overflow)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Data_Error</strong></td>
<td style="text-align:left">Invalid data conversion (e.g., string to number)</td>
</tr>
<tr>
<td style="text-align:left"><strong>Tasking_Error</strong></td>
<td style="text-align:left">Task-related error (e.g., invalid task operation)</td>
</tr>
</tbody>
</table>
<h3>25.8.1 Exception Handler Syntax</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Syntax Element</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>exception</strong></td>
<td style="text-align:left">Start of exception handler</td>
</tr>
<tr>
<td style="text-align:left"><strong>when Some_Error =&gt;</strong></td>
<td style="text-align:left">Handle specific exception</td>
</tr>
<tr>
<td style="text-align:left">**when A</td>
<td style="text-align:left">B =&gt;**</td>
</tr>
<tr>
<td style="text-align:left"><strong>when others =&gt;</strong></td>
<td style="text-align:left">Handle all other exceptions</td>
</tr>
<tr>
<td style="text-align:left"><strong>raise;</strong></td>
<td style="text-align:left">Re-raise current exception</td>
</tr>
<tr>
<td style="text-align:left"><strong>raise New_Error;</strong></td>
<td style="text-align:left">Raise new exception</td>
</tr>
</tbody>
</table>
<p>Here’s a practical example demonstrating exception handling for data conversion:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">with</span> Ada.Text_IO; <span class="hljs-keyword">use</span> Ada.Text_IO;
<span class="hljs-keyword">with</span> Ada.Integer_Text_IO; <span class="hljs-keyword">use</span> Ada.Integer_Text_IO;

<span class="hljs-keyword">procedure</span> <span class="hljs-title">Handle_Exception</span> <span class="hljs-keyword">is</span>
   Input : <span class="hljs-type">String</span>(<span class="hljs-number">1</span>..<span class="hljs-number">10</span>);
   Last : <span class="hljs-type">Natural</span>;
   Value : <span class="hljs-type">Integer</span>;
<span class="hljs-keyword">begin</span>
   Put(<span class="hljs-string">"Enter a number: "</span>);
   Get_Line(Input, Last);
   <span class="hljs-keyword">begin</span>
      Value := Integer<span class="hljs-symbol">'Value</span>(Input(<span class="hljs-number">1</span>..Last));
      Put(<span class="hljs-string">"You entered: "</span>);
      Put(Value);
   <span class="hljs-keyword">exception</span>
      <span class="hljs-keyword">when</span> Data_Error =&gt;
         Put_Line(<span class="hljs-string">"Error: Invalid number format"</span>);
      <span class="hljs-keyword">when</span> <span class="hljs-keyword">others</span> =&gt;
         Put_Line(<span class="hljs-string">"Unexpected error occurred"</span>);
   <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span> Handle_Exception;
</code></pre>
<p>When run, this program safely handles invalid inputs:</p>
<pre><code class="hljs language-yaml" data-highlighted="yes"><span class="hljs-attr">Enter a number:</span> <span class="hljs-string">abc</span>
<span class="hljs-attr">Error:</span> <span class="hljs-string">Invalid</span> <span class="hljs-string">number</span> <span class="hljs-string">format</span>

<span class="hljs-attr">Enter a number:</span> <span class="hljs-number">42</span>
<span class="hljs-attr">You entered:</span> <span class="hljs-number">42</span>
</code></pre>
<p>The <code>Data_Error</code> exception is raised when <code>Integer'Value</code> encounters invalid input. The <code>when others</code> handler catches any unexpected errors—though for production code, you’d typically handle specific exceptions first.</p>
<p>For array bounds errors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">declare</span>
   A: <span class="hljs-keyword">array</span> (<span class="hljs-number">1</span>..<span class="hljs-number">5</span>) <span class="hljs-keyword">of</span> Integer;
<span class="hljs-keyword">begin</span>
   A(<span class="hljs-number">6</span>) := <span class="hljs-number">42</span>;  <span class="hljs-comment">-- Constraint_Error: index out of range</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Constraint_Error =&gt;
      Put_Line(<span class="hljs-string">"Array index out of bounds"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This demonstrates how Ada catches out-of-bounds errors at runtime—preventing memory corruption that would occur in languages like C.</p>
<p>For tasking errors:</p>
<pre><code class="language-ada hljs" data-highlighted="yes"><span class="hljs-keyword">task</span> <span class="hljs-keyword">type</span> <span class="hljs-type">Worker </span><span class="hljs-keyword">is</span>
   <span class="hljs-keyword">entry</span> Start;
<span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">task</span> <span class="hljs-keyword">body</span> Worker <span class="hljs-keyword">is</span>
<span class="hljs-keyword">begin</span>
   null;
<span class="hljs-keyword">end</span> Worker;

<span class="hljs-keyword">declare</span>
   W: Worker;
<span class="hljs-keyword">begin</span>
   W.Start;  <span class="hljs-comment">-- Tasking_Error: task already terminated</span>
<span class="hljs-keyword">exception</span>
   <span class="hljs-keyword">when</span> Tasking_Error =&gt;
      Put_Line(<span class="hljs-string">"Invalid task operation"</span>);
<span class="hljs-keyword">end</span>;
</code></pre>
<p>This shows how Ada handles invalid task operations—critical for concurrent programs.</p>
<blockquote>
<p>“Ada’s exception mechanism ensures that errors are handled explicitly and safely. By separating error-handling logic from normal code, you create programs that are more reliable and easier to maintain.”</p>
</blockquote>
<h2>25.9 Conclusion</h2>
<blockquote>
<p>“Ada’s design philosophy prioritizes clarity and correctness over convenience. This reference guide embodies that principle by providing precise, actionable information without unnecessary complexity—empowering you to write code that is both reliable and maintainable from the start.”</p>
</blockquote>
<p>This quick reference guide is your companion for everyday Ada development. While mastering Ada takes time, this resource provides immediate clarity on syntax, types, and patterns. Remember: the best code is clear, correct, and maintainable—use this guide to write code that stands the test of time.</p>
<p>As you begin writing your own projects, keep these principles in mind:</p>
<ul>
<li>Start small and build incrementally</li>
<li>Leverage Ada’s strong typing to catch errors early</li>
<li>Use standard libraries before reinventing the wheel</li>
<li>Test thoroughly—Ada’s safety features prevent many errors, but not all</li>
</ul>
<p>This guide has covered the essential building blocks of Ada programming. For deeper exploration, consult the Ada Reference Manual and explore the GNAT community resources. The Ada ecosystem is welcoming and supportive—don’t hesitate to ask questions and share your work with others.</p>
<blockquote>
<p>“The key to mastering Ada is understanding its design philosophy: safety through clarity. This reference guide embodies that principle by providing precise, actionable information without unnecessary complexity.”</p>
</blockquote>
<p>With this knowledge, you’re ready to tackle real-world programming challenges with confidence.</p>
</div>
</body>
</html>