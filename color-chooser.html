<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Chooser - Text Utilities</title>
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/custom.css">
</head>
<body class="bg-black text-light">
    <div id="header-placeholder"></div>
    <div class="container-fluid my-4">
        <div class="row gx-3 gy-3">
            <main class="col-md-9">
                <div class="card bg-dark border-secondary">
                    <div class="card-body">
                        <h2 class="card-title mb-4 d-flex align-items-center" id="dynamic-title">
                            <span class="material-icons me-3" style="font-size: 36px;" aria-hidden="true" id="tool-icon">palette</span>
                            <span id="tool-name">Color Chooser</span>
                        </h2>
                        <p class="text-white-50 mb-4" id="tool-description">Select named or custom colors and generate corresponding code snippets for various programming languages.</p>
                        <div class="post-content">
                            <form onsubmit="return false;" class="row g-3 align-items-end p-3 mb-4 rounded" style="background-color: #1E1E1E;">
                                <div class="col-md-4">
                                    <label for="colorCategory" class="form-label">Color Category</label>
                                    <select id="colorCategory" class="form-select">
                                        <option value="">--Select Category--</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label for="colorName" class="form-label">Color Name</label>
                                    <select id="colorName" class="form-select">
                                        <option value="">--Select Color--</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label for="languageSelect" class="form-label">Language Format</label>
                                    <select id="languageSelect" class="form-select"></select>
                                </div>
                            </form>
                            <div class="row g-3 align-items-center mb-4">
                                 <div class="col-md-auto">
                                    <input type="color" id="customColorInput" class="form-control form-control-color" value="#FFFFFF" title="Choose a custom color" style="width: 5rem; height: 3rem;">
                                </div>
                                <div class="col-md-auto">
                                    <button type="button" class="btn btn-task d-flex align-items-center" id="eyedropperBtn">
                                        <span class="material-icons me-2">colorize</span> Eyedropper
                                    </button>
                                </div>
                                <div class="col-md-auto">
                                    <div id="colorDisplay" class="border rounded" style="width: 5rem; height: 3rem; background-color: #FFFFFF; border-color: #444 !important;" title="Current Color"></div>
                                </div>
                                <div class="col">
                                    <label for="colorOutput" class="form-label visually-hidden">Color Code Output</label>
                                    <div class="position-relative">
                                        <textarea id="colorOutput" class="form-control font-monospace" rows="4" readonly placeholder="Select a color or language..."></textarea>
                                        <button type="button" class="btn btn-sm btn-edit position-absolute top-0 end-0 m-2" id="copyBtn" title="Copy Code">
                                             <span class="material-icons" style="font-size: 1.1rem;">content_copy</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <hr class="border-secondary my-4">
                            <h4 class="mb-3">Find Named Color by Code</h4>
                            <form id="colorSearchForm" onsubmit="return false;">
                                <div class="input-group">
                                    <button type="button" id="getCurrentColorBtn" class="btn btn-dark d-flex align-items-center">
                                        <span class="material-icons me-2">format_color_fill</span>Get Current
                                    </button>
                                    <input type="text" id="colorInput" class="form-control" placeholder="Enter hex (e.g., #FF0000) or RGB (e.g., 255, 0, 0)">
                                    <button type="submit" class="btn btn-task d-flex align-items-center">
                                         <span class="material-icons me-2">search</span>Set & Find
                                    </button>
                                </div>
                            </form>
                            <div id="colorSearchResult" class="mt-3" style="min-height: 48px;" aria-live="polite"></div>
                            
                            <hr class="border-secondary my-4">
                            <h4 class="mb-3">Export Color as PNG</h4>
                            <div class="row g-3 align-items-end">
                                <div class="col-md-3">
                                    <label for="pngWidth" class="form-label">Width (px)</label>
                                    <input type="number" id="pngWidth" class="form-control" value="200" min="10" max="2000">
                                </div>
                                <div class="col-md-3">
                                    <label for="pngHeight" class="form-label">Height (px)</label>
                                    <input type="number" id="pngHeight" class="form-control" value="200" min="10" max="2000">
                                </div>
                                <div class="col-md-3">
                                    <label for="pngFilename" class="form-label">Filename</label>
                                    <input type="text" id="pngFilename" class="form-control" value="color" placeholder="Enter filename (without extension)">
                                </div>
                                <div class="col-md-3">
                                    <button type="button" id="savePngBtn" class="btn btn-task d-flex align-items-center">
                                        <span class="material-icons me-2">save</span>Save as PNG
                                    </button>
                                </div>
                            </div>
                            <div class="mt-3" id="pngPreview" style="display: flex; justify-content: center; align-items: center;">
                                <!-- PNG preview will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <aside class="col-md-3">
                <div class="card bg-dark border-secondary">
                    <div class="card-body p-0">
                        <nav class="sidebar nav flex-column" id="dynamic-sidebar"></nav>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    <div id="footer-placeholder"></div>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/component-loader.js"></script>
    <script src="js/main.js"></script>
    <script>
        // --- Color Chooser Tool Logic ---
        (function() {
            'use strict';
            // --- Data Definitions (from C# version) ---
            const colors = { "Reds": { "BeanRed": "#F75D59", "BlackBean": "#3D0C02", "BloodNight": "#551606", "Burgundy": "#8C001A", "CarbonRed": "#A70D2A", "CherryRed": "#C24641", "ChilliPepper": "#C11B17", "ChocolateBrown": "#3F000F", "Cranberry": "#9F000F", "Crimson": "#DC143C", "CrimsonRed": "#990000", "DarkBurgundy": "#800020", "DarkMaroon": "#2F0909", "DarkRed": "#8B0000", "DarkSalmon": "#E9967A", "DarkScarlet": "#560319", "DeepRed": "#800517", "FerrariRed": "#F70D1A", "FireBrick": "#B22222", "FireEngineRed": "#F62817", "GarnetRed": "#733635", "Grapefruit": "#DC381F", "IndianRed": "#CD5C5C", "LavaRed": "#E42217", "LightCoral": "#F08080", "LoveRed": "#E41B17", "MaroonRed": "#8F0B0B", "Midnight": "#2B1B17", "NeonRed": "#FD1C03", "PastelRed": "#F67280", "PinkCoral": "#E77471", "Red": "#FF0000", "RedBlood": "#660000", "RedWine": "#990012", "RubyRed": "#F62217", "SaffronRed": "#931314", "Salmon": "#FA8072", "ScarletRed": "#FF2400", "ShockingOrange": "#E55B3C", "StrawberryRed": "#C83F49", "TomatoSauceRed": "#B21807", "ValentineRed": "#E55451", "Vermilion": "#7E191B" }, "Pinks": { "BlossomPink": "#F9B7FF", "BlushPink": "#E6A9EC", "CottonCandy": "#FCDFFF", "DarkRaspberry": "#872657", "DeepPeach": "#FFCBA4", "DeepPink": "#FF1493", "DesertSand": "#EDC9AF", "DullPurple": "#7F525D", "DuskyPink": "#CC7A8B", "DustyPink": "#D58A94", "DustyRose": "#C9A9A6", "GoldPink": "#E6C7C2", "HotPink": "#FF69B4", "KhakiRose": "#C5908E", "LightPink": "#FFB6C1", "LipstickPink": "#C48793", "MediumVioletRed": "#C71585", "OldRose": "#C08081", "PaleVioletRed": "#DB7093", "PastelBrown": "#B1907F", "PastelOrange": "#F8B88B", "PastelPurple": "#F2A2E8", "PeriwinklePink": "#E9CFEC", "PigPink": "#FDD7E4", "Pink": "#FFC0CB", "PinkBrown": "#C48189", "PinkDaisy": "#E799A3", "PlumPie": "#7D0541", "PlumVelvet": "#7D0552", "Puce": "#7F5A58", "PurpleLily": "#550A35", "PurpleMaroon": "#810541", "PurpleThistle": "#D2B9D3", "Rose": "#E8ADAA", "RoseDust": "#997070", "RoseGold": "#ECC5C0", "Rosy-Finch": "#7F4E52", "RosyPink": "#B38481", "SilverPink": "#C4AEAD", "UnbleachedSilk": "#FFDDCA", "VelvetMaroon": "#7E354D", "VioletRed": "#F6358A", "WatermelonPink": "#FC6C85", "WisteriaPurple": "#C6AEC7" }, "Oranges": { "BasketBallOrange": "#F88158", "ConstructionConeOrange": "#F87431", "Coral": "#FF7F50", "DarkOrange": "#FF8C00", "IndianSaffron": "#FF7722", "LightCopper": "#DA8A67", "LightSalmon": "#FFA07A", "LightSalmonRose": "#F9966B", "MangoOrange": "#FF8040", "Orange": "#FFA500", "OrangeRed": "#FF4500", "PinkOrange": "#F89880", "SalmonPink": "#FF8674", "SunriseOrange": "#E67451", "Tangerine": "#E78A61", "Tomato": "#FF6347" }, "Yellows": { "Amber": "#FFBF00", "BananaYellow": "#F5E216", "Beer": "#FBB117", "Blonde": "#FBF6D9", "BoldYellow": "#F9DB24", "BrightGold": "#FDD017", "BrownSugar": "#E2A76F", "CamelBrown": "#C19A6B", "CanaryYellow": "#FFEF00", "Cantaloupe": "#FFA62F", "CardboardBrown": "#EDDA74", "Champagne": "#F7E7CE", "CheeseOrange": "#FFA600", "ChromeGold": "#FFCE44", "CoralPeach": "#FBD5AB", "CornYellow": "#FFF380", "Cream": "#FFFFCC", "CreamWhite": "#FFFDD0", "DarkBlonde": "#F0E2B6", "DarkKhaki": "#BDB76B", "DeepYellow": "#F6BE00", "DirtyWhite": "#E8E4C9", "Gold": "#FFD700", "GoldenBlonde": "#FBE7A1", "GoldenBrown": "#EAC117", "GoldenSilk": "#F3E3C3", "GoldenYellow": "#FFDF00", "HarvestGold": "#EDE275", "Khaki": "#F0E68C", "LemonChiffon": "#FFFACD", "LemonYellow": "#FEF250", "LightBeige": "#FFF0DB", "LightGold": "#F1E5AC", "LightGoldenrodYellow": "#FAFAD2", "LightOrange": "#FED8B1", "LightYellow": "#FFFFE0", "MacaroniAndCheese": "#F2BB66", "Moccasin": "#FFE4B5", "MustardYellow": "#FFDB58", "NeonGold": "#FDBD01", "NeonYellow": "#FFFF33", "PaleGoldenrod": "#EEE8AA", "PapayaWhip": "#FFEFD5", "Parchment": "#FFFFC2", "PastelYellow": "#FAF884", "Peach": "#FFE5B4", "PeachPuff": "#FFDAB9", "RubberDuckyYellow": "#FFD801", "SafetyYellow": "#EED202", "Saffron": "#FBB917", "SunYellow": "#FFE87C", "TanBrown": "#ECE5B6", "Vanilla": "#F3E5AB", "WhiteYellow": "#F2F0DF", "Yellow": "#FFFF00", "YellowOrange": "#FFAE42" }, "Greens": { "AcidGreen": "#B0BF1A", "AlgaeGreen": "#64E986", "AlienGreen": "#6CC417", "AloeVeraGreen": "#98F516", "AquaGreen": "#12E193", "ArmyGreen": "#4B5320", "AvocadoGreen": "#B2C248", "BasilGreen": "#829F82", "BrightGreen": "#66FF00", "BroccoliGreen": "#026C3D", "CactusGreen": "#227442", "CamouflageGreen": "#78866B", "ChameleonGreen": "#BDF516", "Chartreuse": "#7FFF00", "ChromeWhite": "#E8F1D4", "CitronGreen": "#8FB31D", "CloverGreen": "#3EA055", "DarkCyan": "#008B8B", "DarkForestGreen": "#254117", "DarkGreen": "#006400", "DarkLimeGreen": "#41A317", "DarkOliveGreen": "#556B2F", "DarkSeaGreen": "#8FBC8F", "DeepEmeraldGreen": "#046307", "DeepGreen": "#056608", "DinosaurGreen": "#73A16C", "DollarBillGreen": "#85BB65", "DragonGreen": "#6AFB92", "DullGreenYellow": "#B1FB17", "Ebony": "#555D50", "EmeraldGreen": "#5FFB17", "FallForestGreen": "#4E9258", "FernGreen": "#667C26", "ForestGreen": "#228B22", "FrogGreen": "#99C68E", "GrassGreen": "#3F9B0B", "GrayGreen": "#A2AD9C", "Green": "#008000", "GreenApple": "#4CC417", "GreenLeaves": "#3A5F0B", "GreenOnion": "#6AA121", "GreenPeas": "#89C35C", "GreenPepper": "#4AA02C", "GreenSnake": "#6CBB3C", "GreenThumb": "#B5EAAA", "GreenYellow": "#ADFF2F", "HazelGreen": "#617C58", "HummingbirdGreen": "#7FE817", "HunterGreen": "#355E3B", "IguanaGreen": "#9CB071", "IrishGreen": "#08A04B", "JadeGreen": "#5EFB6E", "JungleGreen": "#347C2C", "KellyGreen": "#4CC552", "LawnGreen": "#7CFC00", "LemonGreen": "#ADF802", "LightGreen": "#90EE90", "LightJade": "#C3FDB8", "LightMintGreen": "#C2E5D3", "LightOliveGreen": "#B8BC86", "LightRoseGreen": "#DBF9DB", "LightSeaGreen": "#20B2AA", "Lime": "#00FF00", "LimeGreen": "#32CD32", "LimeMintGreen": "#36F57F", "LotusGreen": "#004225", "MediumAquamarine": "#66CDAA", "MediumForestGreen": "#347235", "MediumSeaGreen": "#3CB371", "MediumSpringGreen": "#00FA9A", "MetallicGreen": "#7C9D8E", "MilitaryGreen": "#4E5B31", "MintGreen": "#98FF98", "MossGreen": "#8A9A5B", "NebulaGreen": "#59E817", "NeonGreen": "#16F529", "NeonYellowGreen": "#DAEE01", "OceanGreen": "#00FF80", "Olive": "#808000", "OliveDrab": "#6B8E23", "OrganicBrown": "#E3F9A6", "PaleGreen": "#98FB98", "ParrotGreen": "#12AD2B", "PastelGreen": "#77DD77", "PeaGreen": "#52D017", "PineGreen": "#387C44", "PistachioGreen": "#9DC209", "RacingGreen": "#27742C", "SageGreen": "#848B79", "SaladGreen": "#A1C935", "SeaGreen": "#2E8B57", "SeaweedGreen": "#437C17", "ShamrockGreen": "#347C17", "SlimeGreen": "#BCE954", "SpringGreen": "#00FF7F", "StoplightGoGreen": "#57E964", "Teal": "#008080", "TeaGreen": "#CCFB5D", "TurquoiseGreen": "#A0D6B4", "VenomGreen": "#728C00", "YellowGreen": "#9ACD32", "YellowGreenGrosbeak": "#E2F516", "YellowLawnGreen": "#87F717", "ZombieGreen": "#54C571" }, "Blues": { "Aqua": "#00FFFF", "Aquamarine": "#7FFFD4", "AquamarineStone": "#348781", "AquaSeafoamGreen": "#93E9BE", "AzureBlue": "#4863A0", "BabyBlue": "#95B9C7", "BalloonBlue": "#2B60DE", "BeetleGreen": "#4C787E", "Blue": "#0000FF", "BlueAngel": "#B7CEEC", "BlueberryBlue": "#0041C2", "BlueDiamond": "#4EE2EC", "BlueDress": "#157DEC", "BlueEyes": "#1569C7", "BlueGreen": "#7BCCB5", "BlueHosta": "#77BFC7", "BlueIvy": "#3090C7", "BlueJay": "#2B547E", "BlueKoi": "#659EC7", "BlueLagoon": "#8EEBEC", "BlueMossGreen": "#3C565B", "BlueOrchid": "#1F45FC", "BlueRibbon": "#306EFF", "BlueTurquoise": "#43C6DB", "BlueZircon": "#57FEFF", "BottleGreen": "#006A4E", "BrightBlue": "#0909FF", "BrightCyan": "#0AFFFF", "BrightNavyBlue": "#1974D2", "BrightTeal": "#01F9C6", "BrightTurquoise": "#16E2F5", "ButterflyBlue": "#38ACEC", "CadetBlue": "#5F9EA0", "CanaryBlue": "#2916F5", "Celeste": "#50EBEC", "CharcoalBlue": "#36454F", "ChromeGreen": "#1AA260", "CobaltBlue": "#0020C2", "ColumbiaBlue": "#87AFC7", "CoralBlue": "#AFDCEC", "CornflowerBlue": "#6495ED", "CrystalBlue": "#5CB3FF", "Cyan": "#00FFFF", "CyanBlue": "#14A3C7", "CyanOpaque": "#92C7C7", "DarkBlue": "#00008B", "DarkBlueGray": "#29465B", "DarkGreenBlue": "#1F6357", "DarkMint": "#31906E", "DarkSkyBlue": "#0059FF", "DarkSlate": "#2B3856", "DarkTeal": "#045D5D", "DarkTurquoise": "#00CED1", "DaySkyBlue": "#82CAFF", "DeepSea": "#3B9C9C", "DeepSeaGreen": "#306754", "DeepSkyBlue": "#00BFFF", "DeepTeal": "#033E3E", "DeepTurquoise": "#48CCCD", "DenimBlue": "#79BAEC", "DenimDarkBlue": "#151B8D", "DodgerBlue": "#1E90FF", "DullSeaGreen": "#4E8975", "EarthBlue": "#0000A5", "EarthGreen": "#34A56F", "ElectricBlue": "#9AFEFF", "ElfGreen": "#1B8A6B", "Emerald": "#50C878", "EstorilBlue": "#2F539B", "GlacialBlueIce": "#368BC1", "GrayishTurquoise": "#5E7D7E", "GreenishBlue": "#307D7E", "GulfBlue": "#C9DFEC", "Gunmetal": "#2C3539", "HeavenlyBlue": "#C6DEFF", "Iceberg": "#56A5EC", "IsleOfManGreen": "#22CE83", "Jade": "#00A36C", "JeansBlue": "#A0CFEC", "Jellyfish": "#46C7C7", "LapisBlue": "#15317E", "LavenderBlue": "#E3E4FA", "LightAquamarine": "#93FFE8", "LightBlue": "#ADD8E6", "LightCyan": "#E0FFFF", "LightDayBlue": "#ADDFFF", "LightPurpleBlue": "#728FCE", "LightSkyBlue": "#87CEFA", "LightSlate": "#CCFFFF", "LightSteelBlue": "#B0C4DE", "LightTeal": "#B3D9D9", "MacawBlueGreen": "#43BFC7", "MagicMint": "#AAF0D1", "MarbleBlue": "#566D7E", "MediumBlue": "#0000CD", "MediumSlateBlue": "#7B68EE", "MediumTeal": "#045F5F", "MediumTurquoise": "#48D1CC", "MidnightBlue": "#191970", "MiddayBlue": "#3BB9FF", "Mint": "#3EB489", "MistBlue": "#646D7E", "Navy": "#000080", "NeonBlue": "#1589FF", "NewMidnightBlue": "#0000A0", "NorthernLightsBlue": "#78C7C7", "OceanBlue": "#2B65EC", "PaleBlueLily": "#CFECEC", "PaleTurquoise": "#AFEEEE", "PastelBlue": "#B4CFEC", "PastelLightBlue": "#D5D6EA", "PowderBlue": "#B0E0E6", "RatGray": "#6D7B8D", "RobinEggBlue": "#BDEDFF", "RoyalBlue": "#4169E1", "SamcoBlue": "#0002FF", "SapphireBlue": "#2554C7", "SeaBlue": "#C2DFFF", "SeafoamGreen": "#3EA99F", "SeaTurtleGreen": "#438D80", "SilkBlue": "#488AC7", "SkyBlue": "#87CEEB", "SkyBlueDress": "#6698FF", "SlateBlueGray": "#737CA1", "SteelBlue": "#4682B4", "SteelGray": "#71797E", "TealBlue": "#007C80", "TealGreen": "#00827F", "TiffanyBlue": "#81D8D0", "TronBlue": "#7DFDFE", "Turquoise": "#40E0D0", "Water": "#EBF4FA", "WaterBlue": "#0E87CC", "WhiteBlue": "#DBE9FA", "WindowsBlue": "#357EC7" }, "Purples": { "Amethyst": "#9966CC", "BlueViolet": "#8A2BE2", "DarkMagenta": "#8B008B", "DarkOrchid": "#9932CC", "DarkSlateBlue": "#483D8B", "DarkViolet": "#9400D3", "Fuchsia": "#FF00FF", "Grape": "#5E5A80", "Indigo": "#4B0082", "Lavender": "#E6E6FA", "Magenta": "#FF00FF", "MediumOrchid": "#BA55D3", "MediumPurple": "#9370DB", "Orchid": "#DA70D6", "Plum": "#DDA0DD", "Purple": "#800080", "PurpleNavy": "#4E5180", "PurpleWhite": "#DFD3E3", "RebeccaPurple": "#663399", "SlateBlue": "#6A5ACD", "Thistle": "#D8BFD8", "Violet": "#EE82EE" }, "Browns": { "AntiqueBronze": "#665D1E", "ArmyBrown": "#827B60", "BakersBrown": "#5C3317", "BeeYellow": "#E9AB17", "Bisque": "#FFE4C4", "BlanchedAlmond": "#FFEBCD", "Bronze": "#CD7F32", "Brown": "#A52A2A", "BrownBear": "#835C3B", "BulletShell": "#AF9B60", "BurlyWood": "#DEB887", "Caramel": "#C68E17", "ChampagneGold": "#D29F51", "Chocolate": "#D2691E", "Cinnamon": "#C58917", "Coffee": "#6F4E37", "CookieBrown": "#C7A317", "Cooper": "#B87333", "Cornsilk": "#FFF8DC", "DarkAlmond": "#AB784E", "DarkBeige": "#9F8C76", "DarkBronze": "#804A00", "DarkBrown": "#654321", "DarkCoffee": "#3B2F2F", "DarkGoldenrod": "#B8860B", "DarkGrayishOlive": "#4A412A", "DarkHazelBrown": "#473810", "DarkMoccasin": "#827839", "DarkSienna": "#8A4117", "DarkYellow": "#8B8000", "Goldenrod": "#DAA520", "GrayBrown": "#3D3635", "Hazel": "#8E7618", "KhakiBrown": "#906E3E", "KhakiGreen": "#8A865D", "Marigold": "#EBA832", "Maroon": "#800000", "MetallicGold": "#D4AF37", "MilkChocolate": "#513B1C", "MillenniumJade": "#93917C", "Mocha": "#493D26", "Mustard": "#E1AD01", "NavajoWhite": "#FFDEAD", "OakBrown": "#806517", "OldBurgundy": "#43302E", "OrangeGold": "#D4A017", "Peru": "#CD853F", "PullmanBrown": "#644117", "PumpkinPie": "#CA762B", "RedBrown": "#622F22", "RedDirt": "#7F5217", "RosyBrown": "#BC8F8F", "SaddleBrown": "#8B4513", "SandyBrown": "#F4A460", "SchoolBusYellow": "#E8A317", "Sepia": "#7F462C", "SepiaBrown": "#704214", "Sienna": "#A0522D", "Sandstone": "#786D5F", "Tan": "#D2B48C", "Taupe": "#483C32", "TigerOrange": "#C88141", "WesternCharcoal": "#49413F", "Wheat": "#F5DEB3", "Wood": "#966F33" }, "Whites": { "AliceBlue": "#F0F8FF", "AntiqueWhite": "#FAEBD7", "Azure": "#F0FFFF", "Beige": "#F5F5DC", "FloralWhite": "#FFFAF0", "GhostWhite": "#F8F8FF", "HoneyDew": "#F0FFF0", "Ivory": "#FFFFF0", "LavenderBlush": "#FFF0F5", "Linen": "#FAF0E6", "MintCream": "#F5FFFA", "OldLace": "#FDF5E6", "PearlWhite": "#F8F6F0", "Platinum": "#E5E4E2", "RedWhite": "#F3E8EA", "SeaShell": "#FFF5EE", "Snow": "#FFFAFA", "White": "#FFFFFF", "WhiteSmoke": "#F5F5F5" }, "Grays": { "AlienGray": "#736F6E", "AshGray": "#666362", "BattleshipGray": "#848482", "Black": "#000000", "BlackCat": "#413839", "BlackCow": "#4C4646", "CarbonGray": "#625D5D", "Charcoal": "#34282C", "ChromeAluminum": "#A8A9AD", "CloudyGray": "#6D6968", "ColdMetal": "#9B9A96", "DarkGainsboro": "#8C8C8C", "DarkGray": "#A9A9A9", "DarkSlateGray": "#2F4F4F", "DimGray": "#696969", "Gainsboro": "#DCDCDC", "GearSteelGray": "#C0C6C7", "Granite": "#837E7C", "Gray": "#808080", "GrayCloud": "#B6B6B4", "GrayDolphin": "#5C5858", "GrayGoose": "#D1D0CE", "GrayWolf": "#504A4B", "GunmetalGray": "#8D918D", "Iridium": "#3D3C3A", "IronGray": "#52595D", "LightBlack": "#454545", "LightGray": "#D3D3D3", "LightSlateGray": "#778899", "LightSteelGray": "#E0E5E5", "Metal": "#B6B6B6", "NardoGray": "#686A6C", "Night": "#0C090A", "PaleSilver": "#C9C0BB", "PlatinumGray": "#797979", "PlatinumSilver": "#CECECE", "SheetMetal": "#888B90", "Silver": "#C0C0C0", "SilverWhite": "#DADBDD", "SlateGray": "#708090", "SmokeyGray": "#726E6D", "SonicSilver": "#757575", "StainlessSteelGray": "#99A3A3", "Steampunk": "#C9C1C1", "VampireGray": "#565051", "WhiteGray": "#EEEEEE" } };
            const languages = { "css": "CSS", "javascript": "JavaScript", "python": "Python", "java": "Java", "csharp": "C#", "php": "PHP", "ruby": "Ruby", "swift": "Swift", "kotlin": "Kotlin", "c++": "C++", "go": "Go", "r": "R", "matlab": "MATLAB", "typescript": "TypeScript", "shell": "Shell", "objective-c": "Objective-C", "html": "HTML", "json": "JSON", "sql": "SQL", "rust": "Rust", "dart": "Dart", "sass": "Sass", "c": "C", "powershell": "PowerShell" };
            let currentColor = "#FFFFFF";
            // --- DOM Elements ---
            const colorCategorySelect = document.getElementById("colorCategory");
            const colorNameSelect = document.getElementById("colorName");
            const languageSelect = document.getElementById("languageSelect");
            const customColorInput = document.getElementById("customColorInput");
            const eyedropperBtn = document.getElementById("eyedropperBtn");
            const colorDisplay = document.getElementById("colorDisplay");
            const colorOutput = document.getElementById("colorOutput");
            const colorSearchForm = document.getElementById('colorSearchForm');
            const colorInput = document.getElementById('colorInput');
            const colorSearchResult = document.getElementById('colorSearchResult');
            const copyBtn = document.getElementById('copyBtn');
            const getCurrentColorBtn = document.getElementById('getCurrentColorBtn');
            const pngWidth = document.getElementById('pngWidth');
            const pngHeight = document.getElementById('pngHeight');
            const pngFilename = document.getElementById('pngFilename');
            const savePngBtn = document.getElementById('savePngBtn');
            const pngPreview = document.getElementById('pngPreview');
            // --- Helper Functions ---
            const hexToRgb = (hex) => {
                hex = hex.replace('#', '');
                if (hex.length === 3) hex = hex.split('').map(c => c + c).join('');
                if (hex.length !== 6) return null;
                const bigint = parseInt(hex, 16);
                return isNaN(bigint) ? null : { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
            };
            const rgbToHex = (r, g, b) => '#' + [r, g, b].map(c => Math.round(c).toString(16).padStart(2, '0')).join('').toUpperCase();
            const parseColorInput = (input) => {
                input = input.trim();
                if (/^#?([0-9a-fA-F]{3}){1,2}$/.test(input)) {
                    let hex = input.startsWith('#') ? input : '#' + input;
                    return hex.toUpperCase();
                }
                const rgbMatch = input.match(/^(?:rgba?\(?)?\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)?$/);
                if (rgbMatch) {
                    const [r, g, b] = rgbMatch.slice(1).map(Number);
                    if ([r, g, b].every(c => c >= 0 && c <= 255)) return rgbToHex(r, g, b);
                }
                return null;
            };
            const findClosestColor = (targetHex) => {
                const targetRgb = hexToRgb(targetHex);
                if (!targetRgb) return null;
                let closestMatch = null;
                let minDistance = Infinity;
                for (const category in colors) {
                    for (const name in colors[category]) {
                        const colorRgb = hexToRgb(colors[category][name]);
                        if (!colorRgb) continue;
                        const distance = Math.sqrt(Math.pow(targetRgb.r - colorRgb.r, 2) + Math.pow(targetRgb.g - colorRgb.g, 2) + Math.pow(targetRgb.b - colorRgb.b, 2));
                        if (distance < minDistance) {
                            minDistance = distance;
                            closestMatch = { name, hex: colors[category][name].toUpperCase(), category };
                        }
                    }
                }
                return closestMatch;
            };
            // --- Core Logic ---
            const generateColorCode = () => {
                const lang = languageSelect.value;
                const rgb = hexToRgb(currentColor);
                if (!rgb) { colorOutput.value = "Invalid color selected."; return; }
                const rgbString = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
                const formats = {
                    css: `color: ${currentColor};\n/* or */\ncolor: ${rgbString};`,
                    html: `<div style="color:${currentColor};">Example Text</div>`,
                    javascript: `const colorHex = '${currentColor}';\nconst colorRGB = { r: ${rgb.r}, g: ${rgb.g}, b: ${rgb.b} };`,
                    python: `color_hex = '${currentColor}'\ncolor_rgb = (${rgb.r}, ${rgb.g}, ${rgb.b})`,
                    php: `$colorHex = '${currentColor}';\n$colorRGB = ['r' => ${rgb.r}, 'g' => ${rgb.g}, 'b' => ${rgb.b}];`,
                    java: `String colorHex = "${currentColor}";\n// java.awt.Color color = java.awt.Color.decode("${currentColor}");`,
                    csharp: `string colorHex = "${currentColor}";\n// System.Drawing.Color color = System.Drawing.ColorTranslator.FromHtml("${currentColor}");`,
                    ruby: `color_hex = '${currentColor}'\ncolor_rgb = { r: ${rgb.r}, g: ${rgb.g}, b: ${rgb.b} }`,
                    swift: `let colorHex = "${currentColor}" // Needs UIColor extension for direct use`,
                    kotlin: `val colorHex = "${currentColor}" // Needs Color.parseColor(colorHex)`,
                    "c++": `std::string colorHex = "${currentColor}";\nstruct ColorRGB { int r, g, b; } color = {${rgb.r}, ${rgb.g}, ${rgb.b}};`,
                    c: `const char* color_hex = "${currentColor}";\nunsigned char color_rgb[] = {${rgb.r}, ${rgb.g}, ${rgb.b}};`,
                    go: `colorHex := "${currentColor}"`,
                    rust: `let color_hex = "${currentColor}";\nlet color_rgb: (u8, u8, u8) = (${rgb.r}, ${rgb.g}, ${rgb.b});`,
                    dart: `const String colorHex = "${currentColor}";\n// const Color myColor = Color(0xFF${currentColor.substring(1)});`,
                    r: `color_hex <- "${currentColor}"`,
                    matlab: `color_rgb_255 = [${rgb.r}, ${rgb.g}, ${rgb.b}];\ncolor_rgb_1 = color_rgb_255 / 255;`,
                    typescript: `const colorHex: string = '${currentColor}';\nconst colorRGB = { r: ${rgb.r}, g: ${rgb.g}, b: ${rgb.b} };`,
                    shell: `COLOR_HEX='${currentColor}'\nCOLOR_RGB="(${rgb.r},${rgb.g},${rgb.b})"`,
                    powershell: `$colorHex = "${currentColor}"\n$colorRgb = @{ R = ${rgb.r}; G = ${rgb.g}; B = ${rgb.b} }`,
                    "objective-c": `NSString *colorHex = @"${currentColor}"; // Needs helper to convert to UIColor`,
                    sql: `DECLARE @color_hex VARCHAR(7) = '${currentColor}';\n-- RGB: ${rgb.r}, ${rgb.g}, ${rgb.b}`,
                    json: `{\n  "hex": "${currentColor}",\n  "rgb": [${rgb.r}, ${rgb.g}, ${rgb.b}]\n}`,
                    sass: `$my-color: ${currentColor};`
                };
                colorOutput.value = formats[lang] || `Selected Color: ${currentColor}`;
            };
            const updateColor = (newHexColor, source = 'unknown') => {
                const validatedHex = parseColorInput(newHexColor);
                if (!validatedHex) return;
                currentColor = validatedHex;
                colorDisplay.style.backgroundColor = currentColor;
                if (source !== 'customInput') customColorInput.value = currentColor;
                if (source !== 'nameSelect' && source !== 'categorySelect') {
                    const exactMatch = findClosestColor(currentColor);
                    if (exactMatch && exactMatch.hex === currentColor) {
                        if (colorCategorySelect.value !== exactMatch.category) {
                            colorCategorySelect.value = exactMatch.category;
                            populateColorNames();
                        }
                        colorNameSelect.value = currentColor;
                    } else {
                        colorCategorySelect.value = "";
                        populateColorNames();
                    }
                }
                generateColorCode();
                if (source !== 'searchInput') colorSearchResult.innerHTML = '';
            };
            // --- UI Population ---
            const populateCategories = () => {
                const sortedCategories = Object.keys(colors).sort();
                colorCategorySelect.innerHTML = '<option value="">--Select Category--</option>' + sortedCategories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
            };
            const populateColorNames = () => {
                const category = colorCategorySelect.value;
                colorNameSelect.innerHTML = '<option value="">--Select Color--</option>';
                if (category && colors[category]) {
                    const sortedNames = Object.entries(colors[category]).sort((a, b) => a[0].localeCompare(b[0]));
                    colorNameSelect.innerHTML += sortedNames.map(([name, hex]) => `<option value="${hex}">${name}</option>`).join('');
                }
            };
            const populateLanguages = () => {
                languageSelect.innerHTML = Object.entries(languages).sort((a, b) => a[1].localeCompare(b[1])).map(([code, name]) => `<option value="${code}">${name}</option>`).join('');
                languageSelect.value = 'css';
            };
            // --- Event Listeners ---
            colorCategorySelect.addEventListener("change", () => populateColorNames());
            colorNameSelect.addEventListener("change", (e) => { if (e.target.value) updateColor(e.target.value, 'nameSelect'); });
            languageSelect.addEventListener("change", generateColorCode);
            customColorInput.addEventListener("input", (e) => updateColor(e.target.value, 'customInput'));
            eyedropperBtn.addEventListener('click', async () => {
                if (!window.EyeDropper) {
                    showToast('Eyedropper API is not supported by this browser.', 'warning');
                    return;
                }
                try {
                    const result = await new EyeDropper().open();
                    updateColor(result.sRGBHex, 'eyedropper');
                } catch (err) {
                    console.info('EyeDropper was dismissed or failed.', err);
                }
            });
            colorSearchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const parsedHex = parseColorInput(colorInput.value);
                if (!parsedHex) {
                    colorSearchResult.innerHTML = `<div class="alert alert-danger mb-0">Invalid format. Use hex (#RRGGBB) or RGB (R, G, B).</div>`;
                    return;
                }
                updateColor(parsedHex, 'searchInput');
                const closest = findClosestColor(parsedHex);
                if (!closest) {
                    colorSearchResult.innerHTML = `<div class="alert alert-warning mb-0">Color set, but no named colors found for comparison.</div>`;
                    return;
                }
                const previewStyle = `display: inline-block; width: 1.1em; height: 1.1em; border: 1px solid #666; vertical-align: -0.15em; margin: 0 0.25em; border-radius: 3px;`;
                let resultHTML = `<div class="alert alert-success d-flex align-items-center mb-0">Set: <span style="background:${parsedHex}; ${previewStyle}"></span><strong>${parsedHex}</strong>`;
                if (closest.hex !== parsedHex) {
                    resultHTML += `<span class="mx-2">|</span>Closest Match: <span style="background:${closest.hex}; ${previewStyle}"></span><strong>${closest.name}</strong> (${closest.hex})`;
                } else {
                    resultHTML += `<span class="mx-2">|</span>Exact Match: <strong>${closest.name}</strong>`;
                }
                resultHTML += `</div>`;
                colorSearchResult.innerHTML = resultHTML;
            });
            copyBtn.addEventListener('click', async () => {
                 if (!colorOutput.value) {
                     showToast('Nothing to copy.', 'info');
                     return;
                 }
                try {
                    await navigator.clipboard.writeText(colorOutput.value);
                    showToast('Code copied to clipboard.', 'success');
                } catch (err) {
                    showToast(`Copy failed: ${err.message}`, 'danger');
                }
            });
            getCurrentColorBtn.addEventListener('click', () => {
                colorInput.value = currentColor;
                showToast('Current color loaded into search field.', 'info');
            });
            
            // PNG export functionality
            const updatePngPreview = () => {
                const width = parseInt(pngWidth.value) || 200;
                const height = parseInt(pngHeight.value) || 200;
                // Clear the previous preview
                pngPreview.innerHTML = '';
                
                // Create a small preview canvas
                const previewSize = Math.min(300, width, height);
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const scaleFactor = Math.min(previewSize / width, previewSize / height);
                
                canvas.width = width * scaleFactor;
                canvas.height = height * scaleFactor;
                canvas.style.border = '1px solid #555';
                canvas.style.marginTop = '10px';
                
                // Fill with current color
                ctx.fillStyle = currentColor;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Add info text if large enough
                if (canvas.width > 80 && canvas.height > 40) {
                    const rgb = hexToRgb(currentColor);
                    ctx.fillStyle = getContrastColor(rgb.r, rgb.g, rgb.b);
                    ctx.font = `${Math.max(10, Math.min(16, canvas.width / 15))}px sans-serif`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(currentColor, canvas.width / 2, canvas.height / 2);
                }
                
                pngPreview.appendChild(canvas);
            };
            
            // Get contrasting color for text visibility
            const getContrastColor = (r, g, b) => {
                // Calculate luminance - a simplified version
                const luminance = 0.299 * r + 0.587 * g + 0.114 * b;
                return luminance > 128 ? '#000000' : '#FFFFFF';
            };
            
            // Generate and download the PNG
            const generatePng = () => {
                const width = parseInt(pngWidth.value) || 200;
                const height = parseInt(pngHeight.value) || 200;
                const filename = (pngFilename.value || 'color').replace(/[^\w-]/g, '_');
                
                // Create the full-size canvas
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = width;
                canvas.height = height;
                
                // Fill with current color
                ctx.fillStyle = currentColor;
                ctx.fillRect(0, 0, width, height);
                
                // Add color info
                const rgb = hexToRgb(currentColor);
                ctx.fillStyle = getContrastColor(rgb.r, rgb.g, rgb.b);
                const fontSize = Math.max(12, Math.min(24, width / 15));
                ctx.font = `${fontSize}px sans-serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(currentColor, width / 2, height / 2);
                
                // Create download link
                const link = document.createElement('a');
                link.download = `${filename}-${currentColor.substring(1)}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                
                showToast(`PNG saved as ${link.download}`, 'success');
            };
            
            // Event listeners for PNG export
            savePngBtn.addEventListener('click', generatePng);
            pngWidth.addEventListener('input', updatePngPreview);
            pngHeight.addEventListener('input', updatePngPreview);
            
            // Store the original updateColor function
            const originalUpdateColor = updateColor;
            
            // Redefine the updateColor function to include PNG preview
            updateColor = function(newHexColor, source = 'unknown') {
                // Call the original function first
                originalUpdateColor(newHexColor, source);
                // Then update the PNG preview
                updatePngPreview();
            };
            function showToast(message, variant = 'info') {
                const container = document.createElement('div');
                container.className = 'toast-container position-fixed bottom-0 end-0 p-3';
                const toast = document.createElement('div');
                toast.className = `toast align-items-center text-bg-${variant} border-0`;
                toast.setAttribute('role', 'alert');
                toast.innerHTML = `<div class="d-flex"><div class="toast-body">${message}</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>`;
                document.body.appendChild(container);
                container.appendChild(toast);
                const toastInstance = new bootstrap.Toast(toast, { delay: 3000 });
                toastInstance.show();
                toast.addEventListener('hidden.bs.toast', () => container.remove());
            }
            // --- Initialization ---
            ComponentLoader.loadAll().then(() => {
                populateCategories();
                populateLanguages();
                updateColor(currentColor, 'init');
                updatePngPreview(); // Initialize the PNG preview
            });
        })();
    </script>
</body>
</html>
